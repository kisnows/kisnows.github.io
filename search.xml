<?xml version="1.0" encoding="utf-8"?>
<search>
  <entry>
    <title><![CDATA[æ³°å›½æ‡’äººæ¸¸]]></title>
    <url>%2F2018%2F06%2F09%2Fthailand-travel-notes%2F</url>
    <content type="text"><![CDATA[æ³°å›½è½åœ°ç­¾æˆ‘æ˜¯é£åˆ°æ›¼è°·ç´ ä¸‡é‚£æ™®æœºåœºï¼Œä¸‹æœºåè·Ÿç€äººæµç›´èµ°ï¼Œå¤´ä¸Šæœ‰æŒ‡ç¤ºç‰Œï¼Œå¯ä»¥ä¸€è·¯èµ°åˆ°åŠç†è½åœ°ç­¾çš„åœ°æ–¹ã€‚åŠç†è½åœ°ç­¾æœ‰ä¸¤ä¸ªé€šé“ï¼Œä¸€ä¸ªæ™®é€šé€šé“ï¼Œä¸€ä¸ªå¿«é€Ÿé€šé“ã€‚å¿«é€Ÿé€šé“ 2200ğŸ–ï¼Œæ™®é€šé€šé“ 2000ğŸ–ã€‚å»ºè®®èµ°å¿«é€Ÿé€šé“ï¼Œèƒ½çœå¾ˆå¤šæ—¶é—´ã€‚ æœºåœºå¤§å·´ä»æ‰¶æ¢¯ä¸‹æ¥ï¼Œå¥½åƒæ˜¯åˆ°ä¸€æ¥¼ï¼Œç„¶åä¼šçœ‹åˆ°å¤§å·´å”®ç¥¨ç‚¹ã€‚ ç„¶åä¼šçœ‹åˆ°å¤§å·´å”®ç¥¨ç‚¹ï¼Œå°±é•¿ä¸‹å›¾è¿™ä¸ªæ ·å­ï¼Œæœ‰åˆ°èŠ­å ¤é›…å’Œåæ¬£çš„å¤§å·´ï¼Œå¤§æ¦‚æ¯å°æ—¶ä¸€ç­è½¦ã€‚ç„¶åé¢å‘å¤§å·´å”®ç¥¨ç‚¹å·¦æ‰‹è¾¹æœ‰åƒé¥­çš„åœ°æ–¹ï¼Œåœ¨è¿™ä¸ªä½ç½®ã€‚ é‡Œé¢ä¸œè¥¿å¾ˆä¾¿å®œï¼Œè¿›å»è¦æ¢ç¥¨ï¼Œä¸€ä¸ªäººçš„è¯100ğŸ–å°±å¤Ÿäº†ã€‚èƒ½åƒå¾ˆå¤šä¸œè¥¿ï¼Œæˆ‘å½“æ—¶åƒäº†ä¸€ç¢—é¢ï¼Œä¸€ç½å¯ä¹ï¼Œè¿˜å‰©äº† 15ğŸ–ã€‚ æ›¼è°· -&gt; èŠ­å ¤é›…åœ¨å¤§å·´å”®ç¥¨ç‚¹ä¹°å¥½ç¥¨ï¼Œå”®ç¥¨å‘˜è¯´ 1.30 å‘è½¦ï¼Œæˆ‘é—®äº†ä¸‹åœ¨å“ªé‡Œï¼Œä»–æŒ‡äº†ä¸ªåœ°æ–¹ï¼Œè¯´åˆ° 1.30 ä¼šæœ‰äººé¢†ä½ ä»¬è¿‡å»ã€‚ä»æ›¼è°·åˆ°èŠ­å ¤é›…å¤§æ¦‚ä¸¤ä¸ªå°æ—¶çš„æ ·ï¼Œåœ¨èŠ­å ¤é›…æœ‰å¥½å‡ ä¸ªä¸‹è½¦ç‚¹ï¼Œåˆ†åˆ«æ˜¯ North Pattaya Roadï¼ˆèŠ­æé›…åŒ—è·¯ï¼‰å’Œ Central Pattaya Roadï¼ˆèŠ­æé›…ä¸­è·¯ï¼‰ã€South Pattaya Roadï¼ˆèŠ­æé›…å—è·¯ï¼‰ã€ Thepprasit Road å’Œ Thappraya Roadã€‚ä¸‹è½¦ç‚¹å…¶å®æŒºå¤šçš„ï¼Œç‰¹åˆ«æ˜¯ Pattaya Road çš„åŒ—ã€ä¸­ã€å—è·¯ï¼ˆéƒ½é è¿‘æµ·è¾¹çš„Beach Roadï¼‰ï¼Œå°±æ˜¯èŠ­æé›…çš„ä¸­å¿ƒåœ°å¸¦äº†ï¼Œåœ¨è¿™ä¸‰ä¸ªåœ°ç‚¹ä¸‹è½¦éƒ½å¾ˆæ–¹ä¾¿ã€‚æˆ‘å½“æ—¶åœ¨ Central Pattaya Roadï¼ˆèŠ­æé›…ä¸­è·¯ï¼‰ä¸‹è½¦ï¼Œç„¶åå°±æœ‰ä¸€ä¸ªæ‘©çš„å¸ˆå‚…ä¸Šæ¥æ‹‰æ´»ã€‚æˆ‘é—®äº†ä¸‹ä»·æ ¼ï¼Œä»–è¯´ one two zero ï¼Œæˆ‘ä¸€å¼€å§‹åŠå¤©æ²¡ç†è§£ä»–ä»¬è¯´ä»€ä¹ˆï¼Œä»¥ä¸ºæ˜¯ â€˜three hundredâ€™ 300 ğŸ–ã€‚å°±æ‹¿å‡ºè®¡ç®—å™¨æŒ‰æ•°å­—ç»™ä»–ä»¬çœ‹ï¼Œä»–è¯´ä¸æ˜¯ï¼ŒæŒ‰äº†ä¸ª 120 ä¸Šå»ï¼Œæˆ‘ä¸€æƒ³ä¹Ÿè¡Œï¼Œå°±ä¸Šè½¦äº†ã€‚å¥³ç”Ÿçš„è¯ä¸æ€ä¹ˆå»ºè®®åº§è¿™ä¸ªï¼Œæ€»æ„Ÿè§‰ä¸æ˜¯å¾ˆå®‰å…¨çš„æ ·å­ã€‚ èŠ­å ¤é›…æ‘©çš„ç›´æ¥æŠŠæˆ‘è½½åˆ°äº†é…’åº—ï¼Œç»™é’±çš„æ—¶å€™å‘ç”Ÿäº†ä¸€ä»¶å¾ˆæœ‰æ„æ€çš„äº‹æƒ…ã€‚æˆ‘æ‹¿å‡ºä¸€å¼  50 å’Œ 20 ç»™ä»–ï¼Œæˆ‘ä»¥ä¸ºé‚£å¼  50 æ˜¯ 100. ç„¶åå¸ˆå‚…ä¸€ç›´åœ¨è¯´ä»€ä¹ˆæˆ‘å¬ä¸æ‡‚çš„è¯­è¨€ï¼Œæˆ‘è¿˜ä»¥ä¸ºè¦å‘æˆ‘ã€‚ä¸¤äººçæ‰¯äº†åŠå¤©ï¼Œæˆ‘æ‰å‘ç°æˆ‘ç»™çš„é’±ä¸å¯¹ï¼Œèµ¶ç´§è¡¥ä¸Šäº† 100 ã€‚è¿›é…’åº—åŠç†å…¥ä½ï¼Œæ”¾ä¸‹ä¸œè¥¿å°±å…ˆç¡äº†ä¸€è§‰ï¼Œå“ˆå“ˆã€‚ ä¸€è§‰ç¡åˆ°äº†äº”ç‚¹å¤šï¼Œç»™é¥¿é†’äº†ã€‚å°±å‡ºå»è§…é£Ÿï¼Œé™„è¿‘éšä¾¿æ‰¾äº†æ‰¾ï¼Œåƒçš„ä¸œè¥¿è¿˜æ˜¯å¾ˆå¤šçš„ï¼Œä¹Ÿä¸æ˜¯å¾ˆè´µï¼Œä¸‹é¢è¿™ä¸ª 200 ğŸ–ã€‚ åƒå®Œå‡ºå»åˆ°æµ·è¾¹èµ°äº†èµ°ï¼Œå°±å›å»äº†ã€‚ äº¤é€šèŠ­å ¤é›…æµ·è¾¹çš„äº¤é€šè¿˜æ˜¯å¾ˆæ–¹ä¾¿çš„ï¼Œç›´æ¥åº§åŒæ¡è½¦å°±å¥½äº†ï¼Œä½†æ˜¯éƒ½æ˜¯å•è¡Œã€‚å—åŒ—èµ°å‘ï¼Œ 1st rd å—è¡Œï¼Œ2nd rdåŒ—è¡Œï¼ŒåŒæ¡æ‹›æ‰‹å³åœï¼Œåªè¦ä¸é—®å¸æœºç›®çš„åœ°å’ŒåŠ é’±ï¼Œé»˜è®¤ 10ğŸ–ï¼Œçœ‹å¥½ä¸‹è½¦ç‚¹æŒ‰é“ƒä¸‹è½¦ï¼Œå…ˆä¸‹è½¦å†ä»˜è´¹ã€‚å¦‚æœé—®äº†å¸æœºèƒ½ä¸èƒ½å»å“ªé‡Œï¼Œé»˜è®¤ä¸ºåŒ…è½¦ä»·ï¼Œä½†æ˜¯è¦è®°å¾—ç ä»·ã€‚ è¶£äº‹åœ¨èŠ­å ¤é›…çš„ç¬¬äºŒå¤©å°±æµ·è¾¹çé€›äº†ä¸€å¤©ï¼Œä¸­åˆåœ¨å¤§ä¼—ç‚¹è¯„ä¸Šå®šäº†ä¸ªè¥¿é¤ï¼Œå°±ä»é…’åº—å‡ºå‘å»é¤å…äº†ã€‚ é‡Œé¢çš„æœåŠ¡å‘˜éƒ½å¾ˆç¤¼è²Œï¼Œæˆ‘ä¸Šå»è¯´æ“ç€è¹©è„šçš„è‹±è¯­ I have a preorder ,ç»“æœä»–ä»¬æ²¡å¬æ‡‚ã€‚æ­£å½“æˆ‘æ‰“ç®—æ‰“å¼€ç¿»è¯‘çœ‹çœ‹æˆ‘æå‰é¢„å®šäº†è¿™å¥è¯æ€ä¹ˆè¯´æ—¶ï¼Œä¸€ä½æœåŠ¡å‘˜æ‹¿äº†ä¸€æ‰“è®¢å•è¿‡æ¥é—®æˆ‘å«ä»€ä¹ˆåå­—ï¼Œæˆ‘è¯´ ab ä»–ä»¬ç–‘æƒ‘äº†ä¸€ä¸‹ æŒ‡ç€ ba é—®æ˜¯ä¸æ˜¯æˆ‘ï¼Œå“ˆå“ˆï¼Œæˆ‘éƒ½å¿˜äº†è¦å…ˆååå§“ã€‚ç„¶åå°±å‘ç”Ÿäº†å¾ˆæœ‰æ„æ€çš„äº‹æƒ…ï¼Œä»–ä»¬ç«¯ä¸Šæ¥äº†ä¸€ä¸ªå¾ˆå¤§çš„æ±‰å ¡ï¼Œå°±åƒå›¾é‡Œè¿™æ ·ï¼šæˆ‘ä¸€çœ‹è¿™ä¹ˆå¤§ï¼ŒçŠ¹è±«äº†åŠå¤©ä¸çŸ¥é“æ€ä¹ˆåƒï¼Œç„¶åå°±åšå‡ºäº†å¾ˆå¯ç¬‘çš„äº‹æƒ…ã€‚å«æ¥æœåŠ¡å‘˜ï¼Œé—®äº†ä¸€å¥ï¼šâ€How to eat it?â€å¥³æœåŠ¡å‘˜å§å§ç›´æ¥ç¬‘äº†ï¼Œç„¶åè·Ÿæˆ‘è¯´ç”¨åˆ€å‰åˆ‡ï¼Œæˆ‘å‚»é€¼çš„å°±å»æ‹¿åˆ€å‰åˆ‡äº†ã€‚åˆšåˆ‡äº†ä¸€å—ï¼Œç»ç†è¿‡æ¥è¯´ä½ æƒ³æ€ä¹ˆåƒå°±æ€ä¹ˆä¹ˆåƒï¼Œitâ€™s up to you. ç„¶åæˆ‘å°±ç›´æ¥ä¸Šæ‰‹äº†ã€‚æˆ‘éƒ½æœäº†æˆ‘ï¼Œæ€ä¹ˆèƒ½é—®å‡ºæ€ä¹ˆåƒè¿™ç§é—®é¢˜ï¼Œå“ˆå“ˆã€‚ ä¸­é€”è¿›æ¥äº†å‡ ä¸ªè·Ÿå›¢æ¸¸çš„å›½äººï¼Œæˆ‘è¿˜å¸®ä»–ä»¬å½“äº†ä¸‹ç¿»è¯‘ï¼Œå°±æˆ‘è¿™è¹©è„šçš„è‹±è¯­ï¼Œå“ˆå“ˆã€‚ä¸è¿‡ä¸å¾—ä¸è¯´ï¼Œå›½äººç¡®å®ä¸€è¿›æ¥å¤§åµå¤§é—¹çš„ï¼Œæ„Ÿè§‰å¾ˆä¸å¥½ï¼Œå¯èƒ½æ˜¯å› ä¸ºéƒ½æ˜¯å¤§çˆ·å¤§å¦ˆï¼Œå¹³æ—¶éƒ½ä¹ æƒ¯äº†çš„åŸå› å§ã€‚ åƒå®Œé€›äº†ä¸€åœˆï¼Œå»å•†åœºä¹°äº†æ¡è…°å¸¦ï¼Œé¡ºä¾¿å¸®ä¸€ä¸ªç½‘å‹åˆ°äº†å¥¹è¦çš„é¢è†œã€‚å°±å›é…’åº—ä¼‘æ•´äº†ã€‚ äººä¸‹åˆå»æµ·è¾¹æ•£æ­¥ï¼Œè®¤è¯†äº†ä¸¤ä¸ªå›½å†…æ¥çš„å¦¹å­ï¼ŒèŠçš„å¾ˆå¼€å¿ƒã€‚ æ™šä¸Šæ‰“ç®—å»åƒé¥­ï¼Œè¢«å¦¹å­æ‹‰ç€å»æ­¥è¡Œè¡—ï¼ˆçº¢ç¯åŒºï¼‰é€›äº†ä¸€åœˆï¼Œçº¢ç¯åŒºé‡Œä¸€çœ‹ä½ æ˜¯ä¸­å›½äººï¼Œå°±ä¼šæœ‰å¾ˆå¤šäººæ‹¿ç€ä¸å ªå…¥ç›®çš„ç‰Œå­ä¸Šæ¥é—®ä½ ï¼Œè¯´çœ‹ä¸çœ‹ä»€ä¹ˆè¡¨æ¼”ä¹‹ç±»çš„ã€‚ä¸è¦å»ç†å°±å¥½äº†ï¼Œå°±ç®—ä½ çœŸæŠ±ç€çŒå¥‡çš„å¿ƒç†å»çœ‹ï¼Œä¹Ÿä¸å»ºè®®è·Ÿç€è¿™äº›æ¨é”€çš„äººå»ï¼Œå¾ˆå®¹æ˜“è¢«å®°ã€‚ ä¸è¿‡åƒé¥­çš„æ—¶å€™é‡åˆ°äº†ä¸€ç‚¹ä¸æ„‰å¿«ï¼Œæˆ‘ä»¬å¤§è€è¿œä»èŠ­å ¤é›…å¸‚åŒºèµ°äº†å¥½ä¹…ç„¶åæ‰“è½¦æ‰åˆ°é‚£ä¸ªåº—æ‰“ç®—åƒæµ·é²œã€‚ç»“æœæˆ‘ä»¬ä¸€è¿›å»äººå®¶è¯´äº†ä»€ä¹ˆä¸€å †ä¹±ä¸ƒå…«ç³Ÿçš„è‹±è¯­ï¼Œæˆ‘ä»¬ä¸‰ä¸ªäººæ²¡ä¸€ä¸ªäººå¬æ‡‚ï¼Œç„¶åè¯´æˆ‘ä»¬æ‰¾é”™åœ°æ–¹äº†ï¼Œå¸¦æˆ‘ä»¬å‡ºå»ç»™æˆ‘æŒ‡è·¯è¯´åœ¨é‚£è¾¹ã€‚ç„¶è€Œåœ¨å¥¹æ‰‹æŒ‡çš„æ–¹å‘æ ¹æœ¬ä»€ä¹ˆéƒ½æ²¡æœ‰ï¼Œçœ‹èµ·æ¥åº”è¯¥æ˜¯è¢«é¤å…è«åå…¶å¦™çš„æ‹’ç»æ¥å¾…äº†ã€‚å°±ä¸‹å›¾è¿™ä¸ªé¤å…ï¼š Maggic Restaurant, æœ€ååªèƒ½æ‰“è½¦å›å¸‚åŒºåƒé¥­ã€‚åƒå®Œé¥­å°±è·Ÿå¦¹å­åˆ†é“æ‰¬é•³äº†ã€‚ å¯å…°å²›ç¬¬ä¸‰å¤©æŠ¥äº†ä¸ªå¯å…°å²›ä¸€æ—¥æ¸¸ï¼Œç©çš„å¾ˆå—¨ï¼Œå…¨ç¨‹æœ‰äººæ¥é€ï¼Œä¸ç”¨æ“ä»€ä¹ˆå¿ƒï¼Œå“ˆå“ˆã€‚ä»€ä¹ˆæ»‘ç¿”ä¼ã€æµ·åº•æ¼«æ­¥ã€æµ®æ½œä¹±ä¸ƒå…«ç³Ÿçš„åŠ èµ·æ¥æ‰ä¸åˆ°å››ç™¾å—ï¼Œç®€ç›´å¤ªä¾¿å®œäº†ã€‚ç©çš„ä¹Ÿå¾ˆèˆ’æœï¼Œå°±æ˜¯å¸ˆå‚…æ¸¸è‰‡å¼€çš„å¾ˆå¿«ï¼Œæ™•èˆ¹çš„äººè¦æå‰å¤‡å¥½æ™•èˆ¹è¯ï¼Œçœ‹åˆ°èˆ¹ä¸Šæœ‰äººæ™•çš„ä¸è¡Œã€‚è¿™ä¸­é—´åˆè®¤è¯†äº†ä¸€ä¸ªå¦¹å­ï¼Œå¤ªå¼ºäº†ï¼Œä¸€ä¸ªäººå‡ºæ¥ç©ï¼Œè¿˜ç©äº†è·³ä¼ã€‚ä½©æœçš„ä¸è¡Œï¼Œæˆ‘æœ¬æ¥ä¹Ÿæƒ³ç©çš„ï¼Œå¯æœ€åè¿˜æ˜¯æ€‚äº†ï¼Œä¸€æ˜¯çœŸçš„è´µ 3000 å¤§æ´‹ï¼Œè€Œæ˜¯ä¸‰åƒç±³è·³ä¸‹æ¥è¿˜æ˜¯å¾ˆå¯æ€•çš„ï¼Œæˆ‘æ‰¿è®¤æˆ‘ä¸€ä¸ªäººæœ‰ç‚¹æ€‚ï¼Œå“ˆå“ˆã€‚ èŠ­å ¤é›… -&gt; æ›¼è°·ç¬¬å››å¤©æ—©ä¸Šå°±ä»èŠ­å ¤é›…å¾€æ›¼è°·èµ°ï¼Œè¿˜æ˜¯åšå¤§å·´ã€‚é…’åº—å‰å°å¸®å¿™æ‰¾äº†ä¸ªæ‘©çš„å¸ˆå‚…æŠŠæˆ‘æ‹‰è¿‡å»ï¼Œ80ğŸ–ã€‚è¿›ç«™ä¹°ç¥¨åï¼Œå°±åœ¨å€™è½¦å®¤ç­‰å€™ï¼Œè½¦ç¥¨ä¸Šä¼šå†™å‘è½¦æ—¶é—´å’Œåº§ä½å·ï¼ŒæŒ‰ç…§è¦æ±‚èµ°å°±è¡Œäº†ã€‚ åˆæ˜¯ä¸¤ä¸ªå°æ—¶ï¼Œåˆ°äº†è½¦ç«™ä¸‹æ¥ï¼Œæˆ‘å°±å»æ‰¾ bts ï¼Œè·Ÿç€åœ°å›¾èµ°å°±è¡Œï¼Œä¸‹å›¾è¿™ä¸ªå°±æ˜¯ ekkamai ç«™å…¥å£ã€‚è¿›å»åä¹°ç¥¨ç­‰è½¦ï¼Œä¹°ç¥¨çš„è¯å¯ä»¥é€‰æ‹©è‡ªåŠ¨å”®å–æœºï¼Œä½†æ˜¯åªæ”¶ç¡¬å¸ã€‚ä¹Ÿå¯ä»¥é€‰æ‹©äººå·¥çª—å£ï¼Œç»™çº¸å¸ç„¶åè¯´è¦å»é‚£ä¸ªç«™ç‚¹å°±å¥½äº†ã€‚å€™è½¦çš„æ—¶å€™é—®äº†ä¸ªæ³°å¦¹ï¼Œæˆ‘è¦å»çš„ç«™æ˜¯ä»é‚£è¾¹åšï¼Œå› ä¸ºæ€•åšé”™ã€‚æ³°å¦¹è·Ÿæˆ‘è¯´å°±è¿™é‡Œï¼Œç„¶è€Œä¸Šè½¦åè¿˜æ˜¯æ€•åšé”™ç«™ï¼Œå°±ç›¯ç€è¿™ä¸ªæŒ‡ç¤ºå’Œåˆ°ç«™è¯­éŸ³æé†’çœ‹æˆ‘åšçš„æ–¹å‘å¯¹ä¸å¯¹ï¼Œè¿˜å¥½æ˜¯å¯¹çš„ï¼Œæœç„¶æ¼‚äº®çš„å°å§å§ä¸ä¼šéª—äººã€‚å› ä¸ºä½åœ¨è€åŸåŒºï¼Œbts ä¸ç›´è¾¾ï¼Œåˆ°ç«™åæ‰“äº†ä¸ªçš„å£«æ‰åˆ°é…’åº—ï¼Œåº§çš„å£«å»é…’åº—çš„è·¯ä¸Šä¸­é—´è¿˜å‘ç”Ÿäº†ä¸€ç‚¹å°æ’æ›²ã€‚æé†’ä¸€ä¸‹ï¼Œæ‰“çš„çš„è¯è¦æ³¨æ„ï¼Œä¸€å®šè®©ä»–æ‰“è¡¨ â€˜by meterâ€™ ï¼Œå¦‚æœä»–ä¸æ‰“è¡¨ï¼Œé‚£ä¹ˆè¦æå‰è®²å¥½ä»·ï¼Œå¦åˆ™å®¹æ˜“è¢«å®°ã€‚æˆ–è€…é€‰æ‹©ç”¨ Grab è¿™ä¸ªæ‰“è½¦è½¯ä»¶ï¼Œåæ¥å‡ å¤©æˆ‘å°±æ˜¯ç”¨è¿™ä¸ªçš„ï¼Œå¾ˆæ–¹ä¾¿ï¼Œä¸è¿‡ä¸€å®šè¦çœ‹å‡†å®šä½ï¼Œæ¯•ç«Ÿä½ ä»¬è¯­è¨€ä¸é€šï¼Œå¸æœºå°±æ˜¯æ‰“ç”µè¯æ‰¾ä½ ä½ ä¹Ÿä¸çŸ¥é“å¯¹æ–¹åœ¨è¯´ä»€ä¹ˆã€‚ æ›¼è°·åˆ°é…’åº—æ”¶æ‹¾äº†ä¸€ä¸‹ï¼Œå°±å»è·Ÿåœ¨èŠ­å ¤é›…æ–°è®¤è¯†çš„ä¸€ä¸ªä¹Ÿæ¥äº†æ›¼è°·çš„æœ‹å‹æ±‡åˆã€‚åœ¨æš¹ç½—å¹¿åœºåƒäº†ä¸ªé¥­ï¼Œçé€›äº†ä¸€ä¼šã€‚å•†åœºé‡Œé¢ç«Ÿæ˜¯è±ªè½¦ï¼Œç„¶è€Œå¯èƒ½è¿™è¾ˆå­éƒ½ä¹°ä¸èµ·äº†ï¼Œæ‚²ä¼¤å•Šã€‚ æ™šä¸Šå’Œä¹‹å‰çº¦å¥½çš„ä¸€ä¸ªå¦¹å­å»è€ƒå±±è·¯é€›äº†ä¸€åœˆï¼ŒçœŸçš„æ˜¯çº¯é€›äº†ä¸€åœˆï¼Œéƒ½æ²¡æœ‰åä¸‹æ¥å–ç‚¹ä¸œè¥¿æ„Ÿå—ä¸€ä¸‹æ°”æ°›ã€‚ æ°´ä¸Šå¸‚åœºç¬¬äºŒå¤©æŠ¥äº†ä¸€ä¸ªæ°´ä¸Šå¸‚åœºä¸€æ—¥æ¸¸ï¼Œå…¨ç¨‹æœ‰äººæ¥é€ï¼Œæ‡’æ‡’æ•£æ•£çš„é€›äº†ä¸€åœˆï¼ŒæŒºé€‚åˆæˆ‘ï¼Œä¸ç”¨èµ¶æ—¶é—´ã€‚é‡Œé¢å¯ä»¥ä¹°äº›å°ç‰©ä»¶ï¼ŒæŒºå¥½çš„ã€‚ è™½ç„¶è¡Œç¨‹æ‡’æ•£ï¼Œä½†æ—¶é—´è¿˜æ˜¯æŒºé•¿çš„ï¼Œæ™šä¸Šçœ‹å®Œè¤ç«è™«å·²ç»å…«ç‚¹å¤šäº†ï¼Œå›é…’åº—ä¼‘æ•´äº†ä¸€ä¸‹ï¼Œç„¶ååœ¨é™„è¿‘æŒ‰äº†ä¸‹è„šå°±å›é…’åº—ç¡è§‰äº†ã€‚ å¸‚åŒºç¬¬ä¸‰å¤©åœ¨æ³°å›½å¸‚åŒºé€›äº†ä¸€åœˆï¼Œæœ‰ä¸ªåœ°æ–¹å¥½å¤šæ—¥æœ¬äººï¼Œåº—é‡Œé¢çš„ç‚¹å•ä¹Ÿéƒ½æ˜¯æ—¥æ–‡åŠ æ³°æ–‡ï¼Œå¯èƒ½é™„è¿‘å¾ˆå¤šæ—¥æœ¬äººå®šå±…åœ¨è¿™é‡Œå§ã€‚ æ™šä¸Šä» phone é€›å®Œï¼Œæœ¬æ¥æ‰“ç®—åº§ bts ç„¶åå†æ‰“è½¦å›å»çš„ï¼Œè·¯ä¸Šå´ç¢°åˆ°äº†ä¸€æ’æ‘©çš„å¸ˆå‚…ï¼Œå°±ä¸Šå»é—®äº†ä¸‹å»è€ƒå±±è·¯å¤šå°‘é’±ã€‚ä¸€ä¸ªå¸ˆå‚…è¯´200ï¼Œæˆ‘è¯´å¤ªè´µï¼Œ150è¡Œä¸è¡Œï¼Œä»–è¯´ä¸è¡Œï¼Œè‡³å°‘170ï¼Œæˆ‘ä¹Ÿæ‡’å¾—åä»·äº†ï¼Œå°±æ‰“ç®—è·Ÿä»–èµ°äº†ã€‚ç»“æœæœ‰æ„æ€çš„æ˜¯ï¼Œä¸æ˜¯è·Ÿæˆ‘è®²ä»·å¸ˆå‚…è½½æˆ‘ï¼Œè€Œæ˜¯å¦ä¸€ä¸ªäººè½½æˆ‘ï¼Œæˆ‘è¿˜çº³é—·ç€å‘¢ï¼Œç»“æœåœ¨æˆ‘çš„å¸ˆå‚…è¯´æˆ‘ä»¬ä¸¤ä¸ªä¸€èµ·é€æˆ‘è¿‡å»ï¼Œæˆ‘ä¸€è„¸æ‡µé€¼ï¼Œæˆ‘è¿™ä¹ˆç‰›é€¼å—ã€‚ç„¶åå¸¦ä¸Šå¤´ç›”å°±ä¸Šäº†è½¦ã€‚é‚£ä¸ªè·Ÿæˆ‘è®²ä»·çš„å¸ˆå‚…å°±å…ˆèµ°äº†ï¼Œåœ¨æˆ‘çš„å¸ˆå‚…è·Ÿåœ¨åé¢ã€‚åæ‘©çš„æ„Ÿè§‰çœŸçš„æ˜¯å¾ˆå±é™©ï¼Œç©¿æ¢­åœ¨å„ç§è½¦ä¸è½¦ä¹‹é—´ï¼Œå¥½å‡ æ¬¡æˆ‘éƒ½å®³æ€•è¯´è¿™ä»–å¦ˆæ’äº†æ€ä¹ˆåŠã€‚åº†å¹¸è‡ªå·±æˆ´å¤´ç›”æ˜¯ä¸€ä¸ªéå¸¸æ­£ç¡®çš„é€‰æ‹©ã€‚è·¯ä¸Šè¿˜çœ‹åˆ°äº†ä¸€ä¸ªbmwçš„æ‘©æ‰˜å‡ºäº†è½¦ç¥¸ï¼Œè¢«ä¸€è¾†å°è½¿è½¦æ’äº†ï¼Œè¿˜å¥½äººéƒ½æ²¡äº‹ï¼Œå¸¦äº†å¤´ç›”ã€‚ åˆ°äº†ä¸€ä¸ªçº¢ç¯å‰ï¼Œè·Ÿæˆ‘è®²ä»·çš„å¸ˆå‚…å’Œåœ¨æˆ‘çš„å¸ˆå‚…åœ¨é‚£ç”¨æ³°è¯­è¯´ä»€ä¹ˆï¼Œçœ‹èµ·æ¥åƒæŒ‡è·¯çš„æ ·å­ã€‚ ç„¶åè®²ä»·çš„å¸ˆå‚…è·Ÿæˆ‘è¯´ï¼Œ I am teacher , I teach him. æ‰çŸ¥é“ï¼ŒåŸæ¥ä»–ä»¬æ˜¯å…„å¼Ÿï¼Œå¼Ÿå¼Ÿç¬¬ä¸€æ¬¡å‡ºæ¥å¼€æ‘©çš„ï¼Œæˆ‘åçš„å°±æ˜¯å¼Ÿå¼Ÿéª‘çš„ï¼Œå“¥å“¥è·Ÿæˆ‘è¯´æˆ‘åçš„è¿™ä¸ªæ˜¯åˆšæ–°ä¹°çš„æ‘©æ‰˜ã€‚æˆ‘ä¸€çœ‹ï¼Œè¿˜çœŸæ˜¯ï¼Œæœ¬ç”°çš„è¸æ¿æ‘©æ‰˜ã€‚ æ›¼è°·è¿™è¾¹åŸºæœ¬éƒ½æ˜¯æœ¬ç”°ä¸°ç”°ï¼Œæ— è®ºè½¿è½¦æˆ–è€…æ‘©æ‰˜ï¼Œç›®æµ‹ç™¾åˆ†ä¹‹å…«åä»¥ä¸Šéƒ½æ˜¯è¿™ä¸¤ä¸ªæ—¥æœ¬å“ç‰Œã€‚è½¿è½¦é‡Œé¢çœ‹åˆ°äº†å¥½å¤šæ€åŸŸï¼Œåˆ«è¯´ï¼Œè¿˜çœŸå¸…ã€‚çº¢ç¯å®Œäº†ï¼Œä¸€ç¾¤æ‘©çš„ å—¡ çš„å°±éƒ½å†²å‡ºå»äº†ã€‚é‚£ä¸ªæ–°å¸æœºå¸ˆå‚…ä¸€ç›´åœ¨è·Ÿæˆ‘è¯´ä»€ä¹ˆï¼Œç„¶è€Œæˆ‘ä¸€å¥æ²¡å¬æ‡‚ï¼Œéƒ½ä¸çŸ¥é“ä»–è¯´çš„æ˜¯æ³°è¯­è¿˜æ˜¯è‹±è¯­ã€‚ å°„å‡»ç¬¬å››å¤©å»é™„è¿‘é™†å†›ç»ƒä¹ åœºç©äº†ä¸‹å°„å‡»ï¼ŒçœŸçš„å¾ˆçˆ½ï¼Œé‚£æ‰‹æªåååŠ›ï¼Œbong~ bong~ bong~ çš„ã€‚ç©å®Œé‚£ä¸ªå†›å®˜è·Ÿæˆ‘è¯´æƒ³ä¸æƒ³ç©é•¿æªï¼Œå½“ç„¶æƒ³å•Šï¼Œæ¯•ç«Ÿæ·˜å®ä¸Šåªæœ‰æ‰‹æªçš„å¥—é¤ã€‚ä¸è¿‡ï¼Œ50å‘ M4A1 3200ğŸ–ï¼Œç›¸å½“äºä¸€å‘å­å¼¹åå‡ å—äººæ°‘å¸ï¼Œè¿˜æ˜¯æŒºè´µçš„ï¼Œä¸è¿‡æƒ³æƒ³æ¥éƒ½æ¥äº†ï¼Œç©ï¼é‚æ‰“ç®—åˆ·å¡ï¼Œç»“æœäººå®¶åªæ”¶ç°é‡‘ï¼Œè€Œæˆ‘åªæœ‰å¯æ€œçš„ 500ğŸ–ï¼Œæ— å¥ˆå°±åªèƒ½å›å»äº†ã€‚ è°çŸ¥å‡ºé—¨èµ°å‡ºå»200ç±³å°±ä¸‹èµ·äº†æš´é›¨ï¼Œæˆ‘ç«Ÿç„¶æ²¡å¸¦ä¼ï¼Œå°´å°¬ã€‚åœ¨è·¯è¾¹è¹²äº†ä¸€ä¸ªå°æ—¶ç­‰é›¨åœï¼Œé›¨åœäº†èµ¶ç´§è·‘äº†å›å»ï¼Œæœç„¶ä»¥åå‡ºé—¨å¾—çœ‹å¤©æ°”é¢„æŠ¥å•Šã€‚ äº¤é€šè¯´è¯´æ›¼è°·çš„äº¤é€šå§ï¼Œè¿™è¾¹æ‘©çš„å¾ˆå¤šï¼Œä¹Ÿå¾ˆæ–¹ä¾¿ï¼Œå› ä¸ºæ›¼è°·çš„äº¤é€šéå¸¸å µï¼Œå¦‚æœæ‰“çš„çš„è¯ç»å¸¸è¢«å µåœ¨è·¯ä¸Šå¥½ä¹…ï¼Œä½†æ˜¯åº§æ‘©çš„å°±ä¸ä¸€æ ·ï¼Œå¾ˆå¤šè·¯éƒ½å¯ä»¥èµ°ã€‚ ä¸è¿‡å¥³ç”Ÿä¸€ä¸ªäººç©çš„è¯ï¼Œä¸æ˜¯å¾ˆæ¨èåº§æ‘©çš„ï¼Œä¸æ€ä¹ˆå®‰å…¨ã€‚å¦‚æœä¸€å®šè¦åšæ‘©çš„è®°å¾—è®¤å‡†è¿™ä¸ªå°é©¬ç”²ï¼Œè¿™ç§æ˜¯æ­£è§„çš„ï¼Œæ¯ä¸ªäººèº«åéƒ½å†™ç€åå­—å’Œä»£å·ï¼Œæ™šä¸Šåº§æ‘©çš„çš„è¯ï¼Œå¯ä»¥æ‹ç…§å‘å®¶äººä»¥å…ä¸‡ä¸€ã€‚ä¸Šè½¦ä¸€å®šè¦å¸¦å¤´ç›”ï¼Œå› ä¸ºè·¯ä¸Šçœ‹åˆ°äº†æœ‰äººå‡ºäº†äº¤é€šäº‹æ•…ï¼Œè¦æ˜¯ä¸å¸¦å¤´ç›”è¿˜æ˜¯å¾ˆå±é™©çš„ã€‚ä»·æ ¼æ–¹é¢ï¼Œæ‘©çš„è·Ÿæ‰“çš„ä»·æ ¼å·®ä¸å¤šï¼Œä¸Šè½¦å‰ä¸€å®šè¦é—®ä»·æ ¼ï¼Œä¸€å®šè¦ç ä»·,ä»·æ ¼æ°´åˆ†è¿˜æ˜¯å¾ˆå¤§çš„ã€‚ æœ€åç¬¬äº”å¤©æ—©ä¸Šå°±ç”¨ Grab æ‰“äº†ä¸ªè½¦å»æœºåœºå›å›½äº†ã€‚ æ•´ä½“ä¸‹æ¥ 9 å¤© 8 æ™šçš„æ ·å­ï¼ŒèŠ±äº†å¤§æ¦‚ 1.2W. ä¸»è¦éƒ½èŠ±åœ¨é…’åº—å’Œæœºç¥¨ä¸Šäº†ï¼Œå› ä¸ºä¸€ä¸ªäººå‡ºæ¥ç©ï¼Œæ‰€ä»¥é…’åº—éƒ½å®šçš„æ¯”è¾ƒå¥½ï¼Œæ¯•ç«Ÿå®‰å…¨ç¬¬ä¸€ã€‚æ•´ä½“ä¸Šç©çš„è¿˜æ˜¯å¾ˆå¼€å¿ƒçš„ï¼Œäººéƒ½å¾ˆäº²åˆ‡ï¼Œæ¯•ç«Ÿå¾®ç¬‘å›½åº¦ã€‚è€Œä¸”ä¹ŸæŒºä¾¿å®œï¼Œåœ¨é‚£è¾¹èŠ±é’±æˆ‘ä¹Ÿæ²¡æœ‰ä»€ä¹ˆæ¦‚å¿µï¼ŒåŸºæœ¬å°±æ˜¯å¤§æ‰‹å¤§è„šçš„èŠ±äº†ï¼Œæ¯”å›½å†…ä¾¿å®œå¤šäº†ã€‚ å›å›½å°±è¦ç»§ç»­æ¬ç –äº†ï¼Œå“ˆå“ˆã€‚]]></content>
      <categories>
        <category>éšç¬”</category>
      </categories>
      <tags>
        <tag>æ¸¸è®°</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[2017å¹´ç»ˆæ€»ç»“]]></title>
    <url>%2F2018%2F03%2F28%2F2017-year-end-summary%2F</url>
    <content type="text"><![CDATA[å·¥ä½œå¹´åˆï¼Œå…¬å¸ç»å†å¤§çš„å˜åŠ¨ï¼Œæ•´ä¸ªç†è´¢ä¸šåŠ¡çº¿éƒ½å¹²æ‰äº†ï¼Œä¸€å¤§æ‰¹äººè½¬å²—çš„è½¬å²—ã€ç¦»èŒçš„ç¦»èŒã€‚å‰ç«¯æŠ€æœ¯éƒ¨è¿™é‡Œï¼Œäººä¹Ÿèµ°äº†å‡ ä¸ªï¼Œå…­æ¥¼æœ¬æ¥ 5 ä¸ªå‰ç«¯ï¼Œæœ€ååªå‰©ä¸‹äº† 3 ä¸ªã€‚åŸæ¥çš„é¡¹ç›®ä¹Ÿéƒ½ä¸åšäº†ï¼Œå¼€å§‹åšçš„æ–°çš„é¡¹ç›®ç½‘æ˜“ç™½æ¡ã€‚é£é£ç«ç«åšäº†å°†è¿‘ä¸€å¹´ï¼Œç°åœ¨äº§å“çš„æ•°å­—è¿˜æ¯”è¾ƒå¥½çœ‹ï¼Œå¹´åå°±ä¼šä¸Šå…¬å¼€ç”³è¯·åˆ¶å¯¹å¤–æ­£å¼å¼€æ”¾ï¼Œå‰æ™¯è¿˜æ˜¯ä¸é”™çš„ã€‚ åªæ˜¯ï¼Œç°åœ¨æ¥¼ä¸Šä¸¤ä¸ªå‰ç«¯å¹´ååˆè¦èµ°ä¸€ä¸ªäººï¼ŒæµåŠ¨æ€§é‚£ä¹ˆå¤§ï¼Œæ²¡æœ‰ä¸€ç‚¹å½’å±æ„Ÿã€‚åŠ ä¸Šé˜¿é‡Œå¾ˆå¤šéƒ¨é—¨ç»™æˆ‘æ‰“ç”µè¯è®©æˆ‘è¿‡å»é¢è¯•ï¼Œæƒ³æƒ³ç½‘æ˜“ä¸æ€ä¹ˆé«˜çš„å·¥èµ„ï¼Œæœ‰æ—¶å€™éƒ½æœ‰ç‚¹åŠ¨å¿ƒï¼Œä½†è¿˜æ˜¯ä¸€ä¸€æ‹’ç»äº†ã€‚èµ·ç åœ¨ç½‘æ˜“å¾…æ»¡ä¸‰å¹´ï¼Œå¥½å¥½æ²‰æ·€ä¸€ä¸‹ã€‚ä¹Ÿç£¨ç»ƒä¸€ä¸‹è‡ªå·±çš„æ€§å­ï¼Œå¦åˆ™å¤©å¤©æ¢å·¥ä½œï¼Œä¹Ÿä¸åˆ©äºé•¿ä¹…çš„èŒä¸šå‘å±•ã€‚åªæ˜¯æœ€è¿‘æ–°ä¸Šçš„åŒºå—é“¾é¡¹ç›®ï¼Œè™½ç„¶æˆ‘æ²¡å‚ä¸ï¼Œä½†èƒ½è®©æˆ‘æ„Ÿè§‰æ•´ä¸ªéƒ¨é—¨éå¸¸çš„æµ®èºï¼Œåˆåœ¨çŠ¹è±«å‘†ä¸‹å»æ˜¯å¦æ˜¯æ­£ç¡®çš„ã€‚ ç”Ÿæ´»ä»Šå¹´æ•´ä½“ä¸Šè¿˜æ˜¯è¿‡çš„åƒä¸€ç¢—ç™½å¼€æ°´ï¼Œä¸­é—´å¶æœ‰æ”¾ç‚¹ç³–ï¼Œä½†å¾ˆå¿«ä¹Ÿå°±æ²¡æœ‰å‘³é“ã€‚ èº«ä½“ä¸Šå·²ç»æ˜æ˜¾èƒ½æ„Ÿè§‰åˆ°å¼€å§‹æ¨ªå‘å‘å±•äº†ï¼Œä½“é‡ä¸Šäº†äº”å…­å…¬æ–¤ï¼Œä½†æ˜¯èº«ä½“ç´ è´¨å´ä¸‹é™äº†ï¼Œå¼•ä½“å‘ä¸Šåªèƒ½åšä¸€ä¸ªï¼Œæˆ‘çš„å¤©å‘ï¼Œå¤§å­¦çš„æ—¶å€™å¥½æ­¹ä¹Ÿèƒ½è½»æ¾åšåä¸ªçš„ï¼Œè¿™è¡°å‡çš„ä¹Ÿå¤ªå¿«äº†ã€‚è¯´è¦é”»ç‚¼èº«ä½“ï¼Œç„¶è€ŒåŸºæœ¬ä¸Šåªåœç•™åœ¨å˜´ä¸Šï¼Œé”»ç‚¼ä¸€æ¬¡ä¸­é—´èƒ½é—´éš”ä¸€ä¸ªæœˆï¼Œå“ˆå“ˆã€‚ æœ‰æ—¶å€™è§‰å¾—æ— èŠï¼Œå°±æƒ³ç»™è‡ªå·±åŸ¹å…»ä¸ªçˆ±å¥½ï¼Œæƒ³æ¥æƒ³å»æœ€åå†³å®šå­¦ä¸ªå£ç´ï¼ŒæŠ•å…¥å°ï¼Œè§æ•ˆå¿«ã€‚ç„¶åå°±ä¹°ç´ç½‘ä¸Šæ‰¾æ•™ç¨‹ï¼Œåˆšå¼€å§‹çš„å‡ ä¸ªæœˆï¼Œè¿˜æ¯”è¾ƒä¸Šå¿ƒï¼ŒåŸºæœ¬å¤©å¤©ç»ƒä¹ ï¼Œåˆ°ç°åœ¨ä¸å¤æ‚çš„æ›²å­éƒ½å¯ä»¥å¹ï¼Œè€Œä¸”è‡ªæˆ‘æ„Ÿè§‰è¿˜ä¸é”™ã€‚å°±æ˜¯å› ä¸ºå­¦çš„æ˜¯å¸ƒé²æ–¯å£ç´ï¼Œä½éŸ³çš„ 6 éœ€è¦å‹éŸ³ï¼Œåˆ°ç°åœ¨ä¹Ÿä¸èƒ½å¾ˆå¥½çš„å‹å‡ºå¥½å¬çš„å£°éŸ³ï¼Œæ›´åˆ«æèå…¥åˆ°æ›²å­ä¸­å»äº†ï¼Œè¿˜éœ€è¦ç»§ç»­ç»ƒä¹ å•Šã€‚ç°åœ¨æœ€å–œæ¬¢çš„å¹çš„æ›²å­æœ‰ä¸¤ä¸ªï¼Œä¸€ä¸ªæ˜¯ ã€Šaloneã€‹ ä¸€ä¸ªæ˜¯ ã€Šyou are my sunshineã€‹ï¼Œå¿ƒæƒ…ä¸å¥½çš„æ—¶å€™å°±è‡ªå·±å¹ç»™è‡ªå·±å¬ã€‚ æ—¥æœ¬æ—…æ¸¸11 æœˆå·¦å³ï¼Œå…¬å¸ç»„ç»‡æˆ‘ä»¬å‡ºå›½æ—…æ¸¸ï¼Œæœ‰ä¸‰ä¸ªåœ°æ–¹å¯é€‰ï¼šæ—¥æœ¬ã€å¡ç­å²›ã€æ¾³æ´²ã€‚æœ€åæˆ‘é€‰äº†æ—¥æœ¬ï¼Œä¹Ÿæ˜¯ç¬¬ä¸€æ¬¡å‡ºå›½ï¼Œè¿˜æ˜¯å¾ˆå¼€å¿ƒã€‚ å»äº†åŒ—æµ·é“ï¼Œæ—¥æœ¬çš„å¤§å†œæ‘ï¼Œç¬¬ä¸€å¤©å…¥ä½çš„å°é•‡ä¸‹åˆäº”ç‚¹å¤§è¡—ä¸Šå°±ä¸€ä¸ªäººéƒ½æ²¡æœ‰äº†ï¼Œè·ŸåŒäº‹å‡ºé€›äº†ä¸€åœˆæœ€åå‘ç°é…’åº—é™„è¿‘çš„å±…é…’å±‹ä¸ƒç‚¹ä»¥åå¼€é—¨ã€‚ä¸€ç¾¤äººè¿›å»æƒ³å»æ„Ÿå—æ—¥æœ¬å½“åœ°çš„å±…é…’å±‹æ–‡åŒ–ï¼Œåªæ˜¯è€æ¿å°±ä¸€ä¸ªäººï¼Œè€Œä¸”è·Ÿæˆ‘ä»¬è¯­è¨€ä¸é€šï¼Œå®Œå…¨ç…§é¡¾ä¸è¿‡æ¥ï¼Œçœ‹èµ·æ¥æœ‰ç‚¹ä¸æ˜¯å¾ˆå¼€å¿ƒçš„æ ·å­ï¼Œä¸è¿‡æˆ‘ä»¬å–çš„å€’æ˜¯å¾ˆå¼€å¿ƒã€‚ ç¬¬äºŒå¤©å»çš„ç¬¬ä¸€ä¸ªæ™¯ç‚¹å°±æ˜¯ä¸ªåŠ¨ç‰©å›­ï¼Œè¿™ä¹Ÿæ˜¯æˆ‘ç¬¬ä¸€æ¬¡å»åŠ¨ç‰©å›­ï¼Œçœ‹åˆ°äº†ä¼é¹…ã€ç‹¼ã€æµ·è±¹ã€æ²³é©¬ã€é•¿é¢ˆé¹¿ï¼Œå°±æ˜¯å‡ºæ¥çš„æ—¶å€™å·®ç‚¹æ‰é˜Ÿæ‰¾ä¸åˆ°ç»„ç»‡ã€‚ åæ¥åˆå»äº†åŒ—æµ·é“å…ã€æ´çˆ·æ¹–ã€ç†Šå‚ã€åœ°ç‹±è°·ã€å½“å¤©æ™šä¸Šå…¥ä½çš„æ´çˆ·æ¹–é…’åº—ç¯å¢ƒçœŸå¥½ã€‚ ä¸­é—´è¿˜å»äº†å“ªéƒ½å¿˜äº†ï¼Œæœ€åè½è„šåœ¨æœ­å¹Œå¸‚åŒºï¼Œç„¶åç¬¬äºŒå¤©è‡ªç”±æ´»åŠ¨ã€‚ç™½å¤©é€›è¡—ä¹°ä¸œè¥¿ï¼Œå‡ ä¸ªå¤§å•†åœºåŒäº‹ä»¬éƒ½ä¹°äº†å¥½å¤šä¸œè¥¿ï¼Œéƒ½æ˜¯åœŸè±ªå•Šï¼Œå“ˆå“ˆã€‚ æœŸé—´æœ‰ä»¶å¾ˆæ„æ€çš„äº‹æƒ…ï¼Œæˆ‘æƒ³ä¹°ä¸ª SONY 1000x ï¼Œç»“æœå’Œå”®è´§å‘˜å°±è¿™ä¸ªè€³æœºçš„è¾“å…¥ç”µå‹æ˜¯å¤šå°‘æ²Ÿé€šäº†å¥½ä¹…ï¼Œç”¨å„ç§ç¿»è¯‘è½¯ä»¶éƒ½ä¸è¡Œï¼Œè¯´è‹±è¯­ä¸è¡Œã€è¯´æ±‰è¯­ä¹Ÿä¸è¡Œã€‚æœ€åè¿˜æ˜¯æ‰¾äº†ä¸ªæ¹¾æ¹¾è¿‡æ¥ï¼Œæ‰æˆåŠŸçš„è§£å†³äº†è¾“å…¥ç”µå‹çš„é—®é¢˜ï¼Œäººå®¶æ˜¯ usb å……ç”µçš„ï¼Œä¸ç‰µæ‰¯ 110v è¿˜æ˜¯ 220vï¼Œç„¶åæ‰æˆåŠŸä¹°åˆ°äº†è€³æœºã€‚ æ™šä¸Šå’ŒåŒäº‹ä¸€èµ·ç‚¹äº†ä¸ª 2w æ—¥å…ƒçš„å¸ç‹èŸ¹ï¼Œçœ‹èµ·æ¥å¾ˆä¸é”™ï¼Œåªæ˜¯å®åœ¨ä¸æ€ä¹ˆå¥½åƒã€‚åæ¥è¿˜ä¸Šäº†ç”µè§†å¡”ï¼Œçœ‹äº†çœ‹æœ­å¹Œå…¨è²Œã€‚ æ•´ä¸ªæ—¥æœ¬ä¸€å‘¨æ¸¸ï¼Œä¹Ÿå°±åˆ°è¿™ç»“æŸäº†ï¼Œç©çš„å¾ˆå¼€å¿ƒã€‚ æ¢æˆ¿å­å¹´æœ«ï¼Œæˆ¿å­åˆ°æœŸã€‚æˆ¿ä¸œè¦æŠŠæˆ¿ç§Ÿä» 5000 æ¶¨åˆ° 6500 ï¼Œæˆ‘çš„å¤©å‘ï¼Œ30% çš„æ¶¨å¹…ï¼Œå»å¹´æˆ‘å¹´åº¦ç»©æ•ˆæ˜¯ A ä¹Ÿå°± 10% çš„å·¥èµ„æ¶¨å¹…ã€‚è¿™ä¸€çœ‹ï¼Œä½ä¸ä¸‹å»äº†ã€‚å°±å’Œå‡ ä¸ªåˆç§Ÿçš„å®¤å‹å•†é‡äº†ä¸€ä¸‹ï¼Œä¸ç§Ÿäº†ã€‚ å¥½å§ï¼Œåˆæ˜¯ TMD çš„æ¢æˆ¿å­ï¼ŒçœŸ TM çƒ¦ã€‚ ç”±äºæ—¶é—´æ¯”è¾ƒç´§æ€¥ï¼Œåªæœ‰ä¸¤ä¸ªå‘¨æœ«æ—¶é—´ã€‚æ‰€ä»¥çœ‹çš„æˆ¿å­ä¹Ÿä¸å¤šï¼Œä¸€å¼€å§‹æƒ³çš„è¯´æ‰¾ä¸ªå¥½ä¸€ç‚¹çš„å°åŒºï¼Œä¸ä½è¿™äº›å¹æ‹‰å¼¹å”±çš„å›è¿æˆ¿äº†ã€‚ç„¶åçœ‹äº†å‡ ä¸ªé«˜ç«¯å°åŒºçš„æˆ¿å­ï¼Œç»“æœå¤§å¤šéƒ½æ˜¯éš”æ–­ï¼Œè€Œä¸”ä»·æ ¼è¿˜å¾ˆå‘çˆ¹ã€‚æ²¡åŠæ³•ï¼Œå°±ç»§ç»­åœ¨å›­å°åŒºé™„è¿‘æ‰¾ã€‚æˆ¿æºä¸æ˜¯å¾ˆå¤šï¼Œæˆ‘ä»¬å‘¨æœ«ä¸¤å¤©å°±å»å„ä¸ªå°åŒºé—¨å£è´´çš„å°å¹¿å‘Šä¸Šæ‰¾æˆ¿å­ï¼Œæœ€åçš„å‘¨æœ«çœ‹äº†ä¸‰ä¸ªæˆ¿å­ã€‚ä¸¤ä¸ªéƒ½åœ¨è·¯è¾¹ï¼Œå¤ªåµï¼Œä½†å…¶ä»–ç¯å¢ƒè¿˜è¡Œã€‚ä¸€ä¸ªä¸é è·¯ï¼Œä½†æ˜¯åœ¨ä¸€æ¥¼ï¼Œçœ‹æˆ¿çš„æ—¶å€™æŒºå®‰é™çš„ã€‚å½“æ—¶å°±é€‰äº†è¿™ä¸ªä¸€æ¥¼çš„çœ‹èµ·æ¥æŒºå®‰é™çš„æˆ¿å­ï¼Œç„¶è€Œè¿™ä¸€åˆ‡éƒ½æ˜¯å™©æ¢¦çš„å¼€å§‹å•Šã€‚ æ¬è¿›å»ç¡çš„ç¬¬ä¸€å¤©ï¼Œæ—©ä¸Šæˆ‘çªç„¶å¬åˆ°ä¸€ä¸ªé™Œç”Ÿçš„å£°éŸ³åœ¨æˆ‘è€³è¾¹è¯´è¯ï¼Œæˆ‘è¿˜ä»¥ä¸ºæˆ¿é—´æ¥äº†ä»€ä¹ˆäººï¼Œå“äº†ä¸€è·³ã€‚ççœ¼ä¸€çœ‹ï¼Œä¸€ä¸ªäººéƒ½æ²¡æœ‰ï¼Œä½†è¯´è¯çš„å£°éŸ³è¿˜åœ¨æŒç»­ã€‚æ‹‰å¼€å¸˜å­ä¸€çœ‹çª—å¤–ï¼Œæˆ‘é ï¼Œå°åŒºèµ·çš„æ—©çš„äººåœ¨æ¥¼ä¸‹èŠå¤©ï¼Œç”±äºä½åœ¨ä¸€æ¥¼ï¼Œè€Œä¸”æˆ¿å­çš„å•å±‚ç»ç’ƒéš”éŸ³æ•ˆæœéå¸¸å·®ï¼Œé‚£å£°éŸ³å°±è·Ÿåœ¨æˆ‘è·Ÿå‰è¯´è¯å·®ä¸å¤šã€‚å½“æ—¶éƒ½æœ‰ç‚¹å´©æºƒäº†ï¼Œçœ‹æ¥æ‡’è§‰ä»¥åéƒ½ç¡ä¸äº†äº†ã€‚è€Œä¸”ï¼Œæœ€è¿‘ä¸‰æœˆä»½å·¦å³ï¼Œæˆ¿é—´å¾ˆæ½®ï¼Œæ¯å¤©æ™šä¸ŠèººåºŠä¸Šçš„æ—¶å€™éƒ½èƒ½æ„Ÿè§‰åˆ°è¤¥å­æ½®æ½®çš„ï¼Œç¡ç€éå¸¸ä¸èˆ’æœã€‚è¿™å‡ å¤©å°±æ‰¾äº†ä¸ªé™¤æ¹¿å™¨æ”¾æˆ¿é—´é‡Œé¢é™¤æ½®ã€‚æ–°ç§Ÿçš„çš„æˆ¿å­æ¬è¿›æ¥ä¹Ÿå·®ä¸å¤šä¸¤ä¸ªæœˆäº†ï¼Œå¾—å‡ºçš„ç»“è®ºå°±æ˜¯ï¼Œä¸€æ¥¼çš„æˆ¿å­çœŸå¿ƒä¸é€‚åˆå±…ä½å•Šã€‚ æ„Ÿæƒ…åæ­£å¾ˆæ›²æŠ˜å°±æ˜¯äº†ï¼Œæ‡’å¾—è¯´ã€‚ å»å¹´çš„ç›®æ ‡ æ¯ä¸ªæœˆè‡³å°‘ä¸€ç¯‡åšå®¢ æ¯ä¸ªæœˆéƒ½è¦å‡ºå»èµ°èµ°ï¼Œå“ªæ€•ä¸€ä¸ªäºº ä¹¦è¿˜æ˜¯è¦çœ‹çš„ï¼Œé‚£å°±ä¸‰ä¸ªæœˆä¸€æœ¬ä¹¦å§ èº«ä½“è¿˜æ˜¯è¦é”»ç‚¼çš„ï¼Œå¿ƒé‡Œæœ‰è¿™ä¸ªäº‹æƒ…å°±è¡Œ å†™ä¸€ä¸ªä¸ªäººé¡¹ç›®ï¼Œå¹¶å‘å¸ƒå‡ºæ¥ï¼Œæ— è®ºé¡¹ç›®å¤šæ°´ å»å¹´çš„ç›®æ ‡ä¹Ÿå°±å®Œæˆäº† 50% çš„æ ·å­ï¼Œ1 æ²¡å®Œæˆã€2 å®Œæˆäº†ã€3 å®Œæˆäº†ã€4 åªèƒ½ç®—å¶å°”ä¼šæƒ³èµ·æ¥ã€ 5 å†™äº†ä¸ªè‡ªåŠ¨äº¤æ˜“ç¨‹åºï¼Œç¡®å®å¤Ÿæ°´ï¼Œä¸è¿‡ä¹Ÿç®—å®Œæˆäº†ã€‚æ€»ä½“æ‰§è¡ŒåŠ›å®åœ¨æ˜¯æœ‰ç‚¹å·®ï¼ŒæŒ‡å®šçš„è®¡åˆ’åŸºæœ¬å¾ˆéš¾æ‰§è¡Œã€‚ è¿™å·¥ä½œä¹Ÿå¿«å››å¹´äº†ï¼Œå·²ç»æ²¡æœ‰å¤ªå¤§çš„å¿ƒåŠ²äº†ï¼Œæ€»è§‰å¾—ç¼ºä¹åŠ¨åŠ›ã€‚æ‰€ä»¥ä»Šå¹´å°±ä¸€ä¸ªç›®æ ‡ï¼Œç»™è‡ªå·±æ‰¾ç‚¹åŠ¨åŠ›ï¼Œå…·ä½“ä¸‹æ¥ï¼Œé‚£å°±æ˜¯æ‰¾ä¸ªå¥³æœ‹å‹ï¼Œç»“æŸå•èº«ç‹—çš„ç”Ÿæ´»ã€‚ PSï¼š ä¸€ä¸ªå¹´ç»ˆæ€»ç»“æ‹–äº†å‡ ä¸ªæœˆï¼Œ 2018 éƒ½è¿‡å» 1/3 æ‰å‹‰å¼ºå‡‘å‡ºæ¥ï¼Œå®åœ¨æ˜¯çƒ¦å¿ƒçš„äº‹æƒ…å¤ªå¤šäº†ï¼Œæ€»ä¹‹å°±è¿™æ ·å§ã€‚]]></content>
      <categories>
        <category>éšç¬”</category>
      </categories>
      <tags>
        <tag>å¹´ç»ˆæ€»ç»“</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[indexedDB ä¸å®Œå…¨æŒ‡å—]]></title>
    <url>%2F2017%2F12%2F06%2Fstep-into-indexdb%2F</url>
    <content type="text"><![CDATA[ä»‹ç»å¼•ç”¨ MDN çš„ä»‹ç»ï¼š IndexedDB æ˜¯ä¸€ä¸ªäº‹åŠ¡å‹æ•°æ®åº“ç³»ç»Ÿï¼Œç±»ä¼¼äºåŸºäº SQL çš„ RDBMSã€‚ ç„¶è€Œä¸åŒçš„æ˜¯å®ƒä½¿ç”¨å›ºå®šåˆ—è¡¨ï¼ŒIndexedDBæ˜¯ä¸€ä¸ªåŸºäºJavaScriptçš„é¢å‘å¯¹è±¡çš„æ•°æ®åº“ã€‚ IndexedDBå…è®¸æ‚¨å­˜å‚¨å’Œæ£€ç´¢ç”¨é”®ç´¢å¼•çš„å¯¹è±¡; å¯ä»¥å­˜å‚¨structured clone algorithmæ”¯æŒçš„ä»»ä½•å¯¹è±¡ã€‚ æ‚¨åªéœ€è¦æŒ‡å®šæ•°æ®åº“æ¨¡å¼ï¼Œæ‰“å¼€ä¸æ•°æ®åº“çš„è¿æ¥ï¼Œç„¶åæ£€ç´¢å’Œæ›´æ–°ä¸€ç³»åˆ—äº‹åŠ¡ä¸­çš„æ•°æ®ã€‚ IndexedDB æ˜¯ä¸€ç§ä½çº§APIï¼Œç”¨äºå®¢æˆ·ç«¯å­˜å‚¨å¤§é‡ç»“æ„åŒ–æ•°æ®(åŒ…æ‹¬, æ–‡ä»¶/ blobs)ã€‚è¯¥APIä½¿ç”¨ç´¢å¼•æ¥å®ç°å¯¹è¯¥æ•°æ®çš„é«˜æ€§èƒ½æœç´¢ã€‚è™½ç„¶ Web Storage å¯¹äºå­˜å‚¨è¾ƒå°‘é‡çš„æ•°æ®å¾ˆæœ‰ç”¨ï¼Œä½†å¯¹äºå­˜å‚¨æ›´å¤§é‡çš„ç»“æ„åŒ–æ•°æ®æ¥è¯´ï¼Œè¿™ç§æ–¹æ³•ä¸å¤ªæœ‰ç”¨ã€‚IndexedDB æä¾›äº†ä¸€ä¸ªè§£å†³æ–¹æ¡ˆã€‚ åŒºåˆ«è¿™æ˜¯æˆ‘æ•´ç†çš„ WebStorage å’Œ indexedDB çš„ä¹‹é—´åŒºåˆ«ï¼Œæœ‰é—®é¢˜çš„åœ°æ–¹è¿˜è¯·æŒ‡å‡ºã€‚ ç”¨æ³•1. æ‰“å¼€æ•°æ®åº“ const DB_NAME = 'Netease'const DB_VERSION = 1const OB_NAMES = &#123; UseKeyPath: 'UseKeyPath', UseKeyGenerator: 'UseKeyGenerator'&#125;/** * NOTE: * 1. ç¬¬ä¸€æ¬¡æ‰“å¼€å¯èƒ½ä¼šæç¤ºç”¨æˆ·è·å– indexedDB çš„æƒé™ * 2. æµè§ˆå™¨éšèº«æ¨¡å¼ä¸ä¼šå­˜åœ¨æœ¬åœ°ï¼Œåªä¼šå­˜å‚¨åœ¨å†…å­˜ä¸­ */const request = window.indexedDB.open(DB_NAME, DB_VERSION) indexedDB.open æ¥æ”¶ä¸¤ä¸ªå‚æ•°ï¼Œåˆ†åˆ«ä¸ºæ•°æ®åº“åç§°å’Œç‰ˆæœ¬ï¼Œè¿”å›çš„æ˜¯ä¸€ä¸ª IDBOpenDBRequest å¯¹è±¡ã€‚å¯ä»¥ä»¥ DOM äº‹ä»¶çš„æ–¹å¼ç›‘å¬å®ƒçš„ success å’Œ error æ¥è·å–åˆ°å®ƒçš„ç»“æœã€‚å‡ ä¹æ‰€æœ‰å¯¹ indexedDB çš„å¼‚æ­¥æ“ä½œéƒ½æ˜¯è¿™ç§ä»¥äº‹ä»¶çš„æ–¹å¼è¿›è¡Œï¼Œè¿”å›ä¸€ä¸ªæ‹¥æœ‰ç»“æœæˆ–é”™è¯¯çš„ IDBRequest å¯¹è±¡ã€‚åœ¨è¿™é‡Œï¼Œopen æ–¹æ³•å¾—åˆ°çš„ç»“æœæ˜¯ä¸€ä¸ª IDBDatabase çš„å®ä¾‹ã€‚ ç¬¬äºŒä¸ªå‚æ•°æ˜¯æ•°æ®åº“çš„ç‰ˆæœ¬ã€‚ç‰ˆæœ¬å†³å®šäº†æ•°æ®åº“çš„æ¨¡å¼ï¼šå­˜å‚¨åœ¨é‡Œé¢çš„ object store å’Œå®ƒä»¬çš„ç»“æ„ã€‚å½“ç¬¬ä¸€æ¬¡é€šè¿‡ open æ–¹æ³•æ‰“å¼€æ•°æ®åº“æ—¶ï¼Œä¼šè§¦å‘ä¸€ä¸ª onupgradeneeded äº‹ä»¶ï¼Œæˆ‘ä»¬å¯ä»¥ä¹Ÿåªèƒ½åœ¨è¿™é‡Œè®¾ç½®æ•°æ®åº“æ¨¡å¼ã€‚å½“æ•°æ®åº“å·²ç»å­˜åœ¨ï¼Œè€Œæˆ‘ä»¬æ‰“å¼€ä¸€ä¸ªæ›´é«˜ç‰ˆæœ¬æ—¶ï¼ŒåŒæ ·ä¼šè§¦å‘ onupgradeneeded äº‹ä»¶ï¼Œç”¨æ¥æ›´æ–°æ•°æ®åº“æ¨¡å¼ã€‚ æ·»åŠ å¤„ç†æ–¹æ³•æˆ‘ä»¬å¯ä»¥é€šè¿‡ç›‘å¬å®ƒçš„ success, error ä»¥åŠ upgradeneeded äº‹ä»¶æ¥åšç›¸åº”çš„æ“ä½œã€‚ request.onerror = function (event) &#123; // Do something with request.errorCode! console.error('open request failed',event.target.error)&#125;request.onsuccess = function (event) &#123; // Do something with request.result! // console.log('open request success', event) var db = event.target.result db.onerror = function (e) &#123; console.error('Database error: ', e.target.error) &#125; db.onclose = e =&gt; &#123; console.error('Database close:', e.target.error) &#125;&#125; å¯ä»¥åœ¨ success äº‹ä»¶é‡Œé¢æ‹¿åˆ° db å¯¹è±¡ï¼Œè¿™ä¸ªæ˜¯åç»­æ“ä½œçš„ä¸»ä½“ã€‚ é”™è¯¯å¤„ç†ç”±äºæ˜¯åŸºäº DOM äº‹ä»¶æ¨¡å¼çš„ï¼Œæ‰€ä»¥æ‰€æœ‰çš„é”™è¯¯æ˜¯ä¼šå†’æ³¡çš„ã€‚ä¹Ÿå°±æ˜¯è¯´åœ¨ä¸€ä¸ªç‰¹å®š request çš„ä¸Šå¼•å‘çš„é”™è¯¯ä¼šä¾æ¬¡å†’æ³¡åˆ°äº‹åŠ¡ï¼Œç„¶ååˆ° db å¯¹è±¡ã€‚å¦‚æœä¸ºäº†ç®€åŒ–é”™è¯¯å¤„ç†ï¼Œå¯ä»¥ç›´æ¥åœ¨ db å¯¹è±¡ä¸Šæ·»åŠ é”™è¯¯å¤„ç†ï¼š db.onerror = function (e) &#123; // å¯ä»¥å¤„ç†è¿™ä¸ªæ•°æ®åº“ä¸Šæ‰€æœ‰çš„é”™è¯¯ console.error('Database error: ', e.target.error)&#125; 2. åˆ›å»ºæˆ–æ›´æ–°æ•°æ®åº“ç‰ˆæœ¬å‰é¢å·²ç»è¯´è¿‡ï¼Œå½“åˆ›å»ºæˆ–è€…å¢å¤§æ•°æ®åº“ç‰ˆæœ¬çš„æ—¶å€™ï¼Œä¼šè§¦å‘ onupgradeneeded äº‹ä»¶ã€‚åœ¨äº‹ä»¶å†…éƒ¨ï¼Œå¯ä»¥æ‹¿åˆ° db å¯¹è±¡æ¥åˆ›å»ºæˆ–æ›´æ–° object store , å…·ä½“å¦‚ä¸‹ã€‚ request.onupgradeneeded = function (event) &#123; /** * NOTE: * 1. åˆ›å»ºæ–°çš„ objectStore * 2. åˆ é™¤æ—§çš„ä¸éœ€è¦çš„ objectStore * 3. å¦‚æœéœ€è¦æ›´æ–°å·²æœ‰ objectStore çš„ç»“æ„ï¼Œéœ€è¦å…ˆåˆ é™¤åŸæœ‰çš„ objectStore ï¼Œç„¶åé‡æ–°åˆ›å»º */ // The IDBDatabase interface console.log('onupgradeneeded', event) var db = event.target.result // Create an objectStore for this database const objectStore = db.createObjectStore(OB_NAMES.UseKeyPath, &#123; keyPath: 'time' &#125;) &#125; 3. æ„å»ºæ•°æ®åº“indexedDB æ˜¯ä»¥å¯¹è±¡å­˜å‚¨ï¼ˆobject storeï¼‰è€Œä¸æ˜¯ä»¥è¡¨ç»“æ„å­˜å‚¨çš„ï¼Œä¸€ä¸ªæ•°æ®åº“å¯ä»¥å­˜å‚¨ä»»æ„å¤šä¸ªå­˜å‚¨å¯¹è±¡ã€‚æ¯å½“æœ‰ä¸€ä¸ªå€¼å­˜å‚¨åœ¨ object store é‡Œé¢ï¼Œå°±å¿…é¡»å’Œä¸€ä¸ª key å…³è”èµ·æ¥ã€‚æœ‰å‡ ç§æä¾› key çš„æ–¹æ³•ï¼Œå–å†³äº object store ä½¿ç”¨ key path è¿˜æ˜¯ key generator. å®ƒä»¬ä¹‹é—´åŒºåˆ«ï¼Œå€Ÿç”¨ MDN çš„ä¸€ä¸ªè¡¨æ ¼æ¥çœ‹ä¸€ä¸‹ï¼š Key Path (keyPath) Key Generator (autoIncrement) Description No No This object store can hold any kind of value, even primitive values like numbers and strings. You must supply a separate key argument whenever you want to add a new value. Yes No This object store can only hold JavaScript objects. The objects must have a property with the same name as the key path. No Yes This object store can hold any kind of value. The key is generated for you automatically, or you can supply a separate key argument if you want to use a specific key. Yes Yes This object store can only hold JavaScript objects. Usually a key is generated and the value of the generated key is stored in the object in a property with the same name as the key path. However, if such a property already exists, the value of that property is used as key rather than generating a new key. æ¥è‡ª https://developer.mozilla.org/en-US/docs/Web/API/IndexedDB_API/Using_IndexedDB å½“å­˜å‚¨çš„æ˜¯ä¸æ˜¯åŸºç¡€ç±»å‹è€Œæ˜¯ js å¯¹è±¡çš„æ—¶å€™ï¼Œæˆ‘ä»¬è¿˜å¯ä»¥ç»™ object store åˆ›å»ºç´¢å¼•ï¼Œè¿™æ ·å°±å¯ä»¥é€šè¿‡ç´¢å¼•å±æ€§æ¥æŸ¥æ‰¾æŸä¸€ä¸ªå…·ä½“çš„å¯¹è±¡ã€‚è€Œä¸”ï¼Œ ç´¢å¼•è¿˜èƒ½å†ä¸€å®šç¨‹åº¦ä¸Šçº¦æŸè¦å­˜å‚¨çš„å¯¹è±¡ã€‚å½“åˆ›å»ºç´¢å¼•çš„æ—¶å€™é€šè¿‡è®¾ç½®å”¯ä¸€æ ‡è¯†ï¼Œå¯ä»¥ç¡®ä¿ä¸ä¼šå­˜å‚¨æ‹¥æœ‰ä¸¤ä¸ªç›¸åŒç´¢å¼•å€¼çš„å¯¹è±¡ã€‚çœ‹ä¸€ä¸ªä¾‹å­ï¼Œå‡è®¾æˆ‘ä»¬æœ‰å¦‚ä¸‹æ—¥å¿—æ•°æ®éœ€è¦å­˜å‚¨ï¼š const TestData = [ &#123; event: 'NE-TEST1', level: 'warning', errorCode: 200, url: 'http://www.example.com', time: '2017/11/8 ä¸‹åˆ4:53:039', isUploaded: false &#125;, &#123; event: 'NE-TEST2', msg: 'æµ‹è¯•2', level: 'error', errorCode: 1000, url: 'http://www.example.com', time: '2017/11/8 ä¸‹åˆ4:53:042', isUploaded: false &#125;, &#123; event: 'NE-TEST3', msg: 'æµ‹è¯•3', level: 'info', errorCode: 3000, url: 'http://www.example.com', time: '2017/11/8 ä¸‹åˆ4:53:043', isUploaded: false &#125;, &#123; event: 'NE-TEST4', mgs: 'æµ‹è¯•4', level: 'info', url: 'http://www.example.com', time: '2017/11/8 ä¸‹åˆ4:53:0423', isUploaded: false &#125;] è¿™é‡Œæœ‰ä¸¤ç§å­˜å‚¨æ–¹å¼ï¼Œåˆ†åˆ«æ˜¯é€šè¿‡ key path å’Œ key generator. function obUseKeypath (db) &#123; const objectStore = db.createObjectStore(OB_NAMES.UseKeyPath, &#123; keyPath: 'time' &#125;) objectStore.createIndex('errorCode', 'errorCode', &#123; unique: false &#125;) objectStore.createIndex('level', 'level', &#123; unique: false &#125;)&#125;function obUseKeyGenerator (db) &#123; const objectStore = db.createObjectStore(OB_NAMES.UseKeyGenerator, &#123; autoIncrement: true &#125;) objectStore.createIndex('errorCode', 'errorCode', &#123; unique: false &#125;) objectStore.createIndex('time', 'time', &#123; unique: true &#125;) objectStore.createIndex('level', 'level', &#123; unique: false &#125;)&#125; 4. å¢åˆ æ”¹æŸ¥ä¸ºäº†æ–¹ä¾¿ä»‹ç»è¿™éƒ¨åˆ†çš„å†…å®¹ï¼Œæˆ‘ä»¬å…ˆæŠŠä¸Šä¸€èŠ‚çš„ä»£ç åŒ…è£…ä¸€ä¸‹ï¼Œä¸ºäº†æ–¹ä¾¿åç»­ä¾‹å­çš„è®²è§£ï¼š function openindexedDB () &#123; // The call to the open() function returns an IDBOpenDBRequest object with a result (success) or error value that you handle as an event. return new Promise((resolve, reject) =&gt; &#123; /** * NOTE: * 1. ç¬¬ä¸€æ¬¡æ‰“å¼€å¯èƒ½ä¼šæç¤ºç”¨æˆ·è·å– indexedDB çš„æƒé™ * 2. æµè§ˆå™¨éšèº«æ¨¡å¼ä¸ä¼šå­˜åœ¨æœ¬åœ°ï¼Œåªä¼šå­˜å‚¨åœ¨å†…å­˜ä¸­ */ const request = window.indexedDB.open(DB_NAME, DB_VERSION) request.onerror = function (event) &#123; // Do something with request.errorCode! console.log('open request failed', event) console.error(event.target.error) &#125; request.onsuccess = function (event) &#123; // Do something with request.result! // console.log('open request success', event) var db = event.target.result db.onerror = function (e) &#123; console.error('Database error: ', e.target.error) reject(e.target.error) &#125; db.onclose = e =&gt; &#123; console.error('Database close:', e.target.error) reject(e.target.error) &#125; resolve(db) &#125; request.onupgradeneeded = function (event) &#123; /** * NOTE: * 1. åˆ›å»ºæ–°çš„ objectStore * 2. åˆ é™¤æ—§çš„ä¸éœ€è¦çš„ objectStore * 3. å¦‚æœéœ€è¦æ›´æ–°å·²æœ‰ objectStore çš„ç»“æ„ï¼Œéœ€è¦å…ˆåˆ é™¤åŸæœ‰çš„ objectStore ï¼Œç„¶åé‡æ–°åˆ›å»º */ // The IDBDatabase interface console.log('onupgradeneeded', event) var db = event.target.result // Create an objectStore for this database obUseKeypath(db) obUseKeyGenerator(db) /** * NOTE: * transaction * ä¸‰ä¸ªäº‹ä»¶ï¼š * 1. error * 2. abort * 3. complete * ä¸¤ä¸ªæ–¹æ³•ï¼š * 1. abort * Rolls back all the changes to objects in the database associated with this transaction. If this transaction has been aborted or completed, then this method throws an error event. * 2. objectStore * Returns an IDBObjectStore object representing an object store that is part of the scope of this transaction. */ db.transaction.oncomplete = function (e) &#123; console.log('obj create success', e) &#125; &#125; &#125;)&#125;function obUseKeypath (db) &#123; const objectStore = db.createObjectStore(OB_NAMES.UseKeyPath, &#123; keyPath: 'time' &#125;) objectStore.createIndex('errorCode', 'errorCode', &#123; unique: false &#125;) objectStore.createIndex('level', 'level', &#123; unique: false &#125;)&#125;function obUseKeyGenerator (db) &#123; const objectStore = db.createObjectStore(OB_NAMES.UseKeyGenerator, &#123; autoIncrement: true &#125;) objectStore.createIndex('errorCode', 'errorCode', &#123; unique: false &#125;) objectStore.createIndex('time', 'time', &#123; unique: true &#125;) objectStore.createIndex('level', 'level', &#123; unique: false &#125;)&#125; è¿™æ ·æ¯æ¬¡æˆ‘ä»¬éœ€è¦å¯¹æ•°æ®åº“åšæ“ä½œçš„è¯åªéœ€è¦è°ƒç”¨ openindexedDB æ–¹æ³•å°±å¯ä»¥äº†ã€‚ äº‹åŠ¡æ‰€æœ‰å¯¹æ•°æ®åº“çš„æ“ä½œéƒ½æ˜¯å»ºç«‹åœ¨äº‹åŠ¡(transaction)ä¸Šçš„ï¼Œæœ‰ä¸‰ç§æ¨¡å¼(mode)ï¼šreadonly, readewrite, versionchange.è¦ä¿®æ”¹æ•°æ®åº“ç»“æ„çš„ schema ï¼Œå¿…é¡»åœ¨ versionchange æ¨¡å¼ä¸‹ã€‚è¯»å–å’Œä¿®æ”¹å¯¹åº”å¦å¤–ä¸¤ç§æ¨¡å¼ã€‚é€šè¿‡ IDBDatabase.transaction æ‰“å¼€ä¸€ä¸ª transaction, æ¥æ”¶ä¸¤ä¸ªå‚æ•°ï¼šstoreNames, mode.æ‰€æœ‰å¯¹æ•°æ®åº“çš„æ“ä½œéƒ½éµå¾ªä»¥ä¸‹æµç¨‹ï¼š Get database object Open transaction on database Open object store on transaction Perform operation on object store åŠ é€Ÿäº‹åŠ¡æ“ä½œï¼š å½“å®šä¹‰ä½œç”¨åŸŸæ—¶ï¼ˆscopeï¼‰ï¼Œ åªå®šä¹‰éœ€è¦çš„ object stores. è¿™æ ·ï¼Œå°±å¯ä»¥åœ¨ä¸é‡å çš„ä½œç”¨åŸŸä¸Šå¹¶è¡Œçš„æ‰§è¡Œå¤šä¸ªäº‹åŠ¡ã€‚ åªæœ‰åœ¨éœ€è¦çš„æ—¶å€™æ‰å¼€å¯ä¸€ä¸ª readwrite äº‹åŠ¡ã€‚å› ä¸ºåœ¨é‡å çš„ä½œç”¨åŸŸä¸Šå¯ä»¥å¹¶å‘æ‰§è¡Œå¤šä¸ª readonly äº‹åŠ¡ï¼Œä½†åªèƒ½æœ‰ä¸€ä¸ª readwrite äº‹åŠ¡ã€‚ å¢æ–¹æ³•å¦‚ä¸‹ï¼š é¦–å…ˆæ‹¿åˆ° db å¯¹è±¡ ç„¶åæ‰“å¼€ä¸€ä¸ª readwrite äº‹åŠ¡ é€šè¿‡äº‹åŠ¡æ‹¿åˆ° object store å¯¹è±¡ æ‰§è¡Œæ·»åŠ æ•°æ®æ“ä½œ /*** æ·»åŠ æ•°æ®* @param &#123;array&#125; docs è¦æ·»åŠ æ•°æ®* @param &#123;string&#125; objName ä»“åº“åç§°*/function addData (docs, objName) &#123; if (!(docs &amp;&amp; docs.length)) &#123; throw new Error('docs must be a array!') &#125; return openindexedDB().then(db =&gt; &#123; const tx = db.transaction([objName], 'readwrite') tx.oncomplete = e =&gt; &#123; console.log('tx:addData onsuccess', e) return Promise.resolve(docs) &#125; tx.onerror = e =&gt; &#123; e.stopPropagation() console.error('tx:addData onerror', e.target.error) return Promise.reject(e.target.error) &#125; tx.onabort = e =&gt; &#123; console.warn('tx:addData abort', e.target) return Promise.reject(e.target.error) &#125; const obj = tx.objectStore(objName) docs.forEach(doc =&gt; &#123; const req = obj.add(doc) /** * NOTE: * request * ä¸¤ä¸ªäº‹ä»¶ï¼š * 1. success * 2. error */ // req.onsuccess = e =&gt; console.log('obj:addData onsuccess', e.target) req.onerror = e =&gt; &#123; console.error('obj:addData onerror', e.target.error) &#125; &#125;) &#125;)&#125; å¦‚æœè¦æŠŠä¸Šé¢çš„ TestData åŒæ—¶ä½¿ç”¨ key generator å’Œ key path æ–¹å¼ä¿å­˜åˆ°æ•°æ®åº“ä¸­ï¼Œé‚£ä¹ˆæ–¹æ³•ï¼š addData(TestData, OB_NAMES.UseKeyGenerator).then(() =&gt; addData(TestData, OB_NAMES.UseKeyPath)) åˆ æµç¨‹å’Œæ·»åŠ ä¸€æ ·ï¼š /*** åˆ é™¤æŒ‡å®š key çš„æ•°æ®* @param &#123;string&#125; objName ä»“åº“åç§°* @param &#123;*&#125; key è¦åˆ é™¤æ•°æ®çš„ primary key å€¼*/function deleteData (objName, key) &#123; return openindexedDB().then(db =&gt; &#123; const tx = db.transaction([objName], 'readwrite') const obj = tx.objectStore(objName) const req = obj.delete(key) req.onsuccess = e =&gt; &#123; console.log(`readData success. key:$&#123;key&#125;,result:`, e.target.result) return Promise.resolve(e.target.result) &#125; req.onerror = e =&gt; &#123; console.error(`readData error. key:$&#123;key&#125;,error: $&#123;e.target.errorCode&#125;`) return Promise.reject(e.target.error) &#125; &#125;)&#125; å‡å¦‚è¦åˆ é™¤ UserKeyGenerator é‡Œ key ä¸º 1 å€¼ï¼Œé‚£ä¹ˆï¼š deleteData(OB_NAMES.UseKeyGenerator, 1) .then(doc =&gt; console.log(doc)) æŸ¥æ–¹æ³•ï¼š /*** è¯»å–ç»™å®š key çš„æ•°æ®* @param &#123;string&#125; objName ä»“åº“åç§°* @param &#123;*&#125; key è¦è¯»å–æ•°æ®çš„ primary key å€¼*/function readData (objName, key) &#123; return openindexedDB().then(db =&gt; &#123; const tx = db.transaction([objName]) const obj = tx.objectStore(objName) const req = obj.get(key) req.onsuccess = e =&gt; &#123; console.log(`readData success. key:$&#123;key&#125;,result:`, e.target.result) return Promise.resolve(e.target.result) &#125; req.onerror = e =&gt; &#123; console.error(`readData error. key:$&#123;key&#125;,error: $&#123;e.target.errorCode&#125;`) return Promise.reject(e.target.error) &#125; &#125;)&#125; ä¾‹å­ï¼š readData(OB_NAMES.UseKeyGenerator, 1) æ”¹æ–¹æ³•ï¼š /*** æ›´æ–°æŒ‡å®š key çš„æ•°æ®* @param &#123;string&#125; objName ä»“åº“åç§°* @param &#123;*&#125; key æŒ‡å®šçš„ key* @param &#123;object&#125; changes è¦ä¿®æ”¹çš„å±æ€§å€¼*/function updateData (objName, key, changes) &#123; return openindexedDB().then(db =&gt; &#123; return new Promise((resolve, reject) =&gt; &#123; const tx = db.transaction([objName], 'readwrite') const obj = tx.objectStore(objName) const req = obj.get(key) req.onsuccess = e =&gt; &#123; let doc = e.target.result let newDoc = Object.assign(doc, changes) const req = obj.put(newDoc) req.onsuccess = e =&gt; &#123; console.log(`updateData success, newDoc:`, newDoc, e) resolve(e.target.result) &#125; req.onerror = e =&gt; &#123; resolve(e.target.result) &#125; &#125; req.onerror = e =&gt; &#123; reject(e.target.error) &#125; &#125;) &#125;)&#125; ä¾‹å­ï¼š updateData(OB_NAMES.UseKeyGenerator, 1, &#123;time: '123'&#125;) .then(doc =&gt; console.log(doc)) .catch(console.error) ä½¿ç”¨æ¸¸æ ‡ (cursor)ä½¿ç”¨ get æ–¹æ³•éœ€è¦é¢„å…ˆçŸ¥é“ä¸€ä¸ª key. å¦‚æœéœ€è¦æ­¥è¿›æ•´ä¸ª object store çš„å€¼ï¼Œé‚£ä¹ˆå¯ä»¥ä½¿ç”¨ cursor. /*** é€šè¿‡ cursor è·å–åˆ¶å®šä»“åº“ä¸‹çš„æ‰€æœ‰æ•°æ®* @param &#123;string&#125; objName ä»“åº“åç§°* @param &#123;function&#125; [cb] å›è°ƒå‡½æ•°ï¼Œå¯¹æ¯æ¬¡å¾—åˆ°çš„ cursor è¿›è¡Œæ“ä½œ* @returns &#123;Promise.&lt;array.&lt;object&gt;&#125; åŒ…å«æ‰€æœ‰æ•°æ®çš„æ•°ç»„*/function getAllByCursor (objName, cb) &#123; return openindexedDB().then(db =&gt; &#123; const arr = [] const tx = db.transaction([objName]) const obj = tx.objectStore(objName) return new Promise(resolve =&gt; &#123; obj.openCursor().onsuccess = e =&gt; &#123; const cursor = e.target.result if (cursor) &#123; arr.push(cursor.value) cb &amp;&amp; cb(cursor) cursor.continue() &#125; else &#123; return resolve(arr) &#125; &#125; &#125;) &#125;)&#125; openCursor() æ–¹æ³•æ¥æ”¶å¤šä¸ªå‚æ•°ã€‚ ç¬¬ä¸€ä¸ªå‚æ•°ï¼Œå¯ä»¥ä¼ å…¥ä¸€ä¸ª key range å¯¹è±¡æ¥é™åˆ¶éœ€è¦è·å–å€¼çš„èŒƒå›´ã€‚ ç¬¬äºŒä¸ªå‚æ•°ï¼Œå¯ä»¥è®¾ç½®è¿­ä»£çš„æ–¹å‘ã€‚ æˆåŠŸå›è°ƒå‡½æ•°çš„ result å€¼å°±æ˜¯ cursor æœ¬èº«ï¼Œå½“å‰éå†å€¼å¯ä»¥é€šè¿‡ cursor å¯¹è±¡çš„ key å’Œ value å€¼è·å–ã€‚å¦‚æœè¦ç»§ç»­å¾€ä¸‹éå†ï¼Œé‚£ä¹ˆè°ƒç”¨ cursor çš„ continue() æ–¹æ³•ï¼Œå½“éå†ç»“æŸæ—¶ï¼Œ cursor ä¹Ÿå°±æ˜¯ event.target.result çš„å€¼ä¸º undefined.å¦‚æœè¦è·å– UseKeyGenerator ä»“åº“ä¸‹æ‰€æœ‰çš„å€¼ï¼Œé‚£ä¹ˆå¯ä»¥è¿™æ ·ï¼š getAllByCursor(OB_NAMES.UseKeyGenerator).then(console.log) é™¤äº† openCursor() å¤–ï¼Œè¿˜å¯ä»¥ä½¿ç”¨ openKeyCursor() æ¥è·å–æ‰€æœ‰å­˜å‚¨å¯¹è±¡çš„ä¸»é”®å€¼ï¼Œä½¿ç”¨æ–¹æ³•å’Œ openCursor ä¸€æ ·ï¼Œ ä½¿ç”¨ç´¢å¼• (index)åœ¨å»ºç«‹ object store æ—¶ï¼Œå¦‚æœæˆ‘ä»¬ç»™å®ƒåˆ›å»ºäº†ç´¢å¼•ã€‚è¿™æ—¶ï¼Œå°±å¯ä»¥ä½¿ç”¨ç´¢å¼•æ¥æŸ¥æ‰¾æŸä¸ªç‰¹å®šå±æ€§çš„å€¼ï¼š function getByIndex (objName, indexName, key) &#123; return openindexedDB().then(db =&gt; &#123; const index = db.transaction(objName).objectStore(objName).index(indexName) return new Promise(resolve =&gt; &#123; index.get(key).onsuccess = e =&gt; &#123; console.log('getByIndex', e.target.result) return resolve(e.target.result) &#125; &#125;) &#125;)&#125; æ¯”å¦‚ï¼Œæˆ‘ä»¬è¦æŸ¥æ‰¾ level ä¸º info çš„æ—¥å¿—ï¼Œé‚£ä¹ˆå¯ä»¥è¿™æ ·: getByIndex(OB_NAMES.UseKeyGenerator, 'level', 'info').then(doc =&gt; console.log(doc)) è®¾ç½®èŒƒå›´ (range) å’Œæ¸¸æ ‡ (cursors) çš„æ–¹å‘å¦‚æœéœ€è¦è®¾ç½® cursor éå†çš„èŒƒå›´ï¼Œå¯ä»¥ä½¿ç”¨ IDBKeyRange å¯¹è±¡å¹¶æŠŠä½œä¸ºç¬¬ä¸€ä¸ªå‚æ•°ç»™ openCursor() æˆ–è€… openKeyCursor() .ä¸€ä¸ª key range çš„å€¼ï¼Œå¯ä»¥è®¤ä¸ºæ˜¯ä¸€ä¸ªåŒºé—´ï¼ŒåŒºé—´çš„ç±»å‹å¯ä»¥æ˜¯å¼€åŒºé—´ä¹Ÿå¯ä»¥æ˜¯é—­åŒºé—´ã€‚çœ‹ä¸€äº›ä¾‹å­ï¼š /*** NOTE:* åªåŒ…æ‹¬ç»™å®šçš„å€¼*/getWithRangeByCursor( OB_NAMES.UseKeyGenerator,'errorCode', IDBKeyRange.only(1000)) .then(console.log) .catch(console.error)/*** NOTE:* é»˜è®¤æ˜¯é—­åŒºé—´*/getWithRangeByCursor( OB_NAMES.UseKeyGenerator,'errorCode', IDBKeyRange.lowerBound(1000)) .then(console.log) .catch(console.error)/*** NOTE:* è®¾ç½®ç¬¬äºŒä¸ªå¯é€‰å‚æ•°ä¸º trueï¼Œåˆ™ä¸ºå¼€åŒºé—´*/getWithRangeByCursor(OB_NAMES.UseKeyGenerator,'errorCode', IDBKeyRange.lowerBound(1000, true)) .then(console.log) .catch(console.error)/*** NOTE:* é—­åŒºé—´ï¼Œå¦‚æœç´¢å¼•æ˜¯æ•°å­—ï¼Œé‚£ä¹ˆæŒ‰ç…§æ•°å­—å¤§å°å†³å®šå‡åº*/getWithRangeByCursor(OB_NAMES.UseKeyGenerator,'errorCode', IDBKeyRange.bound(1000, 2000)) .then(console.log) .catch(console.error)/*** NOTE:* å·¦é—­å³å¼€åŒºé—´ï¼šå¦‚æœç´¢å¼•æ˜¯å­—ç¬¦ä¸²ï¼Œé‚£ä¹ˆå®‰è£… array.sort() çš„æ–¹å¼å†³å®šå‡åº*/getWithRangeByCursor(OB_NAMES.UseKeyGenerator,'time', IDBKeyRange.bound('2017/11/8 ä¸‹åˆ4:53:042', '2017/11/8 ä¸‹åˆ4:53:043', false, true)) .then(console.log) .catch(console.error) é™åºè¿­ä»£é»˜è®¤æƒ…å†µä¸‹ï¼Œè¿­ä»£çš„æ–¹å‘æ˜¯å‡åºçš„ã€‚å¦‚æœéœ€è¦æŒ‰ç…§é™åºè§„åˆ™è¿­ä»£ï¼Œé‚£ä¹ˆåªè¦æŠŠ prev ä½œä¸º openCursor() çš„ç¬¬äºŒä¸ªå‚æ•°å°±å¯ä»¥äº†ï¼š getWithDescendingByCursor(OB_NAMES.UseKeyGenerator, 'time') .then(console.log) .catch(console.error)]]></content>
      <categories>
        <category>æŠ€æœ¯</category>
      </categories>
  </entry>
  <entry>
    <title><![CDATA[Redux æºç è§£è¯»ï¼ˆé•¿æ–‡æ…å…¥ï¼‰]]></title>
    <url>%2F2017%2F10%2F14%2Fredux-source-code-read%2F</url>
    <content type="text"><![CDATA[Redux çš„æºç éå¸¸çš„ç²¾ç‚¼ï¼ŒçŸ­çŸ­å‡ ç™¾è¡Œä»£ç ï¼Œå»æä¾›äº†å¼ºå¤§çš„åŠŸèƒ½ã€‚ä»Šå¤©ï¼Œæˆ‘ä»¬å°±æ¥ä¸€æ¢ç©¶ç«Ÿã€‚ çœ‹æºç æœ€ç®€å•çš„æ–¹å¼ï¼Œå°±æ˜¯ä»å…¥å£æ–‡ä»¶æ¥çœ‹ï¼Œçœ‹å®ƒä¾èµ–å“ªäº›æ¨¡å—ï¼Œç„¶ååœ¨ä¾æ¬¡çœ‹è¿™äº›æ¨¡å—çš„å†…å®¹ï¼Œæœ€åä¹Ÿå°±å¯¹æ•´ä¸ªä»£ç æœ‰ä¸ªæ¸…æ™°çš„è®¤è¯†äº†ã€‚ æ‰€ä»¥æˆ‘ä»¬å°±ä»å…¥å£æ–‡ä»¶å¼€å§‹æ¥çœ‹ï¼š import createStore from './createStore'import combineReducers from './combineReducers'import bindActionCreators from './bindActionCreators'import applyMiddleware from './applyMiddleware'import compose from './compose'import warning from './utils/warning'/** This is a dummy function to check if the function name has been altered by minification.* If the function has been minified and NODE_ENV !== 'production', warn the user.*/function isCrushed() &#123;&#125;// å°±æ˜¯æ ¹æ® isCrushed æ˜¯å¦è¢«å‹ç¼©äº†ï¼Œæ¥è­¦å‘Šå¼€å‘è€…æ­£åœ¨éç”Ÿäº§ç¯å¢ƒä½¿ç”¨ä¸€ä¸ªå‹ç¼©è¿‡çš„ä»£ç ã€‚if ( process.env.NODE_ENV !== 'production' &amp;&amp; typeof isCrushed.name === 'string' &amp;&amp; isCrushed.name !== 'isCrushed') &#123; warning( 'You are currently using minified code outside of NODE_ENV === \'production\'. ' + 'This means that you are running a slower development build of Redux. ' + 'You can use looseenvify (https://github.com/zertosh/looseenvify) for browserify ' + 'or DefinePlugin for webpack (http://stackoverflow.com/questions/30030031) ' + 'to ensure you have the correct code for your production build.' )&#125;export &#123; createStore, combineReducers, bindActionCreators, applyMiddleware, compose&#125; å¯ä»¥çœ‹åˆ°å®ƒä¾èµ–äº†ä¸‹é¢è¿™å‡ ä¸ªæ¨¡å—ï¼š createStore combineReducers bindActionCreators applyMiddleware compose warning å…¶ä»–æ²¡ä»€ä¹ˆè¯´çš„ï¼Œå°±æ˜¯æŠŠä¸€äº› API æš´éœ²å‡ºå»ã€‚é‚£æˆ‘ä»¬å°±å…ˆæŒ‰ç…§è¿™ä¸ªæ¨¡å—ä¾èµ–é¡ºåºï¼Œä¾æ¬¡è¿›è¡Œè§£è¯»ã€‚ createStore é¦–å…ˆæ˜¯createStoreï¼Œ ç”¨æ¥åˆ›å»ºæ•´ä¸ªåº”ç”¨çš„ store .å®ƒçš„ä¾èµ–æ¨¡å—ï¼Œéƒ½æ˜¯äº›å·¥å…·å‡½æ•°ã€‚ isPlainObject $$observable export default function createStore(reducer, preloadedState, enhancer) &#123; if (typeof preloadedState === 'function' &amp;&amp; typeof enhancer === 'undefined') &#123; enhancer = preloadedState preloadedState = undefined &#125; if (typeof enhancer !== 'undefined') &#123; if (typeof enhancer !== 'function') &#123; throw new Error('Expected the enhancer to be a function.') &#125; return enhancer(createStore)(reducer, preloadedState) &#125; if (typeof reducer !== 'function') &#123; throw new Error('Expected the reducer to be a function.') &#125; è¿™é‡Œé€»è¾‘å¾ˆç®€å•ï¼š ç¬¬ä¸€ä¸ª if è¯­å¥çš„æ„æ€å°±æ˜¯è¯´ï¼Œå¦‚æœåªä¼ å…¥äº†ä¸¤ä¸ªå‚æ•°ï¼Œä¸”ç¬¬äºŒä¸ªå‚æ•° preloadedState ä¸ºå‡½æ•°ï¼Œé‚£ä¹ˆå°±è®¤ä¸ºç¬¬äºŒä¸ªå‚æ•°ä¸º enhancer . ç¬¬äºŒä¸ª if è¯­å¥ç¡®ä¿ enhancer æ˜¯ä¸€ä¸ªå‡½æ•°ï¼Œå¹¶ä¸”å½“ enhancer ä½œä¸ºå‚æ•°ä¼ å…¥çš„æ—¶å€™ï¼Œè¿”å› enhancer(createStore)(reucer, preloadedState) ä½œä¸º createStore çš„è¿”å›ï¼Œä¹Ÿå°±æ˜¯æˆ‘ä»¬è¦çš„ store. ç¬¬ä¸‰ä¸ª if è¯­å¥ç¡®ä¿ reducer æ˜¯ä¸€ä¸ªå‡½æ•°ã€‚ æ¥ç€å¾€ä¸‹çœ‹ï¼š let currentReducer = reducerlet currentState = preloadedStatelet currentListeners = []let nextListeners = currentListenerslet isDispatching = falsefunction ensureCanMutateNextListeners() &#123; if (nextListeners === currentListeners) &#123; nextListeners = currentListeners.slice() &#125;&#125;/** * Reads the state tree managed by the store. * * @returns &#123;any&#125; The current state tree of your application. */function getState() &#123; return currentState&#125; è¿™é‡Œï¼ŒæŠŠ preloadState èµ‹å€¼ç»™ currentState ï¼Œå¯ä»¥ä½¿åº”ç”¨ç›´æ¥é‡ç°æŸä¸€ä¸ªçŠ¶æ€ï¼Œä¹Ÿå¯ä»¥ç”¨æ¥åšæœåŠ¡ç«¯æ¸²æŸ“æ—¶ç›´æ¥ç”±åå°è®¡ç®—å‡ºæ¥ä½œä¸ºåº”ç”¨çš„åˆå§‹çŠ¶æ€ã€‚ ensureCanMutateNextListeners è¿™ä¸ªå‡½æ•°åœ¨ nextListeners === currentListeners æˆç«‹æ—¶æŠŠ currentListeners å¤åˆ¶äº†ä¸€ä»½èµ‹å€¼ç»™äº† nextListeners . ç”¨æ¥åšä»€ä¹ˆè¿˜ä¸å¤ªæ¸…æ¥šï¼Œå…ˆæ”¾ç€ã€‚ ç„¶åå®šä¹‰äº†ä¸€ä¸ªè·å–å½“å‰ state çš„æ–¹æ³•ã€‚ subscribeæ¥ä¸‹æ¥æ˜¯ä¸€ä¸ªsubscribe æ–¹æ³•ã€‚ /** * Adds a change listener. It will be called any time an action is dispatched, * and some part of the state tree may potentially have changed. You may then * call `getState()` to read the current state tree inside the callback. * * You may call `dispatch()` from a change listener, with the following * caveats: * * 1. The subscriptions are snapshotted just before every `dispatch()` call. * If you subscribe or unsubscribe while the listeners are being invoked, this * will not have any effect on the `dispatch()` that is currently in progress. * However, the next `dispatch()` call, whether nested or not, will use a more * recent snapshot of the subscription list. * * 2. The listener should not expect to see all state changes, as the state * might have been updated multiple times during a nested `dispatch()` before * the listener is called. It is, however, guaranteed that all subscribers * registered before the `dispatch()` started will be called with the latest * state by the time it exits. * * @param &#123;Function&#125; listener A callback to be invoked on every dispatch. * @returns &#123;Function&#125; A function to remove this change listener. */ function subscribe(listener) &#123; if (typeof listener !== 'function') &#123; throw new Error('Expected listener to be a function.') &#125; let isSubscribed = true ensureCanMutateNextListeners() nextListeners.push(listener) return function unsubscribe() &#123; if (!isSubscribed) &#123; return &#125; isSubscribed = false ensureCanMutateNextListeners() const index = nextListeners.indexOf(listener) nextListeners.splice(index, 1) &#125; &#125; æ³¨é‡Šå·²ç»è¯´çš„éå¸¸æ˜ç™½äº†ï¼Œæ³¨å†Œä¸€ä¸ª listener ç›‘å¬å‡½æ•°ï¼ŒæŠŠä»– push åˆ°å½“å‰çš„ç›‘å¬é‡Œåˆ—è¡¨ nextListener é‡Œé¢ï¼Œå¹¶è¿”å›ä¸€ä¸ª unsubscribe æ–¹æ³•ç”¨æ¥æ³¨é”€å½“å‰è¿™ä¸ªç›‘å¬å‡½æ•°ã€‚ dispatchfunction dispatch(action) &#123; if (!isPlainObject(action)) &#123; throw new Error( 'Actions must be plain objects. ' + 'Use custom middleware for async actions.' ) &#125; if (typeof action.type === 'undefined') &#123; throw new Error( 'Actions may not have an undefined "type" property. ' + 'Have you misspelled a constant?' ) &#125; if (isDispatching) &#123; throw new Error('Reducers may not dispatch actions.') &#125; try &#123; isDispatching = true currentState = currentReducer(currentState, action) &#125; finally &#123; isDispatching = false &#125; const listeners = currentListeners = nextListeners for (let i = 0; i &lt; listeners.length; i++) &#123; const listener = listeners[i] listener() &#125; return action&#125; ç”¨æ¥åˆ†å‘ä¸€ä¸ª action æ¥æ”¹å˜å½“å‰çš„ state . ä¹Ÿæ˜¯å”¯ä¸€çš„æ”¹å˜ state çš„æ–¹æ³•ã€‚æ¥å—ä¸€ä¸ªç”¨æ¥æè¿°åŠ¨ä½œçš„ action ä¸ºå‚æ•°ï¼Œå¹¶ä¸”æŠŠè¿™ä¸ª action ä½œä¸ºå‡½æ•°çš„è¿”å›å€¼ã€‚ ä»ä»£ç å‰é¢çš„åˆ¤æ–­å¯ä»¥çœ‹åˆ°ï¼Œaction å¿…é¡»æ˜¯ä¸€ä¸ªå­—é¢é‡å¯¹è±¡ï¼Œå¹¶ä¸”å¿…é¡»åŒ…å«ä¸€ä¸ª type çš„å±æ€§ã€‚ if (isDispatching) &#123; throw new Error('Reducers may not dispatch actions.')&#125; ä»è¿™é‡Œå¯ä»¥çœ‹åˆ°ï¼Œå¦‚æœå½“å‰æ­£å¤„äºä¸Šä¸€ä¸ª action çš„åˆ†å‘é˜¶æ®µï¼Œé‚£ä¹ˆå½“å‰è¿™ä¸ª action æœ‰å¯èƒ½ä¼šåˆ†å‘å¤±è´¥ã€‚ åé¢è¿›è¡Œå½“å‰ state çš„è®¡ç®—ï¼Œå¹¶ä¸”æŒ‰é¡ºåºå»è§¦å‘ nextListeners é‡Œé¢çš„ç›‘å¬å‡½æ•°ã€‚ replaceReducer/** * Replaces the reducer currently used by the store to calculate the state. * * You might need this if your app implements code splitting and you want to * load some of the reducers dynamically. You might also need this if you * implement a hot reloading mechanism for Redux. * * @param &#123;Function&#125; nextReducer The reducer for the store to use instead. * @returns &#123;void&#125; */function replaceReducer(nextReducer) &#123; if (typeof nextReducer !== 'function') &#123; throw new Error('Expected the nextReducer to be a function.') &#125; currentReducer = nextReducer dispatch(&#123; type: ActionTypes.INIT &#125;)&#125; æ›¿æ¢æ‰å½“å‰çš„ reducer å¹¶ä¸”åˆ†å‘ä¸€ä¸ªç”¨æ¥åˆå§‹åŒ–çš„å†…éƒ¨ action. export const ActionTypes = &#123; INIT: '@@redux/INIT'&#125; observable/** * Interoperability point for observable/reactive libraries. * @returns &#123;observable&#125; A minimal observable of state changes. * For more information, see the observable proposal: * https://github.com/tc39/proposalobservable */function observable() &#123; const outerSubscribe = subscribe return &#123; /** * The minimal observable subscription method. * @param &#123;Object&#125; observer Any object that can be used as an observer. * The observer object should have a `next` method. * @returns &#123;subscription&#125; An object with an `unsubscribe` method that can * be used to unsubscribe the observable from the store, and prevent further * emission of values from the observable. */ subscribe(observer) &#123; if (typeof observer !== 'object') &#123; throw new TypeError('Expected the observer to be an object.') &#125; function observeState() &#123; if (observer.next) &#123; observer.next(getState()) &#125; &#125; observeState() const unsubscribe = outerSubscribe(observeState) return &#123; unsubscribe &#125; &#125;, [$$observable]() &#123; return this &#125; &#125;&#125; ç”¨æ¥æŠŠä¸€ä¸ªå¯¹è±¡å˜æˆå¯ observe çš„æ–¹æ³•ï¼Œä¸€èˆ¬æƒ…å†µä¸‹ç”¨ä¸åˆ°ã€‚ æœ€å// When a store is created, an "INIT" action is dispatched so that every// reducer returns their initial state. This effectively populates// the initial state tree.dispatch(&#123; type: ActionTypes.INIT &#125;)return &#123; dispatch, subscribe, getState, replaceReducer, [$$observable]: observable&#125; åˆ†å‘ä¸€ä¸ª INIT çš„åˆå§‹åŒ– action ï¼Œç”¨æ¥è®©æ‰€æœ‰çš„ reducer æ¥è¿”å›é»˜è®¤çš„åˆå§‹åŒ– state. ç„¶åæŠŠä¸Šé¢çš„å‡½æ•°è¿”å›å‡ºæ¥ï¼Œä½œä¸ºé€šè¿‡ createStore åˆ›å»ºå‡ºæ¥çš„ store çš„ api. combineReducersè¿™ä¸ªæ¨¡å—ç”¨æ¥åˆå¹¶å¤šä¸ª reducers åˆ°ä¸€ä¸ª reducerï¼Œå®ƒçš„ä¾èµ–æ¨¡å—ï¼š ActionTypes isPlainObject warning æˆ‘ä»¬ä¾æ¬¡æ¥çœ‹çœ‹ combineReducers é‡Œé¢çš„å†…å®¹ã€‚ getUndefinedStateErrorMessagefunction getUndefinedStateErrorMessage(key, action) &#123; const actionType = action &amp;&amp; action.type const actionName = (actionType &amp;&amp; `"$&#123;actionType.toString()&#125;"`) || 'an action' return ( `Given action $&#123;actionName&#125;, reducer "$&#123;key&#125;" returned undefined. ` + `To ignore an action, you must explicitly return the previous state. ` + `If you want this reducer to hold no value, you can return null instead of undefined.` )&#125; å®šä¹‰ä¸€ä¸ªç”¨æ¥ç”Ÿæˆå½“ reducer è¿”å› undefined æ—¶é”™è¯¯å†…å®¹çš„å‡½æ•°ï¼Œæ²¡ä»€ä¹ˆå¥½è¯´çš„ã€‚ getUnexpectedStateShapeWarningMessagefunction getUnexpectedStateShapeWarningMessage(inputState, reducers, action, unexpectedKeyCache) &#123; const reducerKeys = Object.keys(reducers) const argumentName = action &amp;&amp; action.type === ActionTypes.INIT ? 'preloadedState argument passed to createStore' : 'previous state received by the reducer' if (reducerKeys.length === 0) &#123; return ( 'Store does not have a valid reducer. Make sure the argument passed ' + 'to combineReducers is an object whose values are reducers.' ) &#125; if (!isPlainObject(inputState)) &#123; return ( `The $&#123;argumentName&#125; has unexpected type of "` + (&#123;&#125;).toString.call(inputState).match(/\s([az|AZ]+)/)[1] + `". Expected argument to be an object with the following ` + `keys: "$&#123;reducerKeys.join('", "')&#125;"` ) &#125; const unexpectedKeys = Object.keys(inputState).filter(key =&gt; !reducers.hasOwnProperty(key) &amp;&amp; !unexpectedKeyCache[key] ) unexpectedKeys.forEach(key =&gt; &#123; unexpectedKeyCache[key] = true &#125;) if (unexpectedKeys.length &gt; 0) &#123; return ( `Unexpected $&#123;unexpectedKeys.length &gt; 1 ? 'keys' : 'key'&#125; ` + `"$&#123;unexpectedKeys.join('", "')&#125;" found in $&#123;argumentName&#125;. ` + `Expected to find one of the known reducer keys instead: ` + `"$&#123;reducerKeys.join('", "')&#125;". Unexpected keys will be ignored.` ) &#125;&#125; ä»å‡½æ•°å â€œè·å–æœªæœŸæœ›Stateç»“æ„é”™è¯¯ä¿¡æ¯â€ å¯ä»¥çœ‹å‡ºè¿™ä¸ªå‡½æ•°ç”¨æ¥ç”Ÿæˆå½“ä¼ å…¥çš„ inputState ç»„æˆç»“æ„é”™è¯¯æ—¶çš„é”™è¯¯ä¿¡æ¯ã€‚ Reducer å¿…é¡»æœ‰ key å€¼ï¼ˆè¿™ä¸åºŸè¯ï¼‰ï¼ŒinputState å¿…é¡»æ˜¯ä¸€ä¸ªå­—é¢é‡å¯¹è±¡ã€‚ä¸”inputState çš„ key éƒ½åº”è¯¥åœ¨ reducer çš„è‡ªèº«å±æ€§ï¼ˆOwnProperty, éåŸå‹é“¾ä¸Šçš„ï¼‰ä¸­ï¼Œå¹¶ä¸”ä¸èƒ½åœ¨ä¼ å…¥çš„ unexpectedKeyCache ä¸­ã€‚ assertReducerShapefunction assertReducerShape(reducers) &#123; Object.keys(reducers).forEach(key =&gt; &#123; const reducer = reducers[key] const initialState = reducer(undefined, &#123; type: ActionTypes.INIT &#125;) if (typeof initialState === 'undefined') &#123; throw new Error( `Reducer "$&#123;key&#125;" returned undefined during initialization. ` + `If the state passed to the reducer is undefined, you must ` + `explicitly return the initial state. The initial state may ` + `not be undefined. If you don't want to set a value for this reducer, ` + `you can use null instead of undefined.` ) &#125; const type = '@@redux/PROBE_UNKNOWN_ACTION_' + Math.random().toString(36).substring(7).split('').join('.') if (typeof reducer(undefined, &#123; type &#125;) === 'undefined') &#123; throw new Error( `Reducer "$&#123;key&#125;" returned undefined when probed with a random type. ` + `Don't try to handle $&#123;ActionTypes.INIT&#125; or other actions in "redux/*" ` + `namespace. They are considered private. Instead, you must return the ` + `current state for any unknown actions, unless it is undefined, ` + `in which case you must return the initial state, regardless of the ` + `action type. The initial state may not be undefined, but can be null.` ) &#125; &#125;)&#125; ç”¨æ¥ä¿è¯ä¼ å…¥çš„ reducers çš„ç»“æ„æ­£ç¡®ï¼Œä¹Ÿå°±è¯´è¯´æ¯ä¸ª reducer éƒ½å¿…é¡»åœ¨æ”¶åˆ° INIT action åè¿”å›ä¸€ä¸ªä¸ä¸º undefined çš„ initState ï¼Œå¹¶ä¸”è¿™ä¸ª action ä¸èƒ½åœ¨ reducer ä¸­ä¸“é—¨å»å¤„ç†ã€‚è¿™ä¹Ÿæ˜¯ä¸ºä»€ä¹ˆæˆ‘ä»¬åœ¨ reducer é‡Œé¢ä¸€å®šè¦æŒ‡å®šé»˜è®¤è¿”å›çš„ state çš„åŸå› . combineReducers/** * Turns an object whose values are different reducer functions, into a single * reducer function. It will call every child reducer, and gather their results * into a single state object, whose keys correspond to the keys of the passed * reducer functions. * * @param &#123;Object&#125; reducers An object whose values correspond to different * reducer functions that need to be combined into one. One handy way to obtain * it is to use ES6 `import * as reducers` syntax. The reducers may never return * undefined for any action. Instead, they should return their initial state * if the state passed to them was undefined, and the current state for any * unrecognized action. * * @returns &#123;Function&#125; A reducer function that invokes every reducer inside the * passed object, and builds a state object with the same shape. */export default function combineReducers(reducers) &#123; const reducerKeys = Object.keys(reducers) const finalReducers = &#123;&#125; for (let i = 0; i &lt; reducerKeys.length; i++) &#123; const key = reducerKeys[i] if (process.env.NODE_ENV !== 'production') &#123; if (typeof reducers[key] === 'undefined') &#123; warning(`No reducer provided for key "$&#123;key&#125;"`) &#125; &#125; if (typeof reducers[key] === 'function') &#123; finalReducers[key] = reducers[key] &#125; &#125; const finalReducerKeys = Object.keys(finalReducers) let unexpectedKeyCache if (process.env.NODE_ENV !== 'production') &#123; unexpectedKeyCache = &#123;&#125; &#125; let shapeAssertionError try &#123; assertReducerShape(finalReducers) &#125; catch (e) &#123; shapeAssertionError = e &#125; return function combination(state = &#123;&#125;, action) &#123; if (shapeAssertionError) &#123; throw shapeAssertionError &#125; if (process.env.NODE_ENV !== 'production') &#123; const warningMessage = getUnexpectedStateShapeWarningMessage(state, finalReducers, action, unexpectedKeyCache) if (warningMessage) &#123; warning(warningMessage) &#125; &#125; let hasChanged = false const nextState = &#123;&#125; for (let i = 0; i &lt; finalReducerKeys.length; i++) &#123; const key = finalReducerKeys[i] const reducer = finalReducers[key] const previousStateForKey = state[key] const nextStateForKey = reducer(previousStateForKey, action) if (typeof nextStateForKey === 'undefined') &#123; const errorMessage = getUndefinedStateErrorMessage(key, action) throw new Error(errorMessage) &#125; nextState[key] = nextStateForKey hasChanged = hasChanged || nextStateForKey !== previousStateForKey &#125; return hasChanged ? nextState : state &#125;&#125; combineReducer æ¥æ”¶ä¸€ä¸ªç”¨æ¥åˆå¹¶æˆä¸€ä¸ª reducer çš„å¯¹è±¡ï¼Œæ‰§è¡Œåè¿”å›ä¸€ä¸ªå‡½æ•°ï¼Œä¹Ÿå³æ˜¯æˆ‘ä»¬çš„ rootReducer . é¦–å…ˆæŠŠä¼ å…¥çš„ reducers æŒ‰ key éå†åèµ‹å€¼ç»™ finalReducers . ç„¶åè¿›è¡Œä¸€å †é”™è¯¯åˆ¤æ–­ï¼Œæœ€åè¿”å›ä¸€ä¸ªå‡½æ•° combination. ä¹Ÿå°±æ˜¯åˆå¹¶åçš„ reducer : let hasChanged = falseconst nextState = &#123;&#125;// éå† finalReducerKeysfor (let i = 0; i &lt; finalReducerKeys.length; i++) &#123;// æ‹¿åˆ°å½“å‰çš„ reducer key const key = finalReducerKeys[i]// æ ¹æ® reducer key æ‹¿åˆ°å…·ä½“çš„ reducer å‡½æ•° const reducer = finalReducers[key]// è·å–ä¹‹å‰çš„ key å¯¹åº”çš„ state const previousStateForKey = state[key]// è®¡ç®—ä¸‹ä¸€ä¸ªå½“å‰ key å¯¹åº”çš„ state const nextStateForKey = reducer(previousStateForKey, action)// å¦‚æœè®¡ç®—å‡ºæ¥çš„ state ä¸º undefined é‚£ä¹ˆæŠ¥é”™ if (typeof nextStateForKey === 'undefined') &#123; const errorMessage = getUndefinedStateErrorMessage(key, action) throw new Error(errorMessage) &#125;// æŠŠå½“å‰ key å¯¹åº”çš„ state èµ‹å€¼åˆ°ä¸‹ä¸€ä¸ªå…¨å±€ state nextState[key] = nextStateForKey// åªè¦æœ‰ä¸€ä¸ª key å¯¹åº”çš„ state å‘ç”Ÿäº†å˜åŒ–ï¼Œé‚£ä¹ˆå°±è®¤ä¸ºæ•´ä¸ª state å‘ç”Ÿäº†å˜åŒ– hasChanged = hasChanged || nextStateForKey !== previousStateForKey&#125;// æ ¹æ® state æ˜¯å¦å‘ç”Ÿå˜åŒ–ï¼Œè¿”å›ä¸‹ä¸€ä¸ª state æˆ–è€…ä¸Šä¸€ä¸ª state return hasChanged ? nextState : state &#125; bindActionCreatorsè¿™ä¸ªå‡½æ•°éå¸¸ç®€å•ï¼Œæ˜¯ä¸€ä¸ªè¾…åŠ©å‡½æ•°ã€‚ç”¨æ¥æŠŠ dispatch ç»‘å®šåˆ°ä¸€ä¸ª actionCreator ä¸Šï¼Œè¿™æ ·å½“å°±å¯ä»¥é€šè¿‡ç›´æ¥è°ƒç”¨ç»‘å®šåçš„å‡½æ•°æ¥åˆ†å‘ä¸€ä¸ª action ï¼Œè€Œä¸éœ€è¦ dispatch(actionCreator(â€¦)) äº†ã€‚ applyMiddlewareè¿™é‡Œæ˜¯é‡ç‚¹ï¼Œä¹Ÿæ˜¯ä¸€èˆ¬åˆå­¦è€…éš¾ä»¥ç†è§£çš„åœ°æ–¹ï¼Œæˆ‘ä»¬ä»”ç»†çœ‹çœ‹ã€‚import compose from './compose'/** * Creates a store enhancer that applies middleware to the dispatch method * of the Redux store. This is handy for a variety of tasks, such as expressing * asynchronous actions in a concise manner, or logging every action payload. * * See `reduxthunk` package as an example of the Redux middleware. * * Because middleware is potentially asynchronous, this should be the first * store enhancer in the composition chain. * * Note that each middleware will be given the `dispatch` and `getState` functions * as named arguments. * * @param &#123;...Function&#125; middlewares The middleware chain to be applied. * @returns &#123;Function&#125; A store enhancer applying the middleware. */export default function applyMiddleware(...middlewares) &#123; return (createStore) =&gt; (reducer, preloadedState, enhancer) =&gt; &#123; const store = createStore(reducer, preloadedState, enhancer) let dispatch = store.dispatch let chain = [] const middlewareAPI = &#123; getState: store.getState, dispatch: (action) =&gt; dispatch(action) &#125; chain = middlewares.map(middleware =&gt; middleware(middlewareAPI)) dispatch = compose(...chain)(store.dispatch) return &#123; ...store, dispatch &#125; &#125;&#125; ä»£ç é‡éå¸¸çŸ­ï¼Œä¾èµ–äº†æ¨¡å— compose . applyMiddleware å‡½æ•°æ¥å—ä¸€ç³»åˆ—ä¸­é—´ä»¶å‡½æ•°ä½œä¸ºå‚æ•°ï¼Œè¿”å›äº†ä¸€ä¸ªæ‹¥æœ‰ createStore æ–¹æ³•çš„é—­åŒ…å‡½æ•°ã€‚è¿™ä¸ªå‡½æ•°ï¼Œæ¥æ”¶ reducer ï¼ŒpreloadedState å’Œ enhancer ä¸ºå‚æ•°ã€‚é…åˆ createStore å‡½æ•°æ¥çœ‹ï¼šexport default function createStore(reducer, preloadedState, enhancer) &#123; if (typeof preloadedState === 'function' &amp;&amp; typeof enhancer === 'undefined') &#123; enhancer = preloadedState preloadedState = undefined &#125; if (typeof enhancer !== 'undefined') &#123; if (typeof enhancer !== 'function') &#123; throw new Error('Expected the enhancer to be a function.') &#125; return enhancer(createStore)(reducer, preloadedState) &#125; å½“æˆ‘ä»¬è¿™æ ·åˆ›å»º store çš„æ—¶å€™ï¼šconst store = createStore( reducer, applyMiddleware(...middleware)) createStore çš„ç¬¬äºŒä¸ªå‚æ•°æ˜¯ä¸ªå‡½æ•°ï¼Œæ‰€ä»¥å°±ä¼šèµ°åˆ°return enhancer(createStore)(reducer, preloadedState) ä¹Ÿå°±æ˜¯ç”± applyMiddleware(â€¦middleware) çš„ç»“æœæ¥ç®¡äº† createStore ,å®é™…çš„ store æ˜¯åœ¨ applyMiddleware é‡Œé¢å†æ¬¡è°ƒç”¨ createStore åˆ›å»ºçš„ï¼Œæ­¤æ—¶ä¼ å…¥çš„ preloadedState, enhancer éƒ½æ˜¯ undefined.// applyMiddlewareconst store = createStore(reducer, preloadedState, enhancer) å›è¿‡å¤´æ¥ç»§ç»­å¾€ä¸‹çœ‹ï¼Œ//applyMiddlewaredispatch = compose(...chain)(store.dispatch) è¿™é‡Œéœ€è¦å…ˆçœ‹ä¸€ä¸‹ compose è¿™ä¸ªæ¨¡å—ï¼Œå®ƒçš„ä½œç”¨å°±æ˜¯è¾¾åˆ° compose(f, g, h) &gt; (...args) =&gt; f(g(h(...args))) è¿™ä¹ˆä¸€ä¸ªç›®çš„ã€‚ é‚£ä¹ˆè¿™é‡Œçš„ dispatch å°±æ˜¯åœ¨ store.dispatch åŸºç¡€ä¸Šç»è¿‡ middleware åŠ å¼ºå°è£…åçš„ dispatch.const middlewareAPI = &#123; getState: store.getState, dispatch: (action) =&gt; dispatch(action)&#125;// æŠŠ middlewareAPI ä¼ å…¥åˆ°æ¯ä¸ªä¸­é—´ä»¶ä¸­chain = middlewares.map(middleware =&gt; middleware(middlewareAPI)) è¿™é‡Œçš„ dispatch: (action) =&gt; dispatch(action) ï¼Œè¯´æ˜æ¯ä¸ªä¸­é—´ä»¶ä¸­çš„ dispatch éƒ½æ˜¯ç‹¬ç«‹äº’ä¸å½±å“çš„ï¼Œä»¥å…æŸä¸ªä¸­é—´ä»¶ä¸­ä¿®æ”¹äº† dispatch çš„è¡Œä¸ºã€‚ç„¶åç»™æ¯ä¸ªä¸­é—´ä»¶éƒ½ä¼ å…¥ getState å’Œ dispatch ä½œä¸ºä»–ä»¬çš„å‚æ•°ã€‚return &#123; ...store, dispatch&#125; æœ€åç”¨åŠ å¼ºåçš„ dispatch è¦†ç›–æ‰åŸæœ‰ store ä¸­çš„ dispatch. æ•´ä¸ªä¸­é—´ä»¶çš„ä»£ç çœ‹ä¸‹æ¥ï¼Œå¯èƒ½æ¯”è¾ƒæŠ½è±¡ï¼Œæˆ‘ä»¬ç»“åˆä¸€ä¸ªä¾‹å­æ¥çœ‹ä¸€ä¸‹ï¼š errorMiddlewareexport default (&#123;dispatch, getState&#125;) =&gt; next =&gt; action =&gt; &#123; const &#123;error, payload&#125; = action if (error) &#123; dispatch(showToast(payload.message || payload.toString())) &#125; return next(action)&#125; è¿™æ˜¯æˆ‘ä»¬çš„ä¸€ä¸ªé”™è¯¯å¤„ç†ä¸­é—´ä»¶ã€‚å®ƒä¹Ÿæ˜¯ä¸€ä¸ªé«˜é˜¶å‡½æ•°ï¼Œé¦–å…ˆæ¥å— dispatch, getState ä¸ºå‚æ•°ï¼Œè¿”å›ä¸€ä¸ªæ¥å— next ä¸ºå‚æ•°çš„å‡½æ•°ã€‚dispatch, getState å°±æ˜¯åœ¨ä¸Šé¢ä»£ç é‡Œé€šè¿‡ middlewareAPI ä¼ å…¥äº†ä¸­é—´ä»¶ä¸­ã€‚ ç„¶åæˆ‘ä»¬ç»§ç»­çœ‹ errorMiddleware æ‰§è¡Œåè¿”å›çš„æ¥å— next ä¸ºå‚æ•°çš„å‡½æ•°ï¼Œè€Œ next å…¶å®å°±æ˜¯ä¸‹ä¸€ä¸ªè¦æ‰§è¡Œçš„ middleware . ç„¶åæˆ‘ä»¬éœ€è¦äº†è§£ä¸€ä¸‹ä¸­é—´ä»¶çš„æ‰§è¡Œé¡ºåºï¼Œé‚£ä¹ˆä¸ºäº†æ›´æ¸…æ¥šçš„æè¿°ä¸€ä¸ª action åœ¨ä¸­é—´ä»¶ä¸­çš„ä¼ æ’­è¿‡ç¨‹ï¼Œæˆ‘ä»¬å‡è®¾æœ‰ä»¥ä¸‹ä¸‰ä¸ªä¸­é—´ä»¶ï¼š const mid1 = () =&gt; next =&gt; action =&gt; &#123; console.log('mid1 before') next(action) console.log('mid1 after')&#125;const mid2 = () =&gt; next =&gt; action =&gt; &#123; console.log('mid2 before') next(action) console.log('mid2 after')&#125;const mid3 = () =&gt; next =&gt; action =&gt; &#123; console.log('mid3 before') next(action) console.log('mid3 after')&#125; æ‰§è¡Œ applyMiddleware( mid1, mid2, mid3 ), é‚£ä¹ˆç»è¿‡ä¸‹é¢ä»£ç ådispatch = compose(...chain)(store.dispatch) å°±å¯ä»¥å¾—åˆ°ï¼š dispatch = (store.dispatch) =&gt; mid1(mid2(mid3(store.dispatch))) å…¶ä¸­çš„ midx éƒ½æ˜¯å·²ç»æ‰§è¡Œäº† middleware(middlewareAPI) åè¿”å›çš„ç»“æœã€‚æ‰€ä»¥ mid3 çš„ next çš„å€¼å°±æ˜¯ store.dispatch ã€‚è€Œ mid2 çš„ next åˆ™æ˜¯ mid3(store.dispatch) ï¼Œä»¥æ­¤ç±»æ¨ï¼Œmid1 çš„ next å°±æ˜¯ mid2(mid3(store.dispatch)) , è¿™ä¹Ÿå°±æ˜¯åœ¨ middleware è°ƒç”¨ next èƒ½å¤Ÿè®© action è½¬åˆ°ä¸‹ä¸€ä¸ª middleware çš„åŸå› ã€‚ å½“æˆ‘ä»¬åˆ†å‘ä¸€ä¸ª action æ—¶ï¼Œæ§åˆ¶å°æ‰“å°å‡ºæ¥çš„é¡ºåºæ˜¯è¿™æ ·çš„ï¼š mid1 beforemid2 beforemid3 beforemid3 aftermid2 aftermid1 after å¯ä»¥çœ‹åˆ°å®ƒçš„æµç¨‹æ˜¯è¿™æ ·çš„ï¼š æ‰§è¡Œ mid1 ä¸­ next æ–¹æ³•è°ƒç”¨ä¹‹å‰çš„ä»£ç  æ‰§è¡Œ mid2 ä¸­ next æ–¹æ³•è°ƒç”¨ä¹‹å‰çš„ä»£ç  æ‰§è¡Œ mid3 ä¸­ next æ–¹æ³•è°ƒç”¨ä¹‹å‰çš„ä»£ç  æ‰§è¡Œ dispatch æ¥åˆ†å‘ action æ‰§è¡Œ mid3 ä¸­ next æ–¹æ³•è°ƒç”¨ä¹‹åçš„ä»£ç  æ‰§è¡Œ mid2 ä¸­ next æ–¹æ³•è°ƒç”¨ä¹‹åçš„ä»£ç  æ‰§è¡Œ mid1 ä¸­ next æ–¹æ³•è°ƒç”¨ä¹‹åçš„ä»£ç  çœ‹ä¸€å¼ å›¾ï¼Œä¼šæ›´æ˜ç™½ä¸€ç‚¹ï¼š å…¶ä¸­çº¢è‰²çš„è·¯å¾„å°±æ˜¯æˆ‘ä»¬åˆšæ‰æè¿°çš„æµç¨‹ã€‚å¯ä»¥çœ‹åˆ°å…¶ä¸­è¿˜æœ‰ä¸€æ¡é»‘è‰²è·¯å¾„ï¼Œä¹Ÿå°±æ˜¯å¦‚æœæˆ‘ä»¬ç›´æ¥åœ¨ mid2 ä¸­è°ƒç”¨ dispatch ä¼šæ€ä¹ˆæ ·ï¼Ÿæˆ‘ä»¬æ¥æ”¹ä¸€ä¸‹ mid2 const mid2 = (&#123; dispatch, getStore &#125;) =&gt; next =&gt; action =&gt; &#123; console.log('mid2 before') dispatch(action) console.log('mid2 after')&#125; æ”¹æˆè¿™æ ·ï¼ŒçŒœçŒœä¼šæ€æ ·ï¼Ÿ ç­”æ¡ˆæ˜¯ï¼Œä¼šä¸€ç›´åœ¨ mid1 before å’Œ mid2 before ä¸­æ­»å¾ªç¯ï¼Œå› ä¸ºè°ƒç”¨çš„ dispatch ä¼šè®©è¿™ä¸ª action é‡æ–°èµ°ä¸€éæ‰€æœ‰çš„ä¸­é—´ä»¶ï¼Œä¹Ÿå°±æ˜¯å›¾ä¸­çš„é»‘è‰²è·¯å¾„ã€‚é‚£ä¹ˆå½“æˆ‘ä»¬éœ€è¦åœ¨ä¸€ä¸ªä¸­é—´ä»¶ä¸­è°ƒç”¨ dispatch çš„æ—¶å€™ï¼Œæ˜¯è¦å¯¹ action åšåˆ¤æ–­çš„ï¼Œåªæœ‰æ»¡è¶³æŸä¸ªæ¡ä»¶çš„æ—¶å€™æ‰è°ƒç”¨ dispatch ä»¥å…å‡ºç°æ­»å¾ªç¯ã€‚æ”¹é€ ä¸€ä¸‹ mid2 const mid2 = (&#123; dispatch, getStore &#125;) =&gt; next =&gt; action =&gt; &#123; console.log('mid2 before') if(action.isApi) &#123; dispatch(&#123; isApi: false, ... &#125;) &#125; dispatch(action) console.log('mid2 after')&#125; è¿™æ ·ï¼Œå°±åªæœ‰åœ¨ action æ»¡è¶³ isApi æ¡ä»¶çš„æ—¶å€™æ‰ä¼šå–åˆ†å‘ä¸€ä¸ªä¸æ»¡è¶³ isApi æ¡ä»¶çš„ action ï¼Œè¿™æ ·å°±ä¸ä¼šæ­»å¾ªç¯ã€‚ä¸€èˆ¬åœ¨å¼‚æ­¥åˆ†å‘ action çš„æ—¶å€™ä¼šç»å¸¸ç”¨è¿™ä¸ªæ–¹æ³•ã€‚æ¯”å¦‚æˆ‘ä»¬ç”Ÿäº§ç¯å¢ƒç”¨æ¥è¯·æ±‚æ•°æ®çš„ callAPIMiddleware : export default (&#123;dispatch, getState&#125;) =&gt; &#123;return next =&gt; action =&gt; &#123; const &#123; types, api, callType, meta, body, shouldCallAPI &#125; = action const state = getState() const callTypeList = ['get', 'post'] if (!api) &#123; return next(action) &#125; if (!(types.start &amp;&amp; types.success &amp;&amp; types.failure)) &#123; throw new Error('Expected types has start &amp;&amp; success &amp;&amp; failure keys.') &#125; if (callTypeList.indexOf(callType) === 1) &#123; throw new Error(`API callType Must be one of $&#123;callTypeList&#125;`) &#125; const &#123;start, success, failure&#125; = types if (!shouldCallAPI(state)) &#123; return false &#125; dispatch(&#123; type: start, payload: &#123; ...body &#125;, meta &#125;) const mapCallTypeToFetch = &#123; post: () =&gt; fetch(api, &#123; method: 'post', // credentials è®¾ç½®ä¸ºæ¯æ¬¡è¯·æ±‚éƒ½å¸¦ä¸Š cookie credentials: 'include', headers: &#123; 'Accept': 'application/json', 'Content-Type': 'application/json' &#125;, body: JSON.stringify(bodyWithSource) &#125;), get: () =&gt; &#123; const toString = Object.keys(bodyWithSource).map(function (key, index) &#123; return encodeURIComponent(key) + '=' + encodeURIComponent(bodyWithSource[key]) &#125;).join('&amp;') return fetch(`$&#123;api&#125;?$&#123;toString&#125;`, &#123; method: 'get', credentials: 'include', headers: &#123; 'Accept': 'application/json' &#125; &#125;) &#125; &#125; const fetching = mapCallTypeToFetch[callType]()... çœç•¥ä¸€å †ä¸šåŠ¡é€»è¾‘ return fetching.then(res =&gt; &#123; clearTimeout(loadingTimer) dispatch(hideLoading()) if (res.ok) &#123; try &#123; return res.json() &#125; catch (err) &#123; throw new Error(err) &#125; &#125; else &#123; dispatch(showToast('è¯·æ±‚å‡ºé”™')) return Promise.reject(res.text()) &#125; &#125;) .then(res =&gt; resBehaviour(res)) .then(res =&gt; &#123; dispatch(&#123; type: success, meta, payload: &#123; ...res.data &#125; &#125;) return Promise.resolve(res) &#125;) .catch(err =&gt; &#123; console.error(`æ¥å£è¯·æ±‚å‡ºé”™,$&#123;err&#125;`) return Promise.reject(err) &#125;)&#125; å…³äºä¸­é—´ä»¶å°±è¯´è¿™ä¹ˆå¤šï¼Œå¤§å®¶åº”è¯¥ä¹Ÿèƒ½ç†è§£äº†ã€‚ æ€»ç»“æ€»ä½“ä¸Šçœ‹ï¼Œ Redux çš„æºç éå¸¸çŸ­ï¼Œä½†æ˜¯å„ç§å®ç°éƒ½éå¸¸çš„ç²¾å·§ã€‚ è€Œä¸”ä½œè€…éå¸¸é‡è§†å¯¹å¼€å‘è€…çš„ä½“éªŒï¼Œæ³¨é‡Šéå¸¸çš„è¯¦ç»†ï¼Œæ•´ä½“ä¸Šè¯»èµ·æ¥æ¯”è¾ƒè½»æ¾ã€‚é”™è¯¯å¤„ç†ä¹Ÿéå¸¸è¯¦ç»†ï¼Œå¯ä»¥å¸®åŠ©å¼€å‘è€…æ›´å®¹æ˜“çš„å®šä½é”™è¯¯ã€‚ æœ€åï¼Œç”±äºæœ¬äººèƒ½åŠ›æœ‰é™ï¼Œæ–‡ä¸­å¦‚æœæœ‰é”™è¯¯çš„åœ°æ–¹ï¼Œè¿˜è¯·æŒ‡å‡ºä¸€èµ·è®¨è®ºã€‚]]></content>
      <categories>
        <category>æŠ€æœ¯</category>
      </categories>
  </entry>
  <entry>
    <title><![CDATA[ReactDOM æ˜¯å¦‚ä½•æŠŠç»„ä»¶æ¸²æŸ“åˆ° DOM ä¸­çš„ï¼Ÿ]]></title>
    <url>%2F2017%2F09%2F20%2Fhow-react-render-component-to-dom%2F</url>
    <content type="text"><![CDATA[å½“æˆ‘ä»¬åœ¨å¼€å‘ React é¡¹ç›®ä¸­ï¼Œç¬¬ä¸€æ¬¡è°ƒç”¨ ReactDOM.render çš„æ—¶å€™éƒ½å‘ç”Ÿäº†ä»€ä¹ˆå‘¢ï¼Ÿä»Šå¤©å°±ä»æºç è§’åº¦æ¥è¿½è¸ªä¸€ä¸‹è¿™ä¸ªé—®é¢˜ï¼ˆä¸»è¦çœ‹æµç¨‹ï¼Œ è€Œä¸çº ç»“ä¸ç»†èŠ‚ï¼‰ã€‚ ReactDOMStackEntryé¦–å…ˆæˆ‘ä»¬å¯ä»¥ä» ReactDOM çš„å…¥å£æ–‡ä»¶ ReactDOMStackEntry.js ä¸­æ‰¾åˆ° render æ–¹æ³•ã€‚å¯ä»¥çœ‹åˆ°ï¼Œrender æ–¹æ³•æ˜¯ ReactMount ç»„ä»¶æä¾›çš„ã€‚var ReactDOMStack = &#123; findDOMNode: findDOMNode, render: ReactMount.render, unmountComponentAtNode: ReactMount.unmountComponentAtNode, version: ReactVersion, /* eslint-disable camelcase */ unstable_batchedUpdates: ReactGenericBatching.batchedUpdates, unstable_renderSubtreeIntoContainer: ReactMount.renderSubtreeIntoContainer, /* eslint-enable camelcase */ __SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED: &#123; // For TapEventPlugin which is popular in open source EventPluginHub: require('EventPluginHub'), // Used by test-utils EventPluginRegistry: require('EventPluginRegistry'), EventPropagators: require('EventPropagators'), ReactControlledComponent: require('ReactControlledComponent'), ReactDOMComponentTree, ReactDOMEventListener: require('ReactDOMEventListener'), ReactUpdates: ReactUpdates, &#125;,&#125;; ReactMount.renderrender: function(nextElement, container, callback) &#123; return ReactMount._renderSubtreeIntoContainer( null, nextElement, container, callback, );&#125;, åˆè°ƒåˆ°äº† _renderSubtreeIntoContainer æ–¹æ³•, è¿™ä¸ªæ–¹æ³•æ ¸å¿ƒå†…å®¹å¦‚ä¸‹ï¼š ReactMount._renderSubtreeIntoContainer_renderSubtreeIntoContainer: function( parentComponent, nextElement, container, callback, ) &#123; callback = callback === undefined ? null : callback; if (!React.isValidElement(nextElement)) &#123; ... &#125; // åˆ›å»ºä¸‹ä¸€ä¸ª wrapped å…ƒç´  var nextWrappedElement = React.createElement(TopLevelWrapper, &#123; child: nextElement, &#125;); var nextContext = getContextForSubtree(parentComponent); // æ‹¿åˆ°å½“å‰çš„é¡¶å±‚å®¹å™¨ç»„ä»¶ var prevComponent = getTopLevelWrapperInContainer(container); // å¯¹äºç¬¬ä¸€æ¬¡ render æ¥è¯´ï¼ŒprevComponent ä¸º null if (prevComponent) &#123; var prevWrappedElement = prevComponent._currentElement; var prevElement = prevWrappedElement.props.child; if (shouldUpdateReactComponent(prevElement, nextElement)) &#123; var publicInst = prevComponent._renderedComponent.getPublicInstance(); var updatedCallback = callback &amp;&amp; function() &#123; validateCallback(callback); callback.call(publicInst); &#125;; ReactMount._updateRootComponent( prevComponent, nextWrappedElement, nextContext, container, updatedCallback, ); return publicInst; &#125; else &#123; ReactMount.unmountComponentAtNode(container); &#125; &#125; var reactRootElement = getReactRootElementInContainer(container); var containerHasReactMarkup = reactRootElement &amp;&amp; !!internalGetID(reactRootElement); var containerHasNonRootReactChild = hasNonRootReactChild(container); var shouldReuseMarkup = containerHasReactMarkup &amp;&amp; !prevComponent &amp;&amp; !containerHasNonRootReactChild; var component = ReactMount._renderNewRootComponent( nextWrappedElement, container, shouldReuseMarkup, nextContext, callback, )._renderedComponent.getPublicInstance(); return component; &#125;, è¿™é‡Œæœ‰å‡ ä¸ªæ–¹æ³•ï¼Œåˆ†åˆ«æ˜¯ï¼š getTopLevelWrapperInContainer shouldUpdateReactComponent _renderNewRootComponent getTopLevelWrapperInContainerè¿™ä¸ªæ–¹æ³•ç”¨æ¥æ‹¿åˆ°ç°æœ‰çš„é¡¶å±‚å®¹å™¨ç»„ä»¶ï¼Œç›¸å…³ä»£ç å¦‚ä¸‹ã€‚function getTopLevelWrapperInContainer(container) &#123; var root = getHostRootInstanceInContainer(container); return root ? root._hostContainerInfo._topLevelWrapper : null;&#125;function getHostRootInstanceInContainer(container) &#123; var rootEl = getReactRootElementInContainer(container); var prevHostInstance = rootEl &amp;&amp; ReactDOMComponentTree.getInstanceFromNode(rootEl); return prevHostInstance &amp;&amp; !prevHostInstance._hostParent ? prevHostInstance : null;&#125; è°ƒç”¨äº†ä¸¤ä¸ªæ–¹æ³•ï¼ŒgetReactRootElementInContainer å’Œ ReactDOMComponentTree.getInstanceFromNode. getReactRootElementInContainerfunction getReactRootElementInContainer(container) &#123; if (!container) &#123; return null; &#125; if (container.nodeType === DOCUMENT_NODE) &#123; return container.documentElement; &#125; else &#123; return container.firstChild; &#125;&#125; ReactDOMComponentTree è¿™ä¸ªæ¨¡å—æœ‰ä¸‰ä¸ªæ–¹æ³•ï¼Œåˆ†åˆ«æ˜¯ï¼š precacheChildNodes åœ¨ DOM èŠ‚ç‚¹ä¸Šå­˜å‚¨ç›¸åº”çš„ React å®ä¾‹ getNodeFromInstance ä»ä¸€ä¸ªå®ä¾‹ä¸Šè·å–åˆ°å¯¹åº”çš„ DOM èŠ‚ç‚¹ getInstanceFromNode ä»ä¸€ä¸ª DOM èŠ‚ç‚¹ä¸Šè·å–åˆ°å¯¹åº”çš„å®ä¾‹ shouldUpdateReactComponentåˆ¤æ–­æ˜¯å¦éœ€è¦æ›´æ–°ç»„ä»¶ã€‚function shouldUpdateReactComponent(prevElement, nextElement) &#123; var prevEmpty = prevElement === null || prevElement === false; var nextEmpty = nextElement === null || nextElement === false; if (prevEmpty || nextEmpty) &#123; return prevEmpty === nextEmpty; &#125; var prevType = typeof prevElement; var nextType = typeof nextElement; if (prevType === 'string' || prevType === 'number') &#123; return nextType === 'string' || nextType === 'number'; &#125; else &#123; return ( nextType === 'object' &amp;&amp; prevElement.type === nextElement.type &amp;&amp; prevElement.key === nextElement.key ); &#125;&#125; å¯ä»¥çœ‹åˆ°é€»è¾‘æ˜¯è¿™æ ·çš„ï¼š å‰åä¸¤æ¬¡å…ƒç´ éƒ½ä¸º null è¿”å› true å¦‚æœæ˜¯ textComponentï¼Œé‚£ä¹ˆç›´æ¥æ›´æ–° å¦åˆ™å½“ä¸º DOM å…ƒç´ æˆ–è€… React å…ƒç´ æ—¶ï¼Œä¸” type å’Œ key éƒ½ç›¸åŒæ—¶è¿”å› true, æ‰§è¡Œ update ReactMount._renderNewRootComponentè¿™ä¸ªæ–¹æ³•æ˜¯ _renderSubtreeIntoContainer çš„æ ¸å¿ƒï¼Œç”¨æ¥æŠŠä¸€ä¸ªæ–°çš„ç»„ä»¶æŒ‚è½½åˆ° DOM ä¸­ã€‚_renderNewRootComponent: function( nextElement, container, shouldReuseMarkup, context, callback,) &#123; // é€šè¿‡ instantiateReactComponent æ‹¿åˆ° React Component ç»„ä»¶å®ä¾‹ var componentInstance = instantiateReactComponent(nextElement, false); if (callback) &#123; componentInstance._pendingCallbacks = [ function() &#123; validateCallback(callback); callback.call( componentInstance._renderedComponent.getPublicInstance(), ); &#125;, ]; &#125; // The initial render is synchronous but any updates that happen during // rendering, in componentWillMount or componentDidMount, will be batched // according to the current batching strategy. ReactUpdates.batchedUpdates( batchedMountComponentIntoNode, componentInstance, container, shouldReuseMarkup, context, ); var wrapperID = componentInstance._instance.rootID; instancesByReactRootID[wrapperID] = componentInstance; return componentInstance;&#125;, instantiateReactComponentæ ¹æ®ä¼ å…¥çš„å‚æ•°æ¥ç”Ÿæˆä¸åŒçš„ React Component, æ ¸å¿ƒä»£ç ï¼šif (node === null || node === false) &#123; instance = ReactEmptyComponent.create(instantiateReactComponent);&#125; else if (typeof node === 'object') &#123; var element = node; var type = element.type; if (typeof type !== 'function' &amp;&amp; typeof type !== 'string') &#123; ... &#125; // Special case string values if (typeof element.type === 'string') &#123; instance = ReactHostComponent.createInternalComponent(element); &#125; else if (isInternalComponentType(element.type)) &#123; // This is temporarily available for custom components that are not string // representations. I.e. ART. Once those are updated to use the string // representation, we can drop this code path. instance = new element.type(element); // We renamed this. Allow the old name for compat. :( if (!instance.getHostNode) &#123; instance.getHostNode = instance.getNativeNode; &#125; &#125; else &#123; instance = new ReactCompositeComponentWrapper(element); &#125;&#125; else if (typeof node === 'string' || typeof node === 'number') &#123; instance = ReactHostComponent.createInstanceForText(node);&#125; else &#123; invariant(false, 'Encountered invalid React node of type %s', typeof node);&#125; ä»ä»£ç ä¸­å¯ä»¥çœ‹åˆ°ï¼Œæ ¹æ® element.type çš„ä¸åŒï¼Œæœ‰ä¸‰ä¸ªæ–¹æ³•æ¥ç”Ÿæˆä¸‰ç§ä¸åŒ React ç»„ä»¶å®ä¾‹ï¼Œåˆ†åˆ«ä¸ºï¼š ReactHostComponent.createInternalComponent(element) new ReactCompositeComponentWrapper(element) ReactHostComponent.createInstanceForText(node); å¯èƒ½è¯»è€…ä¼šæ³¨æ„åˆ°ï¼Œå½“ isInternalComponentType(element.type) æˆç«‹æ—¶ï¼Œ instance = new element.type(element); çš„è¿™æ®µä»£ç è¢«æˆ‘å¿½ç•¥äº†ï¼Œé‚£æ˜¯å› ä¸ºè¿™ä¸ªæ˜¯ React å°è£…çš„å†…éƒ¨ç»„ä»¶ä¸æ˜¯ç”±å­—ç¬¦ä¸²è¡¨è¾¾æ—¶çš„è§£å†³æ–¹æ³•ï¼Œæˆ‘ä»¬æ˜¯ä¸ç”¨å…³å¿ƒçš„ã€‚æˆ‘ä»¬æ¥çœ‹ä¸Šé¢çš„ä¸‰ä¸ªæ–¹æ³•ï¼Œå…¶ä¸­ä¸¤ä¸ªæ–¹æ³•éƒ½è°ƒç”¨äº† ReactHostComponent æ¨¡å—ã€‚ ReactHostComponentæ ¸å¿ƒä»£ç :var ReactHostComponentInjection = &#123; // This accepts a class that receives the tag string. This is a catch all // that can render any kind of tag. injectGenericComponentClass: function(componentClass) &#123; genericComponentClass = componentClass; &#125;, // This accepts a text component class that takes the text string to be // rendered as props. injectTextComponentClass: function(componentClass) &#123; textComponentClass = componentClass; &#125;,&#125;;function createInternalComponent(element) &#123; invariant( genericComponentClass, 'There is no registered component for the tag %s', element.type, ); return new genericComponentClass(element);&#125;/** * @param &#123;ReactText&#125; text * @return &#123;ReactComponent&#125; */function createInstanceForText(text) &#123; return new textComponentClass(text);&#125; å°±æ˜¯æä¾›äº†ä¸¤ä¸ªæ–¹æ³•æ¥åˆ›å»ºç»„ä»¶ï¼Œè€Œå…¶ä¸­ä¸¤ä¸ªç»„ä»¶ class çš„å®ç°æ˜¯é€šè¿‡å…¶ä»–æ¨¡å—æ³¨å…¥è¿›æ¥çš„ï¼Œé‚£åˆ°åº•æ˜¯ä»å“ªé‡Œæ³¨å…¥è¿›æ¥çš„å‘¢ã€‚ç»è¿‡ä¸€ç•ªæŸ¥æ‰¾ï¼Œå‘ç°æ˜¯åœ¨ ReactDOMStackInjection.js ä¸­æ³¨å…¥çš„ï¼Œæˆ‘ä»¬çœ‹ä¸€ä¸‹ä»£ç ï¼š var ReactComponentEnvironment = require('ReactComponentEnvironment');var ReactComponentBrowserEnvironment = require('ReactComponentBrowserEnvironment');var ReactDOMComponent = require('ReactDOMComponent');var ReactDOMComponentTree = require('ReactDOMComponentTree');var ReactDOMEmptyComponent = require('ReactDOMEmptyComponent');var ReactDOMTextComponent = require('ReactDOMTextComponent');var ReactDefaultBatchingStrategy = require('ReactDefaultBatchingStrategy');var ReactEmptyComponent = require('ReactEmptyComponent');var ReactGenericBatching = require('ReactGenericBatching');var ReactHostComponent = require('ReactHostComponent');var ReactReconcileTransaction = require('ReactReconcileTransaction');var ReactUpdates = require('ReactUpdates');var findDOMNode = require('findDOMNode');var getHostComponentFromComposite = require('getHostComponentFromComposite');ReactGenericBatching.injection.injectStackBatchedUpdates( ReactUpdates.batchedUpdates,);ReactHostComponent.injection.injectGenericComponentClass(ReactDOMComponent);ReactHostComponent.injection.injectTextComponentClass(ReactDOMTextComponent);ReactEmptyComponent.injection.injectEmptyComponentFactory(function( instantiate,) &#123; return new ReactDOMEmptyComponent(instantiate);&#125;);ReactUpdates.injection.injectReconcileTransaction(ReactReconcileTransaction);ReactUpdates.injection.injectBatchingStrategy(ReactDefaultBatchingStrategy);ReactComponentEnvironment.injection.injectEnvironment( ReactComponentBrowserEnvironment,);findDOMNode._injectStack(function(inst) &#123; inst = getHostComponentFromComposite(inst); return inst ? ReactDOMComponentTree.getNodeFromInstance(inst) : null;&#125;); å¯ä»¥çœ‹åˆ°ï¼Œè¿™ä¸ªæ¨¡å—é€šè¿‡ ReactHostComponent.injection æ³¨å…¥äº† ReactDOMComponent å’Œ ReactDOMTextComponent. åŒæ—¶ä¹Ÿæ³¨å…¥äº†ä¸€äº›å…¶ä»–æ¨¡å—ï¼Œè¿™ä¸ªæˆ‘ä»¬åé¢è¿˜ä¼šç”¨åˆ°ã€‚ è¿™é‡Œ ReactDOMComponent å’Œ ReactDOMTextComponent æ‰æ˜¯çœŸæ˜¯çš„ç”Ÿæˆ DOM æ ‡è®°çš„æ¨¡å—ï¼Œå®ƒä»¬çš„å†…å®¹è¿‡å¤šï¼Œä½†æ˜¯ä»£ç æ¯”è¾ƒç®€å•äº†ï¼Œè¿™é‡Œå°±ä¸ç»†è¯´äº†ã€‚æ€»ä¹‹è°ƒç”¨è¿™ä¸¤ä¸ªæ¨¡å—çš„ mountComponent æ–¹æ³•éƒ½ä¼šç”Ÿæˆ DOM Markup. ä¸åŒçš„åœ°æ–¹åœ¨äºï¼Œ ReactDOMComponent ä¼šå¦‚ä¸‹ç»“æ„çš„ Markup&#123; node: node, children: [], html: null, text: null, toString&#125; è€Œ ReactDOMTextComponent ä¼šç›´æ¥ç”Ÿæˆè¦æ¸²æŸ“åœ¨ DOM é‡Œé¢çš„ String ç±»å‹çš„æ–‡æœ¬ã€‚ ReactCompositeComponentæœ€åä¸€ç±»ç»„ä»¶åº”è¯¥æ˜¯ ReactCompositeComponentWrapper, ä½†æŸ¥çœ‹ instantiateReactComponent é‡Œé¢çš„è¿™ä¸¤æ®µä»£ç ï¼švar ReactCompositeComponentWrapper = function(element) &#123; this.construct(element);&#125;;Object.assign( ReactCompositeComponentWrapper.prototype, ReactCompositeComponent, &#123; _instantiateReactComponent: instantiateReactComponent, &#125;,); å½“è°ƒç”¨ this.construct çš„æ—¶å€™ï¼Œè¿˜æ˜¯è°ƒç”¨åˆ°äº† ReactCompositeComponent ,è¿™ä¸ªå°±æ˜¯ç”¨æˆ·è‡ªå®šä¹‰çš„ç»„ä»¶ã€‚ ReactUpdates.batchedUpdatesfunction batchedUpdates(callback, a, b, c, d, e) &#123; ensureInjected(); return batchingStrategy.batchedUpdates(callback, a, b, c, d, e);&#125; å¯ä»¥çœ‹åˆ° ReactUpdates é‡Œé¢æ˜¯ é€šè¿‡ batchingStrategy è°ƒç”¨ batchedUpdate. è€Œ batchingStrategy ä¹Ÿæ˜¯å‰é¢è¯´åˆ°çš„ ReactDOMStackInjection æ¥æ³¨å…¥è¿›å»çš„ã€‚ReactUpdates.injection.injectReconcileTransaction(ReactReconcileTransaction);ReactUpdates.injection.injectBatchingStrategy(ReactDefaultBatchingStrategy); ReactUpdates å…±æ³¨å…¥äº†ä¸¤ä¸ªæ¨¡å—ï¼Œåˆ†åˆ«æ˜¯ ReactReconcileTransaction å’Œ ReactDefaultBatchingStrategy. å…ˆæ¥çœ‹ä¸€ä¸‹ ReactDefaultBatchingStrategy, ReactReconcileTransaction åé¢ç¢°åˆ°å†è¯´ï¼Œæ¥çœ‹ä¸€ä¸‹å®ƒçš„ä»£ç ï¼švar ReactUpdates = require('ReactUpdates');var Transaction = require('Transaction');var emptyFunction = require('fbjs/lib/emptyFunction');var RESET_BATCHED_UPDATES = &#123; initialize: emptyFunction, close: function() &#123; ReactDefaultBatchingStrategy.isBatchingUpdates = false; &#125;,&#125;;var FLUSH_BATCHED_UPDATES = &#123; initialize: emptyFunction, close: ReactUpdates.flushBatchedUpdates.bind(ReactUpdates),&#125;;var TRANSACTION_WRAPPERS = [FLUSH_BATCHED_UPDATES, RESET_BATCHED_UPDATES];function ReactDefaultBatchingStrategyTransaction() &#123; this.reinitializeTransaction();&#125;Object.assign(ReactDefaultBatchingStrategyTransaction.prototype, Transaction, &#123; getTransactionWrappers: function() &#123; return TRANSACTION_WRAPPERS; &#125;,&#125;);var transaction = new ReactDefaultBatchingStrategyTransaction();var ReactDefaultBatchingStrategy = &#123; isBatchingUpdates: false, /** * Call the provided function in a context within which calls to `setState` * and friends are batched such that components aren't updated unnecessarily. */ batchedUpdates: function(callback, a, b, c, d, e) &#123; var alreadyBatchingUpdates = ReactDefaultBatchingStrategy.isBatchingUpdates; ReactDefaultBatchingStrategy.isBatchingUpdates = true; // The code is written this way to avoid extra allocations if (alreadyBatchingUpdates) &#123; // å¦‚æœå½“å‰ updates å·²ç»å®Œæˆï¼Œé‚£ä¹ˆç›´æ¥è°ƒç”¨ callback return callback(a, b, c, d, e); &#125; else &#123; // é€šè¿‡äº‹åŠ¡çš„æ–¹å¼å»è°ƒç”¨ callback return transaction.perform(callback, null, a, b, c, d, e); &#125; &#125;,&#125;; å¯ä»¥çœ‹åˆ°æˆ‘ä»¬å‰é¢è°ƒç”¨çš„ ReactUpdates.batchUpdates å®é™…ä¸Šè°ƒç”¨åˆ°äº†è¿™é‡Œçš„ batchedUpdates, é‡Œé¢çš„é€»è¾‘ä¹Ÿå¾ˆç®€å•ã€‚ è¿™é‡Œé¢ç”¨åˆ°äº†ä¸€ä¸ª transaction æ–¹æ³•ï¼Œè¿™é‡Œæˆ‘ç†è§£ä¸ºâ€œäº‹åŠ¡â€ã€‚ä¹Ÿå°±æ˜¯è¯´å½“å¦‚æœå½“å‰æ­£åœ¨è¿›è¡Œä¸€æ¬¡æ›´æ–°ï¼Œé‚£ä¹ˆå°±é€šè¿‡äº‹åŠ¡çš„æ–¹å¼å»è°ƒç”¨è¿™ä¸ª callback. transactiontransaction åœ¨ React æºç é‡Œé¢ä½¿ç”¨éå¸¸å¹¿æ³›ï¼Œä½œç”¨æ˜¯é€šè¿‡äº‹åŠ¡çš„æ–¹å¼å»è°ƒç”¨ä¸€ä¸ªæ–¹æ³•ã€‚ ç”¨ä¸€ä¸ªæˆ–å¤šä¸ª wrapper æŠŠæ–¹æ³•åŒ…è£¹èµ·æ¥ï¼Œåœ¨æ–¹æ³•è°ƒç”¨å‰å’Œè°ƒç”¨ä¹‹åä¾æ¬¡æ‰§è¡Œã€‚äº‹åŠ¡ä¼šç¡®ä¿ wrapper çš„ initialize å’Œ close æ–¹æ³•éƒ½ä¼šæ‰§è¡Œï¼Œæ— è®ºè¦æ‰§è¡Œçš„æ–¹æ³•æ‰§è¡ŒæˆåŠŸæˆ–å¤±è´¥æŠ¥é”™ï¼Œçœ‹çœ‹å®ƒçš„æºç è§£é‡Šå°±å¾ˆæ˜ç™½äº†ï¼š* &lt;pre&gt;* wrappers (injected at creation time)* + +* | |* +-----------------|--------|--------------+* | v | |* | +---------------+ | |* | +--| wrapper1 |---|----+ |* | | +---------------+ v | |* | | +-------------+ | |* | | +----| wrapper2 |--------+ |* | | | +-------------+ | | |* | | | | | |* | v v v v | wrapper* | +---+ +---+ +---------+ +---+ +---+ | invariants* perform(anyMethod) | | | | | | | | | | | | maintained* +-----------------&gt;|-|---|-|---|--&gt;|anyMethod|---|---|-|---|-|--------&gt;* | | | | | | | | | | | |* | | | | | | | | | | | |* | | | | | | | | | | | |* | +---+ +---+ +---------+ +---+ +---+ |* | initialize close |* +-----------------------------------------+* &lt;/pre&gt; è¿™é‡Œæˆ‘ä»¬å†å›åˆ°åˆšæ‰çš„ ReactDefaultBatchingStrategy, ä»£ç é‡Œé¢æœ‰ä¸¤ä¸ª wrapper.var RESET_BATCHED_UPDATES = &#123; initialize: emptyFunction, close: function() &#123; ReactDefaultBatchingStrategy.isBatchingUpdates = false; &#125;,&#125;;var FLUSH_BATCHED_UPDATES = &#123; initialize: emptyFunction, close: ReactUpdates.flushBatchedUpdates.bind(ReactUpdates),&#125;; å®ƒä»¬çš„ initialize æ–¹æ³•éƒ½æ˜¯ä¸€ä¸ªç©ºå‡½æ•°ï¼Œclose æ–¹æ³•åˆ†åˆ«æ˜¯ï¼š æŠŠå½“å‰çš„æ›´æ–°çŠ¶æ€ç½®ä¸º false flushBatchedUpdates è¿™ä¸ªæ–¹æ³•æ¯”è¾ƒå¤æ‚ï¼Œè¿™é‡Œä¸å±•å¼€è®²ï¼Œä¸»è¦æ˜¯ç¡®ä¿æ‰€æœ‰ç»„ä»¶èƒ½å¤Ÿæ­£ç¡®æ›´æ–°ï¼ˆflushBatchedUpdates-&gt;ReactUpdates.runBatchedUpdates-&gt;ReactCompositeComponent.performUpdateIfNecessaryï¼‰ ç°åœ¨å›åˆ°ä¸Šé¢çš„ä»£ç ï¼šReactUpdates.batchedUpdates( batchedMountComponentIntoNode, componentInstance, container, shouldReuseMarkup, context,); å¯ä»¥çŸ¥é“ï¼Œè¿™é‡Œæ˜¯è°ƒç”¨äº† batchedMountComponentIntoNode è¿›è¡Œåç»­çš„å·¥ä½œã€‚function batchedMountComponentIntoNode( componentInstance, container, shouldReuseMarkup, context,) &#123; var transaction = ReactUpdates.ReactReconcileTransaction.getPooled( /* useCreateElement */ !shouldReuseMarkup, ); transaction.perform( mountComponentIntoNode, null, componentInstance, container, transaction, shouldReuseMarkup, context, ); ReactUpdates.ReactReconcileTransaction.release(transaction);&#125; è¿™é‡Œç¬¬ä¸€æ¡èµ‹å€¼è¯­å¥å°±ç”¨åˆ°äº†ä¸Šé¢æ³¨å…¥åˆ° ReactUpdates é‡Œé¢çš„å¦ä¸€ä¸ªæ¨¡å— ReactReconcileTransaction å³ React çš„è°ƒåº¦äº‹åŠ¡æ¨¡å—ã€‚var SELECTION_RESTORATION = &#123; initialize: ReactInputSelection.getSelectionInformation, close: ReactInputSelection.restoreSelection,&#125;;/** * Suppresses events (blur/focus) that could be inadvertently dispatched due to * high level DOM manipulations (like temporarily removing a text input from the * DOM). */var EVENT_SUPPRESSION = &#123; initialize: function() &#123; var currentlyEnabled = ReactBrowserEventEmitter.isEnabled(); ReactBrowserEventEmitter.setEnabled(false); return currentlyEnabled; &#125;, close: function(previouslyEnabled) &#123; ReactBrowserEventEmitter.setEnabled(previouslyEnabled); &#125;,&#125;;/** * Provides a queue for collecting `componentDidMount` and * `componentDidUpdate` callbacks during the transaction. */var ON_DOM_READY_QUEUEING = &#123; initialize: function() &#123; this.reactMountReady.reset(); &#125;, close: function() &#123; this.reactMountReady.notifyAll(); &#125;,&#125;;...var TRANSACTION_WRAPPERS = [ SELECTION_RESTORATION, EVENT_SUPPRESSION, ON_DOM_READY_QUEUEING,];function ReactReconcileTransaction(useCreateElement) &#123; this.reinitializeTransaction(); this.renderToStaticMarkup = false; this.reactMountReady = CallbackQueue.getPooled(); this.useCreateElement = useCreateElement;&#125;...var Mixin = &#123; getTransactionWrappers: function() &#123; return TRANSACTION_WRAPPERS; &#125;, ...&#125;Object.assign(ReactReconcileTransaction.prototype, Transaction, Mixin);PooledClass.addPoolingTo(ReactReconcileTransaction); è¿™é‡Œä¹Ÿæ˜¯é€šè¿‡äº‹åŠ¡çš„æ–¹å¼å»è°ƒç”¨ï¼Œå®ƒæœ‰ä¸‰ä¸ª wrapper: Selection Restoration åœ¨æ›´æ–°è¿‡ç¨‹ä¸­å°½å¯èƒ½ä¸æ‰“æ‰°ç”¨æˆ·çš„é€‰ä¸­èŒƒå›´ï¼ˆselection rangeï¼‰ Event Suppression æŠ‘åˆ¶ä¸€äº›ä¸éœ€è¦çš„äº‹ä»¶åˆ†å‘ï¼Œæ¯”å¦‚æš‚æ—¶æ€§åˆ é™¤ä¸€ä¸ª input å…ƒç´ è€Œå¯¼è‡´çš„ blur äº‹ä»¶ On DOM Ready Queueing åœ¨äº‹åŠ¡æ‰§è¡Œè¿‡ç¨‹ä¸­ï¼Œæä¾›ä¸€ä¸ª componentDidMount å’Œ componentDidUpdate å›è°ƒå‡½æ•°çš„é˜Ÿåˆ— è€Œåé¢çš„ getPooled æ–¹æ³•ï¼Œæ˜¯ä¸€ä¸ªåˆ©ç”¨å®ä¾‹æ± æ¥é¿å…ä¸å¿…è¦çš„ GC çš„æ–¹æ³•ï¼Œä¸è¿‡å¤šè§£é‡Šã€‚ æ¥ç€ç”¨è¿™ä¸ªäº‹åŠ¡çš„æ–¹å¼å»è°ƒç”¨ mountComponentIntoNode, è¯¦ç»†çš„çœ‹ä¸€ä¸‹è¿™ä¸ªæ–¹æ³•ã€‚ mountComponentIntoNodefunction mountComponentIntoNode( wrapperInstance, container, transaction, shouldReuseMarkup, context,) &#123; var markup = ReactReconciler.mountComponent( wrapperInstance, transaction, null, ReactDOMContainerInfo(wrapperInstance, container), context, 0 /* parentDebugID */, ); wrapperInstance._renderedComponent._topLevelWrapper = wrapperInstance; ReactMount._mountImageIntoNode( markup, container, wrapperInstance, shouldReuseMarkup, transaction, );&#125; è¿™é‡Œçœ‹åˆ°äº†é‡ç‚¹å˜é‡ markup çš„æ“ä½œ, è¿™ä¸ªå°±æ˜¯æˆ‘ä»¬æœ€ç»ˆè¦å¾€ DOM é‡Œé¢æ¸²æŸ“çš„å¯¹è±¡ã€‚é€šè¿‡ ReactReconciler.mountComponent æ–¹æ³•æ¥å¾—åˆ° markup. ReactReconciler.mountComponent çš„æºç å¦‚ä¸‹ï¼šmountComponent: function( internalInstance, transaction, hostParent, hostContainerInfo, context, parentDebugID, // 0 in production and for roots) &#123; var markup = internalInstance.mountComponent( transaction, hostParent, hostContainerInfo, context, parentDebugID, ); if ( internalInstance._currentElement &amp;&amp; internalInstance._currentElement.ref != null ) &#123; transaction.getReactMountReady().enqueue(attachRefs, internalInstance); &#125; return markup;&#125;, å®ƒåˆè°ƒç”¨äº† internalInstance.mountComponent, è¿™é‡Œçš„ internalInstance å…¶å®å°±æ˜¯å‰é¢è¯´çš„é€šè¿‡ instantiateReactComponent å¾—åˆ°çš„ React Component å®ä¾‹ã€‚// _renderNewRootComponentvar componentInstance = instantiateReactComponent(nextElement, false) è¿™é‡Œçš„ nextElement æ˜¯è¦æ¸²æŸ“çš„ React root å…ƒç´ ã€‚// _renderSubtreeIntoContainer var nextWrappedElement = React.createElement(TopLevelWrapper, &#123; child: nextElement, &#125;); TopLevelWrapper çš„å®ç°ï¼Œéœ€è¦æ³¨æ„å®ƒçš„ render æ–¹æ³•ã€‚var TopLevelWrapper = function() &#123; this.rootID = topLevelRootCounter++;&#125;;TopLevelWrapper.prototype.isReactComponent = &#123;&#125;;TopLevelWrapper.prototype.render = function() &#123; return this.props.child;&#125;;TopLevelWrapper.isReactTopLevelWrapper = true; å®ƒçš„ render æ–¹æ³•é‡Œé¢è¿”å›çš„ this.props.child å°±æ˜¯ nextElement ä¹Ÿå°±æ˜¯æˆ‘ä»¬é¡¹ç›®ä»£ç é‡Œé¢å…¥å£ ReactDOM.render(&lt;App/&gt;,document.getElementById(&#39;root&#39;)) é‡Œé¢çš„ &lt;App/&gt;. å›åˆ° ReactReconciler.mountComponent é‡Œé¢çš„ internalInstance.mountComponent. é€šè¿‡å‰é¢çš„è®²åˆ°çš„ instantiateReactComponent æˆ‘ä»¬çŸ¥é“è¿”å›çš„ç»„ä»¶æœ‰ä¸‰ç±»ï¼š ReactDOMComponent ReactDOMTextComponent ReactCompositeComponent å‰ä¸¤ç±»å¾ˆç®€å•ï¼Œéƒ½æ˜¯ DOM æœ¬èº«çš„å…ƒç´ ï¼Œæœ€ç»ˆä¼šæ¸²æŸ“å‡ºæ¥å®ƒä»¬å¯¹åº”çš„ Markup. è€Œ ReactCompositeComponent æ¯”è¾ƒå¤æ‚ï¼Œæˆ‘ä»¬åªçœ‹å…³é”®ä»£ç ï¼š//ReactCompositeComponent.mountComponent var Component = this._currentElement.type; var updateQueue = transaction.getUpdateQueue(); // Initialize the public class var doConstruct = shouldConstruct(Component); var inst = this._constructComponent( doConstruct, publicProps, publicContext, updateQueue, ); var renderedElement; if (!doConstruct &amp;&amp; (inst == null || inst.render == null)) &#123; renderedElement = inst; inst = new StatelessComponent(Component); this._compositeType = ReactCompositeComponentTypes.StatelessFunctional; &#125; else &#123; ã€‚... &#125; markup = this.performInitialMount( renderedElement, hostParent, hostContainerInfo, transaction, context, ); é¦–å…ˆå¾—åˆ° inst , å¾—åˆ° inst çš„è°ƒç”¨æ ˆæ˜¯è¿™æ ·çš„ï¼š this._constructComponent -&gt; this._constructComponentWithoutOwner// this._constructComponentWithoutOwner... var Component = this._currentElement.type; if (doConstruct) &#123; if (__DEV__) &#123; return measureLifeCyclePerf( () =&gt; new Component(publicProps, publicContext, updateQueue), this._debugID, 'ctor', ); &#125; else &#123; return new Component(publicProps, publicContext, updateQueue); &#125; &#125;... æ ¹æ® _currentElement.type ç”Ÿæˆ Component å®ä¾‹, currentElement.type å³å°±æ˜¯ç»§æ‰¿è‡ª React.Component çš„ class æˆ–è€…çº¯æ¸²æŸ“ç»„ä»¶ function.ç„¶åå£°æ˜ renderElement, å¯¹äº stateless (å‡½æ•°å£°æ˜çš„çº¯æ¸²æŸ“ç»„ä»¶)ç»„ä»¶ï¼ŒrenderElement = inst, å¦åˆ™ä¸º undefined. æ¥ç€æ¥çœ‹ performInitialMount, if (renderedElement === undefined) &#123; renderedElement = this._renderValidatedComponent();&#125;var nodeType = ReactNodeTypes.getType(renderedElement);this._renderedNodeType = nodeType;var child = this._instantiateReactComponent( renderedElement, nodeType !== ReactNodeTypes.EMPTY /* shouldHaveDebugID */,);this._renderedComponent = child;var markup = ReactReconciler.mountComponent( child, transaction, hostParent, hostContainerInfo, this._processChildContext(context), debugID,); å¯¹äºé stateless ç»„ä»¶æ—¶ï¼Œéœ€è¦å¯¹ renderedElement èµ‹å€¼ã€‚è°ƒç”¨æ ˆä¸ºï¼š this._renderValidatedComponent -&gt; this._renderValidatedComponentWithoutOwnerOrContext_renderValidatedComponentWithoutOwnerOrContext: function() &#123; var inst = this._instance; var renderedElement; if (__DEV__) &#123; renderedElement = measureLifeCyclePerf( () =&gt; inst.render(), this._debugID, 'render', ); &#125; else &#123; renderedElement = inst.render(); &#125; if (__DEV__) &#123; // We allow auto-mocks to proceed as if they're returning null. if (renderedElement === undefined &amp;&amp; inst.render._isMockFunction) &#123; // This is probably bad practice. Consider warning here and // deprecating this convenience. renderedElement = null; &#125; &#125; return renderedElement;&#125;, æœ€ç»ˆå¾—åˆ° renderedElement ä¹Ÿå°±æ˜¯ inst.render() åçš„ç»“æœã€‚ å†å¾€ä¸‹èµ° child = this._instantiateReactComponent(renderedElement) å’Œ markup = ReactReconciler.mountComponent(child,...) . å¯ä»¥è”æƒ³åˆ°ï¼Œè¿™é‡Œä¼šä¸æ–­çš„å¾ªç¯é€’å½’è°ƒç”¨ ReactReconciler.mountComponent, çŸ¥é“ child ä¸æ˜¯ ReactCompositeComponent ä¸ºæ­¢ï¼Œå¾—åˆ°æœ€ç»ˆçš„ MarkUp. MarkUp çš„æ•°æ®ç»“æ„å¯ä»¥åœ¨ DOMLazyTree ä¸­æ‰¾åˆ°ï¼š// DOMLazyTree&#123; node: node, children: [], html: null, text: null, toString,&#125; æ‹¿åˆ°äº† MarkUpï¼Œå°±åªå‰©ä¸‹æœ€åä¸€æ­¥äº†ï¼Œé€šè¿‡ ReactMount._mountImageIntoNode æ¥å§ MarkUp æŒ‚è½½åˆ°å®é™… DOM ä¸­ã€‚ ReactMount._mountImageIntoNode_mountImageIntoNode: function( markup, container, instance, shouldReuseMarkup, transaction,) &#123; invariant( isValidContainer(container), 'mountComponentIntoNode(...): Target container is not valid.', ); // é¦–æ¬¡æ¸²æŸ“ï¼Œè¿™é‡Œä¸º shouldReuseMarkup = false ï¼Œé‡Œé¢éƒ½æ˜¯æ›´æ–°çš„é€»è¾‘ if (shouldReuseMarkup) &#123; ... &#125; // é¦–æ¬¡æ¸²æŸ“ï¼Œtransaction.useCreateElement = true if (transaction.useCreateElement) &#123; while (container.lastChild) &#123; container.removeChild(container.lastChild); &#125; DOMLazyTree.insertTreeBefore(container, markup, null); &#125; else &#123; setInnerHTML(container, markup); ReactDOMComponentTree.precacheNode(instance, container.firstChild); &#125;&#125;, é€»è¾‘å¾ˆç®€å•ï¼Œæœ‰ä¸¤ç§æ–¹å¼æŠŠ markup æ¸²æŸ“åˆ° DOM ä¸­ï¼š æ¸…ç©ºç»™å®šçš„å®¹å™¨ç»„ä»¶ï¼Œç„¶åæŠŠ markup æ’å…¥åˆ°ç»™å®šçš„å®¹å™¨ä¸­ è°ƒç”¨ setInnerHTML æ¥æŠŠ markup æ’å…¥åˆ°ç»™å®šå®¹å™¨ä¸­ï¼Œå¹¶ç¼“å­˜è™šæ‹Ÿ DOM åˆ°å®é™…çš„ DOM èŠ‚ç‚¹ä¸Š å¯¹äºåˆæ¬¡æ¸²æŸ“ï¼Œ ä¼šæ‰§è¡Œç¬¬ä¸€ç§æ–¹æ³•ï¼Œæ¸…ç©ºå®¹å™¨ç»„ä»¶ï¼ŒæŠŠ markup æŒ‚è½½åˆ°å®é™…çš„ DOM ä¸­ã€‚è°ƒç”¨æ ˆï¼šDOMLazyTree.insertTreeBefore -&gt; insertTreeChildrenfunction insertTreeChildren(tree) &#123; if (!enableLazy) &#123; return; &#125; var node = tree.node; var children = tree.children; if (children.length) &#123; for (var i = 0; i &lt; children.length; i++) &#123; insertTreeBefore(node, children[i], null); &#125; &#125; else if (tree.html != null) &#123; setInnerHTML(node, tree.html); &#125; else if (tree.text != null) &#123; setTextContent(node, tree.text); &#125;&#125; é€’å½’çš„æŒ‚è½½æ‰€æœ‰å­ç»„ä»¶åˆ° DOM ä¸­ã€‚ æ€»ç»“é‚£ä¹ˆåˆ°è¿™é‡Œæ•´ä¸ªåˆæ¬¡æ¸²æŸ“çš„é€»è¾‘å°±ç®—èµ°å®Œäº†ï¼Œæ•´ä½“ä¸Šå¯ä»¥çœ‹åˆ° React å’Œ ReactDOM çš„ä»£ç æŠ½è±¡ç¨‹åº¦éå¸¸é«˜ï¼Œä»¥è‡³äºä»£ç é˜…è¯»èµ·æ¥éå¸¸çš„ç»•ã€‚æœ¬æ–‡ä¹Ÿåªé™äºæ•´ä½“çš„æµç¨‹ï¼Œæ²¡æœ‰æ·±ç©¶ç»†èŠ‚ï¼Œå› ä¸ºç»†èŠ‚å¤ªå¤šäº†ã€‚ æœ€åæ•´ç†äº†ä¸€ä¸ª ReactDOM.render æ‰§è¡Œåæµç¨‹å…³ç³»å›¾ï¼Œèƒ½ä¸€å®šç¨‹åº¦ä¸Šå¸®åŠ©ç†è§£å®ƒçš„æ•´è¿‡è¿‡ç¨‹ï¼šå›¾å¾ˆå¤§ï¼Œç‚¹å‡»æ”¾å¤§åä¹Ÿçœ‹ä¸æ¸…ï¼Œå»ºè®®ä¿å­˜åˆ°æœ¬åœ°åæµè§ˆï¼Œä¼šçœ‹çš„æ¸…æ™°ç‚¹ã€‚ ç›¸å…³æ–‡ç«  React æºç æµ…æä¹‹ - å…¥å£æ–‡ä»¶ React æºç æµ…æä¹‹ - ReactBaseClasses React æºç æµ…æä¹‹ - ReactChildren React æºç æµ…æä¹‹ - ReactElement React æºç æµ…æä¹‹ - onlyChildren]]></content>
      <categories>
        <category>æŠ€æœ¯</category>
      </categories>
      <tags>
        <tag>React</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[React æºç æµ…æä¹‹ - onlyChildren]]></title>
    <url>%2F2017%2F09%2F20%2Freact-source-code-analyze-5%2F</url>
    <content type="text"><![CDATA[è¿™ä¸ªæ¨¡å—çš„ä»£ç éå¸¸ç®€å•ï¼ŒçŸ­çŸ­åå‡ è¡Œã€‚ var ReactElement = require('ReactElement');var invariant = require('fbjs/lib/invariant');function onlyChild(children) &#123; invariant( ReactElement.isValidElement(children), 'React.Children.only expected to receive a single React element child.', ); return children;&#125;module.exports = onlyChild; å°±æ˜¯åˆ¤æ–­ä¼ å…¥çš„ children æ˜¯ä¸æ˜¯ä¸€ä¸ªåˆæ³•çš„ React å…ƒç´ ï¼Œå¦åˆ™å°±æŠ›é”™å‡ºæ¥ã€‚åˆ¤æ–­çš„é€»è¾‘å°±åœ¨ ReactElement æ¨¡å—é‡Œé¢ï¼šReactElement.isValidElement = function(object) &#123; return ( typeof object === 'object' &amp;&amp; object !== null &amp;&amp; object.$$typeof === REACT_ELEMENT_TYPE );&#125;; æ€»ç»“é‚£ä¹ˆåˆ°è¿™é‡Œä¸ºæ­¢ï¼Œæ‰€æœ‰ React æœ¬èº«æä¾›çš„ API å’Œæ¨¡å—å°±ç®—æ˜¯çœ‹å®Œäº†ã€‚ä½†æ˜¯å…‰çœ‹ React æœ¬èº«çš„è¿™äº›ä»£ç ï¼Œå…¶å®å¹¶ä¸èƒ½è§£å†³ä»€ä¹ˆé—®é¢˜ï¼Œæ¯”å¦‚ React Component çš„ç”Ÿå‘½å‘¨æœŸæ˜¯æ€ä¹ˆå®ç°çš„ï¼Œ setState æ˜¯æ€ä¹ˆè¿ä½œçš„ï¼Œä»¥åŠæ˜¯å¦‚ä½•æŠŠ React Component æ¸²æŸ“åˆ°æµè§ˆå™¨ä¸­çš„ï¼Œè¿˜æœ‰å¾ˆå¤šé—®é¢˜ã€‚æœ‰æœºä¼šæˆ‘ä¼šç»§ç»­å¯»æ‰¾è¿™äº›ç­”æ¡ˆã€‚ ç›¸å…³æ–‡ç«  React æºç æµ…æä¹‹ - å…¥å£æ–‡ä»¶ React æºç æµ…æä¹‹ - ReactBaseClasses React æºç æµ…æä¹‹ - ReactChildren React æºç æµ…æä¹‹ - ReactElement React æºç æµ…æä¹‹ - onlyChildren]]></content>
      <categories>
        <category>æŠ€æœ¯</category>
      </categories>
      <tags>
        <tag>React</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[React æºç æµ…æä¹‹ - ReactElement]]></title>
    <url>%2F2017%2F09%2F20%2Freact-source-code-analyze-4%2F</url>
    <content type="text"><![CDATA[ReactElementè¿™ä¸ªæ¨¡å—å®šä¹‰äº† React å…ƒç´ çš„è¡Œä¸ºå’Œæ–¹æ³•ï¼Œé¦–å…ˆçœ‹ ReactElement å‡½æ•°ï¼š ReactElementvar ReactElement = function(type, key, ref, self, source, owner, props) &#123; var element = &#123; // This tag allow us to uniquely identify this as a React Element $$typeof: REACT_ELEMENT_TYPE, // Built-in properties that belong on the element type: type, key: key, ref: ref, props: props, // Record the component responsible for creating this element. _owner: owner, &#125;; if (__DEV__) &#123; // The validation flag is currently mutative. We put it on // an external backing store so that we can freeze the whole object. // This can be replaced with a WeakMap once they are implemented in // commonly used development environments. element._store = &#123;&#125;; // To make comparing ReactElements easier for testing purposes, we make // the validation flag non-enumerable (where possible, which should // include every environment we run tests in), so the test framework // ignores it. Object.defineProperty(element._store, 'validated', &#123; configurable: false, enumerable: false, writable: true, value: false, &#125;); // self and source are DEV only properties. Object.defineProperty(element, '_self', &#123; configurable: false, enumerable: false, writable: false, value: self, &#125;); // Two elements created in two different places should be considered // equal for testing purposes and therefore we hide it from enumeration. Object.defineProperty(element, '_source', &#123; configurable: false, enumerable: false, writable: false, value: source, &#125;); if (Object.freeze) &#123; Object.freeze(element.props); Object.freeze(element); &#125; &#125; return element;&#125;; æŠ›å»å…¶ä¸­ DEV é‡Œé¢çš„å†…å®¹ï¼Œå…¶ä»–éƒ¨åˆ†å¾ˆç®€å•ï¼Œå®šä¹‰äº†ä¸€ä¸ª React å…ƒç´ åº”æœ‰å±æ€§ã€‚åŒ…æ‹¬ï¼š type, key, ref, self, source, owner, props.è¿˜æœ‰ä¸€ä¸ª $$typeof å±æ€§ï¼Œæ˜¯ä¸€ä¸ªå¸¸é‡ï¼Œç”¨æ¥åˆ¤æ–­è¿™ä¸ªå¯¹è±¡æ˜¯ä¸æ˜¯ä¸€ä¸ª React å…ƒç´ ã€‚var REACT_ELEMENT_TYPE = (typeof Symbol === 'function' &amp;&amp; Symbol.for &amp;&amp; Symbol.for('react.element')) || 0xeac7; ReactElement.createElementReactElement.createElement = function(type, config, children) &#123; var propName; // Reserved names are extracted var props = &#123;&#125;; var key = null; var ref = null; var self = null; var source = null; if (config != null) &#123; // ref å’Œ key éƒ½å±äºä¿ç•™ props key å€¼ï¼Œæ‰€ä»¥è¿™é‡Œéœ€è¦åšåˆ¤æ–­ if (hasValidRef(config)) &#123; ref = config.ref; &#125; if (hasValidKey(config)) &#123; key = '' + config.key; &#125; // __self å’Œ __source è¿™ä¸¤ä¸ªå±æ€§ç›®å‰æ²¡æœ‰çœ‹åˆ°ä»–ä»¬çš„ä½œç”¨ï¼Œå…ˆæ”¾ç€ self = config.__self === undefined ? null : config.__self; source = config.__source === undefined ? null : config.__source; // Remaining properties are added to a new props object // å…¶ä»–çš„å±æ€§æ·»åŠ åˆ°æ–°çš„ props å¯¹è±¡ä¸Šï¼ŒåŒæ—¶éœ€è¦æ’é™¤æ‰ä¿ç•™å­—æ®µ RESERVED_PROPS // var RESERVED_PROPS = &#123;key: true, ref: true, __self: true, __source: true,&#125;; for (propName in config) &#123; if ( hasOwnProperty.call(config, propName) &amp;&amp; !RESERVED_PROPS.hasOwnProperty(propName) ) &#123; props[propName] = config[propName]; &#125; &#125; &#125; // Children å¯ä»¥ä¼ é€’ä¸€ä¸ªä»¥ä¸Šçš„å‚æ•°ï¼Œè¿™äº› children å‚æ•°éƒ½ä¼šä½œä¸ºæ–°åˆ†é…çš„ props çš„å±æ€§ var childrenLength = arguments.length - 2; if (childrenLength === 1) &#123; props.children = children; &#125; else if (childrenLength &gt; 1) &#123; var childArray = Array(childrenLength); for (var i = 0; i &lt; childrenLength; i++) &#123; childArray[i] = arguments[i + 2]; &#125; if (__DEV__) &#123; if (Object.freeze) &#123; Object.freeze(childArray); &#125; &#125; props.children = childArray; &#125; // è®¾ç½® defaultProps å±æ€§ if (type &amp;&amp; type.defaultProps) &#123; var defaultProps = type.defaultProps; for (propName in defaultProps) &#123; if (props[propName] === undefined) &#123; props[propName] = defaultProps[propName]; &#125; &#125; &#125; // å¼€å‘ç¯å¢ƒä¸‹ï¼Œå¦‚æœä½¿ç”¨äº†ä¿ç•™å­—æ®µ key å’Œ ref ï¼Œé‚£ä¹ˆè¿›è¡Œæ§åˆ¶å°æŠ¥é”™æé†’ if (__DEV__) &#123; if (key || ref) &#123; if ( typeof props.$$typeof === 'undefined' || props.$$typeof !== REACT_ELEMENT_TYPE ) &#123; var displayName = typeof type === 'function' ? type.displayName || type.name || 'Unknown' : type; if (key) &#123; defineKeyPropWarningGetter(props, displayName); &#125; if (ref) &#123; defineRefPropWarningGetter(props, displayName); &#125; &#125; &#125; &#125; // è¿”å›ä¸€ä¸ª React å…ƒç´ ï¼Œ ReactCurrentOwner.current æ˜¯æŒ‡å½“å‰æ­£å¤„äºæ„å»ºè¿‡ç¨‹ä¸­çš„ç»„ä»¶ï¼Œè¿™é‡Œé»˜è®¤æ˜¯ null return ReactElement( type, key, ref, self, source, ReactCurrentOwner.current, props, );&#125;; ç”¨ç»™å®šçš„å‚æ•°æ¥åˆ›å»ºä¸€ä¸ª React å…ƒç´ ï¼Œéœ€è¦æ³¨æ„çš„æ˜¯ ref å’Œ key å±äºä¿ç•™å­—æ®µï¼Œä¸èƒ½ä½œä¸º props çš„å±æ€§ä¼ é€’ã€‚ ReactElement.createFactoryä¸€ä¸ªç®€å•çš„å·¥å‚å‡½æ•°ï¼Œç”¨æ¥æ–¹ä¾¿çš„åˆ›å»ºåŒç±»å‹çš„ç»„ä»¶ã€‚ReactElement.createFactory = function(type) &#123; var factory = ReactElement.createElement.bind(null, type); // Expose the type on the factory and the prototype so that it can be // easily accessed on elements. E.g. `&lt;Foo /&gt;.type === Foo`. // This should not be named `constructor` since this may not be the function // that created the element, and it may not even be a constructor. // Legacy hook TODO: Warn if this is accessed factory.type = type; return factory;&#125;; ReactElement.cloneAndReplaceKeyè¿™ä¸ª API æ²¡ç”¨è¿‡ï¼Œå¯ä»¥ç”¨æ¥æ›¿æ¢ä¸€ä¸ª React å…ƒç´ çš„ä¿ç•™å±æ€§ï¼š key å€¼ã€‚ReactElement.cloneAndReplaceKey = function(oldElement, newKey) &#123; var newElement = ReactElement( oldElement.type, newKey, oldElement.ref, oldElement._self, oldElement._source, oldElement._owner, oldElement.props, ); return newElement;&#125;; ReactElement.cloneElementcloneElement æ–¹æ³•å’Œ createElement åŸºæœ¬ä¸€æ ·ï¼Œåªæ˜¯å‰è€…æ˜¯é€šè¿‡ç°æœ‰çš„ React å…ƒç´ æ¥å¤åˆ¶ä¸€ä¸ªæ–°çš„å…ƒç´ å‡ºæ¥ã€‚ ReactElement.isValidElementç”¨æ¥åˆ¤æ–­ä¸€ä¸ªå¯¹è±¡æ˜¯ä¸æ˜¯ä¸€ä¸ªåˆæ³•çš„ React å…ƒç´ ã€‚ReactElement.isValidElement = function(object) &#123; return ( typeof object === 'object' &amp;&amp; object !== null &amp;&amp; object.$$typeof === REACT_ELEMENT_TYPE );&#125;; ç”¨åˆ°äº†ä¸Šé¢ä¸€å¼€å§‹å®šä¹‰çš„ $$typeof å±æ€§ã€‚ exportmodule.exports = ReactElement; ReactElement æ¨¡å—å°±æ˜¯è¿™ä¹ˆäº›ä¸œè¥¿äº†ï¼Œä¸»è¦å®šä¹‰äº†ä¸€ä¸ª React å…ƒç´ åº”æœ‰çš„å±æ€§ï¼Œä»¥åŠæ“ä½œå…ƒç´ çš„ä¸€äº›æ–¹æ³•ã€‚ ç›¸å…³æ–‡ç«  React æºç æµ…æä¹‹ - å…¥å£æ–‡ä»¶ React æºç æµ…æä¹‹ - ReactBaseClasses React æºç æµ…æä¹‹ - ReactChildren React æºç æµ…æä¹‹ - ReactElement React æºç æµ…æä¹‹ - onlyChildren]]></content>
      <categories>
        <category>æŠ€æœ¯</category>
      </categories>
      <tags>
        <tag>React</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[React æºç æµ…æä¹‹ - ReactChildren]]></title>
    <url>%2F2017%2F09%2F20%2Freact-source-code-analyze-3%2F</url>
    <content type="text"><![CDATA[å¼•å…¥çš„æ¨¡å—var ReactElement = require('ReactElement');var emptyFunction = require('fbjs/lib/emptyFunction');var invariant = require('fbjs/lib/invariant'); æˆ‘ä»¬æ¥çœ‹ä¸€ä¸‹ ReactElement æ¨¡å—ï¼Œå…¶ä»–ä¸¤ä¸ªéƒ½æ˜¯å·¥å…·å‡½æ•°ï¼Œä¸ç”¨å…³å¿ƒã€‚ Export çš„å¯¹è±¡var ReactChildren = &#123; forEach: forEachChildren, map: mapChildren, count: countChildren, toArray: toArray,&#125;;module.exports = ReactChildren; ä¾æ¬¡æ¥çœ‹ä¸€ä¸‹è¿™ä¸ªå››ä¸ª API forEachfunction forEachChildren(children, forEachFunc, forEachContext) &#123; if (children == null) &#123; return children; &#125; var traverseContext = getPooledTraverseContext( null, null, forEachFunc, forEachContext, ); traverseAllChildren(children, forEachSingleChild, traverseContext); releaseTraverseContext(traverseContext);&#125; å…¥å‚ï¼š children, forEachFunc, forEachContext.é¦–å…ˆé€šè¿‡ getPooledTraverseContext æ‹¿åˆ°ä¸€ä¸ªéå†çš„ä¸Šä¸‹æ–‡å¯¹è±¡ traverseContextï¼Œç„¶åè°ƒç”¨ traverseAllChildren æ–¹æ³•æ¥éå†æ‰€æœ‰ä¼ å…¥ children çš„åä»£èŠ‚ç‚¹ã€‚æœ€åé‡Šæ”¾å½“å‰çš„ traverseContext. getPooledTraverseContextvar POOL_SIZE = 10;var traverseContextPool = [];function getPooledTraverseContext( mapResult, keyPrefix, mapFunction, mapContext,) &#123; if (traverseContextPool.length) &#123; var traverseContext = traverseContextPool.pop(); traverseContext.result = mapResult; traverseContext.keyPrefix = keyPrefix; traverseContext.func = mapFunction; traverseContext.context = mapContext; traverseContext.count = 0; return traverseContext; &#125; else &#123; return &#123; result: mapResult, keyPrefix: keyPrefix, func: mapFunction, context: mapContext, count: 0, &#125;; &#125;&#125; å®šä¹‰äº†ä¸€ä¸ª traverseContextPool ä»¥é¿å…æ¯æ¬¡é‡æ–°åˆ›å»ºæ–°å¯¹è±¡çš„æˆæœ¬ï¼Œå¤§å°ä¸º 10. getPooledTraverseContext æ–¹æ³•æ¥æ”¶å››ä¸ªå‚æ•°ï¼ŒmapResult, keyPrefix, mapFunction, mapContext.ç„¶åèµ‹å€¼åˆ° traverseContext ä¸Šï¼Œé™¤æ­¤ä¹‹å¤–è¿˜æ·»åŠ äº†ä¸€ä¸ªè®¡æ•°å™¨å±æ€§ count. traverseAllChildrenfunction traverseAllChildren(children, callback, traverseContext) &#123; if (children == null) &#123; return 0; &#125; return traverseAllChildrenImpl(children, '', callback, traverseContext);&#125; `traverseAllChildren` åªæ˜¯ä¸ªç©ºå£³ï¼Œé‡Œé¢çš„ `traverseAllChildrenImpl` æ‰æ˜¯çœŸæ­£çš„å®ç°ã€‚** traverseAllChildrenImpl ** function traverseAllChildrenImpl( children, nameSoFar, callback, traverseContext,) &#123; var type = typeof children; if (type === 'undefined' || type === 'boolean') &#123; // All of the above are perceived as null. children = null; &#125; if ( children === null || type === 'string' || type === 'number' || // The following is inlined from ReactElement. This means we can optimize // some checks. React Fiber also inlines this logic for similar purposes. (type === 'object' &amp;&amp; children.$$typeof === REACT_ELEMENT_TYPE) ) &#123; callback( traverseContext, children, // If it's the only child, treat the name as if it was wrapped in an array // so that it's consistent if the number of children grows. nameSoFar === '' ? SEPARATOR + getComponentKey(children, 0) : nameSoFar, ); return 1; &#125; æ¥æ”¶å››ä¸ªå‚æ•°ï¼Œé¦–å…ˆåˆ¤æ–­ children å‚æ•°çš„ type ï¼Œä¸åˆæ³•éƒ½è®¤ä¸º children æ˜¯ null.ç´§æ¥ç€çš„ä¸€å †åˆ¤æ–­ï¼Œå°±æ˜¯è¯´å½“ children æ˜¯å•ä¸ªåˆæ³• React å…ƒç´ çš„æ—¶å€™ï¼Œæ‰§è¡Œ callback å‡½æ•°ï¼Œå¹¶è¿”å› 1ï¼Œå› ä¸ºåé¢ä¼šé€’å½’çš„è°ƒç”¨å½“å‰è¿™ä¸ªå‡½æ•°ï¼Œæ‰€ä»¥è¿™é‡Œä¹Ÿæ˜¯é€’å½’è°ƒç”¨çš„å‡ºå£ã€‚var child;var nextName;var subtreeCount = 0; // Count of children found in the current subtree.var nextNamePrefix = nameSoFar === '' ? SEPARATOR : nameSoFar + SUBSEPARATOR;if (Array.isArray(children)) &#123; for (var i = 0; i &lt; children.length; i++) &#123; child = children[i]; nextName = nextNamePrefix + getComponentKey(child, i); subtreeCount += traverseAllChildrenImpl( child, nextName, callback, traverseContext, ); &#125;&#125; else &#123; å½“ä¼ å…¥çš„ children æ˜¯ä¸€ä¸ª Array çš„æ—¶å€™ï¼Œéå†è¿™ä¸ª Children Array ï¼Œ å¹¶å¯¹é‡Œé¢çš„æ¯ä¸ªå…ƒç´ è°ƒç”¨å½“å‰çš„å‡½æ•° traverseAllChildrenImpl.ä¼ å…¥çš„å‚æ•°ä¸­éœ€è¦æ³¨æ„ï¼Œ nextName ç”¨æ¥ç»™è¦éå†çš„ React å…ƒç´ æ·»åŠ  key å€¼ï¼Œcallback å’Œ traverseContext å’Œå½“å‰å‡½æ•°çš„å€¼éƒ½æ˜¯ä¸€æ ·çš„ï¼Œä¿è¯äº†æ¯ä¸ªå­å…ƒç´ ä¹Ÿèƒ½åº”ç”¨å½“å‰çš„ callback ä¸”èƒ½è®¿é—®åˆ°åŸå§‹çš„ traverseContext.&#125; else &#123; var iteratorFn = (ITERATOR_SYMBOL &amp;&amp; children[ITERATOR_SYMBOL]) || children[FAUX_ITERATOR_SYMBOL]; if (typeof iteratorFn === 'function') &#123; if (__DEV__) &#123; // Warn about using Maps as children if (iteratorFn === children.entries) &#123; warning( didWarnAboutMaps, 'Using Maps as children is unsupported and will likely yield ' + 'unexpected results. Convert it to a sequence/iterable of keyed ' + 'ReactElements instead.%s', getStackAddendum(), ); didWarnAboutMaps = true; &#125; &#125; var iterator = iteratorFn.call(children); var step; var ii = 0; while (!(step = iterator.next()).done) &#123; child = step.value; nextName = nextNamePrefix + getComponentKey(child, ii++); subtreeCount += traverseAllChildrenImpl( child, nextName, callback, traverseContext, ); &#125; &#125; else if (type === 'object') &#123; var addendum = ''; if (__DEV__) &#123; addendum = ' If you meant to render a collection of children, use an array ' + 'instead.' + getStackAddendum(); &#125; var childrenString = '' + children; invariant( false, 'Objects are not valid as a React child (found: %s).%s', childrenString === '[object Object]' ? 'object with keys &#123;' + Object.keys(children).join(', ') + '&#125;' : childrenString, addendum, ); &#125;&#125; å½“ä¸æ˜¯ Array ä½†æ˜¯ä¸€ä¸ªå¯è¿­ä»£çš„å¯¹è±¡çš„æ—¶å€™ï¼Œå’Œä¸Šé¢ä¸€æ ·ï¼Œé€’å½’è°ƒç”¨ traverseAllChildrenImpl æ–¹æ³•ã€‚å¯¹äºå…¶ä»–æƒ…å†µï¼Œè®¤ä¸º child ä¸åˆæ³•ï¼Œè¿›è¡ŒæŠ¥é”™ã€‚ return subtreeCount;&#125; æœ€åè¿”å›æ‰€æœ‰åä»£å…ƒç´ çš„æ•°é‡ã€‚æ•´ä½“ä¸Šæ¥çœ‹ traverseAllChildrenImpl æ–¹æ³•çš„ä½œç”¨å°±æ˜¯ï¼Œéå†ç»™å®š children çš„æ‰€æœ‰åä»£å…ƒç´ ï¼Œåœ¨æ¯ä¸ªåä»£å…ƒç´ ä¸Šè°ƒç”¨ callback æ–¹æ³•ï¼Œå¹¶ç»™æ¯ä¸ªå…ƒç´ åˆ†é…ä¸€ä¸ªå½“å‰ä¸Šä¸‹æ–‡ä¸‹å”¯ä¸€çš„ key å€¼ä½œä¸ºå‚æ•°è¦ä¼ å…¥çš„å‚æ•°ã€‚ å›åˆ° forEach æ–¹æ³•ï¼štraverseAllChildren(children, forEachSingleChild, traverseContext); è¿™ä¸€å¥å°±æ˜¯è¯´éå†ç»™å®š children çš„æ‰€æœ‰åä»£å…ƒç´ ï¼Œå¹¶ç»™å®ƒä»¬è°ƒç”¨ forEachSingleChild æ–¹æ³•ã€‚function forEachSingleChild(bookKeeping, child, name) &#123; var &#123;func, context&#125; = bookKeeping; func.call(context, child, bookKeeping.count++);&#125; è¿™ä¸ªä¼ å…¥çš„ callback æ–¹æ³• forEachSingleChild å°±æ˜¯ä»å…¥å‚ bookKeeping ä¹Ÿå°±æ˜¯ traverseContext ä¸­æ‹¿åˆ° func å’Œ contextï¼ŒæŠŠ context ä½œä¸º func çš„ä¸Šä¸‹æ–‡ï¼Œ child å’Œè®¡æ•°å™¨ count ä½œä¸ºå‚æ•°è¿›è¡Œè°ƒç”¨ã€‚è¿™é‡Œçš„ func å°±æ˜¯ forEachChildren çš„å…¥å‚ forEachFuncï¼Œä¹Ÿå°±æ˜¯éœ€ç”¨æœ€ç»ˆç”¨æˆ·æä¾›çš„å‡½æ•°ã€‚releaseTraverseContext(traverseContext); é‡Šæ”¾å½“å‰çš„ traverseContext ä¹Ÿå°±æ˜¯æŠŠ traverseContext çš„å±æ€§éƒ½ç½®ä¸º null å¹¶æ”¾å…¥ traverseContextPool ä¸­ä¾›åç»­ä½¿ç”¨ï¼Œæé«˜ä½¿ç”¨æ•ˆç‡ã€‚function releaseTraverseContext(traverseContext) &#123; traverseContext.result = null; traverseContext.keyPrefix = null; traverseContext.func = null; traverseContext.context = null; traverseContext.count = 0; if (traverseContextPool.length &lt; POOL_SIZE) &#123; traverseContextPool.push(traverseContext); &#125;&#125; mapfunction mapChildren(children, func, context) &#123; if (children == null) &#123; return children; &#125; var result = []; mapIntoWithKeyPrefixInternal(children, result, null, func, context); return result;&#125; ç»™ä¼ å…¥ children çš„åä»£å…ƒç´ è°ƒç”¨ func å¹¶è¿”å›è°ƒç”¨ func çš„ç»“æœé›†åˆã€‚ mapIntoWithKeyPrefixInternalfunction mapIntoWithKeyPrefixInternal(children, array, prefix, func, context) &#123; var escapedPrefix = ''; if (prefix != null) &#123; escapedPrefix = escapeUserProvidedKey(prefix) + '/'; &#125; var traverseContext = getPooledTraverseContext( array, escapedPrefix, func, context, ); traverseAllChildren(children, mapSingleChildIntoContext, traverseContext); releaseTraverseContext(traverseContext);&#125; é¦–å…ˆï¼Œå¦‚æœä¼ å…¥äº† prefix ï¼Œé‚£ä¹ˆè½¬ä¹‰ prefix ä½œä¸º traverseContext çš„ prefix key.ç„¶åæ‹¿åˆ°ä¸€ä¸ª traverseContext å¯¹è±¡ï¼Œæ¥ç€å’Œ forEachChildren ä¸€æ ·ï¼Œéå†æ‰€æœ‰ children çš„åä»£å…ƒç´ å¹¶æ‰§è¡Œç»™å®šçš„ callback å‡½æ•°ï¼Œæœ€åå¯¹ traverseContext è¿›è¡Œé‡Šæ”¾ã€‚ å”¯ä¸€çš„ä¸åŒå°±æ˜¯è¿™ä¸ª callback æ–¹æ³•ï¼šmapSingleChildIntoContext . mapSingleChildIntoContextfunction mapSingleChildIntoContext(bookKeeping, child, childKey) &#123; var &#123;result, keyPrefix, func, context&#125; = bookKeeping; var mappedChild = func.call(context, child, bookKeeping.count++); if (Array.isArray(mappedChild)) &#123; mapIntoWithKeyPrefixInternal( mappedChild, result, childKey, emptyFunction.thatReturnsArgument, ); &#125; else if (mappedChild != null) &#123; if (ReactElement.isValidElement(mappedChild)) &#123; mappedChild = ReactElement.cloneAndReplaceKey( mappedChild, // Keep both the (mapped) and old keys if they differ, just as // traverseAllChildren used to do for objects as children keyPrefix + (mappedChild.key &amp;&amp; (!child || child.key !== mappedChild.key) ? escapeUserProvidedKey(mappedChild.key) + '/' : '') + childKey, ); &#125; result.push(mappedChild); &#125;&#125; è¿™ä¸ªæ–¹æ³•å’Œä¸Šé¢çš„ forEachSingleChildren å¾ˆåƒã€‚ä» bookKeeping ä¸Šæ‹¿åˆ° result , keyPrefix, func, context.Result å…¶å®å°±æ˜¯ mapChildren é‡Œé¢ä¸€å¼€å§‹å®šä¹‰çš„ç©ºæ•°ç»„ï¼Œ keyPrefix å°±æ˜¯ mapIntoWithKeyPrefixInternal é‡Œé¢ escapedPrefix ï¼Œ func å’Œ context éƒ½æ˜¯ mapChildren å¯¹åº”çš„å…¥å‚ã€‚ é¦–å…ˆå®šä¹‰ mappedChild ä¸ºç”¨æˆ·ä¼ å…¥çš„ mapFunc å‡½æ•°è°ƒç”¨çš„è¿”å›å€¼ï¼Œç„¶ååˆ¤æ–­è¿™ä¸ªè¿”å›å€¼ mappedChild æ˜¯ä¸æ˜¯ä¸€ä¸ª Array.å¦‚æœæ˜¯ï¼Œé‚£ä¹ˆå¾ªç¯è°ƒç”¨ mapIntoWithKeyPrefixInternal æ–¹æ³•ï¼›å¦åˆ™åœ¨ä¸ä¸º null çš„æƒ…å†µä¸”æ˜¯ä¸€ä¸ªåˆæ³• React å…ƒç´ çš„æ—¶å€™ï¼Œç”¨ä¸€ä¸ªé€šè¿‡ keyPrefix , ç”¨æˆ·åˆ†é…çš„ key å³ mappedChild.key å’ŒåŸæœ‰çš„ childkey ç»„æˆæ–° key å€¼çš„ mappedChild çš„å…‹éš†å…ƒç´ ä½œä¸º map çš„ç»“æœï¼Œpush åˆ° result ä¸­ã€‚ æ•´ä¸ª mapChildren æ–¹æ³•ï¼Œå°±æ˜¯å¯¹æä¾›çš„ children çš„æ¯ä¸ªåä»£å…ƒç´ è°ƒç”¨ mapFunc æ–¹æ³•ï¼Œç»™è¿”å›çš„ç»“æœè®¾ç½®æ–°çš„ key ï¼Œæœ€åæŠŠæ¯ä¸€ä¸ªæ‰§è¡Œçš„ç»“æœ mappedChild æ”¾å…¥åˆ°ä¸€ä¸ªåˆ—è¡¨ä¸­è¿”å›ç»™ç”¨æˆ·ã€‚ countChildrenfunction countChildren(children, context) &#123; return traverseAllChildren(children, emptyFunction.thatReturnsNull, null);&#125; è¿™ä¸ªå°±å¾ˆç®€å•äº†ï¼Œåªæ˜¯é€šè¿‡éå†è¿”å›æ‰€æœ‰åä»£èŠ‚ç‚¹çš„ä¸ªæ•°ã€‚emptyFunction.thatReturnsNullå°±æ˜¯ä¸€ä¸ªè¿”å›ä¸º null çš„å‡½æ•°ã€‚ toArrayfunction toArray(children) &#123; var result = []; mapIntoWithKeyPrefixInternal( children, result, null, emptyFunction.thatReturnsArgument, ); return result;&#125; ç†è§£äº†ä¸Šé¢çš„ mapIntoWithKeyPrefixInternal ï¼Œé‚£ä¹ˆè¿™é‡Œä¹Ÿå¾ˆç®€å•äº†ã€‚emptyFunction.thatReturnsArgument, æ˜¯ä¸€ä¸ªå‡½æ•°ï¼Œä¼šè¿”å›å®ƒçš„ç¬¬ä¸€ä¸ªå‚æ•°ã€‚ mapSingleChildIntoContext var mappedChild=func.call(context,child,bookKeeping.count++); é‚£ä¹ˆè¿™å¥ä¹Ÿå°±æ˜¯è¿”å› child æœ¬èº«äº†ã€‚å¹¶å°†ç»“æœæ”¾å…¥åˆ° result é‡Œé¢, æœ€åæŠŠæ‰€æœ‰çš„ result è¿”å›ç»™è°ƒç”¨æ–¹ã€‚ æ€»ç»“ReactChildren æœ‰å››ä¸ª API ï¼Œè€Œè¿™å››ä¸ª API ä¸»è¦ä¾èµ–ä¸ä¸¤ä¸ªæ–¹æ³•ï¼ŒtraverseAllChildrenImpl å’Œ mapSingleChildIntoContext å…¶ä»–æ–¹æ³•éƒ½æ˜¯åœ¨æ­¤ä¹‹ä¸Šçš„ç»„åˆè°ƒç”¨ã€‚è¿˜æœ‰ä¸€ä¸ªå€¼å¾—æ³¨æ„çš„åœ°æ–¹ï¼Œå°±æ˜¯ç”¨åˆ°å¯¹è±¡æ±  traverseContextPool ã€‚ä¸ªäººè®¤ä¸ºæ˜¯å› ä¸ºåœ¨è¿™é‡Œç»å¸¸ä¼šé€’å½’è°ƒç”¨è€Œé¢‘ç¹çš„éœ€è¦æ–°å»º traverseContext å¯¹è±¡ï¼Œè€Œæ¯æ¬¡éƒ½é‡æ–°æ–°å»ºå¯¹è±¡éœ€è¦åœ¨å †é‡Œé¢é‡æ–°åˆ†é…å†…å­˜ï¼Œæˆæœ¬æ¯”è¾ƒé«˜ï¼Œæ‰€ä»¥å¼•å…¥äº†å¯¹è±¡æ± ï¼Œä»¥æé«˜æ€§èƒ½ã€‚ ç›¸å…³æ–‡ç«  React æºç æµ…æä¹‹ - å…¥å£æ–‡ä»¶ React æºç æµ…æä¹‹ - ReactBaseClasses React æºç æµ…æä¹‹ - ReactChildren React æºç æµ…æä¹‹ - ReactElement React æºç æµ…æä¹‹ - onlyChildren]]></content>
      <categories>
        <category>æŠ€æœ¯</category>
      </categories>
      <tags>
        <tag>React</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[React æºç æµ…æä¹‹ - ReactBaseClasses]]></title>
    <url>%2F2017%2F09%2F20%2Freact-source-code-analyze-2%2F</url>
    <content type="text"><![CDATA[å¼•å…¥çš„æ¨¡å—var ReactNoopUpdateQueue = require('ReactNoopUpdateQueue');var emptyObject = require('fbjs/lib/emptyObject');var invariant = require('fbjs/lib/invariant');var lowPriorityWarning = require('lowPriorityWarning'); å…¶ä¸­ï¼Œ ReactNoopUpdateQueue æ˜¯é»˜è®¤çš„ updater ï¼Œç”¨æ¥æä¾› update, replaceState, setState çš„å…¥é˜Ÿæ“ä½œï¼Œä½†å¯èƒ½æ˜¯ç”±äºæ˜¯é»˜è®¤ updater çš„åŸå› ï¼Œåªæä¾›äº† API å’Œå¯¹å…¥å‚çš„æ ¡éªŒï¼Œä½†æ²¡æœ‰æä¾›å®é™…çš„åŠŸèƒ½ã€‚æ¯”å¦‚ï¼šenqueueSetState: function( // éœ€è¦ render çš„å®ä¾‹ publicInstance, // æ¥ä¸‹æ¥è¦ merge çš„ state partialState, // å¯é€‰å‚æ•°ï¼ŒsetState ç»„ä»¶ update åçš„å›è°ƒ callback, // å¯é€‰å‚æ•°ï¼Œè°ƒç”¨å‡½æ•°çš„çš„åå­— callerName,) &#123; warnNoop(publicInstance, 'setState');&#125;, å…¶ä½™å‡ ä¸ªæ¨¡å—æ˜¯ä¸€äº›é€šç”¨è¾…åŠ©æ¨¡å—ï¼Œå°±ä¸ç»†è¯´äº†ã€‚ Export çš„å¯¹è±¡module.exports = &#123; Component: ReactComponent, PureComponent: ReactPureComponent, AsyncComponent: ReactAsyncComponent,&#125;; æˆ‘ä»¬ä¾æ¬¡æ¥çœ‹è¿™å‡ ä¸ª Component . ReactComponent/** * Base class helpers for the updating state of a component. */function ReactComponent(props, context, updater) &#123; this.props = props; this.context = context; this.refs = emptyObject; // We initialize the default updater but the real one gets injected by the // renderer. this.updater = updater || ReactNoopUpdateQueue;&#125;ReactComponent.prototype.isReactComponent = &#123;&#125;; ç”¨æ¥åˆ›å»ºåŸºç¡€ç»„ä»¶çš„æ„é€ å‡½æ•°ï¼Œå…¶ä¸­ refs é»˜è®¤æ˜¯ä¸€ä¸ªç©ºå¯¹è±¡ï¼Œè€Œ updater é»˜è®¤å°±æ˜¯æˆ‘ä»¬ä¸Šé¢è¯´çš„ ReactNoopUpdateQueue. setStateReactComponent.prototype.setState = function(partialState, callback) &#123; invariant( typeof partialState === 'object' || typeof partialState === 'function' || partialState == null, 'setState(...): takes an object of state variables to update or a ' + 'function which returns an object of state variables.', ); this.updater.enqueueSetState(this, partialState, callback, 'setState');&#125;; ç»™å®ƒæ·»åŠ  setState æ–¹æ³•ï¼Œå®é™…æ“ä½œå°±æ˜¯æŠŠä¸‹ä¸€ä¸ªè¦è®¾ç½®çš„ state æ”¾å…¥åˆ°æ›´æ–°é˜Ÿåˆ—é‡Œé¢ã€‚æ³¨é‡Šä¸­æåˆ°ï¼š æ°¸è¿œä½¿ç”¨ setState è¿™ä¸ªæ–¹æ³•å»æ›´æ”¹ state ï¼Œä½ åº”è¯¥è®¤ä¸º this.state æ˜¯ä¸å¯å˜çš„ ä¸ä¿è¯ this.state ä¼šåŠæ—¶æ›´æ–°ï¼Œä¹Ÿå°±æ˜¯è¯´è°ƒç”¨ this.state å¯èƒ½æ‹¿åˆ°çš„è¿˜æ˜¯æ—§çš„ state ä¸ä¿è¯ setState ä¼šåŒæ­¥è°ƒç”¨ï¼Œæœ‰å¯èƒ½ä¼šæŠŠå‡ ä¸ª setState çš„è°ƒç”¨ä¸€æ¬¡æ€§æ‰¹é‡æ›´æ–°æ‰ï¼Œä¸€å®šè¦åœ¨æŸä¸ª setState çš„è°ƒç”¨å®Œæˆåæ‰§è¡Œ-æ“ä½œï¼Œå¯ä»¥æä¾›å¯é€‰çš„ callback å‡½æ•°ã€‚ å½“ä¸€ä¸ª callback å‡½æ•°ä¼ å…¥ç»™ setState çš„æ—¶å€™ï¼Œå®ƒä¼šåœ¨æœªæ¥çš„æŸä¸ªæ—¶æœºè°ƒç”¨ã€‚ä¼šç”¨æœ€æ–°çš„ç»„ä»¶å‚æ•° (state, props, context). è€Œè¿™äº›å‚æ•°å’Œæ­¤æ—¶ç»„ä»¶æœ¬èº«çš„ this.* ä¸Šçš„å‚æ•°å€¼å¯èƒ½ä¼šä¸ä¸€æ ·ï¼Œåº”ä¸º callback å‡½æ•°æœ‰å¯èƒ½åœ¨ receiveProps ä¹‹å shouldComponentUpdate ä¹‹å‰è°ƒç”¨ï¼Œè€Œæ­¤æ—¶è¿™ä¸ªæ–°çš„ state, props å’Œ context è¿˜æ²¡æœ‰èµ‹å€¼ç»™ this. å…¶æ ¸å¿ƒæ€æƒ³å°±æ˜¯è¯´ï¼Œ setState çš„è°ƒç”¨æ˜¯å¼‚æ­¥çš„ï¼Œä»ä»£ç  this.updater.enqueueSetState(this, partialState, callback, &#39;setState&#39;); ä¸­å¯ä»¥çœ‹åˆ°ï¼Œåªæ˜¯æŠŠè¦æ›´æ–°çš„ state æ”¾å…¥åˆ°äº†æ›´æ–°é˜Ÿåˆ—é‡Œé¢ï¼Œè€Œä¸æ˜¯ç›´æ¥è¿›è¡Œ state çš„æ›´æ–°ã€‚ forceUpdateReactComponent.prototype.forceUpdate = function(callback) &#123; this.updater.enqueueForceUpdate(this, callback, 'forceUpdate');&#125;; ä¸€ä¸ªå¼ºåˆ¶æ›´æ–°çš„æ–¹æ³•ï¼Œè¿™ä¸ªæ–¹æ³•ä¸ä¼šè§¦å‘ shoudleComponentUpdate ï¼Œä½†æ˜¯ä¼šæ­£å¸¸è°ƒç”¨ componentWillUpdate å’Œ componentDidUpdate .è¦ç¡®ä¿è°ƒç”¨è¿™ä¸ªæ–¹æ³•çš„æ—¶å€™ï¼Œæ‰€æœ‰çš„ DOM äº‹åŠ¡æ“ä½œå·²ç»å®Œæˆã€‚åªæœ‰åœ¨å½“ä½ çŸ¥é“ä¸€ä¸ªç»„ä»¶çš„æ·±å±‚æ¬¡çš„ state å˜åŒ–äº†ï¼Œä½†æ˜¯å¹¶æ²¡æœ‰è°ƒç”¨ setState çš„æ—¶å€™æ‰éœ€è¦è°ƒç”¨è¿™ä¸ªæ–¹æ³•ã€‚ ä¸æ¨èçš„æ–¹æ³•/** * Deprecated APIs. These APIs used to exist on classic React classes but since * we would like to deprecate them, we're not going to move them over to this * modern base class. Instead, we define a getter that warns if it's accessed. */if (__DEV__) &#123; var deprecatedAPIs = &#123; isMounted: [ 'isMounted', 'Instead, make sure to clean up subscriptions and pending requests in ' + 'componentWillUnmount to prevent memory leaks.', ], replaceState: [ 'replaceState', 'Refactor your code to use setState instead (see ' + 'https://github.com/facebook/react/issues/3236).', ], &#125;; var defineDeprecationWarning = function(methodName, info) &#123; Object.defineProperty(ReactComponent.prototype, methodName, &#123; get: function() &#123; lowPriorityWarning( false, '%s(...) is deprecated in plain JavaScript React classes. %s', info[0], info[1], ); return undefined; &#125;, &#125;); &#125;; for (var fnName in deprecatedAPIs) &#123; if (deprecatedAPIs.hasOwnProperty(fnName)) &#123; defineDeprecationWarning(fnName, deprecatedAPIs[fnName]); &#125; &#125;&#125; è¿™é‡Œå¯ä»¥çœ‹åˆ° isMounted å’Œ replaceState è¿™ä¸¤ä¸ªæ–¹æ³•ï¼Œå·²ç»è¢«å®˜æ–¹è®¤ä¸ºå°†è¦åºŸå¼ƒçš„ API ï¼Œåœ¨å¼€å‘è¿‡ç¨‹ä¸­åº”è¯¥å°½é‡é¿å…ä½¿ç”¨å®ƒä»¬ã€‚ PureComponentfunction ReactPureComponent(props, context, updater) &#123; // Duplicated from ReactComponent. this.props = props; this.context = context; this.refs = emptyObject; // We initialize the default updater but the real one gets injected by the // renderer. this.updater = updater || ReactNoopUpdateQueue;&#125;function ComponentDummy() &#123;&#125;ComponentDummy.prototype = ReactComponent.prototype;var pureComponentPrototype = (ReactPureComponent.prototype = new ComponentDummy());pureComponentPrototype.constructor = ReactPureComponent;// Avoid an extra prototype jump for these methods.Object.assign(pureComponentPrototype, ReactComponent.prototype);pureComponentPrototype.isPureReactComponent = true; ä¸€ä¸ªå…¸å‹ js å®ç°ç»§æ‰¿çš„æ–¹å¼ï¼Œå¯ä»¥çœ‹åˆ° PureComponent ç»§æ‰¿è‡ª ReactComponent ï¼ŒPureComponent æ‹¥æœ‰ ReactComponent çš„æ‰€æœ‰å±æ€§å’Œæ–¹æ³•ï¼Œå¹¶åœ¨æ­¤åŸºç¡€ä¸Šå¤šäº†ä¸€ä¸ªå±æ€§ï¼špureComponentPrototype.isPureReactComponent = true; åé¢åœ¨ç»„ä»¶æ›´æ–°éƒ¨åˆ†ä¼šç”¨åˆ°è¿™ä¸ªå±æ€§ã€‚ AsyncComponentè¿™ä¸ªç»„ä»¶åœ¨æˆ‘å®é™…å¼€å‘è¿‡ç¨‹ä¸­è¿˜æ²¡æœ‰ç”¨åˆ°è¿‡ï¼Œæˆ‘ä»¬æ¥çœ‹ä¸€ä¸‹ï¼šfunction ReactAsyncComponent(props, context, updater) &#123; // Duplicated from ReactComponent. this.props = props; this.context = context; this.refs = emptyObject; // We initialize the default updater but the real one gets injected by the // renderer. this.updater = updater || ReactNoopUpdateQueue;&#125;var asyncComponentPrototype = (ReactAsyncComponent.prototype = new ComponentDummy());asyncComponentPrototype.constructor = ReactAsyncComponent;// Avoid an extra prototype jump for these methods.Object.assign(asyncComponentPrototype, ReactComponent.prototype);asyncComponentPrototype.unstable_isAsyncReactComponent = true;asyncComponentPrototype.render = function() &#123; return this.props.children;&#125;; å’Œ PureComponent ä¸€æ ·ï¼ŒåŒæ ·ç»§æ‰¿è‡ª ReactComponent. å†æ¬¡åŸºç¡€ä¸Šæ·»åŠ äº†unstable_isAsyncReactComponent å±æ€§ï¼Œå¹¶è®¾ç½®äº† render æ–¹æ³•ä¸ºç›´æ¥è¿”å›å®ƒçš„ children. ä»æ–°æ·»åŠ çš„å±æ€§åå¯ä»¥çœ‹åˆ°ï¼Œè¿™æ˜¯ä¸€ä¸ªè¿˜æ²¡æœ‰ç¨³å®šä¸‹æ¥çš„ç‰¹æ€§ç»„ä»¶ã€‚ä»åå­—å’Œå†…å®¹åˆæ­¥åˆ¤æ–­æ˜¯ç”¨æ¥åˆ›å»ºå¼‚æ­¥çš„ç»„ä»¶ï¼Œå…ˆç”¨ä¸€ä¸ª React ç»„ä»¶å ä½ï¼Œå½“ props ä¼ å…¥ children çš„æ—¶å€™ï¼Œåœ¨è¿›è¡Œæ¸²æŸ“ï¼Œä» render æ–¹æ³•ç›´æ¥ return å¯ä»¥çŒœåˆ°è¿™æ ·å¯ä»¥å®ç°æ— å¤šä½™åµŒå¥— html æ ‡ç­¾çš„ç»„ä»¶ã€‚ æ€»ç»“è¿™ä¸ªæ¨¡å—å®šä¹‰äº† React ä¸­ä¼šç”¨åˆ°çš„ä¸‰ä¸ªåŸºç¡€ç»„ä»¶ç±»ï¼Œéœ€è¦æ³¨æ„çš„æ˜¯ï¼š 1. State åº”è¯¥è¢«çœ‹ä½œæ˜¯ immutable çš„ï¼Œæ‰€æœ‰çš„å¯¹ state çš„ä¿®æ”¹åªèƒ½é€šè¿‡ setState æ¥å®Œæˆï¼Œä¸èƒ½ä½¿ç”¨ `this.state = **` æ¥è¿›è¡Œ state çš„æ›´æ–° 2. setState æ˜¯ä¸€ä¸ªå¼‚æ­¥çš„æ“ä½œï¼Œæ‰€ä»¥åœ¨è°ƒç”¨ setState åä» this.state ä¸Šç›´æ¥å–å€¼å¯èƒ½ä¸æ˜¯ä½ æœŸæœ›çš„ç»“æœï¼Œè¯»å–çš„ç»“æœæœ‰å¯èƒ½ä¾æ—§æ˜¯è€çš„ state è€Œç»„ä»¶å†…éƒ¨çš„ updater é€»è¾‘ï¼Œè¿™ä¸ªæ¨¡å—é‡Œé¢å¹¶æ²¡æœ‰å®šä¹‰å…·ä½“çš„æ‰§è¡Œé€»è¾‘ã€‚æ¯”å¦‚è°ƒç”¨ setState åä¼šå¯¹è¦æ›´æ–°çš„ state è¿›è¡Œå…¥é˜Ÿæ“ä½œï¼Œé‚£ä¹ˆè¿™ä¸ªæ“ä½œè¿‡ç¨‹ä¸­å‘ç”Ÿäº†ä»€ä¹ˆï¼Œç©¶ç«Ÿæ˜¯å¦‚ä½•è¿›è¡Œæ‰¹é‡çš„æ›´æ–°çš„ï¼Œä»¥åŠä»€ä¹ˆæ—¶å€™ state æ‰ä¼šæ›´æ–°å®Œæ¯•ï¼Œé‚£å°±éœ€è¦ä»å…¶ä»–çš„æ¨¡å—é‡Œæ¥å¯»æ‰¾ç­”æ¡ˆäº†ã€‚ ç›¸å…³æ–‡ç«  React æºç æµ…æä¹‹ - å…¥å£æ–‡ä»¶ React æºç æµ…æä¹‹ - ReactBaseClasses React æºç æµ…æä¹‹ - ReactChildren React æºç æµ…æä¹‹ - ReactElement React æºç æµ…æä¹‹ - onlyChildren]]></content>
      <categories>
        <category>æŠ€æœ¯</category>
      </categories>
      <tags>
        <tag>React</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[React æºç æµ…æä¹‹ - å…¥å£æ–‡ä»¶]]></title>
    <url>%2F2017%2F09%2F20%2Freact-source-code-analyze-1%2F</url>
    <content type="text"><![CDATA[æœ¬ç³»åˆ—æ–‡ç« ä»¥ react æœ€æ–°çš„ç‰ˆæœ¬ï¼š 16.0.0-beta.5 ä¸ºå‡†ã€‚é¦–å…ˆæˆ‘ä»¬å…¥å£æ–‡ä»¶ ReactEntry.js æ¥çœ‹ï¼Œvar ReactBaseClasses = require('ReactBaseClasses');var ReactChildren = require('ReactChildren');var ReactElement = require('ReactElement');var ReactVersion = require('ReactVersion');var onlyChild = require('onlyChild'); ä¾èµ–æ¨¡å—ï¼š â€¢ ReactBaseClasses â€¢ ReactChildren â€¢ ReactElement â€¢ onlyChild â€¢ ReactElementValidatoræ¥ç€:var createElement = ReactElement.createElement;var createFactory = ReactElement.createFactory;var cloneElement = ReactElement.cloneElement;if (__DEV__) &#123; var ReactElementValidator = require('ReactElementValidator'); createElement = ReactElementValidator.createElement; createFactory = ReactElementValidator.createFactory; cloneElement = ReactElementValidator.cloneElement;&#125; å¯ä»¥çœ‹åˆ°åœ¨å¼€å‘ç¯å¢ƒä¸‹æä¾›äº†å¯¹ç»„ä»¶çš„éªŒè¯ã€‚var React = &#123; Children: &#123; map: ReactChildren.map, forEach: ReactChildren.forEach, count: ReactChildren.count, toArray: ReactChildren.toArray, only: onlyChild, &#125;, Component: ReactBaseClasses.Component, PureComponent: ReactBaseClasses.PureComponent, unstable_AsyncComponent: ReactBaseClasses.AsyncComponent, createElement: createElement, cloneElement: cloneElement, isValidElement: ReactElement.isValidElement, createFactory: createFactory, version: ReactVersion, __SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED: &#123; ReactCurrentOwner: require('ReactCurrentOwner'), &#125;,&#125;; ä¸Šé¢è¿™äº›å°±æ˜¯ React æä¾›çš„æ‰€æœ‰ API äº†ã€‚æˆ‘ä¼šåœ¨åç»­çš„æ–‡ç« ä¾æ¬¡å¯¹è¿™äº› API çš„å®ç°è¿›è¡Œè§£è¯»ã€‚ ç›¸å…³æ–‡ç«  React æºç æµ…æä¹‹ - å…¥å£æ–‡ä»¶ React æºç æµ…æä¹‹ - ReactBaseClasses React æºç æµ…æä¹‹ - ReactChildren React æºç æµ…æä¹‹ - ReactElement React æºç æµ…æä¹‹ - onlyChildren]]></content>
      <categories>
        <category>æŠ€æœ¯</category>
      </categories>
      <tags>
        <tag>React</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[ç½‘æ˜“ä¸€å¹´å·¥ä½œæ€»ç»“]]></title>
    <url>%2F2017%2F08%2F11%2Ffirst-year-summary-for-netease-work-experience%2F</url>
    <content type="text"><![CDATA[åšäº†å“ªäº›äº‹æƒ…è¯´æ˜¯ä¸€å¹´ï¼Œå…¶å®ä¹Ÿä¸€å¹´å¤šäº†ï¼Œä¸è¿‡è¿™å€’ä¸é‡è¦ã€‚ä¸»è¦çœ‹çœ‹åšäº†å“ªäº›äº‹å§ï¼š 1. æ”¹é€ å‘å¸ƒæµç¨‹åˆšæ¥å…¬å¸çš„æ—¶å€™ï¼Œç™½é¢†è´·çš„å‰ç«¯æ˜¯åŸºäº Riot æ¡†æ¶å¼€å‘çš„ç³»ç»Ÿã€‚è¯­è¨€å±‚é¢ï¼Œä½¿ç”¨ ES6 å’Œ Less å¼€å‘ï¼Œå‘å¸ƒåˆ°çº¿ä¸Šæ˜¯éœ€è¦ä¸€ä¸ªæ„å»ºæ‰“åŒ…å’Œç¼–è¯‘çš„è¿‡ç¨‹ï¼Œä¸èƒ½ç›´æ¥éƒ¨ç½²åˆ°çº¿ä¸ŠæœåŠ¡å™¨ã€‚ æ‰€ä»¥é¡¹ç›®çš„å¼€å‘æµç¨‹å°±æ˜¯ï¼ŒåŠŸèƒ½å¼€å‘ï¼Œæäº¤ä»£ç ï¼Œæœ¬åœ°æ‰“åŒ…ï¼Œæ‰“åŒ…åçš„ä»£ç è·Ÿæºä»£ç ä¸€èµ·æäº¤æµ‹è¯•ï¼Œè€Œååˆå¹¶ä»£ç åˆ° master ç„¶åå†åœ¨æœ¬åœ°æ‰“åŒ…ï¼Œç„¶åä¸Šçº¿ã€‚ è¿™ä¸ªæµç¨‹éå¸¸çš„ä¸åˆç†ï¼Œå› ä¸ºæºä»£ç å’Œç¼–è¯‘æ‰“åŒ…åçš„ä»£ç æ”¾åˆ°ä¸€å—ç®¡ç†ï¼Œæœ¬èº«å°±ä¸åˆç†ã€‚ç»å¸¸ä¼šå‡ºç°ï¼Œä½ ä¸€æ‰“åŒ…æµ‹è¯•ï¼Œæˆ‘è¿™è¾¹ä»£ç æ¨ä¸Šå»å°±ä¸€å †å†²çªã€‚æ‰€ä»¥æˆ‘å°±æƒ³æ€ä¹ˆæ¥æ”¹è¿›è¿™ä¸ªæµç¨‹ã€‚ æ”¹è¿›æ–¹æ¡ˆä¸€ç½‘æ˜“å†…éƒ¨æ˜¯æœ‰ä¸€ä¸ª omad ç³»ç»Ÿï¼ˆè‡ªåŠ¨éƒ¨ç½²å¹³å°ï¼‰çš„ï¼Œæƒ³ç€è¯´çœ‹èƒ½ä¸èƒ½å€ŸåŠ©è¿™ä¸ªå¹³å°å¹²ç‚¹äº‹æƒ…ã€‚å› ä¸ºåˆæ¥ä¹åˆ°ï¼Œå¯¹è¿™ä¸ªéƒ¨ç½²å¹³å°ä¸æ˜¯å¾ˆç†Ÿæ‚‰ï¼Œå°±é—®äº†å’Œè¿™ä¸ªå¹³å°æ¥è§¦æœ€å¤šçš„æµ‹è¯•åŒå­¦ï¼Œæµ‹è¯•åŒå­¦å‘Šè¯‰æˆ‘è¯´ omad æ²¡æœ‰æä¾›ä»»ä½•å¯¹å¤–çš„æ¥å£ï¼Œæ‰€ä»¥æˆ‘æƒ³çš„å¯èƒ½æ²¡æ³•å®ç°ã€‚ è¿™æ ·å°±å°´å°¬äº†ï¼Œæ²¡æ³•åšçº¿ä¸Šæ‰“åŒ…å‘å¸ƒï¼Œé‚£ä¹ˆæ‰“åŒ…è¿™ä¸ªè¿‡ç¨‹å°±å¿…ç„¶å¾—æ”¾åœ¨æœ¬åœ°æ¥åšã€‚æ‰€ä»¥æˆ‘å°±æäº†ä¸€å¥—ç°åœ¨çœ‹æ¥å¾ˆè ¢çš„æ–¹æ¡ˆã€‚é‚£å°±æ˜¯ï¼Œç”¨ä¸¤ä¸ªä»“åº“æ¥åˆ†åˆ«ç®¡ç†æºä»£ç å’Œæ‰“åŒ…åçš„ä»£ç ã€‚ é‚£ä¹ˆï¼Œå¦‚æœéœ€è¦å‘å¸ƒçš„è¯ï¼Œå°±éœ€è¦åœ¨æºä»£ç ä»“åº“å…ˆè¿›è¡Œæ‰“åŒ…ç¼–è¯‘ï¼Œç„¶åæŠŠæ‰“åŒ…ç¼–è¯‘çš„ç»“æœå¤åˆ¶åˆ°ç®¡ç†è¦å‘å¸ƒçš„ä»£ç çš„ä»“åº“ã€‚ ä¸€å¼ ç¤ºæ„å›¾ï¼š å¾ˆæ˜æ˜¾ï¼Œä¸Šé¢è¿™ç§æ–¹å¼ä¹Ÿåªæ˜¯ä¸´æ—¶è§£å†³æ–¹æ¡ˆï¼Œéœ€è¦ä¸¤ä¸ªä»“åº“æ¥ç®¡ç†ä¸€ä»½ä»£ç ã€‚æ¯æ¬¡æäº¤ä»£ç éƒ½éœ€è¦é¢å¤–æ‰§è¡Œä¸€ä¸ª run build å‘½ä»¤ã€‚ æ”¹è¿›æ–¹æ¡ˆäºŒï¼šç”±äºä¸Šé¢çš„æ–¹æ¡ˆå¤ªè ¢äº†ï¼Œæ‰€ä»¥æœ‰äº†æ”¹è¿›æ–¹æ¡ˆäºŒï¼Œä¹Ÿæ˜¯æˆ‘ä»¬ç°åœ¨ä¸€ç›´åœ¨ç”¨çš„æ–¹æ¡ˆï¼šé‚£å°±æ˜¯ç›´æ¥çº¿ä¸Šæ‰“åŒ…ã€‚å…·ä½“å¦‚ä¸‹ï¼šæœ¬åœ°ä»£ç å¼€å‘ -&gt; æäº¤ -&gt; æ¨é€åˆ°è¿œç«¯ -&gt; omad éƒ¨ç½² -&gt; omad ä¸“ç”¨æ‰“åŒ…æœºæ‰§è¡Œä¸€æ®µè„šæœ¬æ¥è¿›è¡Œæ‰“åŒ…ç¼–è¯‘æ“ä½œ -&gt; æŠŠæ‰“åŒ…ç¼–è¯‘åçš„ç»“æœæ‹·è´åˆ°ç›®æ ‡æœºå™¨ã€‚ ä¸€å¼ ç¤ºæ„å›¾ï¼š å…¶å®ï¼Œæœ¬æ¥ç¬¬ä¸€æ¬¡æ”¹é€ å°±åº”è¯¥æ”¹æˆè¿™æ ·çš„ã€‚ä½†æ˜¯å› ä¸ºä¸€å¼€å§‹å¯¹å†…éƒ¨çš„éƒ¨ç½²å¹³å° omad å¹¶ä¸ç†Ÿæ‚‰ï¼Œæ‰€ä»¥ä¸çŸ¥é“ omad éƒ¨ç½²åˆ°ç›®æ ‡æœºå™¨å‰è¿˜å¯ä»¥æ‰§è¡Œä¸€æ®µè„šæœ¬çš„ã€‚ä»¥è‡³äºæœ‰äº†ç¬¬ä¸€ç§éå¸¸è ¢çš„è§£å†³æ–¹æ¡ˆã€‚ ç°åœ¨è¿™å¥—æ–¹æ¡ˆå°±æ¯”è¾ƒå®Œå–„äº†ï¼Œ æˆ‘ä»¬åªå…³æ³¨æºä»£ç å°±å¯ä»¥äº†ï¼Œå‘å¸ƒçš„æ—¶å€™åˆ omad å»åšæ„å»ºå’Œæ‰“åŒ…éƒ¨ç½²çš„äº‹æƒ…ã€‚éå¸¸èˆ’å¿ƒï¼Œè¿™å¥—æ–¹æ¡ˆä¹Ÿä¸€ç›´ç”¨åˆ°äº†ç°åœ¨ã€‚ 2. æ­å»ºäº†ä¸€å¥—å®Œå–„çš„å¼€å‘ç¯å¢ƒåŸæœ‰çš„ç™½é¢†è´·å¼€å‘ç¯å¢ƒæ˜¯åŸºäº express å’Œ webpack é…åˆæ­å»ºèµ·æ¥çš„ï¼Œä½†æ˜¯åŠŸèƒ½æ¯”è¾ƒç®€é™‹ï¼Œåªæ”¯æŒå¼€å‘å’Œæ‰“åŒ…ä¸¤ä¸ªå‘½ä»¤ï¼Œè€Œä¸”æ‰“åŒ…çš„é…ç½®æ–‡ä»¶æ˜¯å®Œå…¨æœåŠ¡äºå¤šé¡µé¢çš„å·¥ç¨‹ã€‚ åæ¥æˆ‘ä»¬å¼€å‘æ¥é’±ç³»ç»Ÿçš„æ—¶å€™ï¼Œæˆ‘å°±åœ¨åŸæœ‰çš„åŸºç¡€ä¸Šé‡æ–°æ­å»ºäº†ä¸€å¥—å®Œå–„çš„å¼€å‘ç¯å¢ƒã€‚ä»å¼€å‘ã€è”è°ƒã€æµ‹è¯•ã€æ‰“åŒ…åˆ°ä¸Šçº¿ï¼Œè¯¥æœ‰çš„åŠŸèƒ½éƒ½æœ‰äº†ã€‚æ”¾ä¸€å¼ å›¾ï¼Œå…·ä½“å¯ä»¥ çœ‹è¿™é‡Œ 3. ä¸»å¯¼å¹¶æ¨åŠ¨äº†ç§»åŠ¨ç«¯ç»„ä»¶ ne-rc çš„å¼€å‘å†å¼€å‘æ¥é’±çš„æ—¶å€™ï¼Œç§¯ç´¯äº†ä¸€å¥— react çš„åŸºç¡€ç»„ä»¶ï¼Œä½†æ˜¯è·Ÿä¸šåŠ¡è€¦åˆåº¦æ¯”è¾ƒé«˜ã€‚è€ƒè™‘åˆ°ä»¥åå¯èƒ½è¿˜è¦åšå…¶ä»–é¡¹ç›®ï¼Œå°±å’Œä¸€ä¼™ä¼´ä¸€èµ·å•†é‡ç€æŠŠåŸºç¡€ç»„ä»¶ä»ä¸šåŠ¡ä¸­æŠ½ç¦»å‡ºæ¥ï¼Œä½œä¸ºä¸€ä¸ªç¬¬ä¸‰æ–¹ç»„ä»¶åº“åœ¨æ¥å…¥åˆ°é¡¹ç›®ä¸­ã€‚ äºæ˜¯å°±æœ‰äº†: ne-rc,æˆ‘ä»¬çš„ç§»åŠ¨ç«¯ç»„ä»¶åº“ï¼Œç´¢ç„¶è¿˜åœ¨ä¸º 1.0 ç‰ˆæœ¬çš„å‘å¸ƒç»§ç»­åŠªåŠ›ï¼Œä½†å·²ç»æˆåŠŸæ¥å…¥äº†ä¸‰ä¸ªå†…éƒ¨çš„é¡¹ç›®ã€‚ æ•ˆæœæ˜¾è‘—ï¼Œå¤§å¤§é™ä½äº†é‡å¤å¼€å‘æˆæœ¬ï¼ŒåŒæ—¶ä¹Ÿé™ä½äº†æœªæ¥ç»´æŠ¤çš„æˆæœ¬ã€‚ç”±æ­¤å¯è§ï¼Œä¸€ä¸ªç¨³å®šå‘å±•çš„å›¢é˜Ÿï¼Œè¿˜æ˜¯éœ€è¦ä¸€å¥—è‡ªå·±çš„å†…éƒ¨ç»„ä»¶åº“çš„ã€‚ 4. å›¢é˜Ÿå·¥ä½œæ”¹è¿›ç”±äºåŸæœ‰ä¸šåŠ¡çº¿å‰ç«¯è´Ÿè´£äººåœ¨æˆ‘å…¥èŒåä¸ä¹…å°±ç¦»èŒäº†ï¼Œ å‰ç«¯æŠ€æœ¯éƒ¨æ´¾æˆ‘ä¸´æ—¶æŒ‘å¤§æ¢ã€‚æˆ‘æ·±çŸ¥è‡ªå·±ç»éªŒä¸è¶³ï¼Œä½†ä¹ŸçŸ¥é“è¿™æ˜¯ä¸€ä¸ªé”»ç‚¼çš„æœºä¼šï¼Œè¿™é‡Œéå¸¸æ„Ÿè°¢æˆ‘çš„è€å¤§ä¿¡ä»»æˆ‘ã€‚ æ‰€ä»¥æˆ‘éå¸¸åŠªåŠ›ï¼Œå’Œä¸šåŠ¡çº¿å›¢é˜Ÿçš„å°ä¼™ä¼´å°±å¦‚ä½•æé«˜æˆ‘ä»¬çš„å›¢é˜ŸæŠ€æœ¯å®åŠ›å’Œä¸šåŠ¡æ”¯æŒèƒ½åŠ›è®¨è®ºäº†å¾ˆå¤šï¼Œæœ€ååšäº†ä¸€ä¸‹äº‹æƒ…: å¼€å‘æ¡†æ¶ä¼˜åŒ– é—ç•™é¡¹ç›®æ”¹é€  é¡¹ç›®è§„èŒƒ æŠ€æœ¯è§„åˆ’ å¼€å‘æ¡†æ¶ä¼˜åŒ–æœ€ç»ˆçš„æˆæœå°±æ˜¯ä¸Šé¢è¯´çš„æ­å»ºäº†ä¸€å¥—å®Œæ•´çš„å¼€å‘ç¯å¢ƒã€‚å¹¶ä¸æ–­è¿›è¡Œä¼˜åŒ–ã€‚ä»ä¸€å¼€å§‹ç™½é¢†è´·é¡¹ç›®å¼€å‘æ—¶æ¯æ¬¡ rebuild éœ€è¦ 30s , æ‰“åŒ…ä¸Šçº¿éœ€è¦ 4~5 min åˆ°åæ¥å»èŠ±é¡¹ç›® rebuild 600ms, æ‰“åŒ…åªéœ€è¦ 1min .è¿™ä¸­é—´æ—¢æœ‰é’ˆå¯¹ webpack çš„ä¼˜åŒ–ï¼Œä¹Ÿæœ‰é¡¹ç›®å¼€æ”¾äº¤ä»˜æ–¹å¼çš„æ”¹å˜ã€‚ åœ¨è¿™äº›ä¼˜åŒ–çš„è¿‡ç¨‹ä¸­ï¼Œç§¯ç´¯äº†å¾ˆå¤šç»éªŒã€‚ é—ç•™é¡¹ç›®æ”¹é€ æœ‰å‡ ä¸ªé—ç•™é¡¹ç›®ï¼Œè™½ç„¶æ•´ä½“å¤„äºç»´æŠ¤çŠ¶æ€ï¼Œä½†å¶å°”è¿˜æ˜¯æœ‰å¾ˆå¤šè¿è¥éœ€æ±‚ã€‚è€ŒåŸæœ‰çš„å¼€å‘æ–¹å¼å’Œå‘å¸ƒæ–¹å¼éƒ½æ¯”è¾ƒéº»çƒ¦ï¼Œæˆ‘ä»¬ä¹Ÿå°½å¯èƒ½åœ¨ä¸éœ€è¦å¤šçš„é‡æ„çš„åŸºç¡€ä¸Šï¼Œè¿›è¡Œäº†é€æ­¥å‡çº§ã€‚ä¸»è¦æ˜¯æ„å»ºå’Œå‘å¸ƒä¸Šã€‚æ”¹å†™åŸæœ‰çš„ webpack é…ç½®æ–‡ä»¶æ–¹å¼ï¼Œå¹¶ä»æœ¬åœ°æ‰“åŒ…å‘å¸ƒå‡çº§åˆ°äº†çº¿ä¸Šæ‰“åŒ…å‘å¸ƒã€‚å‡è½»äº†è¿™äº›é¡¹ç›®çš„ç»´æŠ¤æˆæœ¬ã€‚ é¡¹ç›®è§„èŒƒä¸šåŠ¡çº¿ä¸Šäººå‘˜æ¥è¶Šå¤šï¼Œåœ¨éœ€è¦åˆä½œçš„æƒ…å†µä¸‹ï¼Œè§„èŒƒæ˜¯å¿…ä¸å¯å°‘ã€‚æˆ‘ä»¬ä»é¡¹ç›®æ–‡æ¡£ã€ä»£ç é£æ ¼æ£€æŸ¥ã€Git åˆ†æ”¯ç®¡ç†ã€ä»£ç  review ç­‰å„ä¸ªæ–¹é¢åˆ¶è®¢äº†å®Œå–„åˆå°½å¯èƒ½ä¸ç¹ççš„è§„èŒƒã€‚ æŠ€æœ¯è§„åˆ’æˆ‘ä»¬ç»„çš„é¡¹ç›®å¤§å¤šåº”ç”¨ react ï¼Œæ‰€ä»¥éœ€è¦æŒç»­å…³æ³¨ react ç”Ÿæ€ç¾¤çš„æŠ€æœ¯åŠ¨å‘ã€‚ä½†åŒæ—¶ä¹Ÿå…³æ³¨å…¶ä»–æŠ€æœ¯å’Œè§£å†³æ–¹æ¡ˆï¼ŒåŒ…æ‹¬ Nodejs , Angular ç­‰ã€‚å‰ç«¯æŠ€æœ¯éƒ¨ä¹Ÿè®©æˆ‘ä»¬å¤šçœ‹çœ‹ Vue . ç„¶è€Œåˆ°ç°åœ¨æˆ‘éƒ½æ²¡çœ‹è¿‡ Vue ï¼Œå“ˆå“ˆï¼Œå¯èƒ½æ˜¯æä¸èµ·å…´è¶£å§ã€‚ 5. ä¸šåŠ¡æ”¯æŒè™½ç„¶æˆ‘ä»¬å‰ç«¯æŠ€æœ¯éƒ¨å±äºèŒèƒ½éƒ¨é—¨ï¼Œä½†æ”¯æŒä¸šåŠ¡ä»ç„¶æ˜¯æˆ‘ä»¬å·¥ä½œçš„æœ€ä¸»è¦æ„æˆéƒ¨åˆ†ï¼Œæ¯•ç«Ÿå…¬å¸è¦èµšé’±ã€‚é™¤äº†ä¸€äº›å°çš„ä»¥åŠä¸€äº›åå°é¡¹ç›®ï¼Œæˆ‘ä¸»è¦å‚ä¸ç»´æŠ¤å’Œå¼€å‘ä¸€ä¸‹é¡¹ç›®ï¼š a. ç™½é¢†è´·é¡¹ç›®ç»´æŠ¤b. æ¥é’±é¡¹ç›®å¼€å‘å¹¶ä¸Šçº¿c. å»èŠ±é¡¹ç›®å¼€å‘å¹¶ä¸Šçº¿ å»èŠ±æœ€è¿‘å°±è¦ä¸Šçº¿äº†ï¼Œæˆ‘ä»¬å·²ç»å¼€å§‹å†…æµ‹äº†ã€‚è¿™æ˜¯ä¸€ä¸ªæä¾›åˆ†æœŸçš„é¡¹ç›®ï¼Œç›®å‰åªæ¥å…¥äº†è€ƒæ‹‰ï¼Œé©¬ä¸Šä¹Ÿè¦å¯¹å¤–äº†ï¼Œä¸ä¹…å¤§å®¶å°±åœ¨è€ƒæ‹‰ä¸Šè´­ç‰©æ—¶å°±å¯ä»¥æœ‰åˆ†æœŸçš„æ”¯ä»˜é€‰é¡¹äº†ã€‚ çœ‹åˆ°é¡¹ç›®ä¸Šçº¿ï¼Œè¿˜æ˜¯å¾ˆé«˜å…´çš„ğŸ˜„ã€‚ æ€»ç»“æ—¶é—´è¿˜æ˜¯è›®å¿«çš„ï¼Œ éƒ½æ¥ç½‘æ˜“ä¸€å¹´å¤šäº†ã€‚ è¿™æ®µæ—¶é—´æˆé•¿äº†è®¸å¤šï¼Œæ— è®ºæ—¶å·¥ä½œæŠ€èƒ½ã€æ²Ÿé€šæŠ€èƒ½è¿˜æ˜¯å·¥ä½œæµç¨‹å’Œè§„èŒƒï¼Œéƒ½è®©æˆ‘å­¦ä¼šäº†å¾ˆå¤šä¸œè¥¿ã€‚ ä¹Ÿè®¤è¯†äº†å¾ˆå¤šä¼˜ç§€çš„åŒäº‹ï¼Œèƒ½è·Ÿè¿™äº›ä¼˜ç§€çš„åŒäº‹ä¸€èµ·åšäº‹æƒ…ï¼Œä¹Ÿæ˜¯ä¸€ä»¶å¾ˆå¼€å¿ƒçš„äº‹æƒ…ã€‚ä¹Ÿè®¸ä»¥åä¸ä¼šä¸€ç›´åœ¨ç½‘æ˜“ï¼Œä½†åœ¨ç½‘æ˜“çš„è¿™æ®µç»å†è¿˜æ˜¯å¾ˆå€¼å¾—çš„ã€‚]]></content>
      <categories>
        <category>éšç¬”</category>
      </categories>
  </entry>
  <entry>
    <title><![CDATA[React-Redux æºç ç²—è¯»]]></title>
    <url>%2F2017%2F08%2F03%2Freact-redux-source-code-read%2F</url>
    <content type="text"><![CDATA[Overviewé¦–å…ˆçœ‹ä¸€å¼ å›¾ï¼š å¯ä»¥çœ‹åˆ°å…¥å£æ–‡ä»¶é‡Œé¢å¼•å…¥äº†è¿™å‡ ä¸ªæ¨¡å—ï¼š Provider connectAdvanced connect æˆ‘ä»¬å°±æ¥ä¾æ¬¡çœ‹ä¸€ä¸‹è¿™å‡ ä¸ªæ¨¡å— Providerå°† store æŒ‚åœ¨åœ¨äº† context ä¸Šé¢ï¼Œç»™äºˆäº†å­ç»„ä»¶è®¿é—® store çš„èƒ½åŠ›ã€‚ connectAdvancedä¸€ä¸ªç”¨æ¥ç”Ÿæˆ connect çš„é«˜é˜¶å‡½æ•°,å¼•ç”¨äº†ä»¥ä¸‹æ¨¡å—:import hoistStatics from 'hoist-non-react-statics'import invariant from 'invariant'import &#123; Component, createElement &#125; from 'react'import Subscription from '../utils/Subscription'import &#123; storeShape, subscriptionShape &#125; from '../utils/PropTypes' Subscriptioné¦–å…ˆçœ‹ä¸€ä¸‹ Subscription æ¨¡å—ã€‚ createListenerCollectionå®ç°ä¸€ä¸ªè®¢é˜…å‘å¸ƒæ¨¡å¼ï¼Œæä¾› clearï¼Œnotifyï¼Œsubscribe æ–¹æ³•ã€‚åˆ†åˆ«ç”¨æ¥æ¸…é™¤å½“å‰é˜Ÿåˆ—ï¼Œè§¦å‘äº‹ä»¶ï¼Œè®¢é˜…æ–¹æ³•ã€‚ Subscriptionè®¢é˜…ç±»ï¼Œè®¢é˜… onStateChange äº‹ä»¶ï¼ŒåŒæ—¶ç¡®ä¿å½“çˆ¶çº§ä¹Ÿæœ‰äº‹ä»¶è®¢é˜…æ—¶ï¼Œäº‹ä»¶è§¦å‘æ—¶ï¼Œå…ˆè§¦å‘çˆ¶çº§äº‹ä»¶ï¼Œç„¶åå†è§¦å‘å½“å‰ç»„ä»¶äº‹ä»¶ã€‚ makeSelectorStateful(sourceSelector,store):selectorfunction makeSelectorStateful(sourceSelector, store) &#123; // wrap the selector in an object that tracks its results between runs. const selector = &#123; run: function runComponentSelector(props) &#123; try &#123; const nextProps = sourceSelector(store.getState(), props) if (nextProps !== selector.props || selector.error) &#123; selector.shouldComponentUpdate = true selector.props = nextProps selector.error = null &#125; &#125; catch (error) &#123; selector.shouldComponentUpdate = true selector.error = error &#125; &#125; &#125; return selector&#125; selector ç”¨æ¥é€šè¿‡ state å’Œ prop æ¥è®¡ç®—å‡ºä¸‹ä¸€ä¸ªçŠ¶æ€çš„ propsï¼Œç„¶åä¼ é€’ç»™è¿æ¥çš„ç»„ä»¶ã€‚æ­¤å‡½æ•°æ˜¯å¯¹ selector çš„å°è£…ï¼Œåœ¨è®¡ç®— props çš„åŸºç¡€ä¸Šï¼Œå¹¶è®°å½•ä¸Šä¸€æ¬¡è®¡ç®—çš„ç»“æœã€‚ connectAdvanced(selectorFactory,{options}):wrapWithConnect(WrappedComponent)connectAdvanced çš„åŠŸèƒ½ä¸»è¦æ˜¯æ ¹æ®ä¼ å…¥çš„ selectorFactory, options è¿”å›ç”¨äºç”Ÿæˆ Connect ç»„ä»¶ä¸€ä¸ªé«˜é˜¶ç»„ä»¶ã€‚ connectclass Connect extends Component &#123; constructor(props, context) &#123; super(props, context) ... this.initSelector() this.initSubscription() &#125; ... initSelector() &#123; const sourceSelector = selectorFactory(this.store.dispatch, selectorFactoryOptions) this.selector = makeSelectorStateful(sourceSelector, this.store) this.selector.run(this.props) &#125; initSubscription() &#123; if (!shouldHandleStateChanges) return // parentSub's source should match where store came from: props vs. context. A component // connected to the store via props shouldn't use subscription from context, or vice versa. const parentSub = (this.propsMode ? this.props : this.context)[subscriptionKey] this.subscription = new Subscription(this.store, parentSub, this.onStateChange.bind(this)) // `notifyNestedSubs` is duplicated to handle the case where the component is unmounted in // the middle of the notification loop, where `this.subscription` will then be null. An // extra null check every change can be avoided by copying the method onto `this` and then // replacing it with a no-op on unmount. This can probably be avoided if Subscription's // listeners logic is changed to not call listeners that have been unsubscribed in the // middle of the notification loop. this.notifyNestedSubs = this.subscription.notifyNestedSubs.bind(this.subscription) &#125; ... render() &#123; const selector = this.selector selector.shouldComponentUpdate = false if (selector.error) &#123; throw selector.error &#125; else &#123; return createElement(WrappedComponent, this.addExtraProps(selector.props)) &#125; &#125;&#125; å®šä¹‰åœ¨ connectAdvanced å†…éƒ¨çš„ç»„ä»¶ï¼Œé€šè¿‡ context è·å– store ä¸­æ•°æ®ï¼Œé€šè¿‡ initSelector æ–¹æ³•åˆå§‹åŒ–ä¸€ä¸ªåŒ…å«åˆå§‹ store çš„ selector, å¹¶é€šè¿‡ initSubscription æ–¹æ³•è®¢é˜… store çš„å˜åŒ–ã€‚æ­¤ç»„ä»¶çš„ render æ–¹æ³•åªæ˜¯ä¸€ä¸ªä»£ç†ï¼Œç”¨æ¥æŠŠé€šè¿‡ selector è®¡ç®—å‡ºæ¥çš„ props ä¼ é€’ç»™éœ€è¦åŒ…è£¹çš„ç»„ä»¶ã€‚ connectconnect å¼•å…¥äº†ä»¥ä¸‹æ¨¡å—ï¼šimport connectAdvanced from '../components/connectAdvanced'import shallowEqual from '../utils/shallowEqual'import defaultMapDispatchToPropsFactories from './mapDispatchToProps'import defaultMapStateToPropsFactories from './mapStateToProps'import defaultMergePropsFactories from './mergeProps'import defaultSelectorFactory from './selectorFactory' åªæ˜¯åœ¨ connectAdvanced çš„åŸºç¡€ä¸Šï¼Œä¼ å…¥äº† selectorFactory å’Œ mapStateToPropsFactories, mapDispatchToProps, mapDispatchToPropsFactories ä½œä¸º connectAdvanced çš„ options å‚æ•°ã€‚ defaultSelectorFactoryå®šä¹‰äº†é»˜è®¤ selector çš„è¡Œä¸ºï¼Œç”¨æ¥ä»ä¼ å…¥çš„ state ä¸­è®¡ç®—ä¸‹ä¸€ä¸ªçŠ¶æ€çš„ props. defaultMap xxx To xxx Factoriesè¿™ç±»æ¨¡å—ç”¨æ¥ç”Ÿæˆæ˜ å°„åˆ° props æ–¹æ³•çš„å·¥å‚å‡½æ•°ï¼Œå®ƒä»¬çš„ä»£ç å¦‚ä¸‹å½¢å¼ï¼šimport &#123; bindActionCreators &#125; from 'redux'import &#123; wrapMapToPropsConstant, wrapMapToPropsFunc &#125; from './wrapMapToProps'export function whenMapDispatchToPropsIsFunction(mapDispatchToProps) &#123; return (typeof mapDispatchToProps === 'function') ? wrapMapToPropsFunc(mapDispatchToProps, 'mapDispatchToProps') : undefined&#125;export function whenMapDispatchToPropsIsMissing(mapDispatchToProps) &#123; return (!mapDispatchToProps) ? wrapMapToPropsConstant(dispatch =&gt; (&#123; dispatch &#125;)) : undefined&#125;export function whenMapDispatchToPropsIsObject(mapDispatchToProps) &#123; return (mapDispatchToProps &amp;&amp; typeof mapDispatchToProps === 'object') ? wrapMapToPropsConstant(dispatch =&gt; bindActionCreators(mapDispatchToProps, dispatch)) : undefined&#125; å¯ä»¥çœ‹åˆ°ï¼Œä¸»è¦å¼•ç”¨äº† wrapMapToProps è¿™ä¸ªæ¨¡å—ã€‚ wrapMapToPropswrapMapToPropsFuncè¿™ä¸ªæ–¹æ³•æ˜¯ä¸€ä¸ªé€šè¿‡æŠŠ mapToProps å‡½æ•°åŒ…è£¹èµ·æ¥ä½œä¸ºä¸€ä¸ªä»£ç†å‡½æ•°,ç”¨æ¥åšä¸€ä¸‹å‡ ä»¶äº‹æƒ…ï¼š æ£€æµ‹ mapToProps å‡½æ•°çš„è°ƒç”¨æ˜¯å¦ä¾èµ–ä¸ props, ç”¨æ¥ä¾› selectorFactory æ¥å†³å®šåœ¨ props å˜åŒ–çš„æ—¶å€™æ˜¯å¦éœ€è¦é‡æ–°è°ƒç”¨ã€‚ åœ¨ç¬¬ä¸€æ¬¡è°ƒç”¨çš„æ—¶å€™ï¼Œå¦‚æœ mapToProp æ‰§è¡Œåè¿”å›å¦ä¸€ä¸ªå‡½æ•°ï¼Œé‚£ä¹ˆå¤„ç†å®ƒï¼Œå¹¶ä¸”æŠŠè¿™ä¸ªè¿”å›çš„å‡½æ•°ä½œä¸ºæ–°çš„ mapToProps ç”¨æ¥å¤„ç†åç»­çš„è°ƒç”¨ã€‚ å½“ç¬¬ä¸€æ¬¡è°ƒç”¨çš„æ—¶å€™ï¼ŒéªŒè¯è°ƒç”¨çš„ç»“æœæ˜¯å¦æ˜¯ä¸€ä¸ªå­—é¢é‡å¯¹è±¡ã€‚ä¸ºäº†èƒ½å¤Ÿè­¦å‘Šå¼€å‘è€…ï¼Œä»–ä»¬çš„ mapToProps å‡½æ•°æ²¡æœ‰è¿”å›ä¸€ä¸ªåˆæ³•çš„ç»“æœã€‚ æ€»ç»“react-redux å°±æ˜¯ä¸€ä¸ªç”¨æ¥ç»‘å®š redux åˆ° react çš„ä¸€ä¸ªåº“ã€‚å¦‚æœä¸ç”¨ react-redux çš„è¯ï¼Œç›´æ¥åœ¨ react é‡Œé¢å»ç”¨ redux ä¹Ÿæ˜¯å¯ä»¥çš„ï¼Œåªæ˜¯è¿‡äºéº»çƒ¦ã€‚éœ€è¦æ‰‹åŠ¨ç›‘å¬ store çš„å˜åŒ–ï¼Œå¹¶æ‰‹åŠ¨æ‰§è¡Œç»„ä»¶çš„ render æ–¹æ³•ã€‚react-redux æä¾›äº†ä¸€ä¸ªé«˜é˜¶ç»„ä»¶ connect æ¥å¸®æˆ‘ä»¬åšè¿™ä»¶äº‹æƒ…ï¼Œè€Œä¸”å¸®æˆ‘ä»¬åšäº†ä¸€äº›ä¼˜åŒ–ã€‚æˆ‘ä»¬éœ€è¦çš„åªæ˜¯ï¼Œæä¾› mapDispatchToProps å’Œ mapStateToProps ç»™éœ€è¦ç›‘å¬ store çš„ç»„ä»¶å°±å¯ä»¥äº†ã€‚]]></content>
      <categories>
        <category>æŠ€æœ¯</category>
      </categories>
      <tags>
        <tag>React</tag>
        <tag>Redux</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[åŸºäº React çš„å‰ç«¯é¡¹ç›®å¼€å‘æ€»ç»“]]></title>
    <url>%2F2017%2F05%2F12%2Freact-base-project-summary%2F</url>
    <content type="text"><![CDATA[æŠ€æœ¯é€‰å‹æˆ‘ä»¬çš„é¡¹ç›®ä¸»è¦é€‰ç”¨ä»¥ä¸‹æŠ€æœ¯å¼€å‘ï¼Œå†é…åˆä¸€äº›å…¶å®ƒè¾…åŠ©å·¥å…·ã€‚ react react-router redux react-redux å¼€å‘åŠçº¿ä¸Šç¯å¢ƒå¼€å‘ç¯å¢ƒç”±äºé¡¹ç›®æ˜¯å‰åç«¯åˆ†ç¦»çš„ï¼Œæ‰€ä»¥æˆ‘ä»¬éœ€è¦ä¸€å¥—å®Œæ•´çš„å¼€å‘ç¯å¢ƒï¼Œéœ€è¦åŒ…æ‹¬ä»¥ä¸‹åŠŸèƒ½ï¼š æ•°æ® Mock Webpack å®æ–½ç¼–è¯‘åˆ·æ–° æ–¹ä¾¿å‰åç«¯è”è°ƒ åŸºäºè¿™äº›éœ€æ±‚ï¼Œæˆ‘ä»¬åŸºäº Express, Webpack,Webpack-dev-middleware æ­å»ºäº†è¿™å¥—å®Œæ•´çš„å¼€å‘ç¯å¢ƒã€‚ å¯ä»¥çœ‹åˆ°ï¼Œæµè§ˆå™¨æ‰€æœ‰çš„è¯·æ±‚éƒ½è¢«æœ¬åœ°çš„ Node.js æœåŠ¡æ‹¦æˆªã€‚å¯¹äºé™æ€èµ„æºè¯·æ±‚ï¼Œéƒ½å§”æ‰˜ç»™ webpack-dev-middleware æ¥å¤„ç†ï¼Œå¯¹äºæ¥å£è¯·æ±‚æ ¹æ®ä¸åŒçš„ç¯å¢ƒæ¥å†³å®šè¦åšçš„æ“ä½œã€‚ æœ¬åœ°å¼€å‘å½“ ENV = &#39;development&#39; æ—¶ï¼Œä¹Ÿå°±æ˜¯å¼€å‘ç¯å¢ƒï¼Œé‚£ä¹ˆå°±ç›´æ¥è¯»å–æœ¬åœ°çš„ mock æ•°æ®æ¥æ¸²æŸ“é¡µé¢ã€‚ å‰åç«¯è”è°ƒå½“ ENV = &#39;api&#39; æ—¶ï¼Œä¹Ÿå°±æ˜¯æˆ‘ä»¬è®¤ä¸ºçš„è”è°ƒç¯å¢ƒï¼Œè¿™ä¸ªæ—¶å€™å¯¹äºæ¥å£è¯·æ±‚ç”± node.js è½¬å‘åˆ°éœ€è¦è”è°ƒçš„çœŸå®åç«¯æœåŠ¡åœ°å€ä¸Šï¼Œä»è€Œé¿å…ç›´æ¥è°ƒç”¨æ‰€äº§ç”Ÿçš„è·¨åŸŸé—®é¢˜ã€‚ è¿™æ ·å°±å¯ä»¥ç›´æ¥ç”¨æœ¬åœ°å¼€å‘ä»£ç å’Œåç«¯è”è°ƒï¼Œèƒ½å¤§å¤§æé«˜æ•ˆç‡ï¼Œçœå»äº†æ¯æ¬¡éœ€è¦å¾€æœåŠ¡å™¨ä¸Šæ„å»ºéƒ¨ç½²çš„æ­¥éª¤ã€‚ çº¿ä¸Šç¯å¢ƒ å‰åç«¯æ˜¯åˆ†å¼€éƒ¨ç½²çš„ï¼Œæ‰€æœ‰çš„é™æ€èµ„æºéƒ½æ”¾åœ¨ CDN (example.cdn.com)ä¸Šé¢ã€‚ ä¹Ÿå°±æ˜¯è¯´æˆ‘ä»¬çš„é¡µé¢åœ¨ example.cdn/index.html è¿™é‡Œï¼Œä½†æ˜¯è¯·æ±‚çš„æ¥å£åœ¨ example.163.com/api/xxx,æˆ‘ä»¬è‚¯å®šä¸èƒ½è®©ç”¨æˆ·å»ç›´æ¥å»è®¿é—® example.cdn.com/index.html,è¿™æ ·ä¸åˆç†ï¼Œè€Œä¸”ç”±è·¨åŸŸé—®é¢˜å­˜åœ¨ é‚£ä¹ˆè®¿é—® example.dai.163.com çš„æ—¶å€™ï¼Œæ€ä¹ˆæ‹¿åˆ°æˆ‘ä»¬çš„ html é¡µé¢å‘¢ï¼Ÿçœ‹ä¸‹å›¾ï¼š åœ¨å®¢æˆ·ç«¯å’Œåå°æœåŠ¡ä¹‹é—´æ¶è®¾ä¸€å° nginx, æˆ‘ä»¬è®¿é—®çš„ example.dai.163.com æœ‰ä¸¤ç§è¯·æ±‚ï¼š html é¡µé¢èµ„æº æ¥å£è¯·æ±‚ è¿™ä¸¤ç§è¯·æ±‚éƒ½å…ˆç»è¿‡ nginxï¼Œåœ¨è¿™é‡Œåšåˆ¤æ–­ï¼Œå¦‚æœæ˜¯é¡µé¢è¯·æ±‚é‚£ä¹ˆç”± nginx è½¬å‘åˆ° CDNï¼Œ å¦åˆ™äº¤ç»™åç«¯æœåŠ¡æ¥å“åº”æ¥å£è¯·æ±‚ã€‚ æ‹¿åˆ°é¡µé¢ä»¥åï¼Œå…¶å®ƒæ‰€æœ‰çš„ css, js ç­‰é™æ€èµ„æºéƒ½æ˜¯ç›´æ¥è¯·æ±‚åˆ° CDN ï¼Œè¿™é‡Œæ²¡ä»€ä¹ˆè¯´çš„ã€‚ æ•°æ®æµè½¬å€ŸåŠ© redux æ¥ç®¡ç†æ•°æ®æµï¼Œæˆ‘ä»¬æ¥çœ‹è¿™å¼ å›¾ã€‚ é¦–å…ˆï¼Œé€šè¿‡ middleware å’Œ reducer ç”Ÿæˆ store, ç„¶åè·å¾—é¡¹ç›®çš„åˆå§‹ state,é€šè¿‡åˆå§‹ state å»æ¸²æŸ“é¡µé¢çš„åˆå§‹çŠ¶æ€ã€‚ ä»¥ Home é¡µé¢ä¸ºä¾‹ï¼Œé¦–å…ˆ Home é€šè¿‡ react-redux æä¾›çš„ connect æ–¹æ³•æ‹¿åˆ°åˆå§‹ state ä½œä¸º Home çš„ prop ä¼ é€’ç»™ Home. è€Œ Home ç”±å¤šä¸ªä¸åŒçš„å­ç»„ä»¶ç»„æˆï¼Œè¿™äº›ç»„ä»¶çš„éœ€è¦æ•°æ®å†ç”± Home é€šè¿‡ props ä¼ é€’ç»™è‡ªå·±çš„å­ç»„ä»¶ã€‚ å½“ Home çš„åˆå§‹çŠ¶æ€åŠ è½½å®Œæ¯•åï¼Œæˆ‘ä»¬éœ€è¦å‘åç«¯è¯·æ±‚å»æ‹¿å»ä¸€äº›ç”¨æˆ·æ•°æ®ã€‚è¿™æ—¶ï¼Œæˆ‘ä»¬åˆ†å‘ä¸€ä¸ªä¸‹é¢è¿™ç§æ ¼å¼çš„ action:&#123; types: ['home/start','home/success','home/failure'], payload: &#123; api: ... &#125;, meta: &#123; isApi: true &#125;&#125; æ‰€æœ‰çš„ action éƒ½ä¼šæŒ‰ç…§æˆ‘ä»¬åˆ¶å®šçš„å¾ªåºé€šè¿‡ä¸€ä¸ªä¸ª middleware. åœ¨è¿™é‡Œï¼Œæˆ‘ä»¬çš„ action ä¼šè¢« callApiMiddleware é€šè¿‡ meta é‡Œé¢çš„ isApi æ ‡è¯†å‘½ä¸­ï¼Œå¹¶å»åšç›¸åº”çš„äº‹æƒ…ã€‚ æ¯”å¦‚åœ¨è¿™ä¸ªä¸­é—´ä»¶é‡Œé¢ï¼Œæˆ‘ä»¬å»åšäº†çœŸå®çš„æ¥å£è¯·æ±‚ï¼Œåœ¨è¯·æ±‚æˆåŠŸæˆ–å¤±è´¥çš„æ—¶å€™åˆ†å‘å¯¹åº”çš„ actionï¼Œä»¥åŠåšä¸€äº›ç»Ÿä¸€çš„ä¸šåŠ¡é€»è¾‘ã€‚æ¯”å¦‚æˆ‘ä»¬å¯¹åç«¯è¿”å›çš„æ¥å£ä¸­ code å€¼æœ‰ç»Ÿä¸€çš„çº¦å®šï¼Œå‡è®¾ 1 ä¸ºæˆåŠŸï¼Œ 2 ä¸ºå¤±è´¥ï¼Œ 3 ä¸ºæœªç™»å½•ã€‚é‚£ä¹ˆæˆ‘ä»¬å°±å¯ä»¥åœ¨ä¸­é—´ä»¶ä¸­å»å¤„ç†è¿™äº›ä¸šåŠ¡é€»è¾‘ã€‚ å½“è¯·æ±‚æˆåŠŸï¼Œå¹¶æ¸²æŸ“é¡µé¢åï¼Œå‡è®¾ç”¨æˆ·ç‚¹å‡»äº†ä¸€ä¸ªæŒ‰é’®ï¼Œè¿™ä¸ªæŒ‰é’®éœ€è¦å”¤èµ· native çš„ä¸€äº›åŠŸèƒ½ï¼Œæ¯”å¦‚è¯´æ‹ç…§ã€‚é‚£ä¹ˆæˆ‘ä»¬åˆ†å‘ä¸€ä¸ªå”¤èµ·æ‹ç…§åŠŸèƒ½çš„ camera/start çš„action:&#123; types: ['sdk/start','sdk/success','sdk/failure'], payload: &#123; command: ... &#125;, meta: &#123; isSDK: true &#125;&#125; åŒæ ·çš„é“ç†ï¼Œè¿™ä¸ª action ä¼šè¢« EpaySDKMiddleware æ‰€è¯†åˆ«å¹¶å¤„ç†ï¼Œåœ¨è°ƒèµ· native çš„æ—¶å€™ï¼Œ ä¸ºäº†ä¿è¯å®‰å…¨æ€§ï¼Œæˆ‘ä»¬éœ€è¦å‘åå‘èµ·ä¸€ä¸ªè¯·æ±‚å»æ‹¿ç­¾åï¼Œè¿™ä¸ªæ—¶å€™å°±å¯ä»¥åœ¨ EpaySDKMiddleware é‡Œé¢åˆ†å‘ä¸€ä¸ªæ¥å£è¯·æ±‚çš„ actionï¼Œé‚£ä¹ˆè¿™ä¸ª action åŒæ ·éœ€è¦èµ°ä¸€éæ‰€æœ‰çš„ middleware. é‚£ä¹ˆè¿™ä¸ªæ¥å£è¯·æ±‚çš„ action å°±ä¼šåƒä¸Šé¢çš„æµç¨‹ä¸€æ ·ï¼Œé€šè¿‡ callApiMiddleware å»å¤„ç†ã€‚ ä¸­é—´ä»¶çš„å­˜åœ¨ï¼Œä½¿æ•´ä¸ªæµç¨‹å˜å¾—éå¸¸æ¸…æ™°ï¼Œæ¥å£çš„è¯·æ±‚çš„ä¸­é—´ä»¶å°±åªåšæ¥å£è¯·æ±‚ï¼Œè°ƒç”¨ native æ¥å£çš„ä¸­é—´ä»¶å°±åªåšå¯¹ native çš„è°ƒç”¨ï¼Œå½“å¯¹ native æ¥å£çš„è°ƒç”¨éœ€è¦åšåç«¯æ¥å£è¯·æ±‚çš„æ—¶å€™ï¼Œå»åˆ†å‘ä¸€ä¸ª action èµ°æ¥å£è¯·æ±‚çš„ä¸­é—´ä»¶ã€‚ æ¯ä¸ªä¸­é—´ä»¶åªä¸“æ³¨äºè‡ªå·±çš„äº‹æƒ…ï¼Œæ—¢æ–¹ä¾¿åç»­çš„ç»´æŠ¤ï¼ŒåŒæ—¶ä¹Ÿæä¾›äº†ä¸€ä¸ªå¾ˆå¥½çš„æ‹“å±•æ–¹å¼ã€‚è€Œ View å±‚éœ€è¦åšçš„å°±åªæ˜¯åšå‡ºåˆ†å‘ actionï¼Œç„¶åæ‹¿æ•°æ®æ¸²æŸ“é¡µé¢å°±å¯ä»¥äº†ï¼Œå…¶ä»–çš„é€»è¾‘éƒ½ä¸ç”¨å…³å¿ƒã€‚ ä¸€ä¸ªä¾‹å­ å‡è®¾æˆ‘ä»¬ç”±å¦‚ä¸‹çš„ä¸€ä¸ªè·¯ç”±é…ç½®ã€‚&#123; component: App, path: '/', onEnter: initLogin(store), indexRoute: &#123; getComponent(nextState, cb) &#123; require.ensure([], require =&gt; &#123; cb(null, require('../views/Home').default) &#125;, 'Home') &#125;, onEnter: initHome(store) &#125;, childRoutes: [ createActivateRoute(store), &#123; path: 'test', indexRoute: &#123; getComponent(nextState, cb) &#123; require.ensure([], require =&gt; &#123; cb(null, require('../views/Test').default) &#125;, 'Test') &#125; &#125; &#125;, ... ]&#125; é‚£ç»“åˆ react-route æˆ‘ä»¬æ¥çœ‹ä¸€ä¸ªå®Œæ•´çš„æµç¨‹ã€‚å½“æˆ‘ä»¬æµè§ˆå™¨é‡Œé¢è¾“å…¥ example.dai.163.com/index.html/#/ çš„æ—¶å€™ã€‚ é¦–å…ˆï¼Œé€šè¿‡æœ€ä¸Šé¢ çº¿ä¸Šç¯å¢ƒ ä¸€èŠ‚æåˆ°çš„å†…å®¹ï¼Œæ‹¿åˆ°é¡µé¢éœ€è¦ html,css,js. ç„¶åæ¸²æŸ“ Provide å’Œ Router ç»„ä»¶ï¼Œåˆ†åˆ«æä¾› store çš„æ³¨å…¥å’Œè·¯ç”±çš„æ§åˆ¶ã€‚ æ­¤æ—¶è§¦å‘æ ¹è·¯å¾„çš„è·¯ç”±åŒ¹é…ï¼Œç„¶ååŠ è½½æ ¹ç»„ä»¶ APP, ç„¶åæ ¹æ®è·¯ç”±åŒ¹é…è§„åˆ™åŒ¹é…åˆ° IndexRouter, åŠ è½½ Home ç»„ä»¶ã€‚ åé¢çš„äº‹æƒ…å°±å’Œå‰é¢æ•°æ®æµè½¬ä¸€èŠ‚è®²çš„æ˜¯ä¸€æ ·çš„äº†ã€‚ æ€»ç»“åœ¨å‰åç«¯å®Œå…¨åˆ†ç¦»çš„åŸºç¡€ä¸Šï¼Œå€ŸåŠ©ä¸€å¥—å®Œå–„çš„å¼€å‘ç¯å¢ƒï¼Œå¯ä»¥å¤§å¤§æé«˜çš„æˆ‘ä»¬çš„å¼€å‘æ•ˆç‡ï¼Œé™ä½å‰åç«¯è”è°ƒçš„æˆæœ¬ã€‚ åŒæ—¶å€ŸåŠ©äº Redux æ€æƒ³ï¼Œå®ç°å•å‘æ•°æ®æµï¼Œè®©æˆ‘ä»¬å¯ä»¥å®ç°ä¸€ä¸ªéå¸¸æ¸…æ™°çš„æ•°æ®æµå‘ã€‚å¹¶ä¸”ï¼Œå€ŸåŠ©äºä¸­é—´ä»¶ï¼Œæˆ‘ä»¬å¯ä»¥æ›´åŠ æœ‰æ•ˆçš„æ§åˆ¶æ•°æ®æµè½¬çš„è¿‡ç¨‹ã€‚ä¸ºåé¢é¡¹ç›®çš„æ‰©å±•æä¾›æ— é™çš„æƒ³è±¡ç©ºé—´ã€‚]]></content>
      <categories>
        <category>æŠ€æœ¯</category>
      </categories>
      <tags>
        <tag>React</tag>
        <tag>Redux</tag>
        <tag>react-router</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[React å•é¡µé¢åˆå§‹åŒ–æ¸²æŸ“ä¼˜åŒ–]]></title>
    <url>%2F2017%2F04%2F20%2Freact-page-render-improve%2F</url>
    <content type="text"><![CDATA[ç”±äºé¡¹ç›®ä½¿ç”¨ React, React-Router, Redux æ¥å¼€å‘é¡¹ç›®ï¼Œé‡‡å–äº†å‰ç«¯æ¸²æŸ“çš„æ–¹å¼ï¼ˆå¦‚æœé‡‡ç”¨ ssr å°±ä¸ä¼šæœ‰è¿™ä¸ªé—®é¢˜ï¼‰ã€‚ é—®é¢˜æ‰€ä»¥æ¯åˆ°ä¸€ä¸ªé¡µé¢ï¼Œéœ€è¦å‘ä¸€ä¸ªåˆå§‹åŒ–çš„è¯·æ±‚æ¥è·å–é¡µé¢æ•°æ®ï¼Œç„¶åé‡æ–°æ¸²æŸ“é¡µé¢ï¼Œæ‰€ä»¥ä¹‹å‰ä¸€ä¸ªé¡µé¢ä»è¯·æ±‚åˆ°åŠ è½½å®Œæ¯•çš„æµç¨‹æ˜¯è¿™æ ·çš„ï¼šRoute match -&gt; ComponentWillMount -&gt; render -&gt; ComponentDidMount -&gt; dispatch(init())-&gt; render -&gt; componentDidUpdate é¦–å…ˆæ˜¯è·¯ç”±åŒ¹é…ï¼Œç„¶åå‡†å¤‡åŠ è½½ç»„ä»¶ï¼Œä½¿ç”¨é€šè¿‡ Reducer é‡Œé¢çš„åˆå§‹åŒ– state è¿›è¡Œ render, ç„¶åè§¦å‘ ComponentDidMount äº‹ä»¶ï¼Œåœ¨è¿™ä¸ªäº‹ä»¶é‡Œé¢å» dispatch ä¸€ä¸ªæ‰§è¡Œé¡µé¢åˆå§‹åŒ–çš„è¯·æ±‚çš„ Actionï¼Œè¯·æ±‚æˆåŠŸè¿‡ä»¥åè§¦å‘ç»„ä»¶çš„é‡æ–°æ¸²æŸ“ã€‚ å¯ä»¥çœ‹åˆ°ï¼Œå±•ç¤ºæœ€ç»ˆçš„é¡µé¢éœ€è¦ç»„ä»¶é‡æ–°æ¸²æŸ“ä¸¤æ¬¡ã€‚ä¸€æ¬¡æ˜¯ä½¿ç”¨å†™æ­»åœ¨å‰ç«¯çš„reducer é‡Œé¢çš„ initialState æ•°æ®æ¥æ¸²æŸ“ï¼Œä¸€æ¬¡æ˜¯åœ¨æ‹¿åˆ°åç«¯æ•°æ®è¿›è¡Œçš„æ¸²æŸ“ã€‚ æ‰€ä»¥æœ‰çš„æ—¶å€™ä¼šå‡ºç°é—ªå±çš„æƒ…å†µï¼Œç”¨æˆ·ä½“éªŒå¾ˆä¸å¥½ã€‚ æˆ‘ä»¬çš„è¦æ±‚æ˜¯è¿›é¡µé¢ä»¥åå°±æ˜¯ç”¨ä»åå°è·å–çš„æœ€æ–°æ•°æ®æ¸²æŸ“çš„é¡µé¢ï¼Œæ•´ä¸ªé¡µé¢åªä¼š render ä¸€æ¬¡ã€‚ é‚£ä¹ˆæ€ä¹ˆè§£å†³è¿™ä¸ªé—®é¢˜å‘¢ï¼Ÿ è§£å†³æ–¹æ¡ˆè¦è§£å†³è¿™ä¸ªé—®é¢˜ï¼Œé‚£ä¹ˆå¿…ç„¶æ˜¯åŠ è½½å¥½æ•°æ®åï¼Œå†å»æŒ‚è½½é¡µé¢ç»„ä»¶ï¼Œé‚£ä¹ˆåŠ è½½æ•°æ®çš„æ—¶æœºå°±æ˜¾å¾—å°¤ä¸ºé‡è¦ã€‚å€Ÿé‰´ä¼ ç»ŸæœåŠ¡ç«¯æ¸²æŸ“é¡µé¢çš„æ–¹å¼ï¼Œè¿™ä¸ªæ—¶æœºè‚¯å®šæ˜¯æ”¾åœ¨è·¯ç”±é‡Œé¢å»åšæ¯”è¾ƒåˆé€‚ã€‚ å…·ä½“åˆ°é¡¹ç›®é‡Œé¢ï¼Œå°±æ˜¯åœ¨ react-route é‡Œé¢çš„ onEnter äº‹ä»¶é‡Œé¢å»åšé¡µé¢çš„åˆå§‹åŒ–è¯·æ±‚ï¼Œå½“æ‰€æœ‰æ•°æ®è¯·æ±‚æˆåŠŸä»¥åï¼Œåœ¨å»åŠ è½½è¿™ä¸ªé¡µé¢ã€‚ æ•´ä¸ªé¡µé¢åŠ è½½çš„æµç¨‹å°±å˜æˆäº†è¿™æ ·ï¼šRoute match -&gt; dispatch(init()) -&gt; ComponentWillMount -&gt; render -&gt; ComponentDidMount å…·ä½“ä»£ç å¦‚ä¸‹ï¼šHomeAction.jsimport &#123;createAction&#125; from 'redux-actions'import &#123;HOME_INDEX&#125; from '../../config/apis.js'import initAPI from '../../utils/initAPI.js'import createAsyncAction from '../../utils/createAsyncAction.js'export const InitActionList = createAsyncAction('home/init')export const FormChange = 'home/formChange'export const FormFieldChange = 'home/formFieldChange'export function init() &#123; return initAPI(InitActionList, HOME_INDEX, 'get')&#125; HomeReducer.jsimport &#123; InitActionList &#125; from './HomeAction.js'import &#123; CreditStatus, BillStatus, InstallmentStatus &#125; from '../../config/constant'const initState = &#123; foo: 1, bar: 10,&#125;export default function (state = initState, action) &#123; const type = action.type const payload = action.payload const meta = action.meta switch (type) &#123; case InitActionList.start: return state case InitActionList.success: const currentStatus = getCurrentStatus(payload) return &#123; ...state, foo: currentStatus, &#125; case InitActionList.failure: return state default: return state &#125;&#125; Router.jsimport &#123;init as initHome&#125; from './homeAction'export default function createRoutes (store) &#123; function initHome (store) &#123; return (nextState, replace, next) =&gt; &#123; // dispatch é¡µé¢åŠ è½½çš„ Actionï¼Œåœ¨æ•°æ®åŠ è½½å®Œæˆååœ¨æ‰§è¡Œ next() ä»¥æŒ‚è½½ç»„ä»¶ store.dispatch(homeInit()) .then(() =&gt; next()) &#125; &#125; return &#123; component: App, path: '/', childRoutes: [ require('./activate'), &#123; path: 'test', getComponent(nextState, cb) &#123; require.ensure([], require =&gt; &#123; cb(null, require('../views/Test').default) &#125;, 'Test') &#125; &#125; ], indexRoute: &#123; getComponent(nextState, cb) &#123; require.ensure([], require =&gt; &#123; cb(null, require('../views/Home').default) &#125;, 'Home') &#125;, onEnter: initHome(store) &#125; &#125;&#125; Index.jsimport React from 'react'import &#123; render &#125; from 'react-dom'import &#123; Router, hashHistory &#125; from 'react-router'import &#123; Provider &#125; from 'react-redux'import &#123; syncHistoryWithStore &#125; from 'react-router-redux'import &#123; AppContainer &#125; from 'react-hot-loader'import 'react-hot-loader/patch'import createRoutes from './routes'import configureStore from './store'import './style/app.scss'export const store = configureStore(hashHistory, &#123;&#125;)const history = syncHistoryWithStore(hashHistory, store)const root = document.getElementById('root')const routers = createRoutes(store)const renderRoot = () =&gt; &#123; render( &lt;AppContainer&gt; &lt;Provider store=&#123;store&#125; key='provider'&gt; &lt;Router routes=&#123;routers&#125; history=&#123;history&#125; key=&#123;Math.random()&#125; /&gt; &lt;/Provider&gt; &lt;/AppContainer&gt;, root )&#125;if (module.hot) &#123; module.hot.accept('./routes', () =&gt; &#123; renderRoot() &#125;)&#125;renderRoot()]]></content>
      <categories>
        <category>æŠ€æœ¯</category>
      </categories>
      <tags>
        <tag>React</tag>
        <tag>Redux</tag>
        <tag>react-router</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[ä¸€ä¸ª React Form ç»„ä»¶çš„é‡æ„æ€è·¯]]></title>
    <url>%2F2017%2F03%2F17%2Freact-form-rework-thinking%2F</url>
    <content type="text"><![CDATA[æœ€è¿‘å¯¹å›¢é˜Ÿå†…éƒ¨ React ç»„ä»¶åº“ï¼ˆne-rcï¼‰ä¸­çš„ Form ç»„ä»¶è¿›è¡Œäº†é‡æ„ï¼Œè®°å½•ä¸€ä¸‹æ€è€ƒçš„è¿‡ç¨‹ã€‚ ä¸€äº›å‰ç½®å®šä¹‰ï¼š åè¯ å®šä¹‰ è¡¨å• Form ç»„ä»¶ å­è¡¨å• åµŒå¥—åœ¨ Form ä¸‹é¢çš„ç±»ä¼¼ Input, Select è¿™æ ·çš„å­ç»„ä»¶ é¦–å…ˆæˆ‘ä»¬çœ‹ä¸€ä¸‹ï¼Œæˆ‘ä»¬çš„å¯¹ Form ç»„ä»¶çš„éœ€æ±‚æ˜¯ä»€ä¹ˆã€‚ è·å–å½“å‰å˜åŠ¨è¡¨å•çš„çŠ¶æ€ æ ¡éªŒæ‰€æœ‰å¿…å¡«è¡¨å•æ˜¯å¦å¡«å†™å®Œæˆ å¯¹å¤–è§¦å‘å…·ä½“è¡¨å•å˜åŒ–çš„æ–¹æ³• formFieldChange æš´éœ²å¯¹å¤–æä¾›æ•´ä¸ªè¡¨å•çŠ¶æ€çš„æ–¹æ³• æä¾›æ•´ä¸ªè¡¨å•æœ€æ–°çŠ¶æ€çš„æ–¹æ³• $Form.data æäº¤æ–¹æ³• æ ¡éªŒè¡¨å•æ˜¯å¦é€šè¿‡æ ¡éªŒ å¯¹å¤–è§¦å‘ formSubmit æ–¹æ³• æ¥ç€æˆ‘ä»¬ä»é‡æ„å‰å’Œé‡æ„åï¼Œçœ‹å¦‚ä½•æ¥è§£å†³è¿™ä¸ªé—®é¢˜ã€‚ Beforeè·å–å½“å‰å˜åŠ¨è¡¨å•çš„çŠ¶æ€å¦‚ä½•è·å–å˜åŠ¨çš„å­è¡¨å•React çˆ¶å­é€šä¿¡éœ€è¦é€šè¿‡ prop ä¼ é€’æ–¹æ³•ï¼Œå¯¹äº Form ä¸‹é¢çš„ç±»ä¼¼ä¸ Input ä¹‹ç±»çš„å­è¡¨å•çš„å˜åŒ–æƒ³è¦é€šçŸ¥åˆ°çˆ¶çº§ï¼Œå¦‚æœä¸å€ŸåŠ©ç¬¬ä¸‰æ–¹çš„äº‹ä»¶ä¼ é€’æ–¹æ³•ï¼Œé‚£ä¹ˆå°±åªèƒ½é€šè¿‡ç”±çˆ¶çº§é€šè¿‡ props å‘ Input ä¼ é€’ formFieldChangeï¼ˆå‡è®¾å°±å«è¿™ä¸ªåå­—ï¼‰æ–¹æ³•ï¼Œç„¶åå½“å­ç»„ä»¶å˜åŒ–æ—¶å»è°ƒç”¨ formFieldChange æ¥å®ç°ã€‚ é‚£ä¹ˆé—®é¢˜æ¥äº†ï¼Œä»€ä¹ˆæ—¶å€™å»ä¼ é€’è¿™ä¸ªæ–¹æ³•å‘¢ï¼Ÿ ä¸èƒ½åœ¨å…·ä½“é¡µé¢é‡Œé¢ä½¿ç”¨çš„æ—¶å€™å†å»æ¯æ¡è¡¨å•é‡Œé¢æ³¨å†Œè¿™ä¸ªæ–¹æ³•ï¼Œé‚£æ¯ä¸ªç”¨åˆ°è¡¨å•ç»„ä»¶çš„æ—¶å€™å°±éƒ½éœ€è¦ç»™å­è¡¨å•è¿›è¡Œè¿™æ ·çš„äº‹ä»¶ç»‘å®šï¼Œè¿™æ ·å¤ªç´¯äº†ã€‚ æ‰€ä»¥ä¸€å¼€å§‹ï¼Œæˆ‘é€‰æ‹©é€šè¿‡ç›´æ¥é€’å½’çš„éå† Form ä¸‹é¢çš„ childrenï¼Œåªè¦å‘ç°è¿™ä¸ª children æ˜¯æˆ‘æƒ³è¦çš„è¡¨å•ç±»å‹ï¼Œé‚£ä¹ˆå°±é‡æ–°å…‹éš†ä¸€ä¸ªå¸¦æœ‰ formFieldChange çš„ç»„ä»¶æ¥æ›¿æ¢æ‰åŸæ¥çš„ç»„ä»¶ã€‚/** * è·å– form ä¸‹é¢æ¯ä¸€ä¸ªè¡¨å•å¯¹è±¡ï¼Œæ³¨å…¥å±æ€§ï¼Œå¹¶æ”¶é›†èµ·æ¥ * @param children * @returns &#123;*&#125; */function getForms(children) &#123; return React.Children.map(children, (el, i) =&gt; &#123; if (!el) &#123; return null &#125; switch (el.type) &#123; case Input: Forms.push(el) return React.cloneElement( el, &#123; key: i, formFieldChange, emptyInput &#125; ) case Select: Forms.push(el) return React.cloneElement( el, &#123; key: i, formFieldChange &#125; ) case CheckBox: Forms.push(el) return React.cloneElement( el, &#123; key: i, formFieldChange &#125; ) default: if (el.props &amp;&amp; el.props.children instanceof Array) &#123; const children = getForms(el.props.children) return React.cloneElement( el, &#123; key: i, children &#125; ) &#125; else &#123; return el &#125; &#125; &#125;)&#125; è¿™æ ·ï¼Œæ‰€æœ‰çš„ç‰¹å®šå­ç»„ä»¶å°±éƒ½å¯ä»¥æ‹¿åˆ°è¢«æ³¨å†Œçš„æ–¹æ³•ã€‚ä»¥ Input ä¸ºä¾‹ï¼Œåœ¨ Input çš„ onChange æ–¹æ³•é‡Œé¢å»è°ƒç”¨ä»çˆ¶çº§ props ä¼ å…¥çš„ formFieldChange å°±å¯ä»¥é€šçŸ¥åˆ° Form ç»„ä»¶äº†ã€‚ æ”¶é›†å˜åŠ¨è¡¨å•çš„æ•°æ®ã€‚å‰ä¸€æ­¥å®Œæˆåï¼Œè¿™ä¸€æ­¥å°±æ¯”è¾ƒç®€å•äº†ï¼ŒInput åœ¨è°ƒç”¨ formFieldChange çš„æ—¶å€™æŠŠæƒ³è¦ä¼ é€’çš„æ•°æ®ä½œä¸ºå‚æ•°ä¼ è¿›å»ï¼Œåœ¨ Form é‡Œé¢å»å¯¹è¿™ä¸ªå‚æ•°åšå¤„ç†ï¼Œå°±å¯ä»¥æ‹¿åˆ°å½“å‰å˜åŠ¨çš„è¡¨å•çŠ¶æ€æ•°æ®äº†ã€‚ æ ¡éªŒè¡¨å•æ˜¯å¦å¡«å†™å®Œæˆå‰é¢æˆ‘ä»¬æ”¶é›†äº†æ¯ä¸€æ¡å˜åŠ¨è¡¨å•çš„æ•°æ®ã€‚ä½†æ˜¯è¦åˆ¤æ–­å½“å‰ Form ä¸‹é¢çš„è¡¨å•æ˜¯å¦å¡«å†™å®Œæˆï¼Œé‚£ä¹ˆé¦–å…ˆéœ€è¦çŸ¥é“æˆ‘ä»¬æœ‰å¤šå°‘ä¸ªéœ€è¦å¡«å†™çš„è¡¨å•ï¼Œç„¶ååœ¨ formFieldChange çš„æ—¶å€™è¿›è¡Œåˆ¤æ–­å°±å¯ä»¥äº†ã€‚å¦‚ä½•æ¥æå‰çŸ¥é“æˆ‘ä»¬æœ‰å¤šå°‘éœ€è¦å¡«å†™çš„ Field å‘¢ï¼Œä¹‹å‰æˆ‘é€‰æ‹©çš„æ˜¯é€šè¿‡åœ¨ä½¿ç”¨ Form çš„æ—¶å€™å…ˆåˆå§‹åŒ–ä¸€ä¸ªåŒ…å«æ‰€æœ‰è¡¨å•åˆå§‹åŒ–çŠ¶æ€çš„æ•°æ®ã€‚export default class Form extends React.Component &#123; constructor(props) &#123; super(props) this.Forms = [] this.formState = Object.assign(&#123;&#125;, &#123; isComplete: false, isValidate: false, errorMsg: '', data: &#123;&#125; &#125;, this.props.formState) &#125; static propTypes = &#123; onChange: PropTypes.func, onSubmit: PropTypes.func, formState: PropTypes.object &#125; // åˆå§‹åŒ–ä¸€ä¸ªç±»ä¼¼è¿™æ ·çš„å¯¹è±¡ä¼ é€’ç»™ FormformState: &#123; data: &#123; realName: &#123;&#125;, cityId: &#123;&#125;, email: &#123;&#125;, relativeName: &#123;&#125;, relativePhone: &#123;&#125;, companyName: &#123;&#125; &#125;&#125;, è¿™æ ·å°±å¾ˆç²—æš´çš„è§£å†³äº†è¿™ä¸ªé—®é¢˜ï¼Œä½†æ˜¯è¿™ä¸­é—´å­˜åœ¨å¾ˆå¤šé—®é¢˜ã€‚ å› ä¸ºé™å®šäº†ç‰¹å®šçš„ç»„ä»¶ç±»å‹ï¼ˆInputï¼ŒSelectï¼ŒCheckBoxï¼‰ï¼Œå¯¼è‡´ä¸åˆ©äºæ‰©å±•ï¼Œå¦‚æœåœ¨å¼€å‘è¿‡ç¨‹é‡åˆ°å…¶ä»–ç±»å‹çš„æ¯”å¦‚è‡ªå®šä¹‰çš„å­è¡¨å•ï¼Œé‚£ä¹ˆ Form å°±æ²¡æ³•å¯¹è¿™ä¸ªè‡ªå®šä¹‰å­è¡¨å•è¿›è¡Œæ•°æ®æ”¶é›†ï¼Œè§£å†³èµ·æ¥æ¯”è¾ƒéº»çƒ¦ã€‚ æ‰€ä»¥å°±åœ¨è€ƒè™‘å¦ä¸€ä¸ªç§å®ç°æ–¹å¼ï¼Œ Form åªå»æ”¶é›†ä¸€ä¸ªç‰¹å®šæ¡ä»¶ä¸‹çš„ç»„ä»¶ï¼Œåªè¦è¿™ä¸ªç»„ä»¶æ»¡è¶³äº†è¿™ä¸ªæ¡ä»¶ï¼Œå¹¶å®ç°äº†å¯¹åº”çš„æ¥å£ï¼Œé‚£ä¹ˆ Form å°±éƒ½å¯ä»¥å»æ”¶é›†å¤„ç†ã€‚è¿™æ ·ä¹Ÿå°±å¤§å¤§æŒºé«˜äº†é€‚ç”¨æ€§ã€‚ æš´éœ²å¯¹å¤–æä¾›æ•´ä¸ªè¡¨å•çŠ¶æ€çš„æ–¹æ³•é€šè¿‡åœ¨å¤–ç›‘å¬æ¯æ¬¡ Form è§¦å‘çš„ onChange äº‹ä»¶æ¥è·å–æ•´ä¸ª Form çš„çŠ¶æ€ã€‚ æäº¤æ–¹æ³•æ£€éªŒè¡¨å•æ˜¯å¦é€šè¿‡æ ¡éªŒå·²ç»æœ‰äº†æ•´ä¸ª Form çš„æ•°æ®å¯¹è±¡ï¼Œåšæ ¡éªŒå¹¶ä¸æ˜¯ä»€ä¹ˆå›°éš¾ã€‚é€šè¿‡æ ¡éªŒçš„æ—¶å€™è°ƒç”¨ formSubmit æ–¹æ³•ï¼Œæ²¡æœ‰é€šè¿‡æ ¡éªŒçš„æ—¶å€™å¯¹å¤–æŠŠé”™è¯¯ä¿¡æ¯æ·»åŠ åˆ° Form çš„ state ä¸Šå»ã€‚ å¯¹å¤–è§¦å‘ formSubmit æ–¹æ³•å½“è¡¨å•é€šè¿‡æ ¡éªŒçš„æ—¶å€™ï¼Œå¯¹å¤–è§¦å‘ formSubmit æ–¹æ³•ï¼ŒæŠŠè¦æäº¤çš„æ•°æ®ä½œä¸º formSubmit çš„å‚æ•°ä¼ é€’ç»™å¤–é¢ã€‚ Afterå‰é¢æ˜¯ä¹‹å‰å†™çš„ Form ç»„ä»¶çš„ä¸€äº›æ€è·¯ï¼Œåœ¨å®é™…ä½¿ç”¨ä¸­ä¹ŸåŸºæœ¬èƒ½æ»¡è¶³ä¸šåŠ¡éœ€æ±‚ã€‚ ä½†æ˜¯æ•´ä¸ª Form çš„å¯æ‹“å±•æ€§æ¯”è¾ƒå·®ï¼Œæ— æ³•å¾ˆå¥½çš„æ¥å…¥å…¶ä»–è‡ªå®šä¹‰çš„ç»„ä»¶ã€‚æ‰€ä»¥èŒç”Ÿäº†é‡å†™çš„æƒ³æ³•ã€‚ å¯¹äºé‡å†™çš„è¿™ä¸ª Formï¼Œæˆ‘çš„æƒ³æ³•æ˜¯ï¼šé¦–å…ˆä¸€å®šè¦æ–¹ä¾¿ä½¿ç”¨ï¼Œä¸éœ€è¦ä¸€å¤§å †çš„èµ·å§‹å·¥ä½œï¼›å…¶æ¬¡å°±æ˜¯å¯æ‹“å±•æ€§è¦å¼ºï¼Œé™¤äº†è‡ªå·±å·²ç»æä¾›çš„å†…åœ¨ Inputï¼ŒSelect ç­‰èƒ½å¤Ÿæ¥å…¥ Form å¤–ï¼Œå¯¹äºå…¶ä»–çš„ä¸šåŠ¡ä¸­çš„ç‰¹æ®Šéœ€æ±‚éœ€è¦æ¥å…¥ Form çš„æ—¶å€™ï¼Œåªè¦è¿™ä¸ªç»„ä»¶å®ç°äº†ç‰¹å®šçš„æ¥å£å°±å¯ä»¥äº†å¾ˆæ–¹ä¾¿çš„æ¥å…¥ï¼Œè€Œä¸éœ€è¦å¤§é‡çš„å»ä¿®æ”¹ç»„ä»¶å†…éƒ¨çš„ä»£ç ã€‚ é‡æ„ä¸»è¦é›†ä¸­åœ¨ä¸Šé¢éœ€æ±‚ 1 é‡Œé¢çš„å†…å®¹ï¼Œä¹Ÿå°±æ˜¯ï¼šè·å–å½“å‰å˜åŠ¨è¡¨å•çš„çŠ¶æ€ è·å–å½“å‰è¡¨å•çš„çŠ¶æ€åˆ†è§£ä¸‹æ¥æœ‰ä¸€ä¸‹å‡ ç‚¹ï¼š è·å–æ‰€æœ‰éœ€è¦æ”¶é›†çš„å­è¡¨å• formFields åˆå§‹åŒ– Form state è¡¨å•ä¸‹é¢å­è¡¨å•æ•°é‡æˆ–ç±»å‹å‘ç”Ÿå˜åŒ–æ—¶æ›´æ–° 1 é‡Œé¢åˆ›å»ºçš„ formFields å­è¡¨å•å†…éƒ¨çŠ¶æ€å‘ç”Ÿå˜åŒ–æ—¶é€šçŸ¥åˆ°çˆ¶è¡¨å• è·å–å½“å‰å˜åŠ¨è¡¨å•çš„çŠ¶æ€è·å–æ‰€æœ‰éœ€è¦çš„å­è¡¨å•åŒæ ·é€šè¿‡é€’å½’éå† children æ¥è·å–éœ€è¦æ”¶é›†çš„å­è¡¨å•ï¼Œé€šè¿‡å­è¡¨å•çš„ type.name å‘½åè§„åˆ™æ˜¯å¦ç¬¦åˆæˆ‘ä»¬çš„å®šä¹‰æ¥å†³å®šæ˜¯å¦è¦è¿›è¡Œæ”¶é›†ã€‚ç›´æ¥æ¥çœ‹ä»£ç ï¼šcollectFormField = (children) =&gt; &#123; const handleFieldChange = this.handleFieldChange // ç®€å•ç²—æš´ï¼Œåœ¨ Form æ›´æ–°çš„æ—¶å€™ç›´æ¥æ¸…ç©ºä¸Šä¸€æ¬¡ä¿å­˜çš„ formFieldsï¼Œå…¨é‡æ›´æ–°ï¼Œ // é¿å… formFields å†…å®¹æˆ–è€…æ•°é‡å‘ç”Ÿå˜åŒ–æ—¶ this.formFields æ•°æ®ä¸æ­£ç¡®çš„é—®é¢˜ const FormFields = this.formFields = [] function getChildList(children) &#123; return React.Children.map(children, (el, i) =&gt; &#123; // åªè¦ Name ä»¥ _Field å¼€å¤´ï¼Œå°±è®¤ä¸ºæ˜¯éœ€è¦ From ç®¡ç†çš„ç»„ä»¶ if (!el || el === null) return null const reg = /^_Field/ const childName = el.type &amp;&amp; el.type.name if (reg.test(childName)) &#123; FormFields.push(el) return React.cloneElement(el, &#123; key: i, handleFieldChange &#125;) &#125; else &#123; if (el.props &amp;&amp; el.props.children) &#123; const children = getChildList(el.props.children) return React.cloneElement(el, &#123; key: i, children &#125;) &#125; else &#123; return el &#125; &#125; &#125;) &#125; åªè¦ç»„ä»¶çš„ class name ä»¥ _Field å¼€å¤´ï¼Œå°±æŠŠå®ƒæ”¶é›†èµ·æ¥ï¼Œå¹¶ä¼ å…¥ handleFieldChange æ–¹æ³•ï¼Œè¿™æ ·å½“ä¸€ä¸ªè‡ªå®šä¹‰ç»„ä»¶æ¥å…¥çš„æ—¶å€™ï¼Œåªéœ€è¦åœ¨å¤–é¢åŒ…ä¸€å±‚ï¼Œå¹¶æŠŠ class çš„å‘½åä¸ºä»¥ _Field å¼€å¤´çš„æ ¼å¼å°±å¯ä»¥è¢« Form æ”¶é›†ç®¡ç†äº†ã€‚ æ¥å…¥ç»„ä»¶é‡Œé¢éœ€è¦åšçš„å°±æ˜¯ï¼Œåœ¨åˆé€‚çš„æ—¶æœºè°ƒç”¨ handleFieldChange æ–¹æ³•ï¼Œå¹¶æŠŠè¦ä¼ é€’çš„æ•°æ®ä½œä¸ºå‚æ•°ä¼ é€’å‡ºæ¥å°±å¯ä»¥äº†ã€‚ ä¸ºä»€ä¹ˆä¸€å®šè¦æ‰§è¿·ä¸æ‚Ÿçš„ä½¿ç”¨éå†è¿™ç§ä½æ•ˆçš„æ–¹å¼å»æ”¶é›†å‘¢ï¼Œå…¶å®éƒ½æ˜¯ä¸ºäº†ç»„ä»¶ä¸Šä½¿ç”¨çš„æ–¹ä¾¿ã€‚è¿™æ ·å°±ä¸éœ€è¦æ¯æ¬¡åœ¨å¼•ç”¨çš„æ—¶å€™åœ¨å¯¹å­è¡¨å•åšä»€ä¹ˆæ“ä½œäº†ã€‚ åˆå§‹åŒ– Form stateä¸Šä¸€æ­¥æ‹¿åˆ°äº†æ‰€æœ‰çš„å­è¡¨å•ï¼Œç„¶åé€šè¿‡è°ƒç”¨ initialFormDataStructure æ‹¿æ¥åˆå§‹åŒ– Form çš„ state.data çš„ç»“æ„ï¼ŒåŒæ—¶é€šçŸ¥åˆ°å¤–é¢ Form å‘ç”Ÿäº†å˜åŒ–ã€‚ å­è¡¨å•æ•°é‡æˆ–ç±»å‹å‘ç”Ÿå˜åŒ–æ—¶å½“ Form ä¸‹é¢å­ç»„ä»¶è¢«æ·»åŠ æˆ–åˆ é™¤æ—¶ï¼Œéœ€è¦åŠæ—¶æ›´æ–° Form Data çš„ç»“æ„ã€‚é€šè¿‡è°ƒç”¨ updateFormDataStructureæŠŠæ–°å¢çš„æˆ–è€…ä¿®æ”¹çš„å­è¡¨å•æ›´æ–°åˆ°æœ€æ–°ï¼Œå¹¶é€šçŸ¥åˆ°å¤–é¢ Form å‘ç”Ÿäº†å˜åŒ–ã€‚ å­è¡¨å•å†…éƒ¨çŠ¶æ€å‘ç”Ÿå˜åŒ–æ—¶åœ¨ç¬¬ä¸€æ­¥æ”¶é›†å­è¡¨å•çš„æ—¶å€™å°±å·²ç»æŠŠ handleFieldChange æ³¨å…¥åˆ°äº†å­è¡¨å•ç»„ä»¶é‡Œé¢ï¼Œæ‰€ä»¥å­è¡¨å•æ¥å†³å®šè°ƒç”¨çš„æ—¶æœºã€‚å½“ handleFieldChange è¢«è°ƒç”¨çš„æ—¶å€™ï¼Œé¦–å…ˆå¯¹ Form state è¿›è¡Œæ›´æ–°ï¼Œç„¶åå¤–é€šçŸ¥å­è¡¨å•å‘ç”Ÿäº†å˜åŒ–ï¼ŒåŒæ—¶é€šçŸ¥å¤–é¢ Form å‘ç”Ÿäº†å˜åŒ–ã€‚ è¿™æ ·çœ‹èµ·æ¥æ•´ä¸ªæµç¨‹å°±èµ°é€šäº†ï¼Œä½†å®é™…ä¸Šå­˜åœ¨å¾ˆå¤šé—®é¢˜ã€‚ é¦–å…ˆç”±äº setState æ˜¯ä¸€ä¸ªå¼‚æ­¥çš„è¿‡ç¨‹ï¼Œåªæœ‰åœ¨ render åæ‰èƒ½è·å–åˆ°æœ€æ–°çš„ state. è¿™å°±å¯¼è‡´ï¼Œåœ¨ä¸€ä¸ªç”Ÿå‘½å‘¨æœŸå¾ªç¯å†…å¦‚æœæˆ‘å¤šæ¬¡è°ƒç”¨äº† setState ï¼Œé‚£ä¹ˆä¸¤æ¬¡è°ƒç”¨ä¹‹é—´å¯¹ state çš„è¯»å–å¾ˆå¯èƒ½æ˜¯ä¸å‡†ç¡®çš„ã€‚ï¼ˆæœ‰å…³ç”Ÿå‘½å‘¨æœŸçš„è¯¦ç»†å†…å®¹å¯ä»¥çœ‹è¿™ç¯‡æ–‡ç« ï¼šhttps://www.w3ctech.com/topic/1596ï¼‰ æ‰€ä»¥æˆ‘åˆ›å»ºäº†ä¸€ä¸ªä¸´æ—¶å˜é‡ currentState æ¥å­˜æ”¾å½“å‰çŠ¶æ€ä¸‹æœ€æ–°çš„ stateï¼Œæ¯æ¬¡ setState çš„æ—¶å€™éƒ½å¯¹å…¶è¿›è¡Œæ›´æ–°ã€‚ å¦ä¸€ä¸ªé—®é¢˜æ˜¯å½“ Form å‘ç”Ÿå˜åŒ–çš„æ—¶å€™ï¼ŒupdateFormDataStructure è°ƒç”¨çš„è¿‡äºé¢‘ç¹ã€‚å…¶å®åªæœ‰åœ¨å­è¡¨å•çš„æ•°é‡æˆ–è€…ç±»å‹å‘ç”Ÿå˜åŒ–æ—¶æ‰éœ€è¦æ›´æ–° Form state çš„ç»“æ„ã€‚è€Œç›´æ¥å»å¯¹æ¯”å­è¡¨å•çš„ç±»å‹æ˜¯å¦å‘ç”Ÿå˜åŒ–ä¹Ÿæ˜¯æ„è§å¼€é”€å¾ˆå¤§æ“ä½œï¼Œæ‰€ä»¥é€‰æ‹©å¦ä¸€ç§æŠ˜ä¸­æ–¹å¼ã€‚é€šè¿‡ç»™ Form å½“å‰çš„çŠ¶æ€æ‰“æ ‡ï¼Œå°† Form å¯èƒ½å¤„äºçš„çŠ¶æ€éƒ½æ ‡è¯†å‡ºæ¥ï¼šconst STATUS = &#123; Init: 'Init', Normal: 'Normal', FieldChange: 'FieldChange', UpdateFormDataStructure: 'UpdateFormDataStructure', Submit: 'Submit'&#125; è¿™æ ·ï¼Œåªæœ‰åœ¨ Form çš„ STATUS å¤„äº Normal çš„æ—¶å€™æ‰å¯¹å…¶è¿›è¡Œ updateFormDataStructure æ“ä½œã€‚è¿™æ ·å°±å¯ä»¥çœå»å¾ˆå¤šæ¬¡æ¸²æŸ“ä»¥åŠæ— æ•ˆçš„å¯¹å¤–è§¦å‘çš„ FormChange äº‹ä»¶ã€‚ æäº¤å’Œå¯¹å¤–æš´éœ² Form çŠ¶æ€çš„æ–¹æ³•å’Œä¹‹å‰åŸºæœ¬ä¸€è‡´ï¼Œè¿™æ ·æ•´ä¸ªå¯¹ Form çš„é‡æ„å°±ç®—å®Œæˆäº†ï¼Œå…·ä½“é¡¹ç›®ä¸­ä½¿ç”¨ä½“éªŒè¿˜ä¸é”™ O(âˆ©_âˆ©)O Form ç»„ä»¶åœ°å€ï¼š https://github.com/NE-LOAN-FED/NE-Component/tree/master/src/Form æœ€åï¼Œå¦‚æœçœ‹æ–‡ç« çš„ä½ æœ‰ä»€ä¹ˆæ›´å¥½çš„æƒ³æ³•ï¼Œè¯·å‘Šè¯‰æˆ‘ğŸ˜›ã€‚]]></content>
      <categories>
        <category>æŠ€æœ¯</category>
      </categories>
      <tags>
        <tag>React</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[ã€ç¿»è¯‘å‘ã€‘Webpack 1 åˆ° 2 å‡çº§æŒ‡å—]]></title>
    <url>%2F2017%2F01%2F19%2Fwebpack2-migrating-v1-v2%2F</url>
    <content type="text"><![CDATA[resolve.root,resolve.fallback,resolve.modulesDirectoriesè¿™äº›é…ç½®é¡¹é¡¹éƒ½è¢«ä¸€ä¸ªå•ç‹¬çš„é…ç½®æ‰€æ›¿ä»£ resolve.modules. æŸ¥çœ‹ resolving äº†è§£æ›´å¤šã€‚ resolve: &#123;- root: path.join(__dirname, "src")+ modules: [+ path.join(__dirname, "src"),+ "node_modules"+ ]&#125; resolve.extensionsè¿™ä¸ªé€‰é¡¹å·²ç»ä¸åœ¨éœ€è¦ä¼ ä¸€ä¸ªç©ºå­—ç¬¦ä¸²äº†ã€‚å®ƒçš„è¡Œä¸ºå·²ç»è¢«ç§»åŠ¨åˆ°äº† resolve.enforceExtension. æŸ¥çœ‹ resolving äº†è§£æ›´å¤šã€‚ resolve.*è¿™é‡Œä¿®æ”¹äº†å¾ˆå¤šå†…å®¹ã€‚å› ä¸ºè¢«ç”¨åˆ°çš„ä¸æ˜¯å¾ˆå¤šï¼Œæ‰€ä»¥å°±ä¸ä¸€ä¸€åˆ—ä¸¾å‡ºæ¥äº†ã€‚æŸ¥çœ‹ resolving äº†è§£æ›´å¤šã€‚ module.loaders ç°åœ¨æ˜¯ module.rulesè€çš„ loader é…ç½®è¢«ä¸€ä¸ªæ›´åŠ å¼ºå¤§çš„ rules ç³»ç»Ÿæ‰€å–ä»£äº†ï¼Œå…è®¸é…ç½® loader å’Œæ›´å¤šå†…å®¹ã€‚ä¸ºäº†ä¿è¯ä¸€è‡´æ€§ï¼Œæ—§çš„ module.loaders è¯­æ³•ä¾ç„¶å¯ä»¥åˆæ³•ä¸”å¯ä»¥ä½¿ç”¨çš„ã€‚æ–°çš„å‘½åè§„èŒƒæ›´åŠ æ˜“äºç†è§£ï¼Œè¿™æ˜¯ä¸€ä¸ªä½¿ç”¨ module.rules å»å‡çº§é…ç½®çš„å¾ˆå¥½çš„ç†ç”±ã€‚ module: &#123;- loaders: [+ rules: [ &#123; test: /\.css$/,- loaders: [+ use: [ &#123; loader: "style-loader" &#125;, &#123; loader: "css-loader",- query: &#123;+ options: &#123; modules: true &#125; ] &#125;, &#123; test: /\.jsx$/, loader: "babel-loader", // Do not use "use" here options: &#123; // ... &#125; &#125; ] &#125; æŠŠ loader é“¾æ¥èµ·æ¥ï¼ˆChaining loadersï¼‰å°±åƒåœ¨ webpack1 ä¸­é‚£æ ·ï¼Œloader å¯ä»¥è¢«é“¾æ¥èµ·æ¥ï¼ŒæŠŠä¸Šä¸€ä¸ª loader çš„ç»“æœä¼ é€’ç»™ä¸‹ä¸€ä¸ª loader. ä½¿ç”¨ rule.useï¼Œ use å¯ä»¥è®¾ç½®ä¸ºä¸€ä¸ª loaders çš„åˆ—è¡¨ã€‚åœ¨ webpack1 ä¸­ï¼Œloader é€šè¿‡ ! æ¥é“¾æ¥å†ä¸€èµ·ã€‚ç°åœ¨åªä¼šåœ¨ module.loaders é‡Œé¢æ‰ä¼šæ”¯æŒè¿™æ ·çš„é£æ ¼ã€‚ module: &#123;- loaders: &#123;+ rules: &#123; test: /\.less$/,- loader: "style-loader!css-loader!less-loader"+ use: [+ "style-loader",+ "css-loader",+ "less-loader"+ ] &#125; &#125; è‡ªåŠ¨æ·»åŠ  -loader åè¾çš„ç‰¹æ€§è¢«ç§»é™¤äº†åœ¨å¼•å…¥ loader çš„æ—¶å€™ä¸èƒ½åœ¨çœç•¥åé¢çš„ -loader äº†ã€‚ module: &#123; rules: [ &#123; use: [- "style",+ "style-loader",- "css",+ "css-loader",- "less",+ "less-loader", ] &#125; ] &#125; ä¸è¿‡ä¾æ—§å¯ä»¥ä½¿ç”¨ resolveLoader.moduleExtensions é…ç½®æ¥è¾¾åˆ°ä»¥å‰çš„ç›®çš„ï¼Œä½†æ˜¯æˆ‘ä»¬ä¸æ¨èè¿™æ ·åšã€‚+ resolveLoader: &#123;+ moduleExtensions: [&quot;-loader&quot;]+ &#125; ä¸å†éœ€è¦ json-loaderå½“æ²¡æœ‰ç»™ sjon æ–‡ä»¶é…ç½®å¯¹åº”çš„ loader çš„æ—¶å€™ï¼Œwebpack ä¼šè‡ªåŠ¨ä½¿ç”¨ json-loader æ¥è½½å…¥ JSON æ–‡ä»¶ã€‚ module: &#123; rules: [- &#123;- test: /\.json/,- loader: &quot;json-loader&quot;- &#125; ] &#125; webpack é€‰æ‹©è¿™æ ·åšçš„ç›®çš„æ˜¯æƒ³è¦æŠ¹å¹³åœ¨ webpackï¼Œnodejs å’Œ browserify ä¸åŒç¯å¢ƒä¸‹çš„åŒºåˆ«ã€‚ é…ç½®ä¸­çš„ loaders ä¼šç›¸å¯¹ä¸ä¸Šä¸‹æ–‡æ¥è§£æï¼ˆLoaders in configuration resolve relative to contextï¼‰åœ¨ webpack1 ä¸­é…ç½®çš„ loader ä¼šç›¸å¯¹ä¸åŒ¹é…åˆ°çš„æ–‡ä»¶è§£æã€‚ä½†æ˜¯ webapck2 ä¸­é…ç½®çš„ loader ä¼šæ ¹æ® context çš„è®¾ç½®æ¥è§£æã€‚ è¿™è§£å†³äº†å½“ç”±äºä½¿ç”¨ npm link æˆ–è€…å¼•ç”¨ context ä¹‹å¤–å¯¼è‡´æ¨¡å—é‡å¤å¼•å…¥çš„é—®é¢˜ã€‚ ä½ å¯èƒ½ä¼šé€šè¿‡ hach çš„æ–¹å¼è§£å†³è¿™ä¸ªé—®é¢˜ï¼š module: &#123; rules: [ &#123; // ...- loader: require.resolve(&quot;my-loader&quot;)+ loader: &quot;my-loader&quot; &#125; ] &#125;, resolveLoader: &#123;- root: path.resolve(__dirname, &quot;node_modules&quot;) &#125; module.preLoades å’Œ module.postLoaders è¢«ç§»é™¤äº† module: &#123;- preLoaders: [+ rules: [ &#123; test: /\.js$/,+ enforce: &quot;pre&quot;, loader: &quot;eslint-loader&quot; &#125; ] &#125; UglifyJsPlugin sourceMapUglifyJsPlugin ä¸­ souceMap çš„é»˜è®¤é€‰é¡¹ä» true æ”¹ä¸ºäº† false. è¿™æ„å‘³ç€å¦‚æœä½ éœ€è¦åœ¨å‹ç¼©åçš„ä»£ç ä¸­ä½¿ç”¨ souceMap çš„åŠŸèƒ½ï¼Œéœ€è¦æ‰‹åŠ¨å»é…ç½® sourceMap:false. devtool: &quot;source-map&quot;, plugins: [ new UglifyJsPlugin(&#123;+ sourceMap: true &#125;) ] UglifyJsPlugin è­¦å‘ŠUglifyJsPlugin ä¸­ compress.warnings å’Œä¸Šä¸€æ¡ä¸€æ ·ï¼Œé»˜è®¤é€‰é¡¹ä» true æ”¹ä¸ºäº† false.å¦‚æœéœ€è¦çœ‹åˆ° uglifyjs çš„è­¦å‘Šï¼Œéœ€è¦è®¾ç½® compress.warnings ä¸º true. devtool: &quot;source-map&quot;, plugins: [ new UglifyJsPlugin(&#123;+ compress: &#123;+ warnings: true+ &#125; &#125;) ] UglifyJsPlugin å‹ç¼© loaderï¼ˆminimize loadersï¼‰UglifyJsPlugin ä¸ä¼šåœ¨å‹ç¼©æ¨¡å¼ä¸‹åˆ‡æ¢ loaders äº†ã€‚minimize: true éœ€è¦ä¸€ç›´è¢«è®¾ç½®åœ¨é…ç½®æ¥ä¼ ç»™ loader äº†ï¼ŒæŸ¥çœ‹æ–‡æ¡£ä»¥äº†è§£æ›´å¤šçš„å†…å®¹ã€‚ åœ¨ webpack3 æˆ–è€…åç»­çš„ç‰ˆæœ¬ä¸­ï¼Œloaders çš„å‹ç¼©æ¨¡å¼è¿™ä¸ªç‰¹æ€§ä¼šè¢«ç§»é™¤æ‰ã€‚ BannderPlugin - breaking changeBannderPlugin ä¸åœ¨æ”¯æŒä¼ é€’ä¸¤ä¸ªå‚æ•°ï¼Œè€Œæ˜¯ä¼ é€’ä¸€ä¸ªå¯¹è±¡ã€‚ plugins: [- new webpack.BannerPlugin(&apos;Banner&apos;, &#123;raw: true, entryOnly: true&#125;);+ new webpack.BannerPlugin(&#123;banner: &apos;Banner&apos;, raw: true, entryOnly: true&#125;); ] OccurrenceOrderPlugin è¢«ä½œä¸ºé»˜è®¤è®¾ç½®ä¸åœ¨éœ€è¦æ‰‹åŠ¨å»é…ç½®äº† plugins: [- new webpack.optimize.OccurrenceOrderPlugin() ] ExtractTextWebpackPlugin - breaking changeExtractTextWebpackPlugin 1.0.0 æ— æ³•åœ¨ webpack2 ä¸­æ­£å¸¸å·¥ä½œï¼Œéœ€è¦å®‰è£… ExtractTextPlugin V2 ã€‚ npm install --save-dev extract-text-webpack-plugin@beta é…ç½®çš„åŒºåˆ«ä¸»è¦æ˜¯åœ¨è¯­æ³•ä¸Šã€‚ ExtractTextPlugin.extract module: &#123; rules: [ test: /.css$/,- loader: ExtractTextPlugin.extract(&quot;style-loader&quot;, &quot;css-loader&quot;, &#123; publicPath: &quot;/dist&quot; &#125;)+ loader: ExtractTextPlugin.extract(&#123;+ fallbackLoader: &quot;style-loader&quot;,+ loader: &quot;css-loader&quot;,+ publicPath: &quot;/dist&quot;+ &#125;) ]&#125; new ExtractTextPlugin({options}) plugins: [- new ExtractTextPlugin(&quot;bundle.css&quot;, &#123; allChunks: true, disable: false &#125;)+ new ExtractTextPlugin(&#123;+ filename: &quot;bundle.css&quot;,+ disable: false,+ allChunks: true+ &#125;)] å…¨åŠ¨æ€ require ä¼šé»˜è®¤å¤±è´¥ï¼ˆFull dynamic requires now fail by defaultï¼‰ä¸€ä¸ªç”±è¡¨è¾¾å¼å†³å®šçš„ä¾èµ–ä¼šåˆ›å»ºä¸€ä¸ªç©ºçš„ä¸Šä¸‹æ–‡æ¥æ›¿ä»£ä¹‹å‰åˆ›å»ºçš„ä¸€ä¸ªåŒ…å«å®Œæˆæ–‡ä»¶å¤¹çš„ä¸Šä¸‹æ–‡ã€‚ æœ€å¥½é‡æ„è¿™é‡Œçš„ä»£ç ï¼Œå› ä¸ºå®ƒä¸ä¼šåœ¨ ES2015 æ¨¡å—é‡Œé¢å·¥ä½œã€‚å¦‚æœè¿™å¯¹ä½ æ¥è¯´ä¸å¤ªå¯èƒ½ï¼Œå¯ä»¥ä½¿ç”¨ ContextReplacementPlugin æ¥æŒ‡å®šç¼–è¯‘å™¨æ‰¾åˆ°æ­£ç¡®çš„åœ°å€ã€‚ åœ¨ CLI å’Œé…ç½®æ–‡ä»¶ä¸­ä½¿ç”¨è‡ªå®šä¹‰å‚æ•°å¦‚æœä½ æ»¥ç”¨ CLI å‚æ•°å»ä¼ é€’è‡ªå®šä¹‰å‚æ•°åˆ°é…ç½®ä¸­ï¼Œåƒè¿™æ ·ï¼š webapck --custom-stuff // webpack.config.jsvar customStuff = process.argv.indexOf("--custom-stuff") &gt;= 0;/* ... */module.exports = config; ä½ ä¼šå‘ç°è¿™æ ·ä¸å†è¢«å…è®¸äº†ï¼Œç°åœ¨ CLI æ¯”ä¹‹å‰æ›´åŠ ä¸¥æ ¼äº†ã€‚ ä½œä¸ºæ›¿ä»£ï¼Œç°åœ¨æœ‰ä¸€ä¸ªæ¥å£ç”¨æ¥ç»™é…ç½®ä¼ é€’å‚æ•°ã€‚æœªæ¥çš„å·¥å…·ä¼šåŸºäºè¿™ä¸ªã€‚ webpack --env.customStuff module.exports = function(env) &#123; var customStuff = env.customStuff; /* ... */ return config;&#125;; æŸ¥çœ‹ CLI require.ensure å’Œ AMD require æ˜¯å¼‚æ­¥çš„äº†è¿™äº›å‡½æ•°å˜æˆäº†å¼‚æ­¥çš„ï¼Œä»£æ›¿ä¹‹å‰å¦‚æœä»£ç å—å·²ç»è¢«åŠ è½½åå®ƒä»¬çš„å›è°ƒå‡½æ•°ä¼šåŒæ­¥æ‰§è¡Œçš„è¡Œä¸ºã€‚ require.ensure ç°åœ¨ä¾èµ–ä¸åŸç”Ÿçš„ Promise, å¦‚æœåœ¨ä¸€ä¸ªä¸æ”¯æŒ Promise çš„ç¯å¢ƒä¸‹ä½¿ç”¨ require.ensure ï¼Œé‚£ä¹ˆä½ éœ€è¦ä¸€ä¸ª polyfill. Loader çš„é…ç½®è¦é€šè¿‡ optionsä¸èƒ½åœ¨é€šè¿‡åœ¨ webpack.config.js ä¸­ä¸€ä¸ªè‡ªå®šä¹‰çš„å±æ€§æ¥é…ç½® loader äº†ã€‚å¿…é¡»é€šè¿‡ options. ä¸‹é¢è¿™ä¸ª ts å±æ€§çš„é…ç½®åœ¨ webpack2 ä¸­å·²ç»ä¸åˆæ³•äº†ã€‚ module.exports = &#123; ... module: &#123; rules: [&#123; test: /\.tsx?$/, loader: 'ts-loader' &#125;]&#125;,// does not work with webpack 2ts: &#123; transpileOnly: false &#125;&#125; ä»€ä¹ˆæ˜¯ optionsï¼Ÿå¥½é—®é¢˜ã€‚ä¸¥æ ¼çš„è¯´ï¼Œå®ƒå¯èƒ½æ˜¯ä¸¤ä¸ªä¸œè¥¿ï¼›éƒ½æ˜¯ç”¨æ¥é…ç½®ä¸€ä¸ª loader çš„æ–¹å¼ã€‚å…¸å‹çš„ options è¢«ç§°ä¸º query, æ˜¯ä¸€ä¸ªå¯ä»¥è¢«æ·»åŠ  loader åå­—åé¢çš„å­—ç¬¦ä¸²ã€‚æ›´åƒä¸€ä¸ª æŸ¥è¯¢å­—ç¬¦ï¼ˆquery stringï¼‰ï¼Œä½†å®é™…ä¸Šæ˜¯ greater powers module.exports = &#123; ... module: &#123; rules: [&#123; test: /\.tsx?$/, loader: 'ts-loader?' + JSON.stringify(&#123; transpileOnly: false &#125;) &#125;] &#125;&#125; åŒæ ·å¯ä»¥æ˜¯ä¸€ä¸ªæŒ‡å®šçš„å¯¹è±¡ï¼Œå’Œ loader ä¸€åŒæä¾›ï¼š module.exports = &#123; ... module: &#123; rules: [&#123; test: /\.tsx?$/, loader: 'ts-loader' options: &#123; transpileOnly: false &#125; &#125;]&#125;&#125; LoaderOptionsPlugin ä¸Šä¸‹æ–‡ä¸€äº› loader éœ€è¦ä»é…ç½®æ–‡ä»¶ä¸­è¯»å–ä¸Šä¸‹æ–‡ä¿¡æ¯ã€‚è¿™ä¸ªéœ€è¦é•¿æœŸçš„è®¾ç½®åœ¨ loader çš„é€‰é¡¹ä¸­ã€‚ ä¸ºäº†å…¼å®¹è€çš„ loaderï¼Œå¯ä»¥é€šè¿‡è¿™ä¸ªæ’ä»¶æ¥ä¼ é€’ç»™ loaderï¼š plugins: [ + new webpack.LoaderOptionsPlugin(&#123; + options: &#123; + context: __dirname + &#125;+ &#125;)] debugåœ¨ webapck1 ä¸­ debug é€‰é¡¹ç”¨æ¥æŠŠ loader åˆ‡æ¢åˆ° debug æ¨¡å¼ã€‚ åœ¨ webapck3 æˆ–æ›´åé¢çš„ç‰ˆæœ¬ä¸­ï¼Œè¿™ä¸ªæ¨¡å¼ä¼šè¢«ç§»é™¤æ‰ã€‚ ä¸ºäº†å…¼å®¹è€çš„ loaderï¼Œå¯ä»¥é€šè¿‡è¿™ä¸ªæ’ä»¶æ¥ä¼ é€’å‚æ•°ç»™ loaderï¼š - debug: true, plugins: [+ new webpack.LoaderOptionsPlugin(&#123;+ debug: true+ &#125;)] ES2015 ä»£ç åˆ†å‰²åœ¨ webpack1 ä¸­ï¼Œå¯ä»¥é€šè¿‡ require.ensure æ¥æ‡’åŠ è½½ä¸€äº›ä»£ç å—ï¼š require.ensure([], function(require) &#123; var foo = require("./module");&#125;); åœ¨ ES2015 ä¸­æˆ‘ä»¬ä½¿ç”¨ import() ä½œä¸ºä¸€ä¸ªæ–¹æ³•åœ¨è¿è¡Œæ—¶åŠ¨æ€çš„è®°è½½ ES2015. webpack ä¼šæŠŠ import() ä½œä¸ºä¸€ä¸ªåˆ†å‰²ç‚¹ï¼Œå¹¶ä¸”æŠŠåŠ è½½çš„ä»£ç åˆ†ç¦»å‡ºæ¥ä½œä¸ºä¸€ä¸ªå•ç‹¬çš„ä»£ç å—ã€‚ import() éœ€è¦ä¸€ä¸ªæ¨¡å—çš„åç§°ä½œä¸ºå‚æ•°ï¼Œå¹¶è¿”å›ä¸€ä¸ª Promise å¯¹è±¡ã€‚ function onClick() &#123; import("./module").then(module =&gt; &#123; return module.default; &#125;).catch(err =&gt; &#123; console.log("Chunk loading failed"); &#125;);&#125; å¥½æ¶ˆæ¯ï¼šç°åœ¨ä»£ç å—åŠ è½½å¤±è´¥å¯ä»¥è¢«å¤„ç†äº†ï¼Œå› ä¸ºå®ƒä»¬æ˜¯åŸºäº Promise çš„ã€‚ è­¦å‘Šï¼ˆCaveatï¼‰ï¼šrequire.ensure å¯ä»¥æ–¹ä¾¿çš„æŒ‡å®šä»£ç å—çš„åå­—ï¼Œé€šè¿‡ç¬¬ä¸‰ä¸ªå‚æ•°ï¼Œä½†æ˜¯ import API è¿˜ä¸æ”¯æŒè¿™ä¸ªç‰¹æ€§ã€‚å¦‚æœä½ è¿˜ä¾èµ–è¿™ä¸ªåŠŸèƒ½ï¼Œé‚£ä¹ˆä½ å¯ä»¥ç»§ç»­ä½¿ç”¨ require.ensure. require.ensure([], function(require) &#123; var foo = require("./module");&#125;, "custom-chunk-name"); å¦‚æœæƒ³è¦å’Œ Babel ç»“åˆä½¿ç”¨ import, ä½ éœ€è¦å®‰è£… dynamic-import è¿™ä¸ªè¿˜å¤„äº Stage 3 çš„è¯­æ³•æ’ä»¶æ¥ç»•è¿‡è¯­æ³•è§£æé”™è¯¯ã€‚å½“è¿™ä¸ªææ¡ˆè¢«åŠ åˆ°æ ‡å‡†é‡Œé¢åï¼Œå°±ä¸éœ€è¦è¿™ä¹ˆåšäº†ã€‚ åŠ¨æ€è¡¨è¾¾å¼ï¼ˆDynamic expressionsï¼‰å¾ˆæœ‰å¯èƒ½ä½ ä¼šéœ€è¦ä¼ é€’ä¸€ä¸ªè¡¨è¾¾å¼ç»™ import(). è¿™é‡Œå¤„ç†çš„æ¨¡å¼è·Ÿ CommonJs ä¸­å¾ˆç›¸ä¼¼ã€‚ import() åˆ›å»ºä¸€ä¸ªå•ç‹¬çš„ä»£ç å—ç»™æ¯ä¸ªå¯èƒ½çš„æ¨¡å—ã€‚ function route(path, query) &#123; return import(`./routes/$&#123;path&#125;/route`) .then(route =&gt; new route.Route(query));&#125;// This creates a separate chunk for each possible route æ··åˆä½¿ç”¨ ES2015ï¼ŒAMD å’Œ CommonJSå¦‚æœæ˜¯ AMD å’Œ CommonJs ï¼Œé‚£ä¹ˆå®ƒä»¬å®Œå…¨å¯ä»¥å¾ˆè‡ªç”±çš„æ··åˆä½¿ç”¨ã€‚åœ¨è¿™ç§æƒ…å†µä¸‹ï¼ŒWebpack çš„å¤„ç†çš„è¡Œä¸ºå’Œ babel æˆ–è€… node-eps ç›¸ä¼¼ã€‚ // CommonJS consuming ES2015 Modulevar book = require("./book");book.currentPage;book.readPage();book.default === "This is a book"; // ES2015 Module consuming CommonJSimport fs from "fs"; // module.exports map to defaultimport &#123; readFileSync &#125; from "fs"; // named exports are read from returned object+typeof fs.readFileSync === "function";typeof readFileSync === "function"; å¾ˆé‡è¦çš„ä¸€ç‚¹æ˜¯ï¼Œä½ éœ€è¦å‘Šè¯‰ babel ä¸è¦è§£æè¿™äº›æ¨¡å—ç¬¦å·ï¼ˆmodule symbolsï¼‰ï¼Œè¿™æ · webpack æ‰èƒ½ä½¿ç”¨å®ƒä»¬ã€‚åœ¨ .babelrc ä¸­è¿™æ ·é…ç½®å°±å¯ä»¥äº†ï¼š babelrc&#123; &quot;presets&quot;: [ [&quot;es2015&quot;, &#123; &quot;modules&quot;: false &#125;] ]&#125; æç¤ºä¸éœ€è¦ä¿®æ”¹ä»€ä¹ˆï¼Œä½†æ˜¯ä¼šå¾ˆæ–¹ä¾¿ã€‚ å­—ç¬¦ä¸²æ¨¡æ¿webpack ç°åœ¨æ”¯æŒåœ¨è¡¨è¾¾å¼ä¸­ä½¿ç”¨å­—ç¬¦ä¸²æ¨¡æ¿äº†ã€‚è¿™æ„å‘³ç€å¯ä»¥åœ¨ webpack constructs ä¸­ä½¿ç”¨ä»–ä»¬ï¼š - require(&quot;./templates/&quot; + name);+ require(`./templates/$&#123;name&#125;`); Configuration Promisewebpack ç°åœ¨æ”¯æŒä»é…ç½®æ–‡ä»¶ä¸­è¿”å›ä¸€ä¸ª Promise äº†ã€‚è¿™æ„å‘³ç€æˆ‘ä»¬å¯ä»¥åœ¨é…ç½®æ–‡ä»¶ä¸­åšä¸€äº›å¼‚æ­¥çš„å¤„ç†ã€‚ webapck.config.js module.exports = function() &#123; return fetchLangs().then(lang =&gt; (&#123; entry: "...", // ... plugins: [ new DefinePlugin(&#123; LANGUAGE: lang &#125;) ] &#125;));&#125;; é«˜çº§ loader åŒ¹é…webpack ç°åœ¨æ”¯æŒæ›´å¤šçš„æ–¹å¼æ¥è®© loader å»åŒ¹é…æ–‡ä»¶ module: &#123; rules: [ &#123; resource: /filename/, // matches "/path/filename.js" resourceQuery: /querystring/, // matches "/filename.js?querystring" issuer: /filename/, // matches "/path/something.js" if requested from "/path/filename.js" &#125; ]&#125; æ›´å¤šçš„å‘½ä»¤è¡Œé€‰é¡¹æ·»åŠ äº†ä¸€äº›æ–°çš„å‘½ä»¤è¡Œé€‰é¡¹ï¼š--define process.env.NODE_ENV=&quot;production&quot; ,æŸ¥çœ‹ DefinePlugin. --display-depth å±•ç¤ºæ¯ä¸ªæ¨¡å—å’Œå…¥å£çš„è·ç¦» --display-used-exports å±•ç¤ºæ¨¡å—ä½¿ç”¨äº†é‚£ä¸ªæ¨¡å—çš„æš´éœ²çš„ä¿¡æ¯ --display-max-modules è®¾ç½®è¾“å‡ºä¸­å±•ç¤ºçš„æœ€å¤§æ¨¡å—æ•°é‡ -p åŒæ ·è®¾ç½®äº† process.env.NODE_ENV ä¸º â€œproductionâ€ Loader ä¿®æ”¹åªå’Œ loader çš„ä½œè€…æœ‰å…³ã€‚ å¯ç¼“å­˜ï¼ˆCacheableï¼‰Loader ç°åœ¨é»˜è®¤æ˜¯å¯ä»¥ç¼“å­˜çš„ã€‚Loader å¿…é¡»é€‰æ‹© return å¦‚æœå®ƒä»¬æ˜¯ä¸å¯ç¼“å­˜çš„è¯ã€‚ // Cacheable loader module.exports = function(source) &#123;- this.cacheable(); return source; &#125; // Not cacheable loader module.exports = function(source) &#123;+ this.cacheable(false); return source; &#125; å¤æ‚çš„é€‰é¡¹webpack1 åªæ”¯æŒå¯ä»¥ JSON.stringifyé€‰çº¿çš„ loader. webpack2 æ”¯æŒæ‰€æœ‰çš„ plugins æ¥æ”¶ä¸€ä¸ª JS å¯¹è±¡ä½œä¸ºå‚æ•°ã€‚ ä½¿ç”¨å¤æ‚çš„é€‰é¡¹ä¼šå¸¦æ¥ä¸€ä¸ªé™åˆ¶ã€‚éœ€è¦ç»™è®¾ç½®å¯¹è±¡ä¸€ä¸ª ident ä½¿ä»–å¯ä»¥è¢«å…¶å®ƒ loaders å¼•ç”¨ã€‚ æ‹¥æœ‰ä¸€ä¸ª ident åœ¨é€‰é¡¹å¯¹è±¡ä¸Šï¼Œæ„å‘³ç€ä»–å¯ä»¥è¢«å…¶å®ƒ inline loader å¼•ç”¨ã€‚ require(&apos;some-loader??by-iden!resource&apos;) &#123; test: /.../, loader: &quot;...&quot;, options: &#123; ident: &quot;by-ident&quot;, magic: () =&gt; return Math.random() &#125;&#125; è¿™ç§ inline å†™æ³•ä¸åº”è¯¥ç»å¸¸ä½¿ç”¨ï¼Œä½†æ˜¯å®ƒå¯ä»¥è¢« laoder ç”Ÿæˆçš„ä»£ç ä½¿ç”¨ã€‚ä¾‹å­ï¼šstyle-loader ç”Ÿæˆä¸€ä¸ªæ¨¡å—ï¼Œrequire äº†å‰©ä¸‹çš„è¯·æ±‚ï¼ˆæ¯”å¦‚ç”¨æ¥æš´éœ² CSSï¼‰ã€‚ // style-loader generated code (simplified)var addStyle = require(&quot;./add-style&quot;);var css = require(&quot;-!css-loader?&#123;&quot;modules&quot;:true&#125;!postcss-loader??postcss-ident&quot;);addStyle(css); æ‰€ä»¥å¦‚æœä½ è¦ä½¿ç”¨å¤æ‚çš„é€‰é¡¹ï¼Œé‚£ä¹ˆå‘Šè¯‰ä½ çš„ç”¨æˆ·æœ‰å…³ ident çš„äº‹æƒ…ã€‚]]></content>
      <categories>
        <category>æŠ€æœ¯</category>
      </categories>
      <tags>
        <tag>webpack</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[ã€ç¿»è¯‘å‘ã€‘webpack2 æŒ‡å—ï¼ˆä¸‹ï¼‰]]></title>
    <url>%2F2017%2F01%2F18%2Fwebpack2-guide-3%2F</url>
    <content type="text"><![CDATA[ç¼“å­˜ï¼ˆCachingï¼‰ä¸ºäº†èƒ½å¤Ÿä½¿ webpack å¤„ç†åçš„é™æ€èµ„æºèƒ½å¤Ÿé•¿æœŸç¼“å­˜ä¸‹æ¥ï¼Œéœ€è¦ï¼š ä½¿ç”¨ [chunkhash] ç»™æ¯ä¸€ä¸ªæ–‡ä»¶åˆ›å»ºåŸºäºå†…å®¹å˜åŒ–çš„ç¼“å­˜æ ‡è¯† åœ¨ HTML æ–‡ä»¶ä¸­å¼•å…¥æ–‡ä»¶æ—¶ä½¿ç”¨ç¼–è¯‘çŠ¶æ€æ¥æ‹¿åˆ°æ–‡ä»¶åç§° åœ¨è½½å…¥èµ„æºä¹‹å‰ç”Ÿæˆ chunk-manifest JSON æ–‡ä»¶å¹¶å†™å…¥åˆ° HTML é¡µé¢ä¸­ ç¡®ä¿åŒ…å«å¯åŠ¨ä»£ç çš„å…¥å£ä»£ç å—çš„ hash å€¼ä¸ä¼šè¢«ä¿®æ”¹ï¼Œå½“å®ƒçš„ä¾èµ–æ²¡æœ‰å˜åŒ–çš„æ—¶å€™ å­˜åœ¨çš„é—®é¢˜æ¯å½“æˆ‘ä»¬ä»£ç ä¸­æœ‰ä¸€äº›ä¸œè¥¿éœ€è¦è¢«æ›´æ–°çš„æ—¶å€™ï¼Œå®ƒéœ€è¦åœ¨æœåŠ¡ä¸Šéƒ¨ç½²ç„¶åç”±å®¢æˆ·ç«¯é‡æ–°ä¸‹è½½è¿™äº›æ–‡ä»¶ã€‚å½“ç½‘ç»œçŠ¶çŠ¶å†µä¸å¤ªå¥½çš„æ—¶å€™ï¼Œè¿™æ˜¯æ„è§éå¸¸ä½æ•ˆçš„äº‹æƒ…ã€‚è¿™ä¹Ÿæ˜¯ä¸ºä»€ä¹ˆæµè§ˆå™¨è¦ç¼“å­˜é™æ€èµ„æºçš„åŸå› ã€‚ è¿™ä¼šå¯¼è‡´ä¸€ä¸ªé™·é˜±ï¼šå½“æˆ‘ä»¬å‘å¸ƒä¸€ä¸ªæ–°çš„ç‰ˆæœ¬çš„æ—¶å€™ä¸å»æ›´æ–°çš„æ–‡ä»¶åï¼Œè¿™ä¼šè®©æµè§ˆå™¨è®¤ä¸ºæ–‡ä»¶æ²¡æœ‰å˜åŒ–ï¼Œå¯¼è‡´å®¢æˆ·ç«¯æ‹¿ä¸åˆ°æœ€æ–°çš„èµ„æºã€‚ ä¸€ä¸ªç®€å•è§£å†³é—®é¢˜çš„æ–¹å¼å°±æ˜¯å‘Šè¯‰æµè§ˆå™¨ä¸€ä¸ªæ–°çš„æ–‡ä»¶åã€‚åœ¨æ²¡æœ‰ webpack çš„æ—¶å€™æˆ‘ä»¬ä¼šä½¿ç”¨æ„å»ºç‰ˆæœ¬æ¥æ ‡è¯†æ­¤æ¬¡çš„æ›´æ–°ï¼š application.js?build=1application.css?build=1 åœ¨ webpack ä¸­è¿™æ ·åšä¹Ÿå¾ˆç®€å•ï¼šæ¯ä¸€æ¬¡ webpack çš„æ„å»ºéƒ½ä¼šç”Ÿæˆä¸€ä¸ªå¯ä»¥ç”¨æ¥æ„æˆæ–‡ä»¶åçš„ç‹¬ä¸€æ— äºŒçš„ hash å€¼ã€‚ä¸‹é¢è¿™ä¸ªé…ç½®æ–‡ä»¶ä¼šç”Ÿæˆä¸¤ä¸ªå¸¦æœ‰ hash å€¼çš„æ–‡ä»¶åï¼š // webpack.config.jsconst path = require('path');module.exports = &#123; entry: &#123; vendor: './src/vendor.js', main: './src/index.js' &#125;, output: &#123; path: path.join(__dirname, 'build'), filename: '[name].[hash].js' &#125;&#125;; æ‰§è¡Œ webpack å‘½ä»¤ä¼šå¾—åˆ°ä»¥ä¸‹è¾“å‡ºï¼š Hash: 55e783391098c2496a8fVersion: webpack 1.10.1Time: 58msAsset Size Chunks Chunk Namesmain.55e783391098c2496a8f.js 1.43 kB 0 [emitted] mainvendor.55e783391098c2496a8f.js 1.43 kB 1 [emitted] vendor[0] ./src/index.js 46 bytes &#123;0&#125; [built][0] ./src/vendor.js 40 bytes &#123;1&#125; [built] ä½†å­˜åœ¨çš„é—®é¢˜æ˜¯ï¼Œæ¯æ¬¡æˆ‘ä»¬é‡æ–°ç¼–è¯‘ï¼Œæ‰€æœ‰çš„æ–‡ä»¶åéƒ½ä¼šå˜åŒ–ï¼Œè¿™ä¼šå¯¼è‡´å®¢æˆ·ç«¯æ¯æ¬¡éƒ½é‡æ–°æŠŠæ•´ä¸ªåº”ç”¨çš„ä»£ç é‡æ–°ä¸‹è½½ä¸€éã€‚é‚£ä¹ˆæˆ‘ä»¬å¦‚ä½•æ‰èƒ½æ—¶å®¢æˆ·ç«¯æ¯æ¬¡åªä¸‹è½½æœ‰å˜åŠ¨çš„æ–‡ä»¶ã€‚ ç»™æ¯ä¸ªæ–‡ä»¶ç”Ÿæˆç‹¬ç‰¹çš„ hashå½“ä¸€ä¸ªæ–‡ä»¶çš„å†…å®¹æ²¡æœ‰å˜åŒ–çš„æ—¶å€™ï¼Œå¦‚ä½•ä¿è¯å®ƒçš„æ–‡ä»¶åä¸ä¼šåœ¨æ¯æ¬¡ç¼–è¯‘ä¸­å˜åŒ–ã€‚æ¯”å¦‚ï¼Œä¸€ä¸ªç”¨æ¥æ”¾æ‰€æœ‰çš„æˆ‘ä»¬çš„æ‰€æœ‰ä¾èµ–åº“æ–‡ä»¶çš„ä»£ç åŒ…ã€‚ Webpack å…è®¸æ ¹æ®æ–‡ä»¶çš„å†…å®¹ç”Ÿæˆ hash å€¼ã€‚è¿™æ˜¯æ›´æ–°åçš„é…ç½®ï¼š // webpack.config.jsmodule.exports = &#123; /*...*/ output: &#123; /*...*/ filename: '[name].[chunkhash].js' &#125;&#125;; è¿™ä¸ªé…ç½®åŒæ ·ä¼šç”Ÿæˆä¸¤ä¸ªæ–‡ä»¶ï¼Œä½†æ˜¯æ¯ä¸ªæ–‡ä»¶éƒ½æ‹¥æœ‰è‡ªå·±çš„ hash å€¼ï¼š main.155567618f4367cd1cb8.js 1.43 kB 0 [emitted] mainvendor.c2330c22cd2decb5da5a.js 1.43 kB 1 [emitted] vendor ä¸è¦åœ¨å¼€å‘ç¯å¢ƒä¸­ä½¿ç”¨ [chunkhash]ï¼Œè¿™ä¼šå¯¼è‡´æ¯æ¬¡çš„ç¼–è¯‘æ—¶é—´è¾¹é•¿ã€‚æŠŠå¼€å‘ç¯å¢ƒå’Œç”Ÿæˆç¯å¢ƒçš„é…ç½®æ–‡ä»¶åˆ†å¼€ï¼Œåœ¨å¼€å‘ç¯å¢ƒä½¿ç”¨ [name].js ï¼Œåœ¨ç”Ÿäº§ç¯å¢ƒä¸­ä½¿ç”¨ [name].[chunkhash].js ä» webpack ç¼–è¯‘çŠ¶æ€ï¼ˆcompilation statsï¼‰ä¸­è·å–æ–‡ä»¶ååœ¨å¼€å‘ç¯å¢ƒä¸­ï¼Œä½ åªéœ€è¦åœ¨ HTML ä¸­å¼•å…¥ä½ çš„æ–‡ä»¶å°±å¯ä»¥äº†ã€‚ &lt;script src="main.js"&gt;&lt;/srcipt&gt; ç„¶è€Œï¼Œåœ¨ç”Ÿäº§ç¯å¢ƒä¸­ï¼Œæˆ‘ä»¬æ¯æ¬¡éƒ½ä¼šå¾—åˆ°ä¸€ä¸ªä¸åŒçš„æ–‡ä»¶åï¼š &lt;script src="main.12312123t234.js"&gt;&lt;/srcipt&gt; ä¸ºäº†èƒ½å¤Ÿåœ¨ HTML ä¸­å¼•å…¥æ­£ç¡®çš„æ–‡ä»¶ï¼Œæˆ‘ä»¬éœ€è¦äº†è§£ä¸€äº›æ„å»ºçš„ä¿¡æ¯ã€‚è¿™å¯ä»¥é€šè¿‡ä¸‹é¢è¿™ä¸ªæ’ä»¶æ¥ä» webpack ç¼–è¯‘çŠ¶æ€ï¼ˆcompliation statsï¼‰ ä¸­æå–å‡ºæ¥ã€‚ // webpack.config.jsconst path = require('path');module.exports = &#123; /*...*/ plugins: [ function() &#123; this.plugin("done", function(stats) &#123; require("fs").writeFileSync( path.join(__dirname, "â€¦", "stats.json"), JSON.stringify(stats.toJson())); &#125;); &#125; ]&#125;; æˆ–è€…ï¼Œé€šè¿‡ä¸‹é¢è¿™äº›æ’ä»¶æ¥æš´éœ² JSON æ–‡ä»¶ï¼š https://www.npmjs.com/package/webpack-manifest-plugin https://www.npmjs.com/package/assets-webpack-plugin ä¸€ä¸ªç®€å•çš„é€šè¿‡ webpack-manifest-plugin è¾“å‡ºçš„æ–‡ä»¶å¦‚ä¸‹ï¼š &#123; "main.js": "main.155567618f4367cd1cb8.js", "vendor.js": "vendor.c2330c22cd2decb5da5a.js"&#125; æ¥ä¸‹æ¥çš„äº‹æƒ…å°±ç”±ä½ çš„æœåŠ¡æ¥å†³å®šäº†ã€‚è¿™æœ‰ä¸€ä¸ªå¾ˆä¸é”™çš„ä¾‹å­ walk through for Rails-based projects. ä½¿ç”¨ Node.js çš„æœåŠ¡ç«¯æ¸²æŸ“çš„è¯å¯ä»¥ä½¿ç”¨ webpack-isomorphic-tools. å¦‚æœä½ çš„åº”ç”¨ä¸éœ€è¦ä¾èµ–æœåŠ¡ç«¯æ¸²æŸ“çš„è¯ï¼Œé‚£å®Œå…¨å¯ä»¥ç›´æ¥ç”Ÿæˆä¸€ä¸ª index.html. å¯ä»¥ä½¿ç”¨ä¸‹é¢è¿™ä¸¤ä¸ªæ’ä»¶æ¥å®Œæˆï¼š https://github.com/ampedandwired/html-webpack-plugin https://github.com/szrenwei/inline-manifest-webpack-plugin ç¡®å®šçš„ hashes (Deterministic hashes)ä¸ºäº†å‹ç¼©ç”Ÿæˆæ–‡ä»¶çš„å¤§å°ï¼Œwebpack ä½¿ç”¨ id ä»£æ›¿åå­—æ¥è¯†åˆ«æ¨¡å—ã€‚å†ç¼–è¯‘è¿‡ç¨‹ä¸­ï¼Œid å·²ç»è¢«ç”Ÿæˆï¼Œæ˜ å°„åˆ°ä»£ç å—çš„åå­—å¹¶ä¸”æ”¾åˆ°ä¸€ä¸ª JavaScript å¯¹è±¡ä¸­ï¼Œè¢«å«åšä»£ç å—æ¸…å•ï¼ˆ chunk manifestï¼‰ã€‚å®ƒä¼šè¢«æ”¾åˆ°å…¥å£æ–‡ä»¶ä¸­ï¼Œç¡®ä¿æ‰“åŒ…åçš„æ–‡ä»¶èƒ½å¤Ÿæ­£å¸¸å·¥ä½œã€‚ è¿™ä¼šæœ‰å’Œä¹‹å‰ä¸€æ ·çš„é—®é¢˜ï¼šæ— è®ºä¿®æ”¹ä»»ä½•åœ°æ–¹çš„æ–‡ä»¶ï¼Œå³ä½¿å…¶å®ƒåœ°æ–¹éƒ½æ²¡æœ‰ä¿®æ”¹ï¼Œæ›´æ–°åçš„å…¥å£éœ€è¦åŒ…å«æ¸…å•æ–‡ä»¶ã€‚è¿™ä¼šç”Ÿæˆä¸€ä¸ªæ–°çš„ hash å€¼ï¼Œå¯¼è‡´é—®ä»¬çš„å…¥å£æ–‡ä»¶åä¿®æ”¹ï¼Œæ— æ³•äº«å—é•¿æœŸç¼“å­˜å¸¦æ¥çš„å¥½å¤„ã€‚ ä¸ºäº†è§£å†³è¿™ä¸ªé—®é¢˜ï¼Œæˆ‘ä»¬åº”è¯¥ä½¿ç”¨ https://github.com/diurnalist/chunk-manifest-webpack-plugin ï¼Œä¸€ä¸ªå¯ä»¥æŠŠæ¸…å•æ–‡ä»¶æå–å‡ºæ¥å•ç‹¬æ”¾åˆ°ä¸€ä¸ª JSON æ–‡ä»¶ä¸­ã€‚è¿™æ˜¯æ›´æ–°åçš„é…ç½®æ–‡ä»¶ï¼Œä¼šç”Ÿæˆ chunk-manifest.json å¹¶æ”¾åˆ°æˆ‘ä»¬æ‰“åŒ…åçš„æ–‡ä»¶å¤¹ä¸‹é¢ï¼š // webpack.config.jsvar ChunkManifestPlugin = require('chunk-manifest-webpack-plugin');module.exports = &#123; // your config values here plugins: [ new ChunkManifestPlugin(&#123; filename: "chunk-manifest.json", manifestVariable: "webpackManifest" &#125;) ]&#125;; å½“æˆ‘ä»¬ä»å…¥å£æ–‡ä»¶ä¸­ç§»é™¤æ‰æ¸…å•æ–‡ä»¶åï¼Œé‚£ä¹ˆæˆ‘ä»¬å°±éœ€è¦æ‰‹åŠ¨æŠŠè¿™ä¸ªæ–‡ä»¶æä¾›ç»™ webapck ä½¿ç”¨ã€‚åœ¨ä¸Šé¢çš„ä¾‹å­ä¸­ä½ å¯èƒ½æ³¨æ„åˆ° manifestVariable è¿™ä¸ªé€‰é¡¹ã€‚è¿™æ˜¯ä¸€ä¸ªå…¨å±€å˜é‡ï¼Œä¸€ä¸ªä¾› webpack æ¥æŸ¥æ‰¾æ¸…å• JSON æ–‡ä»¶ï¼Œè¿™ä¹Ÿæ˜¯ä¸ºä»€ä¹ˆæˆ‘ä»¬éœ€è¦åœ¨ä»£ç åŒ…å‰é¢å¼•å…¥åˆ° HTML ä¸­ã€‚åœ¨ HTML ä¸­å†™å…¥ JSON æ–‡ä»¶çš„å†…å®¹æ˜¯å¾ˆå®¹æ˜“ï¼Œé‚£ä¹ˆæˆ‘ä»¬çš„ HTML æ–‡ä»¶çš„ head éƒ¨åˆ†å°±ä¼šå‘ä¸‹é¢è¿™æ ·ï¼š &lt;html&gt;&lt;head&gt; &lt;script&gt; //&lt;![CDATA[ window.webpackManifest = &#123;"0":"main.3d038f325b02fdee5724.js","1":"1.c4116058de00860e5aa8.js"&#125; //]]&gt; &lt;/script&gt;&lt;/head&gt;&lt;body&gt;&lt;/body&gt;&lt;/html&gt; æœ€ç»ˆçš„ webpack.config.js æ–‡ä»¶å¦‚ä¸‹ï¼š var path = require('path');var webpack = require('webpack');var ManifestPlugin = require('webpack-manifest-plugin');var ChunkManifestPlugin = require('chunk-manifest-webpack-plugin');var WebpackMd5Hash = require('webpack-md5-hash');module.exports = &#123; entry: &#123; vendor: './src/vendor.js', main: './src/index.js' &#125;, output: &#123; path: path.join(__dirname, 'build'), filename: '[name].[chunkhash].js', chunkFilename: '[name].[chunkhash].js' &#125;, plugins: [ new webpack.optimize.CommonsChunkPlugin(&#123; name: "vendor", minChunks: Infinity, &#125;), new WebpackMd5Hash(), new ManifestPlugin(), new ChunkManifestPlugin(&#123; filename: "chunk-manifest.json", manifestVariable: "webpackManifest" &#125;) ]&#125;; å¦‚æœä½¿ç”¨ webpack-html-plugin ,é‚£ä¹ˆä½ å¯ä»¥ä½¿ç”¨ inline-manifest-webpack-plugin æ¥åšè¿™ä»¶äº‹ã€‚ ä½¿ç”¨è¿™ä¸ªé…ç½®ï¼Œé‚£ä¹ˆç¬¬ä¸‰æ–¹ä»£ç å—ï¼ˆvendors chunkdï¼‰å°†ä¸ä¼šå˜åŒ–ï¼Œé™¤éä½ ä¿®æ”¹å®ƒçš„ä»£ç æˆ–è€…ä¾èµ–ã€‚ å«ç‰‡ï¼ˆShimmingï¼‰webpack ä½œä¸ºäº†ä¸ªæ¨¡å—æ‰“åŒ…å·¥å…·ï¼Œå¯ä»¥æ”¯æŒçš„æ¨¡å—ç³»ç»ŸåŒ…æ‹¬ ES2015 modules, CommonJs å’Œ AMD. ä½†æ˜¯å¾ˆå¤šæƒ…å†µä¸‹ï¼Œå½“æˆ‘ä»¬ä½¿ç”¨ç¬¬ä¸‰æ–¹åº“çš„æ—¶å€™ï¼Œæˆ‘ä»¬çœ‹åˆ°ä»–ä»¬ä¼šä¾èµ–ä¸€ä¸ªå…¨å±€å˜é‡æ¯”å¦‚ $ æˆ–è€…è¯´ jquery. å®ƒä»¬ä¹Ÿå¯èƒ½åˆ›å»ºä¸€äº›éœ€è¦æš´éœ²å‡ºæ¥çš„æ–°çš„å…¨å±€å˜é‡ã€‚æˆ‘ä»¬æ¥çœ‹å‡ ç§ä¸åŒçš„æ–¹å¼æ¥ä½¿ webpack èƒ½å¤Ÿç†è§£è¿™äº›éæ¨¡å—ï¼ˆbroken modulesï¼‰çš„æ–‡ä»¶ã€‚ æœ€å¥½ä½¿ç”¨åœ¨ dist æ–‡ä»¶ä¸‹æ²¡æœ‰æ‰“åŒ…å‹ç¼©è¿‡çš„ CommonJs/AMD æ–‡ä»¶ï¼ˆPrefer unminified CommonJS/AMD files over bundled dist versions.ï¼‰å¤§å¤šæ•°æ¨¡å—ä¼šåœ¨ package.json çš„ main å­—æ®µä¸­æŒ‡å®šå®ƒä»¬çš„ dist ç‰ˆæœ¬ã€‚è¿™å¯¹å¤§å¤šæ•°å¼€å‘è€…æ¥è¯´éƒ½æ˜¯éå¸¸æœ‰ç”¨çš„ï¼Œå¯¹ webpack æ¥è¯´æœ€å¥½è®¾ç½®ä¸€ä¸ªåˆ«ååˆ°å®ƒä»¬çš„ src ç›®å½•ä¸‹é¢ï¼Œè¿™æ ·èƒ½å¤Ÿä½¿ webpack æ›´å¥½çš„ä¼˜åŒ–ä¾èµ–ã€‚ä½†æ˜¯ï¼Œåœ¨å¾ˆå¤šæƒ…å†µä¸‹ä½¿ç”¨ dist ç‰ˆæœ¬ä¹Ÿä¸ä¼šæœ‰ä»€ä¹ˆå¤§çš„é—®é¢˜ã€‚ // webpack.config.jsmodule.exports = &#123; ... resolve: &#123; alias: &#123; jquery: "jquery/src/jquery" &#125;&#125;&#125;; provide-pluginé€šè¿‡ä½¿ç”¨ [provide-plugin](https://webpack.js.org/plugins/provide-plugin) ä½¿è¿™ä¸ªæ¨¡å—åœ¨æ‰€æœ‰é€šè¿‡ webpack å¼•ç”¨çš„æ¨¡å—ä¸­ä½œä¸ºä¸€ä¸ªå¯ç”¨çš„å˜é‡ã€‚åªæœ‰å½“ä½ ä½¿ç”¨äº†è¿™ä¸ªå˜é‡åï¼Œå¯¹åº”çš„æ¨¡å—æ‰ä¼šè¢«å¼•ç”¨è¿›æ¥ã€‚å¾ˆå¤šå¤è€çš„æ¨¡å—é€šè¿‡ä½¿ç”¨ç‰¹å®šçš„å…¨å±€å˜é‡ï¼Œæ¯”å¦‚ jQuery çš„ $ å’Œæˆ–è€… jQuery. åœ¨è¿™ä¸ªåœºæ™¯ä¸‹ï¼Œä½ å¯ä»¥æå‰åœ¨ webpack ä¸­é…ç½®ä¸º var $=requrei(&#39;jquery&#39;) ï¼Œåœ¨æ¯ä¸€æ¬¡é‡åˆ°å…¨å±€ $ æ ‡è¯†ç¬¦ã€‚ module.exports = &#123; plugins: [ new webpack.ProvidePlugin(&#123; $: 'jquery', jQuery: 'jquery' &#125;) ]&#125;; imports-loader[imports-loader](https://webpack.js.org/loaders/imports-loader/) å°†å¿…é¡»è¦çš„å…¨å±€å˜é‡æ’å…¥åˆ°ä¼ ç»Ÿæ¨¡å—ä¸­ã€‚æ¯”å¦‚ï¼Œä¸€äº›ä¼ ç»Ÿæ¨¡å—ä¾èµ– this æŒ‡å‘ window å¯¹è±¡ã€‚è¿™ä¼šå¯¼è‡´ä¸€ä¸ªé—®é¢˜ï¼Œå½“æ¨¡å—è¢«æ‰§è¡Œåœ¨ CommonJS ä¸Šä¸‹æ–‡çš„æ—¶å€™ï¼Œ this æŒ‡å‘ä¸º module.exports.åœ¨è¿™ç§æƒ…å†µä¸‹ï¼Œä½ å¯ä»¥é€šè¿‡ imports-loaderé‡å†™ this. webpack.config.js module.exports = &#123; module: &#123; rules: [&#123; test: require.resolve("some-module"), use: 'imports-loader?this=&gt;window' &#125;] &#125;&#125;; å®ƒæ”¯æŒä¸åŒçš„æ¨¡å—ç±»å‹ï¼Œæ¯”å¦‚ AMDï¼ŒCommonJS åŒæ—¶ä¹Ÿæ”¯æŒä¼ ç»Ÿæ¨¡å—ã€‚å¯æ˜¯ï¼Œé€šå¸¸æƒ…å†µä¸‹å®ƒä¼šå»æ£€æŸ¥ define å˜é‡ï¼Œç„¶åä½¿ç”¨ä¸€äº›å¥‡æ€ªï¼ˆquirkyï¼‰çš„ä»£ç å»æš´éœ²è¿™äº›å±æ€§ã€‚åœ¨è¿™ç§æƒ…å†µä¸‹ï¼Œé€šè¿‡è®¾ç½® define = false æ¥å¼ºåˆ¶CommonJS è·¯å¾„å¯èƒ½ä¼šæœ‰ä¸€äº›å¸®åŠ©ã€‚ webpack.config.js module.exports = &#123; module: &#123; rules: [&#123; test: require.resolve("some-module"), use: 'imports-loader?define=&gt;false' &#125;] &#125;&#125;; exports-loaderå‡è®¾ä¸€ä¸ªåº“æ–‡ä»¶åˆ›å»ºäº†ä¸€ä¸ªå…¨å±€å˜é‡ï¼ŒæœŸå¾…å®ƒçš„æ¶ˆè´¹è€…å»ä½¿ç”¨ã€‚åœ¨è¿™ç§æƒ…å†µä¸‹ï¼Œæˆ‘ä»¬åº”è¯¥ä½¿ç”¨ [exports-loader](https://webpack.js.org/loaders/exports-loader/), æ¥æš´éœ²ä¸€ä¸ª CommonJS é£æ ¼çš„å…¨å±€å˜é‡ã€‚æ¯”å¦‚ï¼Œä¸ºäº†æš´éœ² file ä¸º fileï¼Œhelpers.parse ä¸º parse: webpack.config.js module.exports = &#123; module: &#123; rules: [&#123; test: require.resolve("some-module"), use: 'exports-loader?file,parse=helpers.parse' // adds below code the the file's source: // exports["file"] = file; // exports["parse"] = helpers.parse; &#125;] &#125;&#125;; script-loader[script-loader](https://webpack.js.org/loaders/script-loader/) ä¼šåœ¨å…¨å±€ä¸Šä¸‹æ–‡é‡Œé¢è§£æä»£ç ï¼Œå°±å’Œä½ åœ¨ HTML ä¸­æ·»åŠ äº†ä¸€ä¸ª script æ ‡ç­¾ä¸€æ ·ã€‚åœ¨è¿™ç§æƒ…å†µä¸‹ï¼Œç†è®ºä¸Šæ‰€æœ‰çš„æ¨¡å—éƒ½åº”è¯¥æ­£å¸¸çš„è¿è¡Œã€‚ è¿™ä¸ªæ–‡ä»¶ä¼šè¢«ä½œä¸ºå­—ç¬¦ä¸²æ‰“åŒ…åœ¨ä»£ç ä¸­ã€‚ä¸ä¼šè¢« webpack å‹ç¼©ï¼Œæ‰€ä»¥è¯·ä½¿ç”¨å‹ç¼©åçš„ç‰ˆæœ¬ã€‚åŒæ ·è¿™ç§æƒ…å†µæ— æ³•ä½¿ç”¨ webpack æä¾›çš„å¼€å‘å·¥å…·ã€‚ å‡è®¾ä½ æœ‰ä¸€ä¸ª legacy.js æ–‡ä»¶åŒ…å«ï¼š GLOBAL_CONFIG = &#123;&#125; ä½¿ç”¨ script-loaderrequire('script-loader!legacy.js') ä¸€èˆ¬ä¼šå¾—åˆ°è¿™æ ·çš„ç»“æœï¼š eval('GLOBAL_CONFIG = &#123;&#125;') noParse é€‰é¡¹å½“æ²¡æœ‰ AMD/CommonJS é£æ ¼çš„æ¨¡å—ï¼ŒåŒæ—¶ä½ éœ€è¦åœ¨ dist ä¸­å¼•å…¥ï¼Œä½ å¯ä»¥æŠŠè¿™ä¸ªæ¨¡å—æ ‡è¯†ä¸º [noParse](https://webpack.js.org/configuration/module/#module-noparse). è¿™æ · webpack å°±åªä¼šå¼•å…¥è¿™ä¸ªæ¨¡å—ä½†æ˜¯ä¸ä¼šå»åšä»»ä½•å¤„ç†ï¼Œè¿™æ ·ä¹Ÿå¯ä»¥å‡å°‘æ„å»ºçš„æ—¶é—´ã€‚ ä»»ä½•éœ€è¦ AST æ”¯æŒçš„ï¼Œæ¯”å¦‚ ProvidePlugin, éƒ½æ˜¯ä¸ä¼šå·¥ä½œçš„ã€‚ module.exports = &#123; module: &#123; noParse: /jquery|backbone/ &#125;&#125;; ç¼–å†™ä¸€ä¸ªåº“æ–‡ä»¶webpack æ˜¯ä¸€ä¸ªå·¥å…·ï¼Œå¯ä»¥ç”¨æ¥æ‰“åŒ…åº”ç”¨ä»£ç ï¼ŒåŒæ ·ä¹Ÿå¯ä»¥ç”¨æ¥æ‰“åŒ…åº“ä»£ç ã€‚å¦‚æœä½ æ˜¯ä¸€ä¸ª JavaScript åº“çš„ä½œè€…ï¼Œæ­£åœ¨å¯»æ‰¾ç²¾ç®€æ‰“åŒ…ä»£ç çš„æµç¨‹ï¼Œé‚£ä¹ˆè¿™ä¸ªç« èŠ‚çš„å†…å®¹ä¼šå¯¹ä½ å¾ˆæœ‰å¸®åŠ©ã€‚ ç¼–å†™ä¸€ä¸ªåº“ï¼ˆAuthor a Libraryï¼‰æˆ‘ä»¬è¿™æœ‰ä¸€ä¸ªç²¾ç®€çš„åŒ…è£…åº“æ¥æŠŠæ•°å­— 1 åˆ° 5 è½¬æ¢åˆ°å¯¹åº”çš„å•è¯ï¼Œåä¹‹äº¦ç„¶ã€‚ çœ‹èµ·æ¥å¯èƒ½æ˜¯è¿™æ ·çš„ï¼š src/index.js import _ from 'lodash';import numRef from './ref.json';export function numToWord(num) &#123; return _.reduce(numRef, (accum, ref) =&gt; &#123; return ref.num === num ? ref.word : accum; &#125;, '');&#125;;export function wordToNum(word) &#123; return _.reduce(numRef, (accum, ref) =&gt; &#123; return ref.word === word &amp;&amp; word.toLowerCase() ? ref.num : accum; &#125;, -1);&#125;; åº“çš„ä½¿ç”¨è§„èŒƒå¦‚ä¸‹ï¼š //ES2015modulesimport*aswebpackNumbersfrom'webpack-numbers';...webpackNumbers.wordToNum('Two')//outputis2...//CommonJSmodulesvarwebpackNumbers=require('webpack-numbers');...webpackNumbers.numToWord(3);//outputisThree...//Asascripttag&lt;html&gt;...&lt;scriptsrc="https://unpkg.com/webpack-numbers"&gt;&lt;/script&gt;&lt;script&gt;.../*webpackNumbersisavailableasaglobalvariable*/webpackNumbers.wordToNum('Five')//outputis5...&lt;/script&gt;&lt;/html&gt; å®Œæ•´çš„åº“é…ç½®å’Œä»£ç æ”¾åœ¨è¿™é‡Œ webpack-library-example. é…ç½® webpacké‚£ä¹ˆæ¥ä¸‹æ¥çš„äº‹æƒ…å°±æ˜¯æ‰“åŒ…è¿™ä¸ªåº“ â€¢ ä¸æ‰“åŒ… lodashï¼Œä½†æ˜¯ä¼šè¢«å®ƒçš„æ¶ˆè´¹è€…å¼•å…¥ â€¢ å‘½åè¿™ä¸ªåº“ä¸º webpack-numbers, å¹¶ä¸”å˜é‡ä¸º webpackNumbers â€¢ åº“å¯ä»¥é€šè¿‡ import webapckNumbers from &#39;webpack-numbers&#39; æˆ–è€… require(&#39;webpack-numbers&#39;) æ¥å¼•å…¥ â€¢ å½“é€šè¿‡ script æ ‡ç­¾å¼•å…¥çš„æ—¶å€™ï¼Œå¯ä»¥é€šè¿‡å…¨å±€å˜é‡ webpackNumbers æ¥è®¿é—® â€¢ å¯ä»¥åœ¨ Node.js ä¸­ä½¿ç”¨ æ·»åŠ  webpackæ·»åŠ åŸºç¡€ webpack é…ç½®ã€‚ webpack.config.js module.exports = &#123; entry: './src/index.js', output: &#123; path: './dist', filename: 'webpack-numbers.js' &#125;&#125;; è¿™å°†æ·»åŠ ä¸€ä¸ªåŸºç¡€é…ç½®æ¥æ‰“åŒ…è¿™ä¸ªåº“ã€‚ æ·»åŠ  Loadersä½†æ˜¯å¦‚æœæ²¡æœ‰å¯¹åº” loaders å»è§£æä»£ç æ˜¯æ²¡æœ‰åŠæ³•å·¥ä½œçš„ã€‚è¿™é‡Œï¼Œæˆ‘ä»¬æ·»åŠ  json-loader æ¥æ·»åŠ å¯¹ json æ–‡ä»¶çš„è§£æã€‚ webpack.config.js module.exports = &#123; // ... module: &#123; rules: [&#123; test: /.json$/, use: &apos;json-loader&apos; &#125;] &#125;&#125;; æ·»åŠ  externalsç°åœ¨ï¼Œå¦‚æœæ‰§è¡Œ webpack å‘½ä»¤ï¼Œä½ ä¼šå‘ç°ä¸€ä¸ªæäº¤è¾ƒå¤§çš„ä»£ç åŒ…è¢«ç”Ÿæˆã€‚å¦‚æœä½ å»æ£€æŸ¥ä»£ç ï¼Œä¼šå‘ç° ladash è¢«æ‰“åŒ…åˆ°äº†ä»£ç åŒ…ä¸­ã€‚å¯¹äºä½ çš„åº“æ¥è¯´æŠŠ lodash æ‰“åŒ…åœ¨ä¸€èµ·ä½¿å®Œå…¨æ²¡æœ‰å¿…è¦çš„ã€‚ å¯ä»¥é€šè¿‡ externals é…ç½®ï¼š webpack.config.js module.exports = &#123; ... externals: &#123; "lodash": &#123; commonjs: "lodash", commonjs2: "lodash", amd: "lodash", root: "_" &#125;&#125;...&#125;; è¿™æ„å‘³ç€åœ¨ä½¿ç”¨è€…çš„ç¯å¢ƒä¸‹ä½ çš„åº“ä¼šæœŸæœ›ä¾èµ– lodash ã€‚ æ·»åŠ  libraryTargetä¸ºäº†è¿™ä¸ªåº“èƒ½å¤Ÿè¢«å¹¿æ³›çš„ä½¿ç”¨ï¼Œæˆ‘ä»¬éœ€è¦è®©å®ƒåœ¨ä¸åŒçš„ç¯å¢ƒä¸‹æœ‰ç›¸åŒçš„è¡¨ç°ã€‚æ¯”å¦‚ï¼Œ CommonJSï¼ŒAMDï¼ŒNode.js æˆ–è€…ä½œä¸ºä¸€ä¸ªå…¨å±€å˜é‡ã€‚ ä¸ºäº†è¾¾åˆ°è¿™ä¸ªç›®çš„ï¼Œéœ€è¦åœ¨ webpack é…ç½®ä¸­æ·»åŠ  library å±æ€§ã€‚ webpack.config.js module.exports = &#123; ... output: &#123;... library: 'webpackNumbers'&#125;...&#125;; è¿™èƒ½å¤Ÿä½ çš„åº“è¢«å¼•å…¥çš„æ—¶å€™å¯ä»¥ä½œä¸ºä¸€ä¸ªå…¨å±€å˜é‡è¢«è®¿é—®ã€‚ä¸ºäº†èƒ½å¤Ÿåœ¨å…¶å®ƒæƒ…å†µä¸‹ä½¿ç”¨ï¼Œåœ¨é…ç½®ä¸­ç»§ç»­æ·»åŠ  libraryTarget çš„å€¼ï¼š webpack.config.js module.exports = &#123; ... output: &#123;... library: 'webpackNumbers', libraryTarget:'umd' // Possible value - amd, commonjs, commonjs2, commonjs-module, this, var&#125;...&#125;; å¦‚æœ library è®¾ç½®äº†ï¼Œä½†æ˜¯ libraryTargetæ²¡æœ‰é…ç½®ï¼Œé‚£ä¹ˆ libraryTarget é»˜è®¤ä¸º var å°±åƒåœ¨ config reference ä¸­æŒ‡å®šçš„ä¸€æ ·ã€‚ æœ€åä¸€æ­¥è°ƒæ•´ç”Ÿäº§ç¯å¢ƒä¸‹çš„é…ç½®æ–‡ä»¶ å°†æ‰“åŒ…åçš„æ–‡ä»¶æ·»åŠ åˆ° package.json ä¸­æŒ‡å®šçš„å­—æ®µé‡Œé¢ã€‚ package.json &#123; ... "main": "dist/webpack-numbers.js", "module": "src/index.js", // To add as standard module as per https://github.com/dherman/defense-of-dot-js/blob/master/proposal.md#typical-usage ...&#125; ç°åœ¨ä½ å¯ä»¥æŠŠå®ƒä½œä¸ºä¸€ä¸ª npm æ¨¡å—å‘å¸ƒäº†ï¼Œå¹¶ä¸”åœ¨ unpkg.com é‡Œé¢å‘ä½ çš„ç”¨æˆ·ä¼ æ’­äº†ã€‚]]></content>
      <categories>
        <category>æŠ€æœ¯</category>
      </categories>
      <tags>
        <tag>webpack</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[ã€ç¿»è¯‘å‘ã€‘webpack2 æŒ‡å—ï¼ˆä¸­ï¼‰]]></title>
    <url>%2F2017%2F01%2F18%2Fwebpack2-guide-2%2F</url>
    <content type="text"><![CDATA[åŠ¨æ€æ¨¡å—æ›¿æ¢ï¼ˆHot Module Repalcement -Reactï¼‰å°±åƒä¹‹å‰ ç†å¿µé¡µé¢ ä¸­è§£æçš„ç»†èŠ‚é‚£æ ·ï¼ŒåŠ¨æ€æ¨¡å—æ›¿æ¢ï¼ˆHMRï¼‰ä¼šåœ¨åº”ç”¨è¿è¡Œæ—¶åŠ¨æ€çš„æ›¿æ¢ã€æ·»åŠ æˆ–è€…åˆ é™¤æ¨¡å—è€Œä¸ç”¨é‡æ–°åˆ·æ–°é¡µé¢ã€‚ HMR éå¸¸æœ‰ç”¨ï¼Œå½“åº”ç”¨åªæœ‰ä¸€ä¸ªçŠ¶æ€æ ‘ï¼ˆsingle state treeï¼‰æ—¶ã€‚ ä¸‹é¢ä»‹ç»çš„æ–¹æ³•æè¿°ä¸­ä½¿ç”¨äº† Babel å’Œ React ,ä½†è¿™å¹¶ä¸æ˜¯ä½¿ç”¨ HRM æ‰€å¿…é¡»çš„å·¥å…·ã€‚ é¡¹ç›®é…ç½®è¿™é‡Œä¼šæŒ‡å¯¼ä½ å¦‚ä½•ç”¨ Babelï¼Œ React å’Œ PostCss ä¸€èµ·ä½¿ç”¨ HMR å»æ¼”ç¤ºä¸€ä¸ªé¡¹ç›®ã€‚ä¸ºäº†èƒ½å¤Ÿè·Ÿç€ä¸‹é¢èµ°ä¸‹å»ï¼Œéœ€è¦æŠŠè¿™äº›ä¾èµ–æ·»åŠ åˆ° package.json ä¸­å»ã€‚ ä¸ºäº†ä½¿ç”¨ HMRï¼Œä½ éœ€è¦å¦‚ä¸‹è¿™äº›ä¾èµ–ï¼š npm install --save-dev babel@6.5.2 babel-core@6.13.2 babel-loader@6.2.4 babel-preset-es2015@6.13.2 babel-preset-react@6.11.1 babel-preset-stage-2@6.13.0 css-loader@0.23.1 postcss-loader@0.9.1 react-hot-loader@3.0.0-beta.6 style-loader@0.13.1 webpack@2.1.0-beta.25 webpack-dev-server@2.1.0-beta.0 åŒæ—¶ï¼Œä¸ºäº†è¾¾åˆ°æˆ‘ä»¬æ¼”ç¤ºçš„ç›®çš„ï¼Œè¿˜éœ€è¦ï¼š npm install --save react@15.3.0 react-dom@15.3.0 Babel Config.babelrc æ–‡ä»¶åº”è¯¥å¦‚ä¸‹ï¼š &#123; "presets": [ ["es2015", &#123;"modules": false&#125;], // webpack understands the native import syntax, and uses it for tree shaking "stage-2", // Specifies what level of language features to activate. // Stage 2 is "draft", 4 is finished, 0 is strawman. // See https://tc39.github.io/process-document/ "react" // Transpile React components to JavaScript ], "plugins": [ "react-hot-loader/babel" // Enables React code to work with HMR. ]&#125; Webpack Config const &#123; resolve &#125; = require('path');const webpack = require('webpack');module.exports = &#123; entry: [ 'react-hot-loader/patch', // activate HMR for React 'webpack-dev-server/client?http://localhost:8080', // bundle the client for webpack-dev-server // and connect to the provided endpoint 'webpack/hot/only-dev-server', // bundle the client for hot reloading // only- means to only hot reload for successful updates './index.js' // the entry point of our app ], output: &#123; filename: 'bundle.js', // the output bundle path: resolve(__dirname, 'dist'), publicPath: '/' // necessary for HMR to know where to load the hot update chunks &#125;, context: resolve(__dirname, 'src'), devtool: 'inline-source-map', devServer: &#123; hot: true, // enable HMR on the server contentBase: resolve(__dirname, 'dist'), // match the output path publicPath: '/' // match the output `publicPath` &#125;, module: &#123; rules: [ &#123; test: /\.js$/, use: [ 'babel-loader', ], exclude: /node_modules/ &#125;, &#123; test: /\.css$/, use: [ 'style-loader', 'css-loader?modules', 'postcss-loader', ], &#125;, ], &#125;, plugins: [ new webpack.HotModuleReplacementPlugin(), // enable HMR globally new webpack.NamedModulesPlugin(), // prints more readable module names in the browser console on HMR updates ],&#125;; ä¸Šé¢æœ‰å¾ˆå¤šé…ç½®ï¼Œä½†ä¸æ˜¯æ‰€æœ‰éƒ½å’Œ HMR æœ‰å…³ã€‚å¯ä»¥é€šè¿‡æŸ¥é˜… webpack-dev-server options å’Œconcept pages æ¥åŠ æ·±ç†è§£ã€‚ æˆ‘ä»¬åŸºç¡€è®¾æƒ³æ˜¯è¿™æ ·çš„ï¼Œä½ çš„ JavaScript å…¥å£æ–‡ä»¶åœ¨ ./src/index.js ä¸”ä½ ä½¿ç”¨ CSS Module æ¥ç¼–å†™æ ·å¼æ–‡ä»¶ã€‚ é…ç½®æ–‡ä»¶ä¸­éœ€è¦é‡ç‚¹å…³æ³¨çš„æ˜¯ devServer å’Œ entry key. HotModueReplacementPlugin åŒæ ·éœ€è¦è¢«åŒ…å«åœ¨ plugins key ä¸­ã€‚ ä¸ºäº†è¾¾åˆ°ç›®çš„ï¼Œæˆ‘ä»¬å¼•å…¥äº†ä¸¤ä¸ªæ¨¡å—ï¼š react-hot-loader æ·»åŠ åˆ°äº†å…¥å£ä¸­ï¼Œ æ˜¯ä¸ºäº†èƒ½å¤Ÿä½¿ React æ”¯æŒ HMR ä¸ºäº†æ›´å¥½çš„ç†è§£ HMR æ¯æ¬¡æ›´æ–°çš„æ—¶å€™åšäº†å“ªäº›äº‹æƒ…ï¼Œæˆ‘ä»¬æ·»åŠ äº† NamedModulePlugin Code// ./src/index.jsimport React from 'react';import ReactDOM from 'react-dom';import &#123; AppContainer &#125; from 'react-hot-loader';// AppContainer is a necessary wrapper component for HMRimport App from './components/App';const render = (Component) =&gt; &#123; ReactDOM.render( &lt;AppContainer&gt; &lt;Component/&gt; &lt;/AppContainer&gt;, document.getElementById('root') );&#125;;render(App);// Hot Module Replacement APIif (module.hot) &#123; module.hot.accept('./components/App', () =&gt; &#123; const NewApp = require('./components/App').default render(NewApp) &#125;);&#125; // ./src/components/App.jsimport React from 'react';import styles from './App.css';const App = () =&gt; ( &lt;div className=&#123;styles.app&#125;&gt; &lt;h2&gt;Hello, &lt;/h2&gt; &lt;/div&gt;);export default App; .app &#123; text-size-adjust: none; font-family: helvetica, arial, sans-serif; line-height: 200%; padding: 6px 20px 30px;&#125; ä¸€ä¸ªéœ€è¦ç‰¹åˆ«æ³¨æ„çš„æ˜¯ module çš„å¼•ç”¨ï¼š Webpack ä¼šæš´éœ²å‡º module.hot ç»™æˆ‘ä»¬çš„ä»£ç ï¼Œå½“æˆ‘ä»¬è®¾ç½® devServer: { hot: true } æ—¶ï¼› è¿™æ ·æˆ‘ä»¬å¯ä»¥ä½¿ç”¨ module.hot æ¥ç»™ç‰¹å®šçš„èµ„æºå¼ƒç”¨ HMR ï¼ˆè¿™é‡Œæ˜¯ App.jsï¼‰. è¿™é‡Œæœ‰ä¸€ä¸ªéå¸¸é‡è¦çš„ API module.hot.accept ,ç”¨æ¥å†³å®šå¦‚ä½•å¤„ç†è¿™äº›ç‰¹å®šçš„ä¾èµ–ã€‚ éœ€è¦æ³¨æ„çš„æ˜¯ï¼Œwebpack2 å†…å»ºæ”¯æŒ ES2015 æ¨¡å—è¯­æ³•ï¼Œä½ ä¸éœ€è¦åœ¨ module.hot.accept ä¸­é‡æ–°å¼•ç”¨è·Ÿç»„ä»¶ã€‚ä¸ºäº†è¾¾åˆ°è¿™ä¸ªç›®çš„ï¼Œéœ€è¦åœ¨ .babelrc é…ç½® Babel ES2015 çš„é¢„å…ˆè®¾ç½®ï¼š ["es2015", &#123;"modules": false&#125;] å°±åƒæˆ‘ä»¬åœ¨ä¹‹å‰ Babel Config ä¸­é…ç½®çš„é‚£æ ·ã€‚éœ€è¦æ³¨æ„ï¼Œç¦ç”¨ Babel çš„æ¨¡å—åŠŸèƒ½ ä¸ä»…ä»…æ˜¯ä¸ºäº†å¯ç”¨ HMRã€‚å¦‚æœä½ ä¸å…³æ‰è¿™ä¸ªé…ç½®ï¼Œé‚£ä¹ˆä½ ä¼šç¢°åˆ°éœ€è¦é—®é¢˜ã€‚ å¦‚æœä½ åœ¨ webpack2 çš„é…ç½®æ–‡ä»¶ä¸­ä½¿ç”¨ ES6 æ¨¡å—ï¼Œå¹¶ä¸”ä½ æŒ‰ç…§ #3 ä¿®æ”¹äº† .babelrcï¼Œé‚£ä¹ˆä½ éœ€è¦ä½¿ç”¨ require è¯­æ³•æ¥åˆ›å»ºä¸¤ä¸ª .babelrc æ–‡ä»¶ï¼š ä¸€ä¸ªæ”¾åœ¨æ ¹ç›®å½•ä¸‹é¢å¹¶é…ç½®ä¸º &quot;presets: [&quot;es2015&quot;]&quot; ä¸€ä¸ªæ”¾åœ¨ webpack è¦ç¼–è¯‘çš„æ–‡ä»¶å¤¹ä¸‹ï¼Œæ¯”å¦‚åœ¨è¿™ä¸ªä¾‹å­ä¸­ï¼Œå°±æ˜¯ src/æ‰€ä»¥åœ¨è¿™ä¸ªæ¡ˆä¾‹ä¸­ï¼Œmodule.hot.accept ä¼šæ‰§è¡Œ render æ–¹æ³•æ— è®º src/compoents/App.js æˆ–è€…å…¶å®ƒçš„ä¾èµ–æ–‡ä»¶å˜åŒ–çš„æ—¶å€™ â€”â€”è¿™æ„å‘³ç€å½“ App.css è¢«å¼•å…¥åˆ° App.js ä¸­ä»¥åï¼Œå³ä½¿æ˜¯ App.css è¢«ä¿®æ”¹ï¼Œrender æ–¹æ³•åŒæ ·ä¼šè¢«æ‰§è¡Œã€‚ Index.htmlå…¥å£é¡µé¢éœ€è¦è¢«æ”¾åœ¨é¡µé¢ dist ä¸‹é¢ï¼Œwebpack-dev-server çš„è¿è¡Œéœ€è¦è¿™ä¸ªæ–‡ä»¶ã€‚ &lt;!DOCTYPE html&gt;&lt;html lang="en"&gt;&lt;head&gt; &lt;meta charset="UTF-8"&gt; &lt;title&gt;Example Index&lt;/title&gt;&lt;/head&gt;&lt;body&gt;&lt;div id="root"&gt;&lt;/div&gt;&lt;script src="bundle.js"&gt;&lt;/script&gt;&lt;/body&gt;&lt;/html&gt; Package.jsonæœ€åï¼Œæˆ‘ä»¬éœ€è¦å¯åŠ¨ webpack-dev-server æ¥æ‰“åŒ…æˆ‘ä»¬çš„ä»£ç å¹¶ä¸”çœ‹çœ‹ HMR æ˜¯å¦‚ä½•å·¥ä½œçš„ã€‚æˆ‘ä»¬å¯ä»¥ä½¿ç”¨å¦‚ä¸‹çš„ package.json å…¥å£ï¼š &#123; "scripts" : &#123; "start" : "webpack-dev-server" &#125;&#125; æ‰§è¡Œ npm start, æ‰“å¼€æµè§ˆå™¨è¾“å…¥ http://localhost:8080, åº”è¯¥å¯ä»¥çœ‹åˆ°ä¸‹é¢è¿™äº›é¡¹å±•ç¤ºåœ¨ console.logä¸­ï¼š dev-server.js:49[HMR] Waiting for update signal from WDSâ€¦only-dev-server.js:74[HMR] Waiting for update signal from WDSâ€¦client?c7c8:24 [WDS] Hot Module Replacement enabled. ç„¶åç¼–è¾‘å¹¶ä¸”ä¿®æ”¹ App.js æ–‡ä»¶ï¼Œä½ ä¼šåœ¨ console.log ä¸­çœ‹åˆ°ç±»ä¼¼å¦‚ä¸‹çš„æ—¥å¿—ï¼š [WDS] App updated. Recompilingâ€¦client?c7c8:91 [WDS] App hot updateâ€¦dev-server.js:45 [HMR] Checking for updates on the serverâ€¦log-apply-result.js:20 [HMR] Updated modules:log-apply-result.js:22 [HMR] - ./components/App.jsdev-server.js:27 [HMR] App is up to date. æ³¨æ„ HMR æŒ‡å‡ºäº†æ›´æ–°æ¨¡å—çš„è·¯å¾„ã€‚è¿™æ˜¯å› ä¸ºæˆ‘ä»¬ä½¿ç”¨äº† NamedModulesPlugin. å¼€å‘ç¯å¢ƒï¼ˆDevelopmentï¼‰è¿™ä¸ªç« èŠ‚ä»‹ç»åœ¨å¼€å‘è¿‡ç¨‹ä¸­å¯ä»¥ä½¿ç”¨çš„ä¸€äº›å·¥å…·ã€‚ éœ€è¦æ³¨æ„ï¼Œä¸èƒ½åœ¨ç”Ÿäº§ç¯å¢ƒä½¿ç”¨ Source Mapå½“ JS å‘ç”Ÿå¼‚å¸¸çš„æ—¶å€™ï¼Œæˆ‘ä»¬éœ€è¦æŒ‡å¯¼æ˜¯å“ªä¸€ä¸ªæ–‡ä»¶çš„å“ªä¸€è¡Œå‡ºé”™äº†ã€‚ä½†æ˜¯å½“æ–‡ä»¶éƒ½è¢« webpack æ‰“åŒ…ä»¥åï¼Œæ‰¾é—®é¢˜ä¼šå˜å¾—å¾ˆéº»çƒ¦ã€‚Source Map å°±æ˜¯ä¸ºäº†è§£å†³è¿™ä¸ªé—®é¢˜çš„ã€‚å®ƒæœ‰å¾ˆå¤šä¸åŒçš„é€‰é¡¹ï¼Œæ¯ä¸€ç§éƒ½æœ‰çš„å¥½å¤„å’Œä¸è¶³ã€‚åœ¨ä¸€å¼€å§‹ï¼Œæˆ‘ä»¬ä½¿ç”¨ï¼š devtool: "cheap-eval-source-map" é€‰æ‹©ä¸€ä¸ªå·¥å…·ï¼ˆChoosing a Toolï¼‰Webpack å¯è¢«ç”¨äºç›‘è§†æ¨¡å¼ï¼ˆwatch modeï¼‰ã€‚è¿™ç§æ¨¡å¼ä¸‹ï¼Œ webpack ä¼šç›‘è§†ä½ çš„æ–‡ä»¶ï¼Œå½“å®ƒä»¬æœ‰å˜åŠ¨çš„æ—¶å€™å°±ä¼šé‡ç¼–è¯‘ã€‚Webpack-dev-server æä¾›äº†ä¸€ä¸ªå¾ˆæ–¹ä¾¿ä½¿ç”¨çš„å¼€å‘ç¯å¢ƒçš„æœåŠ¡ï¼Œå¹¶ä¸”æ”¯æŒè‡ªåŠ¨åˆ·æ–°åŠŸèƒ½ã€‚å¦‚æœä½ å·²ç»æœ‰äº†ä¸€ä¸ªå¼€å‘ç¯å¢ƒçš„æœåŠ¡ï¼Œå¹¶ä¸”å¸Œæœ›èƒ½å¤Ÿæ‹¥æœ‰æ›´å¥½çš„é€‚åº”æ€§ï¼Œé‚£ä¹ˆ webpack-dev-middleware å¯ä»¥è¢«ç”¨ä½œä¸€ä¸ªä¸­é—´ä»¶æ¥è¾¾åˆ°è¿™ä¸ªç›®çš„ã€‚ Webpack-dev-server å’Œ webpack-dev-middleware å®åœ¨å†…å­˜ä¸­è¿›è¡Œç¼–è¯‘çš„ï¼Œè¿™æ„å‘³ç€æ‰“åŒ…åçš„ä»£ç åŒ…å¹¶ä¸ä¼šä¿å­˜åˆ°æœ¬åœ°ç£ç›˜ä¸­ã€‚è¿™å›ä½¿æ‰“åŒ…å˜å¾—å¾ˆå¿«ï¼ŒåŒæ—¶ä¸ä¼šäº§ç”Ÿå¾ˆå¤šä¸´æ—¶æ–‡ä»¶æ¥æ±¡æŸ“ä½ çš„æœ¬åœ°æ–‡ä»¶ç³»ç»Ÿã€‚ å¤§å¤šæ•°æƒ…å†µä¸‹ï¼Œä½ éƒ½ä¼šæƒ³è¦å»ä½¿ç”¨ webpack-dev-serverï¼Œ å› ä¸ºå®ƒä½¿ç”¨èµ·æ¥å¾ˆæ–¹ä¾¿ï¼Œè€Œä¸”æä¾›äº†è®¸å¤šå¼€ç®±å³ç”¨çš„åŠŸèƒ½ã€‚ Webpack ç›‘è§†æ¨¡å¼ï¼ˆwtach modeï¼‰Webpack çš„ç›‘è§†æ¨¡å¼ä¼šæ£€æµ‹æ–‡ä»¶çš„å˜åŠ¨ã€‚åªè¦å˜åŠ¨è¢«æ£€æµ‹åˆ°ï¼Œå®ƒå°±ä¼šé‡æ–°è¿›è¡Œä¸€æ¬¡ç¼–è¯‘ã€‚æˆ‘ä»¬å¸Œæœ›å®ƒçš„ç¼–è¯‘è¿‡ç¨‹èƒ½æœ‰ä¸€ä¸ªå¾ˆå¥½çš„è¿›åº¦å±•ç¤ºã€‚é‚£ä¹ˆå°±æ‰§è¡Œä»¥ä¸‹å‘½ä»¤ï¼š webpack --progress --watch éšä¾¿ä¿®æ”¹ä¸€ä¸ªæ–‡ä»¶ç„¶åä¿å­˜ï¼Œä½ å°±ä¼šçœ‹åˆ°é‡æ–°ç¼–è¯‘çš„è¿‡ç¨‹ã€‚ ç›‘è§†æ¨¡å¼æ²¡æœ‰è€ƒè™‘ä»»ä½•å’ŒæœåŠ¡æœ‰å…³çš„é—®é¢˜ï¼Œæ‰€ä»¥ä½ éœ€è¦è‡ªå·±æä¾›ä¸€ä¸ªæœåŠ¡ã€‚ä¸€ä¸ªç®€å•çš„æœåŠ¡å°±æ˜¯ [server](https://github.com/tj/serve). å½“å®‰è£…å¥½åï¼ˆnpm i server -gï¼‰ï¼Œåœ¨ä½ æ‰“åŒ…åçš„æ–‡ä»¶ç›®å½•ä¸‹è¿è¡Œï¼š server å½“æ¯æ¬¡é‡æ–°ç¼–è¯‘åï¼Œä½ éƒ½éœ€è¦æ‰‹åŠ¨çš„å»åˆ·æ–°æµè§ˆå™¨ã€‚ webpack-dev-serverwebpack-dev-server æä¾›ä¸€ä¸ªæ”¯æŒè‡ªåŠ¨åˆ·æ–°çš„æœåŠ¡ã€‚ é¦–å…ˆï¼Œç¡®è®¤ä½  index.html é¡µé¢é‡Œé¢å·²ç»å¼•ç”¨äº†ä½ çš„ä»£ç åŒ…ã€‚æˆ‘ä»¬å…ˆå‡è®¾ output.filename è®¾ç½®ä¸º bundle.js: &lt;script src="/bundle.js"&gt;&lt;/srcipt&gt; ä» npm å®‰è£… webpack-dev-serverï¼š npm install webpack-dev-server --save-dev ç„¶åå°±å¯ä»¥æ‰§è¡Œ webpack-dev-server çš„å‘½ä»¤äº†ï¼š webpack-dev-server --open ä¸Šé¢çš„å‘½ä»¤ä¼šè‡ªåŠ¨æ‰“å¼€ä½ çš„æµè§ˆå™¨å¹¶æŒ‡å®šåˆ° http://localhost:8080. ä¿®æ”¹ä¸€ä¸‹ä½ çš„æ–‡ä»¶å¹¶ä¿å­˜ã€‚ä½ ä¼šå‘ç°ä»£ç è¢«é‡æ–°æ‰“åŒ…äº†ï¼Œå½“æ‰“åŒ…å®Œæˆçš„æ—¶å€™ï¼Œé¡µé¢ä¼šè‡ªåŠ¨åˆ·æ–°ã€‚å¦‚æœæ²¡æœ‰å¦‚æ„¿è¾¾åˆ°æ•ˆæœï¼Œé‚£ä¹ˆä½ éœ€è¦è°ƒæ•´ watchOptions(https://webpack.js.org/configuration/dev-server#devserver-watchoptions-). ç°åœ¨ä½ æœ‰äº†ä¸€ä¸ªå¯ä»¥è‡ªåŠ¨åˆ·æ–°çš„æœåŠ¡ï¼Œæ¥ä¸‹æ¥æˆ‘ä»¬çœ‹å¦‚ä½•å¯ç”¨åŠ¨æ€æ¨¡å—æ›¿æ¢ï¼ˆHot Module Replacementï¼‰ã€‚è¿™æ˜¯ä¸€ä¸ªå¯ä»¥æä¾›ä¸åˆ·æ–°é¡µé¢æ›¿æ¢æ¨¡å—çš„æ¥å£ï¼ŒæŸ¥çœ‹è¿™é‡Œäº†è§£æ›´å¤š ã€‚ webpack-dev-server å¯ä»¥åšå¾ˆå¤šçš„äº‹æƒ…ï¼Œæ¯”å¦‚ä»£ç†è¯·æ±‚åˆ°ä½ çš„åç«¯æœåŠ¡ã€‚æƒ³äº†è§£æ›´å¤šçš„é…ç½®é¡¹ï¼Œé‚£å°±æŸ¥çœ‹ devServer çš„æ–‡æ¡£å§ã€‚ webpack-dev-middlewarewebpack-dev-middleware é€‚ç”¨äºåŸºäºä¸­é—´ä»¶çš„é“¾æ¥å †æ ˆï¼ˆå¥½éš¾ç¿»è¯‘ï¼‰ã€‚å½“ä½ å·²ç»æœ‰ä¸€ä¸ª Node.js æœåŠ¡æˆ–è€…ä½ æƒ³è¦å®Œå…¨çš„æ§åˆ¶æœåŠ¡çš„æ—¶å€™ä¼šå¾ˆæœ‰ç”¨ã€‚ è¿™ä¸ªä¸­é—´ä»¶ä¼šè®©æ–‡ä»¶ç¼–è¯‘åœ¨å†…å­˜ä¸­è¿›è¡Œã€‚å½“ä¸€ä¸ªç¼–è¯‘åœ¨è¿›è¡Œè¿‡ç¨‹ä¸­ï¼Œå®ƒä¼šå»¶è¿Ÿä¸€ä¸ªæ–‡ä»¶è¯·æ±‚ï¼Œç›´åˆ°å®ƒç¼–è¯‘å®Œæˆã€‚ é¦–å…ˆä» npm ä¸Šå®‰è£…ï¼š npm install express webpack-dev-server --save-dev ä½œä¸ºä¸€ä¸ªä¾‹å­ï¼Œæˆ‘ä»¬å¯ä»¥è¿™æ ·ä½¿ç”¨ä¸­é—´ä»¶ï¼š var express = require("express");var webpackDevMiddleware = require("webpack-dev-middleware");var webpack = require("webpack");var webpackConfig = require("./webpack.config");var app = express();var compiler = webpack(webpackConfig);app.use(webpackDevMiddleware(compiler, &#123; publicPath: "/" // Same as `output.publicPath` in most cases.&#125;));app.listen(3000, function () &#123; console.log("Listening on port 3000!");&#125;); æ ¹æ®ä½ åœ¨ output.publicPath å’Œ output.filename ä¸­çš„é…ç½®ï¼Œä½ æ‰“åŒ…çš„ä»£ç åº”è¯¥å¯ä»¥é€šè¿‡ http://localhost:3000/bundle.js è®¿é—®ã€‚ é»˜è®¤æƒ…å†µä¸‹ä½¿ç”¨çš„æ˜¯ç›‘è§†æ¨¡å¼ã€‚å®ƒè¿˜æ”¯æŒæ‡’æ¨¡å¼ï¼ˆlazy modeï¼‰ï¼Œåªæœ‰åœ¨æœ‰è¯·æ±‚è¿›æ¥çš„æ—¶å€™æ‰ä¼šé‡æ–°ç¼–è¯‘ã€‚ é…ç½®å¦‚ä¸‹ï¼š app.use(webpackDevMiddleware(compiler, &#123; lazy: true, filename: "bundle.js" // Same as `output.filename` in most cases.&#125;)); è¿˜æœ‰è®¸å¤šå…¶å®ƒæœ‰ç”¨çš„é€‰é¡¹ï¼Œè¯¦ç»†å†…å®¹å¯ä»¥æŸ¥çœ‹ æ–‡æ¡£. ä¸ºç”Ÿäº§ç¯å¢ƒæ„å»ºï¼ˆBuilding for Productionï¼‰æœ¬ç« ä»‹ç»å¦‚ä½•ç”¨ webpack æ¥åšç”Ÿäº§ç¯å¢ƒçš„æ„å»ºã€‚ ä¸€æ¡è‡ªåŠ¨åŒ–çš„æ–¹å¼æ‰§è¡Œ webpack -p(ç­‰åŒäº webpack --optimize--minimize --define process.env.NODE_ENV=&quot;production&quot;).è¿™ä¼šæ‰§è¡Œä»¥ä¸‹å‡ ä¸ªæ­¥éª¤ï¼š ä½¿ç”¨ UglifyJsPlugin å‹ç¼©æ–‡ä»¶ æ‰§è¡Œäº† LoaderOptionsPlugin, æŸ¥çœ‹æ–‡æ¡£ è®¾ç½® Node çš„ç¯å¢ƒå˜é‡ æºç å‹ç¼©webpack ä½¿ç”¨ UglifyJsPlugin æ¥å‹ç¼©æºç ï¼Œé€šè¿‡æ‰§è¡Œ UglifyJs æ¥è¾¾åˆ°å‹ç¼©è¾“å‡ºä»£ç çš„ç›®çš„ã€‚è¿™ä¸ªæ’ä»¶æ”¯æŒæ‰€æœ‰ UgilfyJs çš„åŠŸèƒ½ã€‚åœ¨å‘½ä»¤è¡Œé‡Œè¾“å…¥ --optimize-minimize ï¼Œé‚£ä¹ˆç›¸å½“ä¸åœ¨é…ç½®æ–‡ä»¶ä¸­æ·»åŠ äº†ä»¥ä¸‹é…ç½®ï¼š // webpack.config.jsconst webpack = require('webpack');module.exports = &#123; /*...*/ plugins:[ new webpack.optimize.UglifyJsPlugin(&#123; sourceMap: options.devtool &amp;&amp; (options.devtool.indexOf("sourcemap") &gt;= 0 || options.devtool.indexOf("source-map") &gt;= 0) &#125;) ]&#125;; è¿™æ ·ï¼ŒåŸºäº devtools option ï¼Œåœ¨æ‰“åŒ…çš„æ—¶å€™ä¼šç”Ÿæˆ Source Map. èµ„æºæ˜ å°„ï¼ˆSource Mapï¼‰æˆ‘ä»¬æ¨èåœ¨å¼€å‘ç¯å¢ƒå¯ç”¨ Source Map. å› ä¸ºåœ¨ debug æˆ–è€…æµ‹è¯•çš„æ—¶å€™å¾ˆæœ‰ç”¨ã€‚Webpack å¯ä»¥ç”ŸæˆåŒ…å«åœ¨ä»£ç åŒ…æˆ–è€…åˆ†ç¦»æ–‡ä»¶ä¸­çš„ inline Source Map. åœ¨é…ç½®æ–‡ä»¶ä¸­ï¼Œé€šè¿‡ä¿®æ”¹ devtools é…ç½®æ¥è®¾ç½® Source Map ç±»å‹ã€‚ç›®å‰æˆ‘ä»¬æ”¯æŒä¸ƒç§ä¸åŒç±»å‹çš„ Source Map. å¯ä»¥åœ¨å…·ä½“æ–‡æ¡£ä¸­æ‰¾åˆ°æ›´åŠ è¯¦ç»†çš„ä»‹ç»ã€‚ ä¸€ä¸ªæ¯”è¾ƒå¥½å¥½çš„é€‰æ‹©æ˜¯ä½¿ç”¨ cheap-module-source-mapï¼Œå¯ä»¥å°†æºæ˜ å°„ç®€åŒ–ä¸ºæ¯è¡Œæ˜ å°„(simplifies the Source Maps to a single mapping per line)ã€‚ Node ç¯å¢ƒå˜é‡æ‰§è¡Œ webpack -p( --define process.env.NODE_EMV=&quot;production&quot;) ä¼šé€šè¿‡å¦‚ä¸‹çš„é…ç½®è°ƒç”¨ DefinePlugin: // webpack.config.jsconst webpack = require('webpack');module.exports = &#123; /*...*/ plugins:[ new webpack.DefinePlugin(&#123; 'process.env.NODE_ENV': JSON.stringify('production') &#125;) ]&#125;; DefindPlugin ä¼šåœ¨æºç ä¸­è¿›è¡ŒæŸ¥æ‰¾å’Œæ›¿æ¢çš„å·¥ä½œã€‚æ‰€æœ‰æ‰¾åˆ°çš„ process.env.NODE_ENV éƒ½ä¼šè¢«æ›¿æ¢ä¸º production. è¿™æ ·ï¼Œç±»ä¼¼ä¸ if(process.env.NODE_ENV !==&#39;procution&#39;) console.log(â€¦) è¿™æ ·çš„ä»£ç å°±ä¼šè¢« UnglifyJs è®¤ä¸ºç­‰åŒäº if(false) console.log(â€¦) . ä¸€ä¸ªæ‰‹åŠ¨çš„æ–¹å¼ï¼šä¸º webpack é…ç½®ä¸åŒç¯å¢ƒå˜é‡ä¸‹çš„é…ç½®æ–‡ä»¶ä¸€ä¸ªæœ€ç®€å•çš„æ–¹å¼æ¥ä¸º webpack é…ç½®ä¸åŒç¯å¢ƒå˜é‡ä¸‹çš„é…ç½®æ–‡ä»¶çš„æ–¹æ³•å°±æ˜¯å»ºç«‹å¤šä¸ªé…ç½®æ–‡ä»¶ã€‚æ¯”å¦‚ï¼š dev.js // æ­¤å¤„å®˜ç½‘æ–‡æ¡£æœ‰è¯­æ³•é”™è¯¯ï¼Œæˆ‘æ”¹äº†ä¸€ä¸‹module.exports = function (env) &#123; return &#123; devtool: 'cheap-module-source-map', output: &#123; path: path.join(__dirname, '/../dist/assets'), filename: '[name].bundle.js', publicPath: publicPath, sourceMapFilename: '[name].map' &#125;, devServer: &#123; port: 7777, host: 'localhost', historyApiFallback: true, noInfo: false, stats: 'minimal', publicPath: publicPath &#125; &#125;&#125; prod.jsmodule.exports = function (env) &#123; return &#123; output: &#123; path: path.join(__dirname, '/../dist/assets'), filename: '[name].bundle.js', publicPath: publicPath, sourceMapFilename: '[name].map' &#125;, plugins: [ new webpack.LoaderOptionsPlugin(&#123; minimize: true, debug: false &#125;), new UglifyJsPlugin(&#123; beautify: false, mangle: &#123; screw_ie8: true, keep_fnames: true &#125;, compress: &#123; screw_ie8: true &#125;, comments: false &#125;) ] &#125;&#125; ç„¶åæŠŠæˆ‘ä»¬çš„ webpack.config.js çš„å†…å®¹æ”¹æˆä¸‹é¢è¿™æ ·ï¼š function buildConfig(env) &#123; return require('./config/' + env + '.js')(&#123; env: env &#125;)&#125;module.exports = buildConfig(env); æœ€åï¼Œåœ¨ package.json ä¸­æ·»åŠ å¦‚ä¸‹å‘½ä»¤ï¼š "build:dev": "webpack --env=dev --progress --profile --colors", "build:dist": "webpack --env=prod --progress --profile --colors", å¯ä»¥çœ‹åˆ°ï¼Œæˆ‘ä»¬æŠŠç¯å¢ƒå˜é‡ä¼ ç»™äº† webpack.config.js æ–‡ä»¶ã€‚ä»è¿™é‡Œæˆ‘ä»¬ä½¿ç”¨ä¸€ä¸ªç®€å•çš„æ–¹å¼é€šè¿‡ä¼ é€’ç¯å¢ƒå˜é‡æ¥å†³å®šä½¿ç”¨æ­£ç¡®çš„é…ç½®æ–‡ä»¶ã€‚ ä¸€ä¸ªæ›´åŠ é«˜çº§çš„é€”å¾„æ˜¯æˆ‘ä»¬æœ‰ä¸€ä¸ªåŸºç¡€é…ç½®æ–‡ä»¶ï¼Œé‡Œé¢æœ‰æ‰€æœ‰å…±é€šçš„åŠŸèƒ½ï¼Œç„¶ååœ¨ä¸åŒç¯å¢ƒå˜é‡ä¸‹çš„ä¸åŒåŠŸèƒ½é€šè¿‡æŒ‡å®šç‰¹å®šçš„æ–‡ä»¶ï¼Œç„¶åä½¿ç”¨ webpack-merge æ¥åˆå¹¶æˆä¸€ä¸ªå®Œæ•´çš„é…ç½®ã€‚è¿™æ ·å¯ä»¥é¿å…å†™å¾ˆå¤šé‡å¤çš„ä»£ç ã€‚æ¯”å¦‚ï¼Œç±»ä¼¼ä¸è§£æ js,ts,png,jpeg ç­‰éƒ½æ˜¯å…±é€šçš„åŠŸèƒ½ï¼Œéœ€è¦æ”¾åœ¨åŸºç¡€é…ç½®æ–‡ä»¶é‡Œé¢ï¼š base.js module.exports = function() &#123; return &#123; entry: &#123; 'polyfills': './src/polyfills.ts', 'vendor': './src/vendor.ts', 'main': './src/main.ts' &#125;, output: &#123; path: path.join(__dirname, '/../dist/assets'), filename: '[name].bundle.js', publicPath: publicPath, sourceMapFilename: '[name].map' &#125;, resolve: &#123; extensions: ['', '.ts', '.js', '.json'], modules: [path.join(__dirname, 'src'), 'node_modules'] &#125;, module: &#123; loaders: [&#123; test: /\.ts$/, loaders: [ 'awesome-typescript-loader', 'angular2-template-loader' ], exclude: [/\.(spec|e2e)\.ts$/] &#125;, &#123; test: /\.css$/, loaders: ['to-string-loader', 'css-loader'] &#125;, &#123; test: /\.(jpg|png|gif)$/, loader: 'file' &#125;, &#123; test: /\.(woff|woff2|eot|ttf|svg)$/, loader: 'url-loader?limit=100000' &#125;], &#125;, plugins: [ new ForkCheckerPlugin(), new webpack.optimize.CommonsChunkPlugin(&#123; name: ['polyfills', 'vendor'].reverse() &#125;), new HtmlWebpackPlugin(&#123; template: 'src/index.html', chunksSortMode: 'dependency' &#125;) ], &#125;;&#125; ç„¶åä½¿ç”¨ webpack-merge æ¥åˆå¹¶ç‰¹å®šç¯å¢ƒå˜é‡ä¸‹æŒ‡å®šçš„é…ç½®æ–‡ä»¶ã€‚æ¥çœ‹ä¸€ä¸ªåˆå¹¶ç”Ÿäº§ç¯å¢ƒä¸‹ç‰¹å®šé…ç½®çš„ä¾‹å­ï¼ˆå’Œä¸Šé¢ prod.js å¯¹æ¯”ä»¥ä¸‹ï¼‰ï¼š prod.js(updated) const webpackMerge = require('webpack-merge');const commonConfig = require('./base.js');module.exports = function(env) &#123; return webpackMerge(commonConfig(), &#123; plugins: [ new webpack.LoaderOptionsPlugin(&#123; minimize: true, debug: false &#125;), new webpack.DefinePlugin(&#123; 'process.env': &#123; 'NODE_ENV': JSON.stringify('prod') &#125; &#125;), new webpack.optimize.UglifyJsPlugin(&#123; beautify: false, mangle: &#123; screw_ie8: true, keep_fnames: true &#125;, compress: &#123; screw_ie8: true &#125;, comments: false &#125;) ] &#125;)&#125; å¯ä»¥æ³¨æ„åˆ°ï¼Œåœ¨ â€˜prod.jsâ€™ ä¸­ä¸»è¦æœ‰ä¸‰å¤„æ›´æ–°ï¼Œåˆ†åˆ«æ˜¯ï¼š â€¢ é€šè¿‡ &apos;webpack-meger&apos; åˆå¹¶äº† `base.js` â€¢ æŠŠ `output` å±æ€§ç§»åˆ°äº† `base.js` ä¸­ã€‚æˆ‘ä»¬åªè¦å…³å¿ƒåœ¨ `base.js` ä¸­ä»¥å¤–çš„ä¸åŒçš„é…ç½®å°±å¯ä»¥äº† â€¢ é€šè¿‡ `DefinePlugin` æŠŠ `process.env.NODE_ENV` è®¾ç½®ä¸º `prod`. è¿™æ ·ï¼Œæ•´ä¸ªåº”ç”¨ä»£ç ä¸­çš„ `process.env.NODE_ENV` éƒ½æœ‰ä¸€ä¸ªä¸º `prod` çš„å€¼äº†ã€‚ å“ªäº›éœ€è¦åœ¨ä¸åŒçš„ç¯å¢ƒå˜é‡ä¸‹ä¿æŒä¸€è‡´éƒ½ç”±ä½ æ¥å†³å®šã€‚è¿™é‡Œåªæ˜¯é€šè¿‡ä¸€ä¸ª DEMO æ¥å…¸å‹çš„è¯´æ˜ä¸€ä¸‹å¦‚ä½•åœ¨ä¸åŒçš„ç¯å¢ƒå˜é‡ä¸‹ä¿æŒéƒ¨åˆ†é…ç½®çš„ç»Ÿä¸€ã€‚ å¯ä»¥çœ‹åˆ°ï¼Œwebpack-merge æ˜¯å¤šä¹ˆå¼ºå¤§ï¼Œå¯ä»¥è®©æˆ‘ä»¬é¿å…å†™å¾ˆå¤šé‡å¤çš„ä»£ç ï¼ˆå¤–å›½äººè¯çœŸå¤šï¼‰ã€‚ React æ‡’åŠ è½½ï¼ˆLazy Loading - Reactï¼‰é€šè¿‡ä½¿ç”¨é«˜é˜¶å‡½æ•°å¯ä»¥ä½¿ä¸€ä¸ªç»„ä»¶æ‡’åŠ è½½å®ƒçš„ä¾èµ–è€Œä¸éœ€è¦å®ƒçš„æ¶ˆè´¹è€…çŸ¥é“ï¼Œæˆ–è€…ä½¿ç”¨ä¸€ä¸ªæ¥æ”¶å‡½æ•°æˆ–è€…æ¨¡å—çš„ç»„ä»¶ï¼Œå¯ä»¥ä½¿ä¸€ä¸ªæ¶ˆè´¹è€…å¯ä»¥æ‡’åŠ è½½å®ƒçš„å­ç»„ä»¶è€Œä¸éœ€è¦å®ƒçš„å­ç»„ä»¶çŸ¥é“ã€‚ ç»„ä»¶æ‡’åŠ è½½å…ˆçœ‹ä¸€ä¸ªæ¶ˆè´¹è€…é€‰æ‹©å»æ‡’åŠ è½½ä¸€äº›ç»„ä»¶ã€‚importLazy æ˜¯ä¸€ä¸ªè¿”å› defualt å±æ€§çš„å‡½æ•°ï¼Œè¿™æ˜¯ä¸ºäº†èƒ½å’Œ Babel/ES2015 äº’é€šã€‚å¦‚æœä½ ä¸éœ€è¦ï¼Œå¯ä»¥å¿½ç•¥æ‰ importLazy æ–¹æ³•ã€‚importLazy åªæ˜¯ç®€å•çš„è¿”å›äº†é€šè¿‡ export default æš´éœ²å‡ºçš„æ¨¡å—ã€‚ &lt;LazilyLoad modules=&#123;&#123; TodoHandler: () =&gt; importLazy(import('./components/TodoHandler')), TodoMenuHandler: () =&gt; importLazy(import('./components/TodoMenuHandler')), TodoMenu: () =&gt; importLazy(import('./components/TodoMenu')),&#125;&#125;&gt; &#123;(&#123;TodoHandler, TodoMenuHandler, TodoMenu&#125;) =&gt; ( &lt;TodoHandler&gt; &lt;TodoMenuHandler&gt; &lt;TodoMenu /&gt; &lt;/TodoMenuHandler&gt; &lt;/TodoHandler&gt; )&#125;&lt;/LazilyLoad&gt; é«˜é˜¶ç»„ä»¶ï¼ˆHigher Order Componentï¼‰ä½œä¸ºä¸€ä¸ªç»„ä»¶ï¼Œä½ å¯ä»¥ç¡®ä¿æ•´ä¸ªç»„ä»¶æœ¬èº«çš„ä¾èµ–æ˜¯æ‡’åŠ è½½çš„ã€‚å½“ä¸€ä¸ªç»„ä»¶ä¾èµ–ä¸€ä¸ªéå¸¸å¤§çš„åº“æ–‡ä»¶çš„æ—¶å€™ä¼šå¾ˆæœ‰ç”¨ã€‚å‡è®¾æˆ‘ä»¬è¦å†™ä¸€ä¸ªæ”¯æŒä»£ç é«˜äº®çš„ Todo ç»„ä»¶ï¼š class Todo extends React.Component &#123; render() &#123; return ( &lt;div&gt; &#123;this.props.isCode ? &lt;Highlight&gt;&#123;content&#125;&lt;/Highlight&gt; : content&#125; &lt;/div&gt; ); &#125;&#125; æˆ‘ä»¬å¯ä»¥ç¡®ä¿åªæœ‰å½“æˆ‘ä»¬éœ€è¦ä»£ç é«˜äº®åŠŸèƒ½çš„æ—¶å€™æ‰å»åŠ è½½è¿™ä¸ªä»£ä»·é«˜æ˜‚çš„åº“æ–‡ä»¶ï¼š // Highlight.jsclass Highlight extends React.Component &#123; render() &#123; const &#123;Highlight&#125; = this.props.highlight; // highlight js is now on our props for use &#125;&#125;export LazilyLoadFactory(Highlight, &#123; highlight: () =&gt; import('highlight'),&#125;); æ³¨æ„è¿™ä¸ª Highlight ç»„ä»¶çš„æ¶ˆè´¹è€…æ˜¯å¦‚ä½•åœ¨ä¸çŸ¥æƒ…çš„æƒ…å†µä¸‹è¢«æ‡’åŠ è½½çš„ã€‚ å®Œæ•´çš„ä»£ç LazilyLoad ç»„ä»¶çš„æºç ï¼Œæš´éœ²äº†ç»„ä»¶æ¥å£å’Œé«˜é˜¶ç»„ä»¶æ¥å£ã€‚ import React from 'react';class LazilyLoad extends React.Component &#123; constructor() &#123; super(...arguments); this.state = &#123; isLoaded: false, &#125;; &#125; componentWillMount() &#123; this.load(this.props); &#125; componentDidMount() &#123; this._isMounted = true; &#125; componentWillReceiveProps(next) &#123; if (next.modules === this.props.modules) return null; this.load(next); &#125; componentWillUnmount() &#123; this._isMounted = false; &#125; load(props) &#123; this.setState(&#123; isLoaded: false, &#125;); const &#123; modules &#125; = props; const keys = Object.keys(modules); Promise.all(keys.map((key) =&gt; modules[key]())) .then((values) =&gt; (keys.reduce((agg, key, index) =&gt; &#123; agg[key] = values[index]; return agg; &#125;, &#123;&#125;))) .then((result) =&gt; &#123; if (!this._isMounted) return null; this.setState(&#123; modules: result, isLoaded: true &#125;); &#125;); &#125; render() &#123; if (!this.state.isLoaded) return null; return React.Children.only(this.props.children(this.state.modules)); &#125; &#125;LazilyLoad.propTypes = &#123; children: React.PropTypes.func.isRequired,&#125;;export const LazilyLoadFactory = (Component, modules) =&gt; &#123; return (props) =&gt; ( &lt;LazilyLoad modules=&#123;modules&#125;&gt; &#123;(mods) =&gt; &lt;Component &#123;...mods&#125; &#123;...props&#125; /&gt;&#125; &lt;/LazilyLoad&gt; );&#125;;export const importLazy = (promise) =&gt; ( promise.then((result) =&gt; result.default));export default LazilyLoad; æç¤º é€šè¿‡ä½¿ç”¨ bundle loader å¯ä»¥è¯­ä¹‰åŒ–å‘½åä»£ç å—ï¼Œä¸€æ¬¡æ¥æ™ºèƒ½çš„åŠ è½½ä¸€ç»„ä»£ç  ç¡®ä¿ä½ ä½¿ç”¨äº† babel-preset-2015, å¹¶ä¸”è®¾ç½® modules ä¸º falseï¼Œè¿™å…è®¸ webpack å»å¤„ç† modules å…¬å¼€è·¯å¾„ï¼Ÿï¼ˆPublic Pathï¼‰Webpack æä¾›äº†ä¸€ä¸ªå¾ˆé•¿æœ‰ç”¨çš„åŠŸèƒ½ï¼Œå¯ä»¥è®¾ç½®ä½ åº”ç”¨ä¸­æ‰€æœ‰èµ„æºå¼•ç”¨çš„åŸºç¡€è·¯å¾„ã€‚å®ƒè¢«ç§°ä¹‹ä¸º publicPath. ä½¿ç”¨åœºæ™¯ï¼ˆUse caseï¼‰è¿™é‡Œæœ‰ä¸€äº›çœŸå®åº”ç”¨ä¸­çš„åœºæ™¯ï¼Œé€šè¿‡è¿™ä¸ªåŠŸèƒ½æ¥è¾¾åˆ°ç›®çš„ã€‚ åœ¨æ„å»ºçš„æ—¶å€™è®¾ç½®å€¼åœ¨å¼€å‘æ¨¡å¼ä¸‹ï¼Œæˆ‘ä»¬é€šå¸¸ä¼šæŠŠ assets/ ç›®å½•æ”¾åœ¨å’Œå…¥å£é¡µåŒçº§çš„ç›®å½•ä¸‹é¢ã€‚è¿™æ ·æ²¡æœ‰é—®é¢˜ï¼Œä½†æ˜¯å‡å¦‚åœ¨ç”Ÿäº§ç¯å¢ƒä¸‹ä½ çš„é™æ€èµ„æºæ˜¯å­˜æ”¾åœ¨ CDN ä¸Šé‚£åˆè¯¥æ€ä¹ˆåŠå‘¢ï¼Ÿ å¯ä»¥å¾ˆæ–¹ä¾¿çš„é€šè¿‡ç¯å¢ƒå˜é‡æ¥è§£å†³è¿™ä¸ªé—®é¢˜ã€‚å‡è®¾æˆ‘ä»¬æœ‰ä¸€ä¸ªå˜é‡ ASSET_PATH: // è¿™é‡Œçœ‹èµ·æ¥å¥½åƒæœ‰é—®é¢˜import webpack from 'webpack';// Whatever comes as an environment variable, otherwise use rootconst ASSET_PATH = process.env.ASSET_PATH || '/';export default &#123; output: &#123; publicPath: ASSET_PATH &#125;, plugins: [ // This makes it possible for us to safely use env vars on our code new webpack.DefinePlugin(&#123; 'process.env.ASSET_PATH': JSON.stringify(ASSET_PATH) &#125;) ]&#125;; åœ¨å¼€å‘ä¸­è®¾ç½®å€¼ï¼ˆSet Value on the flyï¼‰å¦ä¸€ç§æ–¹å¼æ˜¯åœ¨å¼€å‘è¿‡ç¨‹æˆè®¾ç½® public è·¯å¾„ã€‚Webpack æš´éœ²äº†ä¸€ä¸ªå…¨å±€å˜é‡ __webpack_public_path__ æ¥è®©æˆ‘ä»¬è¾¾åˆ°è¿™ä¸ªç›®çš„ã€‚æ‰€ä»¥åœ¨ä½ çš„å…¥å£æ–‡ä»¶ä¸­ï¼Œä½ å¯ä»¥è¿™æ ·åšï¼š __webpack_publick_path__ = process.en.ASSET_PATH; å¦‚ä½•æ¥åšéƒ½å–å†³äºä½ ã€‚å½“æˆ‘ä»¬é€šè¿‡ DefinePlugin è¿›è¡Œäº†é…ç½®ä»¥åï¼Œ process.env.ASSET_PATH åœ¨ä»»ä½•åœ°æ–¹éƒ½å¯ä»¥ç›´æ¥æ‹¿æ¥ä½¿ç”¨ã€‚]]></content>
      <categories>
        <category>æŠ€æœ¯</category>
      </categories>
      <tags>
        <tag>webpack</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[ã€ç¿»è¯‘å‘ã€‘webpack2 æŒ‡å—ï¼ˆä¸Šï¼‰]]></title>
    <url>%2F2017%2F01%2F17%2Fwebpack2-guide-1%2F</url>
    <content type="text"><![CDATA[å‰ç½®å®šä¹‰Bundle ä»£ç åŒ…Chunk ä»£ç å— å®‰è£…npm install webpack â€“save-dev ä»£ç åˆ†å‰²ä»£ç åˆ†å‰²æ˜¯ webpack ä¸­æœ€å¼•äººæ³¨ç›®çš„åŠŸèƒ½ä¹‹ä¸€ã€‚å®ƒå…è®¸ä½ æŠŠä»£ç åˆ†å‰²æˆå„ç§å¯ä»¥æ ¹æ®éœ€æ±‚è½½å…¥çš„ä»£ç åŒ…ï¼Œå°±åƒä¸€ä¸ªç”¨æˆ·æµè§ˆå™¨å»åŒ¹é…è·¯ç”±ä¸€æ ·ï¼Œæˆ–è€…ä¸€ä¸ªç”¨æˆ·å‘å‡ºçš„äº‹ä»¶ã€‚è¿™å…è®¸ä½ å°çš„æ¨¡å—ï¼Œå…è®¸ä½ æ§åˆ¶èµ„æºçš„è½½å…¥ä¼˜å…ˆçº§ï¼Œå¦‚æœä½¿ç”¨å¾—å½“çš„è¯ï¼Œå¯ä»¥å¤§å¤§å½±å“ï¼ˆé™ä½ï¼‰ä½ åº”ç”¨çš„åŠ è½½æ—¶é—´ã€‚ ç¼“å­˜å’Œå¹¶è¡ŒåŠ è½½çš„èµ„æºåˆ†å‰²ç¬¬ä¸‰æ–¹ä»£ç åˆ†å‰²ä¸€ä¸ªå…¸å‹çš„åº”ç”¨ä¼šä¾èµ–å¾ˆå¤šç¬¬ä¸‰æ–¹çš„æ¡†æ¶å’Œåº“æ–‡ä»¶ã€‚ä¸åƒåº”ç”¨ä»£ç æœ¬èº«ï¼Œè¿™äº›ç¬¬ä¸‰æ–¹ä»£ç çš„å˜æ›´éå¸¸é¢‘ç¹ã€‚å¦‚æœæˆ‘ä»¬ä¿æŒè¿™äº›åº“åœ¨å®ƒæœ¬èº«çš„ä»£ç åŒ…ä¸­ï¼Œä»åº”ç”¨ä»£ç æœ¬èº«åˆ†ç¦»å‡ºæ¥ï¼Œé‚£ä¹ˆæˆ‘ä»¬å°±å¯ä»¥ä½¿ç”¨æµè§ˆå™¨çš„ç¼“å­˜ç­–ç•¥å»åœ¨ä¸€ä¸ªé•¿æ—¶é—´å†…æŠŠè¿™äº›ä»£ç ç¼“å­˜åˆ°æœ€ç»ˆç”¨æˆ·çš„æœºå™¨ä¸Šã€‚ ä¸ºäº†è¾¾åˆ°è¿™ä¸ªæ•ˆæœï¼Œç¬¬ä¸‰æ–¹ä»£ç çš„ verndor åŒ…çš„ hash éƒ¨åˆ†å¿…é¡»ä¿æŒä¸å˜ï¼Œä¸ç®¡åº”ç”¨ä»£ç å¦‚ä½•å˜åŒ–ã€‚å­¦ä¹  å¦‚ä½•é€šè¿‡ CommonsChunkPlugin æ¥åˆ†å‰² verndor/libray ä»£ç ã€‚ CSS åˆ†å‰²ä½ å¯èƒ½ä¹Ÿæƒ³æŠŠæ ·å¼æ–‡ä»¶åˆ†å‰²æˆä¸ºä¸€ä¸ªå•ç‹¬çš„åŒ…ï¼Œä»åº”ç”¨é€»è¾‘æ€»ç‹¬ç«‹å‡ºæ¥ã€‚è¿™å¯ä»¥å¢å¼ºæ ·å¼æ–‡ä»¶çš„å¯ç¼“å­˜æ€§ï¼Œå¹¶ä¸”å…è®¸æµè§ˆå™¨åœ¨åŠ è½½åº”ç”¨ä»£ç æ—¶å¹¶è¡ŒåŠ è½½ä½ çš„æ ·å¼æ–‡ä»¶ï¼Œå› æ­¤ä¹Ÿå¯ä»¥é¿å… FOUC ï¼ˆä¸€ä¸ªæ— æ ·å¼å†…å®¹çš„é—ªå±ï¼‰ã€‚å­¦ä¹  å¦‚ä½•å»åˆ†å‰² CSS é€šè¿‡ä½¿ç”¨ ExtractTextWebpackPlugin. æŒ‰éœ€ä»£ç åˆ†å‰²è™½ç„¶å‰é¢çš„èµ„æºåˆ†å‰²éœ€è¦ç”¨æˆ·åœ¨é…ç½®æ–‡ä»¶ä¸­é¢„å…ˆæŒ‡å®šåˆ†å‰²ç‚¹ï¼Œä½†æ˜¯ä¹Ÿå¯ä»¥åœ¨åº”ç”¨ä»£ç ä¸­åˆ›å»ºåŠ¨æ€çš„åˆ†å‰²ç‚¹ã€‚ è¿™ä¸ªåŠŸèƒ½åœ¨æœ‰å¾ˆå¤šç»†å¾®é¢—ç²’ä»£ç å—æ—¶ä¼šå¾ˆæœ‰ç”¨ï¼Œä¸¾ä¸ªä¾‹å­ï¼Œæ¯ä¸€ä¸ªåº”ç”¨çš„è·¯ç”±æˆ–è€…æŒ‰ç…§ç”¨æˆ·çš„é¢„æµ‹è¡Œä¸ºã€‚è¿™å¯ä»¥ä½¿ç”¨æˆ·æŒ‰éœ€åŠ è½½éœ€è¦çš„èµ„æºã€‚ é€šè¿‡ require.ensure() æ¥åˆ†å‰²ä»£ç require.ensure æ˜¯ä¸€ä¸ª CommonJS é£æ ¼çš„æ–¹å¼å»å¼‚æ­¥åŠ è½½èµ„æºã€‚é€šè¿‡æ·»åŠ  require.ensure([&lt;fileurl&gt;]) , æˆ‘ä»¬å¯ä»¥åœ¨ä»£ç ä¸­å®šä¹‰ä¸€ä¸ªåˆ†å‰²ç‚¹ã€‚ Webpack å¯ä»¥åˆ›å»ºä¸€ä¸ªåŒ…å«åœ¨è¿™ä¸ªåˆ†å‰²ç‚¹ä¸­çš„æ‰€æœ‰ä»£ç çš„ä»£ç åŒ…ã€‚å­¦ä¹  å¦‚ä½•åˆ†å‰²ä»£ç  é€šè¿‡ä½¿ç”¨ require.ensure(). TODO System.import() ä»£ç åˆ†å‰² - CSSåœ¨ webpack ä¸­ï¼Œå½“ä½ ä½¿ç”¨ css-loader å¹¶ä¸”åœ¨ JavaScript ä¸­å¼•å…¥ CSS æ–‡ä»¶ï¼Œé‚£ä¹ˆ CSS æ–‡ä»¶ä¼šè¢«æ‰“åŒ…åœ¨ä½ çš„ JavaScript æ–‡ä»¶ä¸­ã€‚è¿™æœ‰ä¸€ä¸ªä¸å¥½çš„åœ°æ–¹ï¼Œå°±æ˜¯ä½ æ— æ³•ä½¿ç”¨æµè§ˆå™¨å¼‚æ­¥å¹¶è¡ŒåŠ è½½ CSS çš„èƒ½åŠ›ã€‚ç›¸åï¼Œä½ çš„é¡µé¢ä¼šç­‰åˆ°æ•´ä¸ª JavaScript æ–‡ä»¶åŠ è½½å®Œæˆï¼Œæ‰å®Œæˆäº†æ ·å¼æ–‡ä»¶çš„åŠ è½½ã€‚Webpack å¯ä»¥é€šè¿‡ä½¿ç”¨ extract-text-webpack-plugin å’Œ css-loader æ¥æŠŠæ ·å¼æ–‡ä»¶åˆ†ç¦»å‡ºæ¥å»è§£å†³è¿™ä¸ªé—®é¢˜ã€‚ ä½¿ç”¨ css-loaderå¼•å…¥ css åˆ°ä½ çš„ JavaScript ä¸­ï¼Œéœ€è¦ä½¿ç”¨ css-loader å»é…ç½® webpack çš„é…ç½®æ–‡ä»¶ã€‚ //webpack.config.jsmodules.exports = function(env)&#123; entry: '..', ... module: &#123; rules: [&#123; test: /\.css$/, exclude: /node_modules/, loader: 'css-loader' &#125;] &#125; ...&#125; ä½¿ç”¨ extract-text-webpack-plugin - ExtractTextPluginå®‰è£…ï¼š npm I --save-dev extract-text-webpack-plugin è¦ä½¿ç”¨è¿™ä¸ª ExtractTextPlugin,éœ€è¦é€šè¿‡ä¸¤ä¸ªæ­¥éª¤é…ç½®åœ¨ webpack.config.js ä¸­ã€‚ åœ¨ lodaer é‡Œé¢ä»ä¹‹å‰çš„ css-loader ä¸­é€‚é…ï¼Œæˆ‘ä»¬åº”è¯¥å¦‚ä¸‹æ·»åŠ  ExtractTextPlugin. loader: ExtractTextPlugin.extract('css-loader?sourceMap') //Can be used without sourcemaps too. åœ¨ plugin é‡Œé¢new ExtractTextPlugin(&#123; filename: 'bundle.css', disable: false, allChunks: true &#125;) é€šè¿‡è¿™ä¸¤æ­¥ï¼Œå°±å¯ä»¥ç”Ÿæˆä¸€ä¸ªæ–°çš„åŒ…å«æ‰€æœ‰ CSS æ¨¡å—çš„ä»£ç åŒ…ï¼Œç„¶åæŠŠä»–ä»¬æ·»åŠ åˆ° index.html çš„ heade ä¸­å»ã€‚å¯ä»¥é€šè¿‡ ExtractTextPlugin å»äº†è§£å…³äºå®ƒ api çš„æ›´å¤šä¿¡æ¯ã€‚ å®Œæ•´çš„é…ç½®æ–‡ä»¶å¦‚ä¸‹ï¼š var ExtractTextPlugin = require('extract-text-webpack-plugin');module.exports = function () &#123; return &#123; entry: './main.js', output: &#123; path: './dist', filename: 'bundle.js' &#125;, module: &#123; rules: [&#123; test: /\.css$/, exclude: /node_modules/, loader: ExtractTextPlugin.extract(&#123; loader: 'css-loader?sourceMap' &#125;) &#125;] &#125;, devtool: 'source-map', plugins: [ new ExtractTextPlugin(&#123; filename: 'bundle.css', disable: false, allChunks: true &#125;) ] &#125;&#125; ä»£ç åˆ†å‰²-åº“æ–‡ä»¶ä¸€ä¸ªå…¸å‹çš„åº”ç”¨ä¼šä¾èµ–å¾ˆå¤šç¬¬ä¸‰æ–¹æ¥æä¾›æ¡†æ¶æˆ–åŠŸèƒ½æ”¯æŒã€‚é¡¹ç›®ä¸­ä½¿ç”¨çš„å›ºå®šç‰ˆæœ¬çš„åº“/æ¡†æ¶æ–‡ä»¶çš„ä»£ç ä¸€èˆ¬ä¸ä¼šæœ‰å˜åŠ¨ï¼Œç„¶è€Œåº”ç”¨æœ¬èº«çš„ä¸šåŠ¡é€»è¾‘ä»£ç å´ç»å¸¸ä¼šæœ‰å˜åŠ¨ã€‚ æŠŠåº”ç”¨ä»£ç å’Œåº“æ–‡ä»¶çš„ä»£ç æ‰“åŒ…åœ¨ä¸€èµ·æ˜¯ä¸€ä»¶éå¸¸ä½æ•ˆçš„äº‹æƒ…ã€‚è¿™æ˜¯å› ä¸ºæµè§ˆå™¨å¯ä»¥æ ¹æ®ç¼“å­˜å¤´ç¼“å­˜è¿™äº›èµ„æºæ–‡ä»¶åˆ°æœ¬åœ°è€Œä¸ç”¨æ¯æ¬¡éƒ½å»æœåŠ¡ç«¯æˆ–è€… cdn ä¸Šå»å‘è¯·æ±‚é‡æ–°è·å–ï¼Œå¦‚æœæ–‡ä»¶å†…å®¹æ²¡æœ‰å˜åŠ¨çš„è¯ã€‚ä¸ºäº†èƒ½å¤Ÿäº«å—è¿™ä¸ªå¥½å¤„ï¼Œæˆ‘ä»¬éœ€è¦ä¿æŒç¬¬ä¸‰æ–¹æ–‡ä»¶çš„ hash ä¸å˜ï¼Œæ— è®ºåº”ç”¨æœ¬èº«çš„ä»£ç å¦‚ä½•å˜åŒ–ã€‚ æˆ‘ä»¬åªæœ‰æŠŠåº”ç”¨ä»£ç å’Œç¬¬ä¸‰æ–¹ä»£ç åˆ†ç¦»å¼€æ‰å¯ä»¥è¾¾åˆ°è¿™æ ·çš„æ•ˆæœã€‚ æˆ‘ä»¬è€ƒè™‘ä¸€ä¸ªä¸€ä¸ªç®€å•çš„åº”ç”¨ï¼Œå®ƒä½¿ç”¨äº† momentjs ï¼Œä¸€ä¸ªé€šå¸¸ç”¨æ¥æ—¶é—´æ ¼å¼åŒ–çš„åº“ã€‚ å®‰è£… moment ï¼š npm install --save moment Index æ–‡ä»¶ä¼šå¼•ç”¨ moment ä½œä¸ºä¸€ä¸ªä¾èµ–å¹¶ä¸”æ‰“å°å½“å‰çš„æ—¶é—´ï¼š Index.js var moment = require('moment');console.log(moment().format()); æˆ‘ä»¬å¯ä»¥é€šè¿‡å¦‚ä¸‹è¿™ä¸ªé…ç½®æ–‡ä»¶æ¥æ‰“åŒ…è¿™ä¸ªåº”ç”¨ Webapck.config.js module.exports = function(env) &#123; return &#123; entry: './index.js', output: &#123; filename: '[chunkhash].[name].js', path: './dist' &#125; &#125;&#125; å½“è¿è¡Œ webapck å‘½ä»¤çš„æ—¶å€™ï¼Œå¦‚æœä½ æ£€æŸ¥æ‰“åŒ…åçš„æ–‡ä»¶ï¼Œä½ ä¼šå‘ç° moment å’Œ index.js éƒ½è¢«æ‰“åŒ…åœ¨äº† bundle.js ä¸­ã€‚ è¿™ä¸æ˜¯ä¸€ä¸ªå¾ˆå¥½çš„è§£å†³æ–¹æ¡ˆã€‚å¦‚æœ index.js ä¿®æ”¹äº†ï¼Œé‚£ä¹ˆè¿™æ‰“åŒ…æ–‡ä»¶ä¼šé‡æ–°æ„å»ºï¼Œæµè§ˆå™¨å°±éœ€è¦é‡æ–°å»åŠ è½½è¿™ä¸ªæ–‡ä»¶ï¼Œå³ä½¿ moment.js æ–‡ä»¶å¹¶æ²¡æœ‰ä»»ä½•æ”¹åŠ¨ã€‚ å¤šä¸ªå…¥å£è®©æˆ‘ä»¬ç¼“å’Œè¿™ä¸ªé—®é¢˜ï¼Œæˆ‘ä»¬ç»™ moment æ·»åŠ ä¸€ä¸ªæ–°çš„å…¥å£å‘½åä¸º vendors. Webpack.config.js module.exports = function(env) &#123; return &#123; entry: &#123; main: './index.js', vendor: 'moment' &#125;, output: &#123; filename: '[chunkhash].[name].js', path: './dist' &#125; &#125;&#125; ç°åœ¨æ‰§è¡Œ webpack å‘½ä»¤ï¼Œæˆ‘ä»¬ä¼šçœ‹åˆ°ä¸¤ä¸ªæ‰“åŒ…åçš„æ–‡ä»¶ã€‚å¦‚æœä½ æ£€æŸ¥é‡Œé¢ä»£ç çš„è¯ï¼Œä½ ä¼šçœ‹åˆ° moment çš„ä»£ç åŒæ—¶å‡ºç°åœ¨ä¸¤ä¸ªä»£ç åŒ…ä¸­ã€‚ ä¸ºäº†è§£å†³è¿™ä¸ªé—®é¢˜ï¼Œæˆ‘ä»¬éœ€è¦ä½¿ç”¨ CommonsChunkPlugin. CommonsChunksPluginè¿™æ˜¯ä¸€ä¸ªç›¸å½“å¤æ‚çš„æ’ä»¶ã€‚å®ƒä»æ ¹æœ¬ä¸Šå…è®¸ä½ ä»ä¸åŒçš„ä»£ç åŒ…ä¸­æå–å‡ºæ‰€æœ‰çš„ç›¸åŒæ¨¡å—å¹¶ä¸”æŠŠå®ƒä»¬åŠ å…¥åˆ°å…±åŒçš„ä»£ç åŒ…ä¸­ã€‚å¦‚æœè¿™ä¸ªç›¸åŒçš„ä»£ç åŒ…ä¸å­˜åœ¨ï¼Œé‚£ä¹ˆå°±åˆ›å»ºä¸€ä¸ªæ–°çš„ã€‚ æˆ‘ä»¬å¯ä»¥ä¿®æ”¹ webpack çš„é…ç½®æ–‡ä»¶æ¥ä½¿ç”¨è¿™ä¸ª CommonsCunksPlugin Webpack.config.js var webpack = require('webpack');module.exports = function(env) &#123; return &#123; entry: &#123; main: './index.js', vendor: 'moment' &#125;, output: &#123; filename: '[chunkhash].[name].js', path: './dist' &#125;, plugins: [ new webpack.optimize.CommonsChunkPlugin(&#123; name: 'vendor' // Specify the common bundle's name. &#125;) ] &#125;&#125; è¿™æ ·çš„è¯ï¼Œ moment çš„ä»£ç å°±åªä¼šå‡ºç°åœ¨ vendor ä»£ç åŒ…ä¸­äº†ã€‚ æ¸…å•æ–‡ä»¶ï¼ˆManifest Fileï¼‰ä½†æ˜¯ï¼Œå¦‚æœæˆ‘ä»¬å¯ä»¥ä¿®æ”¹åº”ç”¨çš„ä»£ç å¹¶ä¸”å†æ¬¡æ‰§è¡Œ webpack å‘½ä»¤ï¼Œæˆ‘ä»¬çœ‹åˆ° vendors æ–‡ä»¶çš„ hash è¿˜æ˜¯å˜åŒ–äº†ã€‚å³ä½¿æˆ‘ä»¬å·²ç»åˆ†ç¦»äº† vendor å’Œ main ä»£ç åŒ…ï¼Œä½†æ˜¯å½“åº”ç”¨ä»£ç å‘ç”Ÿä¿®æ”¹çš„æ—¶å€™ vendor è¿˜æ˜¯å˜åŒ–äº†ã€‚ è¿™æ„å‘³ç€æˆ‘ä»¬ä¾æ—§ä¸èƒ½äº«å—æµè§ˆå™¨ç¼“å­˜å¸¦æ¥çš„å¥½å¤„ï¼Œå› ä¸ºæ¯ä¸€æ¬¡é‡æ–°ç¼–è¯‘éƒ½ä¼šä¿®æ”¹ vendors çš„ hash å€¼ã€‚ è¿™ä¸ªé—®é¢˜æ˜¯å› ä¸ºæ¯ä¸€æ¬¡ç¼–è¯‘ï¼Œwebpack ç”Ÿæˆä¸€äº› webpack è¿è¡Œæ—¶ä»£ç ï¼Œç”¨æ¥å¸®åŠ© webpack æ¥åšå®ƒçš„å·¥ä½œã€‚å½“é‚£é‡Œå­˜åœ¨ä¸€ä¸ªå•ç‹¬çš„ä»£ç åŒ…ï¼Œè¿è¡Œæ—¶ä¼šé©»ç•™åœ¨å…¶ä¸­ã€‚ä½†å½“å¤šä¸ªä»£ç åŒ…è¢«ç”Ÿæˆçš„æ—¶å€™ï¼Œè¿è¡Œæ—¶ä»£ç ä¼šè¢«æå–åˆ°å…¬å…±çš„æ¨¡å—ä¸­ï¼Œå°±æ˜¯è¿™ä¸ª vendor æ–‡ä»¶ã€‚ ä¸ºäº†é˜»æ­¢è¿™ä¸ªï¼Œæˆ‘ä»¬éœ€è¦æå–å‡ºè¿è¡Œæ—¶åˆ°ä¸€ä¸ªåˆ†ç¦»çš„æ¸…å•æ–‡ä»¶ï¼ˆManifest Fileï¼‰ã€‚è™½ç„¶æˆ‘ä»¬åˆå¤šåˆ›å»ºå¦ä¸€ä¸ªä»£ç åŒ…ï¼Œä½†å®ƒçš„å¼€é”€ä¹Ÿè¢«æˆ‘ä»¬åœ¨ vendor æ–‡ä»¶ä¸Šè·å¾—çš„é•¿æœŸç¼“å­˜æ‰€å¸¦æ¥çš„å¥½å¤„æ‰€æŠµæ¶ˆäº†ã€‚ Webpack.config.js var webpack = require('webpack');module.exports = function(env) &#123; return &#123; entry: &#123; main: './index.js', vendor: 'moment' &#125;, output: &#123; filename: '[chunkhash].[name].js', path: './dist' &#125;, plugins: [ new webpack.optimize.CommonsChunkPlugin(&#123; names: ['vendor', 'manifest'] // Specify the common bundle's name. &#125;) ] &#125;&#125;; é€šè¿‡ä¸Šé¢è¿™ä¸ªé…ç½®æ–‡ä»¶ï¼Œæˆ‘ä»¬ä¼šçœ‹åˆ°ä¸‰ä¸ªä»£ç åŒ…è¢«ç”Ÿæˆã€‚vendor,main å’Œ manifest. è¿™æ ·å½“åº”ç”¨ä»£ç ä¿®æ”¹çš„æ—¶å€™ï¼Œé‡æ–°æ‰“åŒ…åï¼Œä¿®æ”¹çš„å°±åªæœ‰ main å’Œ manifest äº†ã€‚ manifest è¢«ä¿®æ”¹æ˜¯å› ä¸ºé‡Œé¢æœ‰å¯¹ç”Ÿæˆæ–‡ä»¶ hash å€¼çš„å¼•ç”¨ã€‚ ä»£ç åˆ†å‰²-ä½¿ç”¨ RequireJSåœ¨è¿™ä¸ªç« èŠ‚ï¼Œæˆ‘ä»¬è®¨è®º webpack å¦‚ä½•é€šè¿‡ require.ensure() åˆ†å‰²ä»£ç ã€‚ require.ensure()Webpack é™æ€åˆ†æç»™ require.ensure() åœ¨ä»£ç ä¸­å½“æ„å»ºå’Œæ·»åŠ æ¨¡å—åˆ°åˆ†ç¦»çš„ä»£ç å—ä¸­ã€‚è¿™ä¸ªæ–°çš„ä»£ç å—ä¼šè¢« webpack åœ¨éœ€è¦çš„æ—¶å€™é€šè¿‡ jsonp å¼•å…¥ã€‚ å®ƒçš„è¯­æ³•å¦‚ä¸‹ï¼š require.ensure(dependencies: String[], callback: function(require), chunkName: String) ä¾èµ–(dependencies)è¿™æ˜¯ä¸€ä¸ªå­—ç¬¦ä¸²æ•°ç»„ï¼Œç”¨æ¥å£°æ˜æ‰€æœ‰éœ€è¦åœ¨æ‰§è¡Œå›æ‰å‡½æ•°ä¹‹å‰å°±éœ€è¦é¢„å…ˆåŠ è½½å¥½ä¸”å¯ç”¨çš„æ¨¡å—ã€‚ å›è°ƒå‡½æ•°(callback)ä¸€ä¸ªå›è°ƒå‡½æ•°ä¼šè¢« webpack æ‰§è¡Œä¸€æ¬¡å½“æ‰€æœ‰ä¾èµ–(dependencies)éƒ½è¢«åŠ è½½ä»¥åã€‚Require å¯¹è±¡çš„å®ç°ä½œä¸ºä¸€ä¸ªå‚æ•°ä¼ é€’ç»™è¿™ä¸ªå›è°ƒå‡½æ•°ã€‚è¿™æ ·ï¼Œæˆ‘ä»¬å¯ä»¥æ›´è¿›ä¸€æ­¥ require éœ€è¦çš„ä¾èµ–(dependencies)å’Œå…¶ä»–éœ€è¦æ‰§è¡Œçš„æ¨¡å—ã€‚ ä»£ç å—åå­—(chunkName)ä»£ç å—åå­—æ˜¯ä¸€ä¸ªç”¨æ¥å‘½åé€šè¿‡ require.ensrue() åˆ›å»ºçš„ä»£ç å—ã€‚é€šè¿‡ç»™ä¸åŒçš„ require.ensure() åˆ›å»ºçš„ä»£ç åˆ†å‰²ç‚¹åˆ†å‰²å‡ºæ¥çš„ä»£ç å—ä¸€ä¸ªç›¸åŒçš„åå­—ï¼Œæˆ‘ä»¬å¯ä»¥ç¡®ä¿æ‰€æœ‰çš„ä¾èµ–éƒ½è¢«æ‰“åŒ…åˆ°åŒä¸€ä¸ªä»£ç å—ä¸­ã€‚ æˆ‘ä»¬æ¥çœ‹ä¸€ä¸‹å¦‚ä¸‹ç»“æ„çš„ä¸€ä¸ªé¡¹ç›® \\ file structure | js --| | |-- entry.js | |-- a.js | |-- b.js webpack.config.js | dist // entry.jsrequire('a');require.ensure([], function(require)&#123; require('b');&#125;);// a.jsconsole.log('***** I AM a *****');// b.jsconsole.log('***** I AM b *****'); // webpack.config.jsmodule.exports = function(env) &#123; return &#123; entry: './js/entry.js', output: &#123; filename: 'bundle.js', path: './dist' &#125; &#125;&#125; å½“è¿è¡Œ webpack å‘½ä»¤çš„æ—¶å€™ï¼Œæˆ‘ä»¬å‘ç° webpack åˆ›å»ºäº†ä¸¤ä¸ªæ–°çš„ä»£ç åŒ…ï¼Œbundle.js å’Œ 0.bundle.js. entry.js å’Œ a.js è¢«æ‰“åŒ…åˆ°äº† bundle.js ä¸­ã€‚ b.js è¢«æ‰“åŒ…åˆ°äº† 0.bundle.js require.ensure() çš„é™·é˜±ç©ºæ•°ç»„ä½œä¸ºä¸€ä¸ªå‚æ•°require.ensure([], function(require)&#123; require('./a.js');&#125;); ä¸Šé¢çš„ä»£ç ç¡®ä¿ä¸€ä¸ªåˆ†å‰²ç‚¹è¢«åˆ›å»ºï¼Œ a.js ä¼šè¢« webpack å•ç‹¬çš„æ‰“åŒ…æˆä¸€ä¸ªæ–‡ä»¶ã€‚ ä¾èµ–ä½œä¸ºå‚æ•°require.ensure(['./a.js'], function(require) &#123; require('./b.js');&#125;); ä¸Šé¢çš„ä»£ç ï¼Œa.js å’Œ b.js ä¼šè¢«ä¸€èµ·æ‰“åŒ…å¹¶ä¸”ä»ä¸»ä»£ç åŒ…ä¸­åˆ†ç¦»å‡ºæ¥ã€‚ä½†æ˜¯åªæœ‰ b.js çš„å†…å®¹è¢«æ‰§è¡Œäº†ã€‚ a.js çš„å†…å®¹åªæ˜¯æ˜¯å¯ç”¨çš„ä½†å¹¶æ²¡æœ‰è¢«æ‰§è¡Œã€‚ä¸ºäº†æ‰§è¡Œ a.js, æˆ‘ä»¬éœ€è¦ require å®ƒä½œä¸ºä¸€ä¸ªåŒæ­¥çš„æ–¹å¼æ¯”å¦‚ require(&#39;./a.js) ï¼Œè¿™æ · JavaScript å°±å¯ä»¥æ‰§è¡Œå®ƒäº†ã€‚ ä¾èµ–ç®¡ç†Ã˜ es6 module Ã˜ Commonjs Ã˜ Amd è¡¨è¾¾å¼ä¾èµ–ï¼ˆrequire with expressionï¼‰å½“ä½ é€šè¿‡è¡¨è¾¾å¼å»å¼•å…¥ä¸€ä¸ªæ¨¡å—çš„æ—¶å€™ï¼Œå°±ä¼šåˆ›å»ºä¸€ä¸ªä¸Šä¸‹æ–‡ï¼Œæ‰€ä»¥å½“ç¼–è¯‘çš„æ—¶å€™æˆ‘ä»¬å¹¶ä¸çŸ¥é“å‡†ç¡®çš„æ¨¡å—æ˜¯å“ªä¸ªã€‚ ä¾‹ï¼š require("./template/" + name + ".ejs"); Webpack è§£æ require() çš„è°ƒç”¨ï¼Œå¹¶ä¸”æå–å‡ºæ¥ä¸€äº›ä¿¡æ¯ï¼š Directory:./templateRegularexpression:/^.*\.ejs$/ ä¸Šä¸‹æ–‡æ¨¡å—ï¼ˆcontext moduleï¼‰ä¸€ä¸ªä¸Šä¸‹æ–‡æ¨¡å—è¢«ç”Ÿæˆã€‚å®ƒåŒ…å«äº†åœ¨è¿™ä¸ªæ–‡ä»¶å¤¹ä¸‹æ‰€æœ‰å¯ä»¥è¢«ä¸Šé¢çš„æ­£åˆ™åŒ¹é…æ‰€åŒ¹é…åˆ°çš„æ¨¡å—çš„å¼•ç”¨ã€‚ä¸Šä¸‹æ–‡æ¨¡å—åŒ…å«äº†ä¸€ä¸ªæŠŠè¯·æ±‚è§£é‡Šåˆ°æ¨¡å— id çš„ map.ä¾‹ï¼š &#123; "./table.ejs": 42, "./table-row.ejs": 43, "./directory/folder.ejs": 44&#125; ä¸Šä¸‹æ–‡æ¨¡å—åŒæ ·åŒ…å«äº†ä¸€äº›è¿è¡Œæ—¶ä»£ç ç”¨æ¥è®¿é—®è¿™ä¸ª map. è¿™æ„å‘³ç€åŠ¨æ€çš„å¼•ç”¨å¯ä»¥è¢«æ”¯æŒï¼Œä½†æ˜¯ä¼šå¯¼è‡´æ‰€æœ‰å¯èƒ½è¢«ç”¨åˆ°çš„æ¨¡å—éƒ½è¢«æ‰“åŒ…åˆ°äº†æœ€ç»ˆçš„ä»£ç åŒ…ä¸­ã€‚ require.contextä½ å¯ä»¥é€šè¿‡ require.context() æ–¹æ³•åˆ›å»ºä½ è‡ªå·±çš„ä¸Šä¸‹æ–‡ã€‚å®ƒå…è®¸ä½ ä¼ å…¥ä¸€ä¸ªç”¨æ¥æŸ¥è¯¢çš„æ–‡ä»¶å¤¹ï¼Œä¸€ä¸ªç”¨æ¥å†³å®šæ˜¯å¦é€’å½’æŸ¥æ‰¾å­æ–‡ä»¶å¤¹çš„æ ‡è¯†ï¼Œè¿˜æœ‰ä¸€ä¸ªç”¨æ¥åŒ¹é…æ–‡ä»¶çš„æ­£åˆ™è¡¨è¾¾å¼ã€‚ Webpack ä¼šåœ¨ä»£ç æ‰“åŒ…çš„æ—¶å€™è§£æ require.context() å®ƒçš„è¯­æ³•å¦‚ä¸‹ï¼š require.context(directory, useSubdirectories = false, regExp = /^\.\//) ä¾‹ï¼š require.context("./test", false, /\.test\.js$/);// a context with files from the test directory that can be required with a request endings with `.test.js`. require.context("../", true, /\.stories\.js$/);// a context with all files in the parent folder and descending folders ending with `.stories.js`. ä¸Šä¸‹æ–‡æ¨¡å—APIï¼ˆcontext module APIï¼‰ä¸€ä¸ªä¸Šä¸‹æ–‡æ¨¡å—æš´éœ²ä¸€ä¸ªæ–¹æ³•ï¼Œå®ƒæ¥æ”¶ä¸€ä¸ªå‚æ•°ï¼šè¯·æ±‚çš„å†…å®¹ã€‚æš´éœ²å‡ºæ¥çš„å‡½æ•°æœ‰ä¸‰ä¸ªå±æ€§ï¼šresolve,key,id â€¢ resolve æ˜¯ä¸€ä¸ªå‡½æ•°ï¼Œæ‰§è¡Œåè¿”å›è§£æåçš„è¯·æ±‚å†…å®¹çš„æ¨¡å— id â€¢ keysæ˜¯ä¸€ä¸ªå‡½æ•°ï¼Œæ‰§è¡Œåè¿”å›ä¸€ä¸ªæ•°ç»„ï¼ŒåŒ…å«æ‰€æœ‰å¯èƒ½è¢«ä¸Šä¸‹æ–‡æ¨¡å—æ‰€è¯·æ±‚çš„æ‰€æœ‰çš„æ¨¡å—çš„ id å½“ä½ æƒ³è¦é€šè¿‡æ­£åˆ™åŒ¹é…å¼•å…¥ä¸€ä¸ªæ–‡ä»¶å¤¹ä¸‹æ‰€æœ‰æ¨¡å—æ—¶ï¼Œè¿™ä¼šéå¸¸æœ‰ç”¨ï¼š function importAll (r) &#123; r.keys().forEach(r);&#125;importAll(require.context('../components/', true, /\.js$/)) var cache = &#123;&#125;;function importAll (r) &#123; r.keys().forEach(key =&gt; cache[key] = r(key));&#125;importAll(require.context('../components/', true, /\.js$/));// At build-time cache will be polulated with all required modules. â€¢ `id` æ˜¯ä¸Šä¸‹æ–‡æ¨¡å—ç”Ÿæˆçš„æ¨¡å— id. å½“ä½¿ç”¨ `module.hot.accept` æ—¶ï¼Œè¿™ä¼šéå¸¸æœ‰ç”¨ã€‚]]></content>
      <categories>
        <category>æŠ€æœ¯</category>
      </categories>
      <tags>
        <tag>webpack</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[2016å¹´ç»ˆæ€»ç»“]]></title>
    <url>%2F2016%2F12%2F09%2F2016-year-end-summary%2F</url>
    <content type="text"><![CDATA[å·¥ä½œæ—¶é—´ä¹ŸçœŸæ˜¯å¿«ï¼Œä» 15 å¹´åˆ°ç°åœ¨ç®—æ¥æˆ‘åšå‰ç«¯å¼€å‘ä¹Ÿå°†è¿‘ä¸¤å¹´äº†ï¼Œæ²¡æƒ³åˆ°è¿™ä¸€è·¯èµ°è¿‡æ¥è¿™ä¹ˆé¡ºåˆ©ï¼Œè¿æ°”çœŸæ˜¯æŒºå¥½çš„ã€‚ å½“åˆè‡ªå­¦ä¸‰ä¸ªæœˆï¼Œç„¶åæŠ•ç®€å†é¢è¯•ï¼Œå°±æ‹¿åˆ°äº†å¥½å‡ ä¸ª offerï¼Œä¸€åˆ‡éƒ½å¤ªé¡ºåˆ©äº†ã€‚ç„¶åå»äº†ä¸€å®¶åšäº’è”ç½‘é‡‘èçš„å…¬å¸ï¼Œè€å¤§å¯¹æˆ‘å¾ˆå¥½ï¼Œç„¶è€Œå¾…äº†ä¸€å¹´å¤šè¿˜æ˜¯åœ¨ä»Šå¹´äº”æœˆä»½é€‰æ‹©äº†ç¦»èŒã€‚åŸå› å¾ˆç®€å•ï¼Œå…¬å¸çš„å¼€å‘æ¨¡å¼è¿‡äºä¿å®ˆï¼Œä¸€ç›´å¾…ä¸‹å»çœŸçš„ä¸ä¼šæœ‰ä»»ä½•é•¿è¿›äº†ï¼Œ æ•´å¤©å¹²çš„æ´»éƒ½åƒæ˜¯ç¾å·¥å¹²çš„æ´»ï¼Œå…¬å¸å¾ˆä¸é‡è§†å‰ç«¯ï¼Œè€Œä¸”å‰åç«¯ä¸åˆ†ç¦»ï¼ŒåŒä¸€ä»½æ–‡ä»¶å‰åç«¯ä¸¤ä¸ªäººä¸€èµ·æ”¹ï¼Œæƒ³æƒ³çœŸæ˜¯ç—›è‹¦ã€‚ é‚£ç¦»èŒäº†å°±è¦æ‰¾å·¥ä½œï¼Œä¸å¾—ä¸è¯´ï¼Œæ‰¾å·¥ä½œçš„ç»å†çœŸæœ‰æ„æ€ã€‚ æ‰¾å·¥ä½œæœ‰ä¸€å®¶åˆ›ä¸šå…¬å¸ï¼Œäººå®¶å¯¹æˆ‘è¿˜æ¯”è¾ƒæ»¡æ„ï¼Œä½†å°±æ˜¯è–ªèµ„æ²¡è°ˆå¦¥ï¼Œå°±ç®—äº†ï¼Œè°çŸ¥é“åæ¥æˆ‘éƒ½æ‹¿åˆ°å¦ä¸€å®¶å…¬å¸çš„ offer äº†åˆè¯´é‚£ä¸ªè–ªèµ„å¯ä»¥æ¥å—äº†ã€‚ æœ‰ä¸€å®¶å¤–ä¼ï¼Œé¢è¯•çš„æ—¶å€™å¯¹ä»–ä»¬çš„å·¥ä½œç¯å¢ƒéå¸¸æ»¡æ„ï¼Œç„¶è€Œé¢è¯•å‘æŒ¥å¤ªå·®ï¼Œè¿ sass çš„å¾ªç¯éƒ½å†™ä¸å‡ºæ¥ï¼Œç»“æœå¯æƒ³è€ŒçŸ¥ã€‚é¢è¯•å®˜è¿˜å¾ˆå’Œè”¼ï¼Œè¯´å›å»ç­‰æ¶ˆæ¯å§ï¼Œç„¶åæˆ‘å‡ºé—¨ä¸åˆ°äº”åˆ†é’Ÿå°±æ”¶åˆ°äº†çŸ­ä¿¡ï¼Œâ€˜æ‚¨ä¸é€‚åˆæœ¬å…¬å¸çš„è¦æ±‚â€™ï¼Œå—¯ï¼Œæ•ˆç‡çœŸé«˜ï¼ŒæŒºå–œæ¬¢è¿™ç‚¹ã€‚ æœ‰ä¸€å®¶åœ¨æ»¨æ±Ÿçš„å¤§å…¬å¸ï¼Œé¢è¯•é€šè¿‡äº†ï¼Œè–ªèµ„éƒ½è°ˆå¦¥äº†ï¼Œ Hr è¯´å›å»ç­‰ offer å§ï¼Œä¸€èˆ¬ä¸‰å¤©å†…å°±ä¼šå‘å‡ºæ¥ã€‚æˆ‘å¾ˆé«˜å…´ï¼Œç¬¬äºŒå¤©å›åŸå…¬å¸å°±æäº†ç¦»èŒã€‚ç»“æœç­‰äº†ä¸€æ˜ŸæœŸè¿˜æ²¡æ”¶åˆ° offer ï¼Œå°±æ‰“ç”µè¯é—®ï¼Œå¯¹æ–¹å¾ˆä¸å¥½æ„æ€çš„å›ç­”è¯´ï¼Œéƒ¨é—¨å…¬å¸æ¶æ„é‡ç»„ï¼Œæˆ‘é¢è¯•çš„é‚£ä¸ªäº‹ä¸šéƒ¨å·²ç»æ²¡äº†,,Ô¾ ã…‚ Ô¾,,ï¼Œæˆ‘ä¹Ÿä¸å¥½è¯´ä»€ä¹ˆäº†ã€‚ ä¸­é€”è¿˜æœ‰ä¸€å †ä¸é è°±çš„å…¬å¸ï¼Œå½“ç„¶ä¹Ÿæœ‰æˆ‘èƒ½åŠ›ä¸è¶³æ²¡é€šè¿‡é¢è¯•çš„ã€‚ æœ‰ä¸€ä¸ªæœ€ç›´æ¥å°±æ˜¯è˜‘è‡è¡—çš„äººé—®ä½ èƒ½æ¥å—åŠ ç­å—ï¼Œæˆ‘è¯´å¶å°”å¯ä»¥ï¼Œç»å¸¸ä¸è¡Œï¼Œç„¶åäººå®¶æ¥äº†ä¸€å¥ï¼Œé‚£ä¸è¡Œï¼Œæˆ‘ä»¬è¿™è¾¹åŠ ç­è¿˜æ˜¯å¾ˆä¸¥é‡çš„ï¼Œå‡ ä¹æ¯å¤© 11 ç‚¹ã€‚ç„¶åï¼Œå°±æ²¡æœ‰ç„¶åäº†ã€‚åæ¥å°ä¼™ä¼´ç»™å†…æ¨äº†é˜¿é‡Œï¼Œé¢å¤©çŒ«æŒ‚åœ¨äº†ä¸‰é¢ï¼Œåˆé¢äº†æ»¨æ±Ÿçš„ B2B éƒ¨é—¨ã€‚ åˆ°äºŒé¢çš„æ—¶å€™ï¼Œæ¥åˆ°äº†ç½‘æ˜“çš„é¢è¯•ï¼Œé¢ç½‘æ˜“çš„æ—¶å€™è°ˆçš„å¾ˆé«˜å…´ï¼ŒåŒæ–¹éƒ½å¾ˆæ»¡æ„ï¼Œæœ€å hr é—®è¯´æœ‰æ²¡æœ‰åœ¨é¢å…¶ä»–å…¬å¸ï¼Œæˆ‘è¯´å½“ç„¶ï¼Œ æ¯”å¦‚é˜¿é‡Œä¹Ÿåœ¨é¢ï¼Œç°åœ¨å·²ç»åˆ°äº†äºŒé¢ã€‚ç„¶åå°±æœ‰äº†ä¸‹é¢çš„å¯¹è¯ï¼š Hr ï¼šâ€œé‚£å¦‚æœé˜¿é‡Œå’Œç½‘æ˜“åŒæ—¶ç»™ä½ å‘ offer ä½ å»å“ªä¸ªï¼Ÿâ€œ æˆ‘å½“æ—¶éšå£ä¸€è¯´ï¼Œâ€œå“ªä¸ªå…ˆå‘ offer å°±å»å“ªä¸ªâ€ ç„¶åå½“å¤©æ™šä¸Šå°±ç”µè¯é€šçŸ¥æˆ‘é¢è¯•é€šè¿‡äº†ï¼Œç¬¬äºŒå¤©å°±å‘äº† offerã€‚ç°åœ¨æƒ³æƒ³ï¼Œæˆ‘çœŸæ˜¯æœºæ™ºå•Šï¼ŒO(âˆ©_âˆ©)O ç½‘æ˜“æ‰¾å·¥ä½œçš„äº‹æƒ…å°±å‘Šä¸€æ®µè½ï¼Œæ¥åˆ°ç½‘æ˜“ã€‚é¦–å…ˆç½‘æ˜“ç»™æˆ‘çš„ç¬¬ä¸€å°è±¡å°±æ˜¯ï¼Œé£Ÿå ‚çœŸå¥½ï¼ˆè™½ç„¶å·²ç»åƒè…»äº†ï¼‰ï¼Œä»¿ä½›å›åˆ°äº†å¤§å­¦æ—¶å€™ä¸€æ ·ï¼Œç„¶åå¦¹å­çœŸå¤šï¼Œå—¯ï¼ŒçœŸçš„ã€‚ ä¸å¾—ä¸è¯´å¤§å…¬å¸è·Ÿå°å…¬å¸è¿˜æ˜¯æœ‰å¾ˆå¤šå·®åˆ«çš„ã€‚é¦–å…ˆï¼Œæµç¨‹ä¸Šå°±å¾ˆè§„èŒƒï¼Œä¸ä¼šå‡ºç°è¯´ä¹‹å‰å…¬å¸é‚£ç§äº§å“ç»ç†è¿‡æ¥ä¸€ä¼šè¦è¿™æ ·ä¸€ä¼šè¦é‚£æ ·çš„äº‹æƒ…ï¼Œä½†åŒæ—¶ä¹Ÿæœ‰å¼Šç«¯ï¼Œå°±æ˜¯ä¼šè®®å¤ªå¤šã€‚æƒ³æƒ³é‚£äº›ä¼šè®®æœ‰æ²¡æœ‰å¿…è¦å¼€ï¼Œè¿˜æ˜¯æœ‰å¿…è¦çš„ï¼Œä½†æ˜¯ä¼šè®®çš„æ•´ä½“æ•ˆç‡ï¼ŒçœŸæ˜¯ä½å•Šã€‚ ä¸€å¼€å§‹å»ç½‘æ˜“é™¤äº†ä¸šåŠ¡ä¸Šçš„éœ€æ±‚ï¼Œè¿˜è‡ªå‘å¥‹å‹‡æ¥äº†å‡ ä¸ªå‰ç«¯æŠ€æœ¯éƒ¨çš„éä¸šåŠ¡å·¥ä½œï¼Œå¯èƒ½è¿™ä¸€ç‚¹è®©è€å¤§è§‰å¾—æˆ‘ç§¯ææ€§æ¯”è¾ƒå¼ºï¼Œå°±åˆæ¯”è¾ƒçœ‹å¥½æˆ‘ã€‚ä¸­é€”æœ¬æ¥è¿˜è¦åšä¸ªå‰ç«¯ç›‘æ§ç³»ç»Ÿçš„ï¼Œå¯æƒœåˆšæå¥½å‰æœŸå·¥ä½œï¼Œè´Ÿè´£äººå°±ç¦»èŒäº†ï¼Œé¡¹ç›®ä¹Ÿå°±æç½®äº†ã€‚æƒ³æƒ³ä¹Ÿæ˜¯æŒºå¯æƒœçš„ã€‚ éƒ½è¯´è¿›äº†ç½‘æ˜“ä¼šé•¿èƒ–ï¼Œç„¶è€ŒçŸ­çŸ­åŠå¹´æ—¶é—´ï¼Œæˆ‘ç«Ÿç˜¦äº†ä¸ƒå…«æ–¤ã€‚ä¸å¾—ä¸è¯´ï¼Œå·¥ä½œè¿˜æ˜¯æŒºå¿™çš„ï¼Œæ¯å¤©éƒ½å¾—å…«ä¹ç‚¹å¤šæ‰èƒ½ä¸‹ç­ã€‚æƒ³æƒ³ä»¥å‰å…­ç‚¹ä¸‹ç­ï¼Œä¸‹ç­åçœ‹ä¸¤å°æ—¶ä¹¦ï¼Œæ‰“ä¿©å°æ—¶æ¸¸æˆï¼Œç„¶åèººåºŠç¡è§‰ï¼ŒåŠ³é€¸ç»“åˆï¼Œç®€ç›´å®Œç¾ã€‚ç°åœ¨ä¸€ä¸‹ç­å°±è·Ÿæ­»çŒªä¸€æ ·äº†ï¼Œä»€ä¹ˆéƒ½ä¸æƒ³å¹²ï¼Œæ¸¸æˆéƒ½æ‡’å¾—æ‰“ï¼Œå°±åˆ·åˆ·å¾®åšã€Aã€B ç«™ç„¶åå°±ç¡äº†ã€‚çœ‹ä¹¦å¾ˆå°‘äº†ï¼Œå¶å°”ä¹Ÿçœ‹çœ‹ä¸€äº›å‰ç«¯ç›¸å…³çš„åšå®¢å’Œæ–‡ç« ã€‚æ‰€ä»¥æ„Ÿè§‰è¿™åŠå¹´ï¼Œé™¤äº†å·¥ä½œç»éªŒä¸Šçš„ç§¯ç´¯ï¼Œä¸ªäººçŸ¥è¯†æ‹“å±•ä¸Šå‡ ä¹æ˜¯åœæ»çš„ï¼Œé•¿æœŸè¿™æ ·ä¸‹å»è‚¯å®šæ˜¯ä¸è¡Œçš„ã€‚ è€Œä¸”æˆ‘ä»¬é‚£æ¡ä¸šåŠ¡çº¿è´Ÿè´£äººç¦»èŒåï¼Œè€å¤§è®©æˆ‘é¡¶å¤§æ¢ã€‚è™½ç„¶è¿™å¯¹æˆ‘æ¥è¯´æ˜¯ä¸ªé”»ç‚¼ï¼Œä½†ç¡®å®äºšå†å±±å¤§ï¼Œæ¯å¤©é™¤äº†ä¸šåŠ¡éœ€æ±‚ï¼Œè¿˜æœ‰ä¸€å †æ‚ä¸ƒæ‚å…«çš„äº‹æƒ…è¦å¤„ç†ï¼Œæå¾—ç„¦å¤´çƒ‚é¢ã€‚ ä¸è¿‡ï¼Œè¿˜å¥½ã€‚å…¬å¸çš„åŒäº‹éƒ½æŒºæœ‰æ„æ€çš„ï¼Œä¸Šç­æ•´ä½“ä¹ŸæŒºå¼€å¿ƒï¼Œè¿™åˆ°æŒºå¥½çš„ã€‚ ç”Ÿæ´»ç¿»äº†ä¸€ä¸‹å»å¹´çš„æ—¥è®°ï¼Œå“¦ï¼Œä¸å¯¹ï¼Œåº”è¯¥å«æœˆè®°ã€‚çœ‹æ¥æ—¥å¸¸ç”Ÿæ´»ä¸Šè¿˜æ˜¯é‚£ä¸ªæ ·å­ï¼Œè·Ÿå»å¹´æ²¡ä»€ä¹ˆå¤§çš„åŒºåˆ«ã€‚ æ‰¾æˆ¿å­ä¸€å¼€å¹´å°±åˆæ˜¯æ‰¾æˆ¿å­ï¼ŒåŸæ¥çš„æˆ¿ä¸œç›´æ¥æ¶¨ä»· 500 å—ï¼ŒçœŸå¿ƒä¸èƒ½æ¥å—ã€‚å°±åªèƒ½å¼€å§‹åˆä¸€æ¬¡æ‰¾æˆ¿å­çš„æ—…ç¨‹äº†ï¼Œè·‘äº†å¾ˆå¤šå°åŒºï¼Œæœ€ååœ¨åŸæ¥æˆ¿å­é™„è¿‘çš„å°åŒºæ‰¾åˆ°ä¸€ä¸ªè¿˜è¡Œçš„ï¼Œä¸è¿‡ä»·æ ¼ä¹ŸçœŸæ˜¯é«˜ã€‚è¿™ç§æ¯å¹´éƒ½è¦æ‰¾æˆ¿å­çš„æ„Ÿè§‰çœŸæ˜¯ä¸çˆ½ã€‚ æ‰¾åˆ°çš„æˆ¿å­æ˜¯ä¸ªä¸‰å®¤ä¸€å…çš„ï¼Œå°±æ‹‰äº†ä¸ªå‰åŒäº‹å…¥ä¼™ï¼Œå¼€å§‹ä¸‰äººåˆç§Ÿçš„æ—¥å­ã€‚ æ–°å®¤å‹å…»äº†åªçŒ«ï¼ŒæŒºå¯çˆ±çš„ï¼Œ å°±æ˜¯é‚£çŒ«å®åœ¨æ‰æ¯›æ‰çš„å‰å®³ï¼ŒçŒ«ä¸»äººåˆå¾ˆå°‘æ‰“æ‰«ï¼Œè¿™é‡Œè®©äººä¸å¤ªæ„‰å¿«ã€‚ä¸è¿‡è¿˜å¥½ï¼Œå¤§å®¶å…³ç³»éƒ½ä¸é”™ï¼Œå‘¨æœ«ä¸€èµ·çœ‹ä¸ªç”µå½±åƒä¸ªé¥­ï¼Œå¶å°”ä¹Ÿå»è¥¿æ¹–ã€ä¹æºªç­‰åœ°æ–¹é€›é€›ï¼ŒæŒºå¥½çš„ã€‚ æ–¹å‘åˆ°ç°åœ¨éƒ½è¿˜æ˜¯æœ‰ç‚¹è¿·èŒ«ï¼Œè¿˜æ˜¯ä¸çŸ¥é“è‡ªå·±åˆ°åº•æ˜¯ä¸ªæ€æ ·çš„äººï¼Œæƒ³è¦æˆä¸ºä»€ä¹ˆæ ·çš„äººã€‚æœ‰ç‚¹æ‰¾ä¸åˆ°æ–¹å‘çš„æ„Ÿè§‰ ã€‚ å¹´åˆå’ŒåŒå­¦èŠå¤©ï¼ŒèŠåˆ°æƒ³åœ¨å“ªé‡Œå‘å±•ã€‚ä»–è¯´ä¸å¤ªæƒ³å¾…æ­å·ï¼Œåˆä¸æƒ³å›å»ï¼Œæ¯”è¾ƒæƒ³å»ä¸Šæµ·ã€‚ç„¶è€Œå¹´ä¸­å°±ç»“å©šå¹¶å®šå±…æ­å·äº†ã€‚æˆ‘å‘¢ï¼Œæ˜¯æƒ³å›å»åˆä¸æƒ³å›å»ï¼Œè·Ÿæ‰€æœ‰å‡ºæ¥å·¥ä½œçš„äººä¸€æ ·ï¼Œçº ç»“ã€‚ æ€»æƒ³æ´»çš„æ½‡æ´’ä¸€ç‚¹ï¼Œå¯åˆç»™è‡ªå·±ç”»äº†å¾ˆå¤šæ¡æ¡æ¡†æ¡†ï¼Œç”»åœ°ä¸ºç‰¢ï¼ŒæŠŠè‡ªå·±å›°åœ¨åŸåœ°ã€‚ æœç„¶ï¼Œä¸€ä¸ªäººæƒ³è¦æ”¹å˜è‡ªå·±è¿˜æ˜¯æŒºéš¾çš„ã€‚ ç›®æ ‡å…ˆçœ‹çœ‹å»å¹´ç»™è‡ªå·±å®šçš„ç›®æ ‡å§ï¼š åœ¨æ­¤ç»™æ˜å¹´è®¢ä¸ªç®€å•çš„è§„å®šï¼š æ¯ä¸ªæœˆè‡³å°‘å†™ä¸€ç¯‡åšå®¢ è‡³å°‘æ¯ä¸¤å‘¨çœ‹ä¸€æ¬¡ç”µå½± æ¯ä¸¤ä¸ªæœˆçœ‹ä¸€æœ¬ä¹¦ åŠ å¼ºèº«ä½“é”»ç‚¼ è¯¥è¿½çš„ç¾å‰§ä¸èƒ½è½ä¸‹ é™¤äº† 2ï¼Œ5 å…¶ä»–çš„ä¸€ä¸ªéƒ½æ²¡å®Œæˆï¼Œæœç„¶è¿™æ‰§è¡ŒåŠ›è¿˜æ˜¯ä¸è¡Œå•Šã€‚ åšå®¢è‡ªä»è¿›äº†ç½‘æ˜“å°±æ²¡æœ‰æ›´æ–°è¿‡ï¼› ä¹¦ï¼Œä¸€å¹´ä¸‹æ¥å°±çœ‹äº†å››æœ¬ï¼Œå¥½å¤šä¹¦ä¹°å›æ¥ï¼Œè¿å°çš®éƒ½æ²¡æ’•ï¼› é”»ç‚¼èº«ä½“ï¼Œä¹°äº†ç‘œä¼½æ¯¯ï¼Œä¹°äº†æ–°çš„å’å…·ï¼Œä½†é”»ç‚¼æ€»æ˜¯æ–­æ–­ç»­ç»­çš„ï¼Œä¸€ç›´æ²¡èƒ½åšæŒä¸‹æ¥ï¼› æ‰€ä»¥ä»Šå¹´çš„è®¡åˆ’å°±ç®€å•ä¸€ç‚¹å§ï¼š æ¯ä¸ªæœˆè‡³å°‘ä¸€ç¯‡åšå®¢ æ¯ä¸ªæœˆéƒ½è¦å‡ºå»èµ°èµ°ï¼Œå“ªæ€•ä¸€ä¸ªäºº ä¹¦è¿˜æ˜¯è¦çœ‹çš„ï¼Œé‚£å°±ä¸‰ä¸ªæœˆä¸€æœ¬ä¹¦å§ èº«ä½“è¿˜æ˜¯è¦é”»ç‚¼çš„ï¼Œå¿ƒé‡Œæœ‰è¿™ä¸ªäº‹æƒ…å°±è¡Œ å†™ä¸€ä¸ªä¸ªäººé¡¹ç›®ï¼Œå¹¶å‘å¸ƒå‡ºæ¥ï¼Œæ— è®ºé¡¹ç›®å¤šæ°´ æ„Ÿæƒ…â†’â† æœ€åæ•´ä½“çš„æ„Ÿè§‰ï¼Œå°±æ˜¯è¿™ä¸€å¹´è¿‡çš„çœŸå¿«å‘€ï¼è½¬çœ¼æ¯•ä¸šéƒ½ä¸¤å¹´å¤šäº†ï¼Œæœ‰æ—¶éƒ½è§‰å¾—æŒºå¯æ€•çš„ï¼Œå¿…é¡»å¾—å†æ¬¡å‘Šè¯«è‡ªå·±ï¼šSeize the day.]]></content>
      <categories>
        <category>éšç¬”</category>
      </categories>
      <tags>
        <tag>å¹´ç»ˆæ€»ç»“</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[ã€ç¿»è¯‘å‘ã€‘èµ°è¿› Redux ä¹‹é«˜çº§ç¯‡]]></title>
    <url>%2F2016%2F05%2F21%2Fstep-to-redux-3%2F</url>
    <content type="text"><![CDATA[å¼‚æ­¥çš„ Actionså‰å‡ ç¯‡çš„æ•™ç¨‹é‡Œé¢ï¼Œæˆ‘ä»¬æ­å»ºäº†ä¸€ä¸ª todo åº”ç”¨ã€‚è¿™æ˜¯ä¸€ä¸ªå®Œå…¨åŒæ­¥çš„ï¼Œæ¯æ¬¡ä¸€ä¸ª action è¢« dispatched, state éƒ½ä¼šå³æ—¶æ›´æ–°ã€‚è§£ææ¥ï¼Œæˆ‘ä»¬è¦æ­å»ºä¸€ä¸ªä¸åŒçš„ï¼Œå¼‚æ­¥çš„åº”ç”¨ã€‚å®ƒä½¿ç”¨ Reddit API æ¥å±•ç¤ºä¸€ä¸ªé€‰ä¸­æ ç›®çš„å¤´æ¡ã€‚ Actionså½“ä½ è°ƒç”¨ä¸€ä¸ªå¼‚æ­¥çš„ API æ—¶ï¼Œæœ‰ä¸¤ä¸ªè‡³å…³é‡è¦çš„æ—¶åˆ»ï¼šä½ å¼€å§‹è°ƒç”¨çš„æ—¶åˆ»ï¼Œå’Œä½ æ”¶åˆ°ç­”å¤çš„æ—¶åˆ»ã€‚ è¿™ä¸¤ä¸ªæ—¶åˆ»é€šå¸¸éƒ½ä¼šéœ€è¦å¯¹åº”ç”¨çš„ state åšå‡ºå˜åŒ–ï¼›ä¸ºæ­¤ï¼Œä½ éœ€è¦ dispatch æ™®é€šçš„å°†ä¼šè¢« reducers åŒæ­¥å¤„ç†çš„ actions. é€šå¸¸ï¼Œå¯¹äºä»»æ„ API è¯·æ±‚ï¼Œä½ å°†éœ€è¦ dispatch è‡³å°‘ä¸‰æ¬¡ä¸åŒçš„ actions: ä¸€ä¸ªé€šçŸ¥ reducers è¯·æ±‚å¼€å§‹çš„ action reducers å¯èƒ½é€šè¿‡åˆ‡æ¢ä¸€ä¸ª state ä¸­çš„ isFetching flag æ¥å¤„ç†è¿™ä¸ª action. ç”¨æ¥å‘Šè¯‰ UI æ˜¯æ—¶å€™æ˜¾ç¤ºä¸€ä¸ªç­‰å¾…æ ‡è¯†äº†ã€‚ ä¸€ä¸ªé€šçŸ¥ reducers è¯·æ±‚å·²ç»æˆåŠŸå®Œæˆçš„ action reducers å¯èƒ½é€šè¿‡æŠŠæ–°æ•°æ®åˆå¹¶åˆ°å®ƒæ§åˆ¶çš„ state ä¸­å¹¶é‡ç½® isFetching æ¥å¤„ç†è¿™ä¸ª action. UI ä¼šéšè—ç­‰å¾…æ ‡è¯†ï¼Œå¹¶å±•ç¤ºè·å–åˆ°çš„æ•°æ®ã€‚ ä¸€ä¸ªé€šçŸ¥ reducers è¯·æ±‚å¤±è´¥çš„ action reducers å¯èƒ½é€šè¿‡é‡ç½® isFetching æ¥å¤„ç†è¿™ä¸ª action. å¦å¤–ï¼Œæœ‰äº› reducers å¯èƒ½æƒ³è¦å­˜å‚¨è¿™ä¸ªé”™è¯¯ä¿¡æ¯ï¼Œè¿™æ ·å¯ä»¥è®© UI å±•ç¤ºå‡ºæ¥ã€‚ å¯èƒ½éœ€è¦åœ¨ actions æ·»åŠ ä¸€ä¸ªä¸“ç”¨çš„ status å­—æ®µï¼š&#123;type: 'FETCH_POSTS'&#125;&#123;type: 'FETCH_POSTS', status: 'error', error: 'Oops'&#125;&#123;typs: 'FETCH_POSTS', status: 'success', response: &#123; ... &#125;&#125; æˆ–è€…ä¸ºå®ƒä»¬å®šä¹‰å•ç‹¬çš„ typesï¼š&#123; type: 'FETCH_POSTS_REQUEST' &#125;&#123; type: 'FETCH_POSTS_FAILURE', error: 'Oops' &#125;&#123; type: 'FETCH_POSTS_SUCCESS', response: &#123; ... &#125; &#125; é€‰æ‹©ä¸€ä¸ªæ‹¥æœ‰ flags çš„å•ç‹¬çš„ action type, æˆ–è€…å¤šä¸ª actions types, è¿™éƒ½å–å†³ä¸ä½ ã€‚å¤šä¸ª types ä¼šæœ‰æ›´å°‘çš„çŠ¯é”™ç©ºé—´ï¼Œä½†è¿™ä¸æ˜¯ä¸€ä¸ªé—®é¢˜ï¼Œå¦‚æœä½ ä½¿ç”¨ redux-actions è¿™æ ·çš„è¾…åŠ©åº“æ¥ç”Ÿæˆ action creator å’Œ reducers çš„è¯ã€‚ å¼‚æ­¥çš„æ•°æ®æµä¸ä½¿ç”¨ middlerware, Redux store åªæä¾›åŒæ­¥çš„æ•°æ®æµã€‚è¿™æ˜¯ä½ é€šè¿‡ createStore() å¾—åˆ°çš„é»˜è®¤ç»“æœã€‚ å¯ä»¥ä½¿ç”¨ applyMiddleware() æ¥å¢å¼º createStore(). è¿™ä¸æ˜¯å¿…é¡»çš„ï¼Œä½†å®ƒå¯ä»¥è®©ä½ é€šè¿‡ä¸€ä¸ªä¾¿åˆ©çš„æ–¹æ³•æè¿°å¼‚æ­¥çš„ action ã€‚ å¼‚æ­¥çš„ middleware æ¯”å¦‚ redux-thunk æˆ– redux-promise éƒ½åŒ…è£…äº† store çš„ dispatch() æ–¹æ³•ï¼Œå…è®¸ä½  dispatch é™¤äº† action ä»¥å¤–çš„å†…å®¹ï¼Œæ¯”å¦‚å‡½æ•°æˆ–è€… Promiseã€‚ä½ æ‰€ä½¿ç”¨çš„ middleware å¯ä»¥ä»¥è‡ªå·±çš„æ–¹å¼è§£æä½  dispatch çš„ä»»ä½•å†…å®¹ï¼Œå¹¶ç»§ç»­ä¼ é€’ actions ç»™ä¸‹ä¸€ä¸ª middlewareã€‚æ¯”å¦‚ï¼Œæ”¯æŒ Promise çš„ middleware èƒ½å¤Ÿæ‹¦æˆª Promiseï¼Œç„¶åä¸ºæ¯ä¸ª Promise å¼‚æ­¥åœ° dispatch ä¸€å¯¹ begin/end actionsã€‚ å½“æ•°æ®æµä¸Šæœ€åä¸€ä¸ª middleware dispatches ä¸€ä¸ª actions æ—¶ï¼Œå®ƒå¿…é¡»æ˜¯ä¸€ä¸ªæ™®é€šçš„å¯¹è±¡ã€‚è¿™æ˜¯åŒæ­¥çš„ Redux æ•°æ®æµå¼€å§‹çš„åœ°æ–¹ã€‚ ä¸­é—´ä»¶ï¼ˆMiddlewareï¼‰ä¸­é—´ä»¶æä¾›ä¸€ä¸ªç¬¬ä¸‰æ–¹çš„æ‰©å±•ç‚¹ï¼Œåœ¨ dispatching ä¸€ä¸ª action å’Œ å®ƒåˆ°è¾¾ reducer çš„ä¸­é—´æ—¶åˆ»ã€‚äººä»¬ä½¿ç”¨ä¸­é—´ä»¶æ¥æ‰“å°æ—¥å¿—ï¼Œè®°å½•å´©æºƒæŠ¥å‘Šï¼Œè°ƒç”¨ä¸€ä¸ªå¼‚æ­¥çš„ API, è·¯ç”±â€¦â€¦è¿™é‡Œæœ‰ä¸€äº›ä¾‹å­æ¥å±•ç¤ºä¸­é—´ä»¶çš„å¼ºå¤§ä½œç”¨ ç†è§£ä¸­é—´ä»¶ä¸­é—´ä»¶å¯ä»¥åšå¾ˆå¤šäº‹æƒ…ï¼Œç†è§£å®ƒæ˜¯ä»å“ªæ¥çš„éå¸¸é‡è¦ã€‚æˆ‘ä»¬é€šè¿‡ä½¿ç”¨ logging å’Œ crash reporting è¿™ä¿©ä¸ªä¾‹å­æ¥å±•ç¤ºä¸€ä¸ªä½¿ç”¨ä¸­é—´ä»¶çš„æ€ç»´è¿‡ç¨‹ã€‚ é—®é¢˜: æ—¥å¿—è®°å½•å°è¯•#1ï¼šæ‰‹åŠ¨è®°å½•æœ€åŸå§‹çš„è§£å†³æ–¹æ¡ˆå°±æ˜¯æ¯æ¬¡åœ¨è°ƒç”¨ store.dispatch(action) æ—¶è®°å½• action å’Œ ä¸‹ä¸€ä¸ª state. ä»£ç å¯èƒ½å°±æ˜¯ä¸‹é¢çš„æ ·å­ï¼šlet action = addTodo('Use Redux')console.log('dispatching',action)store.dispatch(action)console.log('next state', store.getState()) è¿™çœŸçš„æ˜¯ä¸€ç§å¾ˆæ“çš„åŠæ³•ã€‚ å°è¯•#2ï¼šåŒ…è£… DispatchæŠŠ logging æå–åˆ°ä¸€ä¸ªå‡½æ•°é‡Œé¢ï¼šfunction dispatchAndLog(store,action)&#123; console.log('dispatching',action) store.dispatch(action) console.log('next state',store.getState())&#125; è¿™æ ·æ¯æ¬¡è°ƒç”¨çš„æ—¶å€™é€šè¿‡ä½¿ç”¨è¿™ä¸ªå‡½æ•°æ¥æ›¿æ¢ store.dispatch()dispatchAndLog(store,addTOdo('USe Redux')) è¿™æ ·å·²ç»èƒ½è§£é—®é¢˜äº†ï¼Œä½†æ˜¯è¿™æ ·å¹¶ä¸ä¼˜é›…ã€‚ å°è¯•#3ï¼š Monkeypatching Dispatchå¦‚æœæˆ‘ä»¬åªåœ¨ store é‡Œé¢æ›¿æ¢ dispatch å‡½æ•°å‘¢ï¼Ÿ Redux çš„ store åªæ˜¯ä¸€ä¸ªæ‹¥æœ‰å‡ ä¸ªæ–¹æ³•çš„æ™®é€šå¯¹è±¡ï¼Œæ‰€ä»¥æˆ‘ä»¬å¯ä»¥æ”¹å†™ dispatchlet next = store.dispatchstore.dispath = fucntion dispatchAndLog (action)&#123; console.log('dispatching',action) let result = next(action) console.log('next state',soter.getState()) return reslut&#125; è¿™æ ·åŸºæœ¬ä¸Šå·²ç»è¾¾åˆ°äº†æˆ‘ä»¬çš„å¦–è¦æ±‚ï¼Œä¸è®ºä½ åœ¨å“ªé‡Œ dispatch ä¸€ä¸ª action, å®ƒéƒ½ä¿è¯ä¼šè¢«è®°å½•ä¸‹æ¥ã€‚è™½ç„¶æˆ‘ä»¬é€šè¿‡ Monkeypatching æ”¹å†™äº† store å†…éƒ¨çš„æ–¹æ³•ï¼Œä½†æš‚æ—¶å…ˆè¿™æ ·ã€‚]]></content>
      <categories>
        <category>æŠ€æœ¯</category>
      </categories>
      <tags>
        <tag>å­¦ä¹ ç¬”è®°</tag>
        <tag>Redux</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[Flex å¸ƒå±€]]></title>
    <url>%2F2016%2F05%2F04%2Fstep-to-flexbox%2F</url>
    <content type="text"><![CDATA[ç¬¬ä¸€æ¬¡æ¥è§¦ flex æ˜¯åœ¨å»å¹´ï¼Œå½“æ—¶æ˜¯æˆ‘ç¬¬ä¸€æ¬¡åšæ‰‹æœºé¡¹ç›®ï¼Œç»“æœå´å› ä¸ºå…¼å®¹æ€§é—®é¢˜ç»™æ‰å‘äº†ã€‚æŸ¥äº† can I use å‘ç°å®ƒåªæ”¯æŒåˆ°å®‰å“ 4.1, ç„¶è€Œæˆ‘ä»¬çš„è¦æ±‚æ˜¯è¦å…¼å®¹åˆ° 4.0 æ‰è¡Œçš„ã€‚æ‰€ä»¥ä¹‹åä¸€ç›´éƒ½æ²¡æ•¢ç”¨ï¼Œæ˜¨å¤©å¬åˆ°æœ‰äººè¯´ flex æ˜¯å¯ä»¥æ”¯æŒåˆ°å®‰å“ 2.1 ä»¥ä¸Šçš„ã€‚æˆ‘ä¸ä¿¡ï¼Œéš¾é“æ˜¯æˆ‘å½“æ—¶çœ‹é”™äº†ï¼Ÿï¼ä»Šå¤©åˆå»æŸ¥äº†ä¸€ä¸‹ï¼Œå‘ç°ç¡®å®æ˜¯ 4.1 å•Šã€‚ç›¯ç€å±å¹•æƒ³äº†åŠå¤©ï¼Œçªç„¶å‘ç° Can I Use ä¸Šä¸€ä¸ªæµè§ˆå™¨æµè§ˆå™¨ä½¿ç”¨ç‡ï¼Œæƒ³ç€è¯¥ä¸ä¼šç›´æ¥æŠŠä½¿ç”¨ç‡ä½çš„æµè§ˆå™¨ç»™å¿½ç•¥æ‰äº†å§ã€‚æ‰“å¼€è®¾ç½®ä¸€çœ‹ï¼ŒæœçœŸå¦‚æ­¤ï¼Œäºæ˜¯æŠŠæ•°æ®æºæ”¹æˆä¸­å›½ï¼Œæµè§ˆå™¨æœ€å°ä½¿ç”¨ç‡ 0.03% æœçœŸ 2.3 å‡ºæ¥äº†ã€‚ æ—¢ç„¶å¦‚æ­¤ï¼Œè¯´æ˜ flex è¿˜æ˜¯å¯ä»¥åœ¨ç”Ÿäº§ç¯å¢ƒä¸­ä½¿ç”¨äº†ã€‚é‚£ä¹ˆå°±å¥½å¥½åœ¨è¿‡ä¸€ä¸‹å®ƒçš„ç”¨æ³•å§ã€‚Flex å°±æ˜¯å¼¹æ€§å¸ƒå±€ï¼Œä»»ä½•ä¸€ä¸ªå…ƒç´ éƒ½å¯ä»¥è®¾ç½®ä¸º flex å¸ƒå±€ï¼Œå½“ä¸€ä¸ªå…ƒç´ è¢«è®¾ç½®ä¸º flex å¸ƒå±€åï¼Œå®ƒçš„å­å…ƒç´ ä¸Š float, vertical-align éƒ½ä¼šå¤±æ•ˆã€‚ div &#123;truedisplay:flex&#125; åŸºæœ¬æ¦‚å¿µ å›¾ç‰‡å‡ºè‡ª å°±æ˜¯è¯´ä¸€ä¸ª flex å®¹å™¨æœ‰ä¸¤ä¸ªè½´ï¼Œä¸€ä¸ªä¸»è½´ä¸€ä¸ªäº¤å‰è½´ã€‚æ¯ä¸ªè½´éƒ½æœ‰è‡ªå·±å¯¹åº”çš„èµ·å§‹ä½ç½®ï¼Œä¸»è½´çš„èµ·å§‹åˆ†åˆ«ä¸º main start å’Œ main end, äº¤å‰è½´çš„èµ·å§‹åˆ†åˆ«ä¸º cross start å’Œ cross end.å®¹å™¨å†…çš„é¡¹ç›®ä¼šé»˜è®¤æ²¿ç€ä¸»è½´æ’åˆ—ï¼Œä» main start åˆ° main end . felx å®¹å™¨å®¹å™¨ä¸Šå¯ä»¥ 6 ä¸ªå±æ€§ï¼Œåˆ†åˆ«ä¸ºï¼š flex-direction flex-wrap flex-flow justify-content align-items align-content flex-directionå†³å®šä¸»è½´æ–¹å‘ï¼Œä¹Ÿå°±æ˜¯é¡¹ç›®çš„æ’åˆ—æ–¹å‘ã€‚ MDN ä¸Šçš„è¯­æ³•è§£é‡Šï¼š /* The direction text is laid out in a line */flex-direction: row;/* Like &lt;row&gt;, but reversed */flex-direction: row-reverse;/* The direction in which lines of text are stacked */flex-direction: column;/* Like &lt;column&gt;, but reversed */flex-direction: column-reverse;/* Global values */flex-direction: inherit;flex-direction: initial;flex-direction: unset;&gt; å®ä¾‹ä¸‹é¢ä»å·¦åˆ°å³åˆ†åˆ«æ˜¯ row, row-reverse, colum, colum-reverse. å¯ä»¥æ˜æ˜¾çš„çœ‹å‡ºä»–ä»¬ä¹‹é—´çš„åŒºåˆ«ã€‚ flex-wrapflex-wrap å®šä¹‰å†…éƒ¨çš„ item æ˜¯æ’åˆ—åœ¨ä¸€è¡Œè¿˜æ˜¯è¯´å½“è¶…å‡ºæ—¶å¯ä»¥æ¢è¡Œçš„å±æ€§ã€‚å¦‚æœå…è®¸æ¢è¡Œï¼Œè¿™ä¸ªå±æ€§ä¹Ÿèƒ½è®©ä½ æ§åˆ¶å †å çš„æ–¹å‘ã€‚ è¯­æ³• flex-wrap: nowrap;flex-wrap: wrap;flex-wrap: wrap-reverse;&gt; å®ä¾‹ï¼š flex-flowflex-flow æ˜¯ flex-direction å’Œ flex-wrap çš„ç®€å†™ã€‚åˆå§‹å€¼ï¼š flex-directoin: row flex-wrap: nowrap è¯­æ³•ï¼š /* flex-flow: &lt;'flex-direction'&gt; */flex-flow: row;flex-flow: row-reverse;flex-flow: column;flex-flow: column-reverse;/* flex-flow: &lt;'flex-wrap'&gt; */flex-flow: nowrap;flex-flow: wrap;flex-flow: wrap-reverse;/* flex-flow: &lt;'flex-direction'&gt; and &lt;'flex-wrap'&gt; */flex-flow: row nowrap;flex-flow: column wrap;flex-flow: column-reverse wrap-reverse;&gt; justify-contentjustify-content ç”¨æ¥å®šä¹‰æµè§ˆå™¨å¦‚ä½•è®¡ç®—ä¸»è½´ä¸Š (main-axis) flex å†…éƒ¨çš„ item ä¹‹é—´çš„ç©ºéš™ã€‚å¯¹é½çš„è¿‡ç¨‹ä¼šåœ¨é•¿åº¦å’Œè‡ªåŠ¨å¤–ç¼–å‰§è®¡ç®—åè¿›è¡Œï¼Œä¹Ÿå°±æ˜¯è¯´åªè¦æœ‰ä¸€ä¸ªè®¾ç½®äº† flex-grow ä¸ä¸º 0 çš„å¼¹æ€§ (flexible) å…ƒç´ ï¼Œé‚£ä¹ˆ justify-content å°±ä¸ä¼šèµ·ä½œç”¨äº†ã€‚åˆå§‹å€¼ä¸º flex-start. è¯­æ³•ï¼š /* Pack flex items from the start */justify-content: flex-start;/* Pack items from the end */justify-content: flex-end;/* Pack items around the center */ justify-content: center;/* Distribute items evenlyThe first item at the start, the last at the end */justify-content: space-between;/* Distribute items evenlyItems have equal space around them */justify-content: space-around;&gt; å®ä¾‹ï¼š align-itemalign-item å±æ€§ç”¨æ¥å¯¹é½å½“å‰ flex line ä¸Šçš„ flex å…ƒç´ ï¼Œå’Œ justify-content ä¸€æ ·ï¼Œä¸è¿‡æ˜¯æ˜¯åœ¨ä¸»è½´çš„å‚ç›´æ–¹å‘ä¸Šä½œç”¨ã€‚åˆå§‹å€¼ä¸º stretch. è¯­æ³• /* Align to cross-start */align-items: flex-start;/* Align to cross-end */align-items: flex-end;/* Center items in the cross-axis */align-items: center;/* Align the items' baselines */align-items: baseline;/* Stretch the items to fit */align-items: stretch;&gt; ### å®ä¾‹ align-contentalign-content å±æ€§å®šä¹‰å½“äº¤å‰è½´ä¸Šæœ‰ç©ºé—´æ—¶ï¼Œflex å…ƒç´ åœ¨äº¤å‰è½´ä¸Šçš„å¯¹é½æ–¹å¼ã€‚å¯¹äºå•è¡Œçš„flex å…ƒç´ ï¼Œè¿™ä¸ªå±æ€§æ²¡æœ‰ä½œç”¨ã€‚é»˜è®¤å€¼ä¸ºï¼š stretch. è¯­æ³• /* Pack lines from the cross-axis start */align-content: flex-start;/* Pack lines to the cross-axis end */align-content: flex-end;/* Pack lines around the cross-axis center */align-content: center;/* Distribute lines along the cross-axis, start to end */align-content: space-between;/* Distribute lines along the cross-axis, equally spaced */align-content: space-around;/* Stretch lines to occupy the whole cross-axis */align-content: stretch;&gt; å®ä¾‹ flex é¡¹ç›®ï¼ˆå­å…ƒç´ ï¼‰flex é¡¹ç›®ä¸ŠåŒæ ·å¯ä»¥è®¾ç½® 6 ä¸ªå±æ€§ï¼š order flex-grow flex-shrink flex-basis align-self flex orderå®šä¹‰é¡¹ç›®åœ¨ä¸»è½´ä¸Šçš„ä¼˜å…ˆçº§ï¼Œè¶Šå°è¶Šé å‰ã€‚é»˜è®¤ä¸º 0. flex-growå®šä¹‰é¡¹ç›®çš„æ‹‰ä¼¸å› å­ï¼Œå°±æ˜¯è®¡ç®—è¿™ä¸ªé¡¹ç›®å¦‚ä½•æ¥å æ®å‰©ä½™çš„ç©ºé—´ã€‚é»˜è®¤ä¸º 1. flex-shrinkå®šä¹‰é¡¹ç›®çš„å› å­ã€‚é»˜è®¤ä¸º 1. order,flex-grow,flex-shrink å®ä¾‹ flex-basisflex-basis å®šä¹‰åœ¨åˆè¯•é˜¶æ®µ flex å æ®ä¸»è½´ç©ºé—´çš„åŸºç¡€ã€‚è¿™ä¸ªå±æ€§å†³å®šäº† content-box çš„å°ºå¯¸ï¼Œé™¤éä½ ä¿®æ”¹äº† box-sizing. åˆå§‹å€¼ä¸º auto. è¯­æ³• /* Specify &lt;'width'&gt; */flex-basis: 10em; flex-basis: 3px;flex-basis: auto;/* Intrinsic sizing keywords */flex-basis: fill;flex-basis: max-content;flex-basis: min-content;flex-basis: fit-content;/* Automatically size based on the flex itemâ€™s content */flex-basis: content;&gt; å®ä¾‹ flexflex æ˜¯ä¸€ä¸ªå®šä¹‰é¡¹ç›®æ”¹å˜å°ºå¯¸èƒ½åŠ›çš„ä¸€ä¸ªç¼©å†™å±æ€§ã€‚é»˜è®¤å€¼ï¼š flex-grow: 0 flex-shrink: 1 flex-basis: auto è¯­æ³• /* 0 0 auto */flex: none;/* One value, unitless number: flex-grow */flex: 2;/* One value, width/height: flex-basis */flex: 10em;flex: 30px;flex: auto;flex: content;/* Two values: flex-grow | flex-basis */flex: 1 30px;/* Two values: flex-grow | flex-shrink */flex: 2 2;/* Three values: flex-grow | flex-shrink | flex-basis */flex: 2 2 10%;&gt; align-selfå®šä¹‰é¡¹ç›®çš„å¯¹é½æ–¹å¼ï¼Œä¼šè¦†ç›– align-items å±æ€§ã€‚å¦‚æœåªè¦æœ‰ä¸€ä¸ªé¡¹ç›®çš„äº¤å‰è½´å¤–è¾¹è·è®¾ç½®ä¸º auto, é‚£ä¹ˆ align-self å°±ä¼šè¢«å¿½ç•¥ã€‚é»˜è®¤å€¼ä¸º auto. è¯­æ³•å’Œ align-items ç›¸åŒ å®ä¾‹ iframe { min-height: 300px; }]]></content>
      <categories>
        <category>æŠ€æœ¯</category>
      </categories>
      <tags>
        <tag>å­¦ä¹ ç¬”è®°</tag>
        <tag>flexbox</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[ã€ç¿»è¯‘å‘ã€‘èµ°è¿› Redux ä¹‹åŸºç¡€ç¯‡(äºŒ)]]></title>
    <url>%2F2016%2F05%2F03%2Fstep-to-redux-2%2F</url>
    <content type="text"><![CDATA[ç´§æ¥ä¸Šä¸€ç¯‡èµ°è¿› Redux ä¹‹åŸºç¡€ç¯‡(ä¸€),æ¥ä¸‹æ¥ä¼šè·Ÿç€æ–‡æ¡£ä»ä¸‹é¢ä¸‰ä¸ªç‚¹å¼€å§‹ã€‚ æ•°æ®æµ ä¸ React é…åˆ å®ä¾‹ï¼šTodoList æ•°æ®æµRedux çš„æ¶æ„å›´ç»•ä¸å¦‚ä½•æ­å»ºä¸€ä¸ªä¸¥æ ¼çš„å•å‘æ•°æ®æµã€‚ è¿™æ„å‘³ç€æ‰€æœ‰çš„æ•°æ®éƒ½æœ‰éµå¾ªä¸€ä¸ªåŒæ ·çš„ç”Ÿå‘½å‘¨æœŸæ¨¡å¼ï¼Œå¯ä»¥è®©æ•´ä¸ªåº”ç”¨å˜å¾—å¯é¢„æµ‹ä¹Ÿæ›´åŠ æ˜“äºç†è§£ã€‚åœ¨ Redux åº”ç”¨ä¸­ï¼Œæ‰€æœ‰çš„æ•°æ®ç”Ÿå‘½å‘¨æœŸåˆ†ä¸ºå¦‚ä¸‹å››ä¸ªæ­¥éª¤ï¼š 1 ä½ ä¸»åŠ¨è°ƒç”¨ store.dispatch(action)Action æ˜¯ä¸€ä¸ªç”¨æ¥æè¿°å‘ç”Ÿäº†äº‹æƒ…çš„å¯¹è±¡ã€‚æ¯”å¦‚ï¼š&#123;type:'ADD_TODO',text:'todo\'s content'&#125;&#123;type: 'FETCH_USER_SUCCESS', response: &#123;id: 3, name: 'Mary'&#125;&#125; å¯ä»¥è®¤ä¸º action æ˜¯ä¸€ä¸ªäº‹ä»¶çš„ç®€çŸ­ç‰‡æ®µæè¿°ã€‚ä½ å¯ä»¥åœ¨ä»»ä½•åœ°æ–¹è°ƒç”¨ store.dispatch(action) ï¼ŒåŒ…æ‹¬ç»„ä»¶å’Œ XHR ä¸­ï¼Œç”šè‡³å¯ä»¥åœ¨å®šæ—¶å™¨ä¸­è°ƒç”¨ã€‚ 2 Redux store è°ƒç”¨ä½ æä¾›çš„ reducer å‡½æ•°store ä¼šä¼ é€’ä¿©ä¸ªå‚æ•°ç»™ reducerï¼šå½“å‰çš„ state å’Œ action. æ¯”å¦‚ï¼Œåœ¨ä¸€ä¸ª todo åº”ç”¨ä¸­ï¼Œæ ¹ reducer ä¼šæ”¶åˆ°ç±»ä¼¼ä¸‹é¢è¿™æ ·çš„å‚æ•°ï¼š let previousState = &#123; visibleTodoFilter: 'SHOW_ALL', todos: [&#123; text: 'Read the docs', complete: false &#125;]&#125;let action = &#123; type: 'ADD_TODO', text: 'Understand the flow'&#125;// nextState ç”± todoApp è¿™ä¸ªæ ¹ reducer æ¥ç”Ÿæˆlet nextState = todoApp(previousState, action) éœ€è¦æ³¨æ„çš„æ˜¯ reducer æ˜¯ä¸€ä¸ªçº¯å‡½æ•°ï¼Œæ²¡æœ‰å‰¯ä½œç”¨çš„ï¼Œä»…ä»…æ˜¯è®¡ç®—ä¸‹ä¸€ä¸ª state . ä»–åº”è¯¥æ˜¯å¯ä»¥å®Œå…¨é¢„æµ‹çš„ï¼Œå¯¹äºåŒæ ·çš„å‚æ•°ï¼Œæ— è®ºè°ƒç”¨å¤šå°‘æ¬¡éƒ½åº”è¯¥è¿”å›ä¸€ä¸ªåŒæ ·å€¼ã€‚ç±»ä¼¼äº API è°ƒç”¨æˆ–è€…è·¯ç”±çš„å˜åŒ–éƒ½åº”è¯¥åœ¨ action è¢« dispatch ä¹‹å‰ã€‚ 3 æ ¹ reducer å¯ä»¥åˆå¹¶å¤šä¸ªå­ reducer çš„è¾“å‡ºæ¥ç”Ÿæˆä¸€ä¸ªå•ä¸€çš„ state æ ‘ã€‚å¦‚ä½•ç»„åˆæ ¹ reducer å®Œå…¨ç”±ä½ æ¥å†³å®šã€‚ Redux æä¾›äº† combineRedux() è¿™ä¸ªå¸®åŠ©å‡½æ•°ï¼Œåœ¨æŠŠæ ¹ reducer åˆ†ç¦»æˆç‹¬ç«‹çš„å‡½æ•°å»ç®¡ç†æ•´ä¸ª state æ ‘çš„ä¸€ä¸ªåˆ†æ”¯æ—¶å¾ˆæœ‰å¸®åŠ©ã€‚æˆ‘ä»¬æ¥çœ‹ä¸€ä¸‹ combineRedusers() è¿™ä¸ªå‡½æ•°æ€ä¹ˆå·¥ä½œã€‚å‡è®¾ä½ æœ‰ä¿©ä¸ª reducer ï¼Œ ä¸€ä¸ªç”¨æ¥ç®¡ç† todo åˆ—è¡¨ï¼Œå¦ä¸€ä¸ªç”¨æ¥ç®¡ç†å½“å‰é€‰ä¸­çš„è¿‡æ»¤çŠ¶æ€ï¼š function todos(state = [], action) &#123; // Somehow calculate it... return nextState &#125;function visibleTodoFilter(state = &apos;SHOW_ALL&apos;, action) &#123; // Somehow calculate it... return nextState &#125;let todoApp = combineReducers(&#123; todos, visibleTodoFilter &#125;) å½“è§¦å‘ä¸€ä¸ª action çš„æ—¶å€™ï¼Œ é€šè¿‡ combineRedusers è¿”å›çš„ todoApp å°†ä¼šè°ƒç”¨æ‰€æœ‰ reducerï¼šlet nextTodos = todos(state.todos, action)let nextVisibleTodoFilter = visibleTodoFilter(state.visibleTodoFilter, action) å®ƒä¼šæŠŠæ¯ä¸ª reducer è¿”å›çš„ state åˆå¹¶æˆä¸€ä¸ªå•ç‹¬çš„ state æ ‘return &#123; todos: nextTodos, visibleTodoFilter: nextVisibleTodoFilter &#125; ä½ ä¹Ÿå¯ä»¥é€‰æ‹©ä¸ç”¨ combineRedusers ï¼Œæ¯•ç«Ÿä»–åªæ˜¯å¥½ç”¨çš„è¾…åŠ©å·¥å…·ï¼Œä½ å¯ä»¥è‡ªå·±æ¥å®ç°ä½ çš„è·Ÿ reducer. 4 Redux store ä¼šä¿å­˜ç”±æ ¹ reducer è¿”å›çš„æ•´ä¸ª state æ ‘ç°åœ¨è¿™ä¸ªæ–°çš„ state æ ‘å°±æ˜¯å½“å‰åº”ç”¨çš„ä¸‹ä¸€ä¸ª state ã€‚æ‰€æœ‰é€šè¿‡ store.subscribe(listener) æ³¨å†Œäº†ç›‘å¬äº‹ä»¶çš„ç›‘å¬å‡½æ•°éƒ½ä¼šè¢«è°ƒç”¨ï¼› ç›‘å¬å¯¹è±¡å¯èƒ½ä¼šè°ƒç”¨ store.getState() æ¥è·å–å½“å‰çš„ state .ç°åœ¨ï¼Œæ•´ä¸ªè§†å›¾éƒ½å¯ä»¥é€šè¿‡æ–°çš„ state æ¥æ›´æ–°ã€‚å¦‚æœä½ ä½¿ç”¨ React Redux åšä¸ºè§†å›¾ç»‘å®šå·¥å…·ï¼Œé‚£ä¹ˆè¿™å°±æ˜¯ component.setState(newState) è°ƒç”¨çš„èŠ‚ç‚¹ã€‚ å’Œ React é…åˆä½¿ç”¨è™½ç„¶ Redux å’Œ React ä¹‹é—´æ²¡æœ‰è”ç³»ï¼Œä½†æ˜¯ Redux ç¡®å®å’Œç±»ä¼¼äº React å’Œ Deku è¿™ç±»å¯ä»¥ç”¨æ•°æ®çŠ¶æ€ä¿©æè¿° UI çš„æ¡†æ¶é…åˆçš„å¾ˆå¥½ã€‚æˆ‘ä»¬å°†ä¼šä½¿ç”¨ React æ¥æ­å»ºä¸€ä¸ªç®€å•çš„ Todo åº”ç”¨ã€‚ å®‰è£… React ReduxReact bindings å¹¶æ²¡æœ‰é»˜è®¤åŒ…æ‹¬åœ¨ Redux ä¸­ï¼Œæˆ‘ä»¬éœ€è¦å•ç‹¬çš„å®‰è£…ï¼š npm install --save react-redux å±•ç¤ºå‹ç»„ä»¶ (Presentational Components) å’Œå®¹å™¨å‹ç»„ä»¶ (Container Components)Redux çš„ React bindings ä¿¡å¥‰ å±•ç¤ºå‹ç»„ä»¶å’Œå®¹å™¨å‹ç»„ä»¶åˆ†ç¦» â€” å±•ç¤ºå‹ç»„ä»¶ å®¹å™¨å‹ç»„ä»¶ ç›®çš„ ç•Œé¢çœ‹èµ·æ¥çš„æ ·å­ï¼ˆæ ‡è®°ï¼Œæ ·å¼ï¼‰ äº‹æƒ…æ˜¯æ€æ ·å·¥ä½œçš„ï¼ˆæ•°æ®è·å–ï¼ŒçŠ¶æ€æ›´æ–°ï¼‰ æ„è¯†åˆ° Redux No Yes è¯»å–æ•°æ® ä»çˆ¶ props ä¸­è¯»å– é¡¶ Redux state ä¸­è®¢é˜…è·å– ä¿®æ”¹æ•°æ® ä» props ä¸­è°ƒç”¨å›è°ƒå‡½æ•° åˆ†å‘ (dispatch) Redux actions Are written æ‰‹å†™ é€šå¸¸ç”± React Redux ç”Ÿæˆ å¤§å¤šæ•°ç»„ä»¶éƒ½åº”è¯¥è¢«å†™æˆå±•ç¤ºå‹ç»„ä»¶ï¼Œä½†æ˜¯æˆ‘ä»¬ä¹Ÿéœ€è¦ç”Ÿæˆä¸€äº›å®¹å™¨å‹ç»„ä»¶ç±»æŠŠå®ƒä»¬å’Œ Redux store è¿æ¥èµ·æ¥ã€‚ æŠ€æœ¯ä¸Šè¯´ï¼Œä½ å¯ä¸€é€šè¿‡ä½¿ç”¨ store.subscribe() æ¥æ‰‹å†™å®¹å™¨å‹ç»„ä»¶ã€‚ä½†æ˜¯æˆ‘ä»¬ä¸å»ºè®®è¿™æ ·åšï¼Œå› ä¸º React Redux åšäº†å¾ˆå¤šä½ å¾ˆéš¾ç›´æ¥æ‰‹å†™å‡ºæ¥çš„æ€§èƒ½ä¼˜åŒ–ã€‚æ‰€ä»¥ï¼Œæ¯”èµ·æ‰‹å†™å®¹å™¨å‹ç»„ä»¶ï¼Œæˆ‘ä»¬æ›´å»ºè®®é€šè¿‡ React Redux æä¾›çš„ connetc() å‡½æ•°æ¥ç”Ÿæˆå®ƒã€‚ è®¾è®¡ç»„ä»¶å±‚çº§æˆ‘ä»¬çš„è®¾è®¡å¾ˆç®€å•ã€‚æˆ‘ä»¬æƒ³è¦å±•ç¤ºä¸€ä¸ª todo å†…å®¹åˆ—è¡¨ã€‚ä¸€ä¸ªæŒ‰é’®ï¼Œç”¨æ¥æ ‡è®°ä¸€ä¸ª todo å†…å®¹æ˜¯å¦å®Œæˆã€‚ä¸€ä¸ªç”¨æ¥æ·»åŠ æ–° todo çš„åœ°æ–¹ã€‚åœ¨é¡µè„šéƒ¨ï¼Œæˆ‘ä»¬éœ€è¦ä¸€ä¸ªåˆ‡æ¢é”®æ¥å±•ç¤ºæ‰€æœ‰çš„ã€å®Œæˆçš„æˆ–è€…æœªå®Œæˆçš„ todos. å±•ç¤ºå‹ç»„ä»¶é€šè¿‡ä¸‹é¢è¿™äº›å±•ç¤ºå‹ç»„ä»¶ï¼Œæˆ‘ä»¬å¯ä»¥æ¦‚æ‹¬å‡ºä¸€ä¸ª props å±‚çº§ã€‚ TodoList æ˜¯ä¸€ä¸ªç”¨æ¥å±•ç¤ºå¯ç”¨ Todos çš„åˆ—è¡¨ todos: Array ä¸€ä¸ªå†…å®¹ä¸º { id, text, completed } æ ·å­çš„åˆ—è¡¨ onTodoClick(id: number) ä¸€ä¸ªå›è°ƒå‡½æ•°ï¼Œå½“ä¸€ä¸ª todo è¢«ç‚¹å‡»çš„æ—¶å€™ Todo ä¸€ä¸ªå•ç‹¬çš„ todo é¡¹ç›® text: string è¦å±•ç¤ºçš„æ–‡å­— completed: boolean todo æ˜¯å¦è¢«å®Œæˆçš„çŠ¶æ€ onClick ä¸€ä¸ªå›è°ƒå‡½æ•°ï¼Œå½“ä¸€ä¸ª todo è¢«ç‚¹å‡»æ—¶è°ƒç”¨ Link ä¸€ä¸ªç”¨å›è°ƒçš„é“¾æ¥ onClick è¿™ä¸ªé“¾æ¥è¢«ç‚¹å‡»æ—¶çš„å›è°ƒ Footer ç”¨æ¥æ”¹å˜å½“å‰æ˜¾ç¤º todo å†…å®¹çš„åœ°æ–¹ App è·Ÿç»„ä»¶ï¼Œç”¨æ¥æ¸²æŸ“æ‰€æœ‰å…¶å®ƒçš„ä¸œè¥¿ å®ƒä»¬æè¿°è¿™ä¸ªåº”ç”¨çœ‹èµ·æ¥çš„æ ·å­ï¼Œä½†æ˜¯ä¸çŸ¥é“æ•°æ®ä»å“ªé‡Œæ¥ï¼Œä¹Ÿä¸çŸ¥é“å¦‚ä½•æ”¹å˜ä»–ä»¬ã€‚åªæ˜¯æ¸²æŸ“æˆ‘ä»¬ç»™å®ƒçš„æ•°æ®ã€‚å¦‚æœä½ è¦ä» Redux è¿ç§»åˆ°å…¶å®ƒæ¡†æ¶ï¼Œè¿™äº›ç»„ä»¶å‡ ä¹éƒ½æ˜¯å¯ä»¥ä¸ç”¨æ”¹åŠ¨çš„ã€‚å®ƒä»¬å’Œ Redux ä¹‹é—´æ²¡æœ‰è”ç³»ã€‚ å®¹å™¨å‹ç»„ä»¶æˆ‘ä»¬åŒæ ·éœ€è¦ä¸€äº›å®¹å™¨å‹ç»„ä»¶æ¥æŠŠå±•ç¤ºå‹ç»„ä»¶è¿æ¥åˆ° Redux. æ¯”å¦‚ï¼ŒTodoList ç»„ä»¶éœ€è¦ä¸€ä¸ªå®¹å™¨ VisibleTodoList ç”¨æ¥ä» Redux å»è®¢é˜…æ•°æ®æ¥çŸ¥é“å¦‚ä½•ä½¿ç”¨å½“å‰çš„å¯è§†æ€§ç­›é€‰æ¡ä»¶ (visibility filter). ä¸ºäº†æ›´æ”¹å¯è§†æ€§ç­›é€‰æ¡ä»¶ï¼Œæˆ‘ä»¬æä¾›ä¸€ä¸ª FilterLink å®¹å™¨æ¥æ¸²æŸ“ Link ç”¨æ¥ dispatches ä¸€ä¸ªåˆé€‚çš„ action åœ¨ç‚¹å‡»çš„æ—¶å€™ï¼š VisibleTodoList é€šè¿‡å½“å‰çš„å¯è§†æ€§ç­›é€‰æ¡ä»¶æ¥è¿‡æ»¤è¦å±•ç¤ºçš„å†…å®¹å¹¶æ¸²æŸ“ä¸€ä¸ª TodoList FilterLink è·å¾—å½“å‰çš„å¯è§†æ€§ç­›é€‰æ¡ä»¶å¹¶æ¸²æŸ“ Link filter: string è¡¨ç¤ºä¸€ä¸ªå¯è§†æ€§ç­›é€‰æ¡ä»¶ å…¶å®ƒç»„ä»¶æœ‰æ—¶ï¼Œæˆ‘ä»¬éš¾ä»¥å»åŒºåˆ†ä¸€ä¸ªç»„ä»¶æ˜¯å±•ç¤ºå‹è¿˜æ˜¯å®¹å™¨å‹çš„ã€‚æ¯”å¦‚ï¼Œæœ‰æ—¶è¡¨å•å’Œå‡½æ•°æ˜¯äº’ç›¸ä¾èµ–çš„ï¼Œ å°±åƒè¿™ä¸ªå°å‹çš„ç»„ä»¶ï¼š AddTodo ä¸€ä¸ªæœ‰ â€˜æ·»åŠ â€™ æŒ‰é’®çš„è¾“å…¥æ¡† æŠ€æœ¯ä¸Šè¯´ï¼Œæˆ‘æ²¡å‘¢å¯ä»¥æŠŠå®ƒåˆ†ç¦»æˆä¿©ä¸ªç»„ä»¶ï¼Œä½†æ˜¯è¿™æ ·æ˜æ˜¾å¤ªç¹çäº†ã€‚å½“é¡¹ç›®å˜å¾—è´Ÿè´£å’Œåºå¤§çš„æ—¶å€™ï¼Œæˆ‘ä»¬å¯ä»¥æŠŠå®ƒåˆ†ç¦»å¼€ï¼Œä½†æ˜¯ç°åœ¨çš„è¯ï¼Œå°±è¿™æ ·è®©ä»–ä»¬æ··åˆåœ¨ä¸€èµ·å§ã€‚ å®ç°ç»„ä»¶å±•ç¤ºå‹ç»„ä»¶å°±æ˜¯æ™®é€šçš„ React ç»„ä»¶ï¼Œå°±ä¸è¯¦ç»†ä»‹ç»äº†ã€‚TodoList.js import React, &#123; PropTypes &#125; from 'react'import Todo from './Todo'const TodoList = (&#123; todos, onTodoClick &#125;) =&gt; ( &lt;ul&gt; &#123;todos.map(todo =&gt; &lt;Todo key=&#123;todo.id&#125; &#123;...todo&#125; onClick=&#123;() =&gt; onTodoClick(todo.id)&#125; /&gt; )&#125; &lt;/ul&gt;)TodoList.propTypes = &#123; todos: PropTypes.arrayOf(PropTypes.shape(&#123; id: PropTypes.number.isRequired, completed: PropTypes.bool.isRequired, text: PropTypes.string.isRequired &#125;).isRequired).isRequired, onTodoClick: PropTypes.func.isRequired&#125;export default TodoList å®¹å™¨å‹ç»„ä»¶æ¥ä¸‹æ¥æˆ‘ä»¬é€šè¿‡ç”Ÿæˆå®¹å™¨å‹ç»„ä»¶æ¥æŠŠå±•ç¤ºå‹ç»„ä»¶å’Œ Redux é“¾æ¥èµ·æ¥ã€‚æŠ€æœ¯ä¸Šè¯´ï¼Œä¸€ä¸ªå®¹å™¨å‹ç»„ä»¶åªæ˜¯ä¸€ä¸ª React ç»„ä»¶ï¼Œé€šè¿‡ä½¿ç”¨ store.subscribe() æ¥è¯»å–ä¸€éƒ¨åˆ† Redux state tree å¹¶ä¸”æä¾› props ç»™ä¸€ä¸ªå±•ç¤ºå‹ç»„ä»¶ç”¨æ¥æ¸²æŸ“ã€‚ä½ å¯ä»¥æ‰‹å†™è¿™ä¸ªç»„ä»¶ï¼Œä½†æ˜¯æˆ‘ä»¬å»ºè®®ä½¿ç”¨ Redux æä¾›çš„ connect() å‡½æ•°æ¥ç”Ÿæˆè¿™äº›å®¹å™¨å‹ç»„ä»¶ï¼Œå®ƒæä¾›äº†å¾ˆå¤šæœ‰ç”¨çš„ä¼˜åŒ–å»é˜»æ­¢ä¸€äº›ä¸å¿…è¦é‡æ–°æ¸²æŸ“ã€‚ ä¸ºäº†ä½¿ç”¨å®ƒ connect() , ä½ éœ€è¦é¡¶ä¸€ä¸ªå«åš mapStateToProps çš„ç‰¹æ®Šå‡½æ•°ï¼Œç”¨æ¥æŒ‡æ˜å¦‚ä½•è½¬æ¢å½“å‰çš„ Redux store state æˆä¸ºä½ æƒ³è¦ä¼ é€’ç»™å±•ç¤ºå‹ç»„ä»¶çš„ props. æ¯”å¦‚ï¼Œ VisibleTodoList éœ€è¦å»è®¡ç®— todos æ¥ä¼ é€’ç»™ TodoList, æ‰€ä»¥æˆ‘ä»¬å®šä¹‰ä¸€ä¸ªå‡½æ•°é€šè¿‡ state.visibilityFilter ç”¨æ¥è¿‡æ»¤ state.todos, å¹¶ä¸”åœ¨ mapStateToProps ä¸­ä½¿ç”¨å®ƒï¼š const getVisibleTodos = (todos, filter) =&gt; &#123; switch (filter) &#123; case 'SHOW_ALL': return todos case 'SHOW_COMPLETED': return todos.filter(t =&gt; t.completed) case 'SHOW_ACTIVE': return todos.filter(t =&gt; !t.completed) &#125;&#125;const mapStateToProps = (state) =&gt; &#123; return &#123; todos: getVisibleTodos(state.todos, state.visibilityFilter) &#125;&#125; é™¤äº†è¯»å– state ä¹‹å¤–ï¼Œ å®¹å™¨å‹ç»„ä»¶å¯ä»¥ dispatch actions. é€šè¿‡åŒæ ·çš„æ–¹å¼ï¼Œä½ å¯ä»¥å®šä¹‰ä¸€ä¸ªåä¸º mapDispatchToProps() çš„å‡½æ•°å»æ¥æ”¶ dispatch() æ–¹æ³•ï¼Œå¹¶è¿”å›ä¸€ä¸ªå›è°ƒ props ç”¨æ¥æ³¨å…¥åˆ°ä½ æƒ³è¦çš„å±•ç¤ºå‹ç»„ä»¶ä¸­ã€‚æ¯”å¦‚ï¼Œæˆ‘ä»¬æƒ³è¦ VisibleTodoList å»æ³¨å…¥ä¸€ä¸ªåä¸º onTodoClisk çš„ prop åˆ° TodoList ç»„ä»¶ä¸­ï¼Œè€Œä¸”æˆ‘ä»¬æƒ³è¦ onTodoClick å» dispatch ä¸€ä¸ª `TOGGLE_TODOâ€™ action: const mapDispatchToProps = (dispatch) =&gt; &#123; return &#123; onTodoClick: (id) =&gt; &#123; dispatch(toggleTodo(id)) &#125; &#125;&#125; æœ€åï¼Œæˆ‘ä»¬é€šè¿‡è°ƒç”¨ connect() æ¥ç”Ÿæˆä¸€ä¸ª VisibleTodoList å¹¶ä¼ é€’è¿™ä¸¤ä¸ªå‡½æ•°ï¼š import &#123; connect &#125; from 'react-redux'const VisibleTodoList = connect( mapStateToProps, mapDispatchToProps)(TodoList)export default VisibleTodoList è¿™äº›éƒ½æ˜¯ React Redux çš„åŸºç¡€ API, ä½†æ˜¯è¿™æœ‰ä¸€äº›å¿«æ·æ–¹å¼å’Œå¼ºå¤§çš„é€‰é¡¹ï¼Œæ‰€ä»¥æˆ‘ä»¬é¼“åŠ±ä½ å»ä»”ç»†æŸ¥çœ‹ è¿™ä¸ªæ–‡æ¡£. å¦‚æœä½ æ‹…å¿ƒ mapStateToProps åˆ›å»ºæ–°å¯¹è±¡çš„è¿‡ç¨‹ï¼Œä½ å¯èƒ½éœ€è¦å»äº†è§£ computing derived data with reselect ä¼ é€’åˆ° Storeæ‰€æœ‰çš„å®¹å™¨å‹ç»„ä»¶éœ€è¦è¿æ¥åˆ° Redux store è¿™æ ·å®ƒä»¬æ‰èƒ½è®¢é˜…å®ƒã€‚ä¸€ä¸ªæ–¹å¼æ˜¯æŠŠå®ƒåšä¸ºä¸€ä¸ª prop ä¼ é€’ç»™æ¯ä¸€ä¸ªå®¹å™¨å‹ç»„ä»¶ã€‚ç„¶è€Œé‚£æ ·è¿‡äºç¹çï¼Œæˆ‘ä»¬æ¨èçš„æ–¹å¼æ˜¯é€šè¿‡ä½¿ç”¨ç‰¹å®šçš„ React Redux ç»„ä»¶ &lt;Provider&gt; å»é»‘é­”æ³•èˆ¬çš„ä½¿ store å¯ç”¨ç»™åº”ç”¨ä¸­çš„æ‰€æœ‰å®¹å™¨å‹ç»„ä»¶è€Œä¸ç”¨ä¸“é—¨å»ä¼ é€’å®ƒã€‚ä½ åªéœ€è¦åœ¨æ¸²æŸ“è·Ÿç»„ä»¶çš„æ—¶å€™è°ƒç”¨å®ƒä¸€æ¬¡ã€‚ Index.js import React from 'react'import &#123; render &#125; from 'react-dom'import &#123; Provider &#125; from 'react-redux'import &#123; createStore &#125; from 'redux'import todoApp from './reducers'import App from './components/App'let store = createStore(todoApp)render( &lt;Provider store=&#123;store&#125;&gt; &lt;App /&gt; &lt;/Provider&gt;, document.getElementById('root')) å®ä¾‹ï¼šTodoListç›´æ¥çœ‹æ–‡æ¡£ï¼Œè™½ç„¶äº†è§£åˆ°å¾ˆå¤šä¸“æœ‰åæ¬¡å’Œæ–¹æ³•ï¼Œä½†è¿˜æ˜¯çœ‹ä¸å‡ºä¸ªæ‰€ä»¥ç„¶æ¥ã€‚æ‰€ä»¥è¿˜æ˜¯å¾—çœ‹ä»£ç ï¼Œè¿™é‡Œæ˜¯å®˜æ–¹çš„ TodoList æºç ï¼Œç»“åˆè¿™ä¸¤ç¯‡æ–‡ç« åº”è¯¥å°±èƒ½å¾ˆå¥½çš„ç†è§£äº†ã€‚æˆ‘åœ¨è¿™é‡Œé‡åˆ°äº†å‡ ä¸ªé—®é¢˜ webpack ä¸€ç›´æŠ¥é”™æ‰¾ä¸åˆ°å…¥å£æ–‡ä»¶ â€˜./indexâ€™ , æœ€åå‘ç° babel çš„å‘ã€‚ Babel å‡çº§åˆ° 6.0 ä»¥åéœ€è¦åœ¨ .babelrc è¿™ä¸ªæ–‡ä»¶ä¸­æŒ‡æ˜è¦ç¼–è¯‘ js çš„æ–‡ä»¶ç±»å‹ï¼Œå¦åˆ™ç¼–è¯‘ä¼šæŠ¥é”™ã€‚ &#123;"presets": ["es2015", "react"]&#125; é¡µé¢æ¸²æŸ“å‡ºæ¥åï¼Œç‚¹å‡»æ·»åŠ ä»€ä¹ˆéƒ½æ˜¯å¯ä»¥æ­£å¸¸è¿è¡Œçš„ã€‚ä½†æ˜¯ç‚¹å‡»ç­›é€‰çš„æ—¶å€™è€å¸ˆæŠ¥é”™ï¼Œè€Œä¸”æŠ¥çš„é”™è«åå…¶å¦™ã€‚äºæ˜¯ä¸€æ­¥ä¸€æ­¥æ‰“æ–­ç‚¹æ¥çœ‹ï¼Œæœ€åå‘ç°æ˜¯ Footer.js é‡Œé¢ filter å¯¹åº”çš„ action æ‹¼å†™é”™è¯¯å¯¼è‡´åé¢çš„ç»„ä»¶æ‰¾ä¸åˆ°å¯¹åº”çš„ action import React from 'react'import FilterLink from '../containers/FilterLink'const Footer = () =&gt; (&lt;p&gt; Show: &#123;" "&#125; &lt;FilterLink filter="SHOW_ALL"&gt; All &lt;/FilterLink&gt; &#123;", "&#125; &lt;FilterLink filter="SHOW_ACTIVE"&gt; Active &lt;/FilterLink&gt; &#123;", "&#125; &lt;FilterLink filter="SHOW_COMPLETED"&gt; Completed &lt;/FilterLink&gt;&lt;/p&gt;)export default Footer å¯è§åº”ç”¨çš„ action è¿˜æ˜¯éœ€è¦ä¸“é—¨å•ç‹¬ç»´æŠ¤ä¸€ä¸ªæ–‡ä»¶ï¼Œå°†æ‰€æœ‰çš„ action éƒ½å®šä¹‰ä¸ºå˜é‡ç„¶åæš´éœ²å‡ºæ¥ï¼Œè¿™æ ·å¦‚æœåé¢æœ‰æ‹¼å†™é”™è¯¯çš„è¯ï¼Œé‚£ä¹ˆåœ¨ç¼–è¯‘é˜¶æ®µå°±å¯ä»¥å‘ç°é—®é¢˜äº†ã€‚ å‚è€ƒBasics|Redux]]></content>
      <categories>
        <category>æŠ€æœ¯</category>
      </categories>
      <tags>
        <tag>å­¦ä¹ ç¬”è®°</tag>
        <tag>redux</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[ã€ç¿»è¯‘å‘ã€‘èµ°è¿› Redux ä¹‹åŸºç¡€ç¯‡(ä¸€)]]></title>
    <url>%2F2016%2F04%2F26%2Fstep-to-redux-1%2F</url>
    <content type="text"><![CDATA[Redux çš„ä¸‰ä¸ªåŸåˆ™ æ•´ä¸ªåº”ç”¨çš„çŠ¶æ€éƒ½ä»¥ä¸€ä¸ªå¯¹è±¡æ ‘çš„å½¢å¼ä¿å­˜åœ¨ä¸€ä¸ªå•ä¸€çš„ store ä¸­ å”¯ä¸€å»æ”¹å˜è¿™ä¸ªå¯¹è±¡æ ‘çš„æ–¹æ³•å°±æ˜¯é€šè¿‡å»è§¦å‘ action,ä¸€ä¸ªç”¨æ¥æè¿°å‘ç”Ÿäº†ä»€ä¹ˆäº‹æƒ…çš„å¯¹è±¡ é€šè¿‡ç¼–å†™çº¯å‡½æ•° reducersï¼Œå»æè¿°è¿™ä¸ª action å¦‚ä½•æ”¹å˜äº†æ•´ä¸ªå¯¹è±¡æ ‘ ActionAction å°±æ˜¯æ‰¿è½½äº†è¦ä»ä½ çš„åº”ç”¨ä¼ é€ç»™ store çš„ä¿¡æ¯ã€‚å®ƒä»¬åªæ˜¯ store çš„ä¿¡æ¯æ•°æ®æ¥æºã€‚å¯ä»¥é€šè¿‡ store.dispatch() æ¥ä¼ é€’ action.action å¯èƒ½é•¿è¿™ä¸ªæ ·å­ï¼šconst ADD_TODO = 'ADD_TODO'&#123; type: ADD_TODO, text: 'Bulid my first Redux App'&#125; Actions å°±æ˜¯æ™®é€šçš„ JavaScript å¯¹è±¡ï¼Œä½†æ˜¯å¿…é¡»æœ‰ type å±æ€§ï¼Œç”¨æ¥æŒ‡å®šæ˜¯å‘ç”Ÿäº†å“ªç§ç±»å‹çš„æ“ä½œã€‚ Types åº”è¯¥è¢«å®šä¹‰ä¸ºå­—ç¬¦ä¸²å¸¸é‡ã€‚å½“ä½ çš„é¡¹ç›®å˜çš„åºå¤§èµ·æ¥æ—¶ï¼Œä½ å¯èƒ½éœ€è¦æŠŠå®ƒä»¬ç§»åŠ¨åˆ°ä¸€ä¸ªå•ç‹¬éš”ç¦»çš„æ¨¡å—é‡Œé¢ã€‚import &#123; ADD_TODO, REMOVE_TODO &#125; from '../actionTypes' ä¸ type ä¸åŒçš„æ˜¯ï¼Œæ•´ä¸ª action çš„ç»“æ„å®Œå…¨ç”±ä½ æ¥å†³å®šã€‚ä¸è¿‡å¯ä»¥å‚è€ƒ Flux Standard Action é‡Œé¢çš„æŒ‡å—æ¥äº†è§£å¦‚ä½•æ›´å¥½çš„ç»„ç»‡ action çš„ç»“æ„ã€‚ Action CreatorsAction Creators å°±æ˜¯ç”¨æ¥ç”Ÿæˆ action çš„å‡½æ•°ã€‚åœ¨ Redux ä¸­ action creators ç®€å•çš„è¿”å›ä¸€ä¸ª action å¯¹è±¡å°±å¯ä»¥äº†ï¼šfunction addTodo(text)&#123; return &#123; type: ADD_TODO, text: 'Some text' &#125;&#125; è¿™æ ·å¯ä»¥æ›´åŠ å®¹æ˜“çš„åˆ›å»ºä¸€ç±» action, è€Œä¸”æ›´æ˜“äºæµ‹è¯•ã€‚ Dispatchå®é™…çš„åˆå§‹åŒ–ä¸€ä¸ª dispatch å¯ä»¥é€šè¿‡æŠŠç»“æœä¼ é€’ç»™ diapatch() å‡½æ•°ï¼š store.dispatch(addTodo(text))``` æˆ–è€…ï¼Œä½ å¯ä»¥é€šè¿‡åˆ›å»ºä¸ªä¸€ä¸ªè¢«çš„ç»‘å®š action creator ç”¨æ¥è‡ªåŠ¨ dispatchesï¼š```javascriptconst boundAddTodo = (text) =&gt; dispatch(addTodo(text)) ç°åœ¨ä½ èƒ½å¤Ÿç›´æ¥è°ƒç”¨å®ƒä»¬äº†ï¼šboundAddTodo(text) dispatch() å‡½æ•°å¯ä»¥ç›´æ¥è®¿é—® store é€šè¿‡ store.dispatch()ï¼Œä½†ä½ å¯èƒ½æ›´å–œæ¬¢é€šè¿‡ä½¿ç”¨ä¸€ä¸ªåƒ react-redux çš„ connect() è¿™æ ·è¾…åŠ©å‡½æ•°æ¥è®¿é—®ã€‚å¯ä»¥é€šè¿‡ bindActionCreators() æ¥è‡ªåŠ¨ç»‘å®šå¾ˆå¤š action creators åˆ° dispatch() å‡½æ•°ä¸Šã€‚ ReducersActions æè¿°ä¸€ä¸ªå‘ç”Ÿäº†ä»€ä¹ˆäº‹æƒ…çš„äº‹å®ï¼Œä½†æ˜¯æ²¡æœ‰æŒ‡å®šå¦‚ä½•å»æ”¹å˜åº”ç”¨çš„ state. è¿™ä¸ªå°±æ˜¯ reducer è¦åšçš„ã€‚ è®¾è®¡ State ç»“æ„åœ¨ Redux é‡Œé¢ï¼Œåº”ç”¨çš„æ‰€æœ‰çŠ¶æ€éƒ½è¢«å­˜å‚¨åœ¨ä¸€ä¸ªå•ä¸€çš„å¯¹è±¡ä¸­ã€‚æ‰€ä»¥åœ¨å†™ä»£ç ä¹‹å‰è€ƒè™‘ä¸€ä¸‹å¦‚ä½•è®¾è®¡ state æ˜¯å¾ˆé‡è¦çš„ã€‚å¦‚ä½•ç”¨æœ€ç®€å•çš„æ–¹æ³•æ¥æŠŠåº”ç”¨çŠ¶æ€æè¿°ä¸ºä¸€ä¸ªå¯¹è±¡ã€‚å¯¹äºä¸€ä¸ª todo åº”ç”¨æ¥è¯´ï¼Œæˆ‘ä»¬æƒ³è¦å­˜å‚¨ä¿©ä¸ªä¸åŒçš„äº‹æƒ…ï¼š å½“å‰é€‰ä¸­çš„æ˜¾ç¤ºè¿‡æ»¤æ¡ä»¶ å®é™…çš„ todos åˆ—è¡¨ ç®€å•çš„ state å°±æ˜¯ä¸‹é¢è¿™ä¸ªæ ·å­&#123; visibilityFilter: 'SHOW_ALL', todos: [ &#123; text: 'Consider using Redux', completed: true &#125;,&#123; text: 'Keep all state in a single tree', completed: false &#125; ] &#125; å¤„ç† ActionsReducer æ˜¯ä¸€ä¸ªçº¯å‡½æ•°ï¼Œæ¥å—ä¹‹å‰çš„ state å’Œ action åšä¸ºå‚æ•°ï¼Œè¿”å›ä¸‹ä¸€ä¸ª state.(previousState, action) =&gt; newState ä¹‹æ‰€ä»¥å«åš reducer æ˜¯å› ä¸ºå®ƒè¦è¢«ä¼ é€’ç»™ Array.prototype.reduce(reducer,?initialValue) è¿™ä¸ªå‡½æ•°ã€‚æ‰€ä»¥ä¿æŒ reduce çš„çº¯å‡€éå¸¸é‡è¦ã€‚æ°¸è¿œä¸è¦åœ¨ reducer é‡Œé¢åšä¸‹é¢çš„äº‹æƒ…ï¼š è½¬æ¢å®ƒçš„å‡½æ•°å‚æ•° åšä¸€äº›å¸¦æœ‰å‰¯ä½œç”¨çš„æ“ä½œï¼Œæ¯”å¦‚ API çš„è°ƒç”¨å’Œè·¯ç”±çš„è·³è½¬ è°ƒç”¨ä¸çº¯å‡€çš„å‡½æ•°ï¼Œæ¯”å¦‚ Date.now() å’Œ Math.random() äº†è§£äº†è¿™äº›ä»¥åï¼Œæˆ‘ä»¬æ¥å¼€å§‹ reducer å‡½æ•°ã€‚é€šè¿‡æŒ‡æ˜åˆå§‹ state æ¥å¼€å§‹ã€‚ Redux å°†ä¼šåœ¨ç¬¬ä¸€æ¬¡è°ƒç”¨ reducer æ—¶ä¼ é€’ä¸€ä¸ª undefined state. è¿™æ—¶æˆ‘ä»¬éœ€è¦è¿”å›ä¸€ä¸ªåˆå§‹åŒ–çš„ stateï¼šimport &#123; VisibilityFilters &#125; from './actions'const initialState = &#123; visibilityFilter: VisibilityFilters.SHOW_ALL, todo: []&#125;function todoApp(state = initialState, action) &#123; //é‡‡ç”¨ ES2015 å†™æ³•ï¼Œå½“ state ä¼ é€’ä¸º undefined æ—¶ï¼Œä¼šè¢«èµ‹å€¼ä¸º initialState return state&#125; æ¥ä¸‹æ¥å¤„ç† SET_VISIBILITY_FILTER. éœ€è¦åšçš„å°±æ˜¯åœ¨ state ä¸Šæ”¹å˜ visibilityFilter. function todoApp(state = initialState, action) &#123; switch (action.type) &#123; case SET_VISIBILITY_FILTER: return Object.assign(&#123;&#125;, state, &#123; visibilityFilter: action.SET_VISIBILITY_FILTER &#125;) default: return state &#125;&#125; éœ€è¦æ³¨æ„çš„æ˜¯ï¼š æˆ‘ä»¬ä¸ä¿®æ”¹åŸæœ‰çš„ state. é€šè¿‡ Object.assign() åˆ›å»ºä¸€ä¸ªåŸæœ‰ state å’Œ è¦æ”¹å˜å†…å®¹åˆå¹¶åçš„å‰¯æœ¬ã€‚ å½“æ‰¾ä¸åˆ°çŠ¶å†µä¹Ÿå°±æ˜¯ default æ—¶ï¼Œå¿…é¡»è¿”å›ä¹‹å‰çš„ state å¤„ç†æ›´å¤šçš„ Actionsè¿˜æœ‰ä¸€äº› action éœ€è¦å»å¤„ç†ï¼Œæˆ‘ä»¬ä¹Ÿéƒ½ä¸€ä¸€åŠ ä¸Šã€‚function todoApp(state = initialState, action) &#123; switch (action.type) &#123; case SET_VISIBILITY_FILTER: return Object.assign(&#123;&#125;, state, &#123; visibilityFilter: action.filter &#125;) case ADD_TODO: return Object.assign(&#123;&#125;, state, &#123; todos: [ ...state.todos, &#123; text: action.text, completed: false &#125; ] &#125;) default: return state &#125;&#125; æˆ‘ä»¬å¯ä»¥é€šè¿‡åˆ†ç¦» reducer å‡½æ•°æ¥ä½¿å®ƒæ›´åŠ å®¹æ˜“ç†è§£ï¼Œæ¯•ç«ŸæŠŠ todos ç›¸å…³çš„å¤„ç†é€»è¾‘å’Œ visibilityFilter çš„å¤„ç†é€»è¾‘æ”¾åœ¨ä¸€å—ä¸æ˜¯å¾ˆæ¸…æ™°ã€‚åˆ†ç¦» reducer ä¹Ÿæ˜¯å¾ˆç®€å•çš„ã€‚function todos(state=[], action) &#123; switch (action.type) &#123; case ADD_TODO: return [ ...state, &#123; text: action.text, completed: false &#125; ] default: return state &#125;&#125;function visibilityFilter(state = SHOW_ALL, action) &#123; switch (action.type) &#123; case SET_VISIBILITY_FILTER: return action.filter default: return state &#125;&#125;function todoApp(state = &#123;&#125;, action) &#123; return &#123; visibilityFilter: visibilityFilter(state.visibilityFilter, action), todos: todos(state.todos, action) &#125;&#125; å¯ä»¥çœ‹åˆ°ï¼Œæ¯ä¸ª reducer éƒ½ç®¡ç†ç€æ•´ä¸ª state ä¸­å±äºè‡ªå·±çš„éƒ¨åˆ†ã€‚æ¯ä¸ª reducer çš„ state å‚æ•°éƒ½ä¸åŒï¼Œåˆ†åˆ«å¯¹åº”ä»–ä»¬è‡ªå·±ç®¡ç†éƒ¨åˆ†çš„ state.å½“åº”ç”¨å˜å¾—åºå¤§æ—¶ï¼Œæˆ‘ä»¬å¯ä»¥æŠŠ reducer åˆ†ç¦»åˆ°å¤šä¸ªä¸åŒçš„æ–‡ä»¶ä¸­ï¼Œä¿æŒç‹¬ç«‹æ€§å¹¶ç®¡ç†ä¸åŒçš„æ•°æ®æºã€‚æœ€åï¼ŒRedux æä¾›äº†ä¸€ä¸ª combineReducers() å‡½æ•°æ¥åšå’Œä¸Šé¢ todoApp åŒæ ·é€»è¾‘çš„äº‹æƒ…ï¼Œåˆå¹¶å¤šä¸ª reducer, è¿™æ ·å¯ä»¥çœç•¥å¾ˆå¤šæ ·æ¿ä»£ç ã€‚import &#123; combineReducers &#125; from 'redux'const todoApp = combineReducers(&#123; visibilityFilter, todos&#125;)export default todoApp å®ƒå’Œä¸‹é¢çš„å†™æ³•æ˜¯å®Œå…¨ç­‰ä»·çš„ï¼šexport default function todoApp(state = &#123;&#125;, action) &#123; return &#123; visibilityFilter: visibilityFilter(state.visibilityFilter, action), todos: todos(state.todos, action) &#125;&#125; combineReducers() æ‰€åšçš„å°±æ˜¯ç”Ÿæˆä¸€ä¸ªå‡½æ•°ï¼Œå¹¶ç»™æ¯ä¸ª reducer å‡½æ•°å¹¶ä¼ å…¥å¯¹åº”çš„ stateï¼Œå¹¶æŠŠå®ƒä»¬åˆå¹¶æˆä¸€ä¸ªå•ç‹¬çš„å¯¹è±¡ã€‚è¿™å¹¶ä¸æ˜¯é»‘é­”æ³•ã€‚ combineReducers åŸç†15 å¹´çœ‹ Redux æ—¶ï¼Œæ²¡æœ‰è¯»æ–‡æ¡£ï¼Œè¿™é‡Œä¸€ç›´æ²¡èƒ½ç†è§£ï¼Œä¸çŸ¥é“ combineReducers() åˆ°åº•æ˜¯æ€ä¹ˆåšçš„ï¼Œä»¥ä¸ºä»–å°±æ˜¯ä¸ªé»‘é­”æ³•ã€‚è€Œä¸”è¿˜èƒ½é€šè¿‡ combineReducers() åçš„å‡½æ•°ç”Ÿæˆåˆå§‹åŒ–çš„ store. ä»Šå¤©é‡æ–°è¯»äº†æ–‡æ¡£å’Œ é»‘é­”æ³• è¿™ä¸ª issue åç†è§£äº†ã€‚å…¶å® combineReducers() æ˜¯è¿™æ ·å·¥ä½œçš„ã€‚å‡è®¾ä½ æœ‰ä¿©ä¸ª reducer ï¼Œ ä¸€ä¸ªç”¨æ¥ç®¡ç† todo åˆ—è¡¨ï¼Œå¦ä¸€ä¸ªç”¨æ¥ç®¡ç†å½“å‰é€‰ä¸­çš„è¿‡æ»¤çŠ¶æ€ï¼š function todos(state = [], action) &#123; // Somehow calculate it... return nextState &#125;function visibleTodoFilter(state = &apos;SHOW_ALL&apos;, action) &#123; // Somehow calculate it... return nextState &#125;let todoApp = combineReducers(&#123; todos, visibleTodoFilter &#125;) å¯ä»¥çœ‹åˆ°ï¼Œæ¯ä¸ª reducer ä¸­éƒ½å®šä¹‰äº†é»˜è®¤çš„ state:todos ä¸­ä¸º [], è€Œ visibleTodoFilter ä¸­ä¸º SHOW_ALLã€‚å½“è§¦å‘ä¸€ä¸ª action çš„æ—¶å€™ï¼Œ é€šè¿‡ combineReduser è¿”å›çš„ todoApp å°†ä¼šè°ƒç”¨æ•´ä¸ª reducerï¼šlet nextTodos = todos(state.todos, action)let nextVisibleTodoFilter = visibleTodoFilter(state.visibleTodoFilter, action) æœ€ç»ˆå®ƒä¼šæŠŠæ¯ä¸ª reducer è¿”å›çš„ state åˆå¹¶æˆä¸€ä¸ªå•ç‹¬çš„ state æ ‘return &#123; todos: nextTodos, visibleTodoFilter: nextVisibleTodoFilter &#125; è¿™æ ·å°±å¯ä»¥ç†è§£ combineReducer çš„å·¥ä½œåŸç†äº†ã€‚å½“ç„¶ä½ ä¹Ÿå¯ä»¥é€‰æ‹©ä¸ç”¨ combineReduser ï¼Œæ¯•ç«Ÿä»–åªæ˜¯ä¸€ä¸ªå®˜æ–¹æä¾›çš„è¾…åŠ©å·¥å…·ï¼Œä½ å¯ä»¥è‡ªå·±æ¥å®ç°ä½ çš„æ ¹ reducer. StoreStore æ˜¯ä¸€ä¸ªå¯¹è±¡ï¼Œç”¨æ¥æŠŠå®ƒä»¬è”ç³»èµ·æ¥ã€‚Store çš„èŒè´£å¦‚ä¸‹ï¼š ä¿å­˜æ•´ä¸ªåº”ç”¨çš„ state å¯ä»¥é€šè¿‡ getState() æ¥è·å– state å¯ä»¥é€šè¿‡ dispatch(action) æ¥æ›´æ–° state é€šè¿‡ subscribe(listener) æ¥æ³¨å†Œç›‘å¬å™¨ é€šè¿‡ subscribe(listener) è¿”å›çš„å€¼æ¥å¤„ç†æ²¡æœ‰æ³¨å†Œçš„ç›‘å¬å™¨ éœ€è¦æ³¨æ„çš„åªèƒ½æœ‰ä¸€ä¸ª store åœ¨ Redux åº”ç”¨ä¸­ã€‚å½“ä½ æƒ³è¦åˆ†ç¦»æ•°æ®é€»è¾‘æ—¶ï¼Œä½ å¯ä»¥é€šè¿‡åˆ›å»ºæ›´å¤šçš„ reducer æ¥ä»£æ›¿æ›´å¤šçš„ store.å½“ä½ æ‹¥æœ‰ä¸€ä¸ª reducer æ—¶ï¼Œåˆ›å»º store æ˜¯å¾ˆå®¹æ˜“çš„ã€‚æˆ‘ä»¬å¯ä»¥é€šè¿‡ combineReducers() ååˆ›å»ºçš„æ ¹ reducer æ¥åˆ›å»º store.import &#123; createStore &#125; from 'redux'import todoApp from './reducers'let store = createStore(todoApp) ä¹Ÿå¯ä»¥é€šè¿‡ä¼ é€’å¯é€‰å‚æ•°æ¥åˆå§‹åŒ– state. å½“ä½ å¼€å‘ä¸€ä¸ªé€šè¿‡åº”ç”¨æ—¶ç€å¾ˆæœ‰ç”¨ï¼Œå¯ä»¥æŠŠæœåŠ¡ç«¯ä¼ æ¥çš„ state åšä¸ºå®¢æˆ·ç«¯åˆå§‹åŒ– state.let store = createStore(todoApp, window.STATE_FROM_SERVER) æ€»ç»“ç†è§£äº†è¿™äº›å†…å®¹ï¼Œå°±å¤§æ¦‚å¯ä»¥çŸ¥é“ Redux æ˜¯æ€ä¹ˆè¿ä½œçš„äº†ã€‚å¯è§è¯»æ–‡æ¡£è¿˜æ˜¯å¾ˆæœ‰ç”¨çš„ï¼Œä¸åƒå»å¹´ç›´æ¥å»çœ‹å®˜æ–¹ä¾‹å­é‡Œçš„æºç ï¼Œç»“æœçœ‹çš„ä¸€æ„£ä¸€æ„£çš„ï¼Œæœ€åä¹Ÿä¸æ˜ç™½æ˜¯ä¸ªæ€ä¹ˆå›äº‹ã€‚æ¥ä¸‹æ¥ï¼Œè¦ç»§ç»­å­¦ä¹ æ•°æ®æµä»¥åŠå’Œ React çš„é…åˆï¼Œå¹¶åŠ¨æ‰‹å†™ä¸€ä¸ª TodoList å®ä¾‹æ¥åŠ æ·±ç†è§£ã€‚ å‚è€ƒBasics|Redux]]></content>
      <categories>
        <category>æŠ€æœ¯</category>
      </categories>
      <tags>
        <tag>å­¦ä¹ ç¬”è®°</tag>
        <tag>Redux</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[JavaScript ä¸­çš„ç±»å’Œç»§æ‰¿]]></title>
    <url>%2F2016%2F03%2F21%2Fclass%20and%20inherit%20in%20JavaScript%2F</url>
    <content type="text"><![CDATA[æˆ‘ä»¬éƒ½çŸ¥é“ JavaScript æ˜¯ä¸€é—¨åŸºäºåŸå‹çš„è¯­è¨€ã€‚å½“æˆ‘ä»¬è°ƒç”¨ä¸€ä¸ªå¯¹è±¡æœ¬èº«æ²¡æœ‰çš„å±æ€§æ—¶ï¼ŒJavaScript å°±ä¼šä»å¯¹è±¡çš„åŸå‹å¯¹è±¡ä¸Šå»æ‰¾è¯¥å±æ€§ï¼Œå¦‚æœåŸå‹ä¸Šä¹Ÿæ²¡æœ‰è¯¥å±æ€§ï¼Œé‚£å°±å»æ‰¾åŸå‹çš„åŸå‹ï¼Œä¸€ç›´æ‰¾åŸå‹é“¾çš„æœ«ç«¯ä¹Ÿå°±æ˜¯ Object.prototype çš„åŸå‹ nullã€‚è¿™ç§å±æ€§æŸ¥æ‰¾çš„æ–¹å¼æˆ‘ä»¬ç§°ä¹‹ä¸ºåŸå‹é“¾ã€‚ ç±»çš„å®ç°ç”±äº JavaScript æœ¬èº«æ˜¯æ²¡æœ‰çš„ç±»çš„æ„Ÿå¿µçš„ã€‚æ‰€ä»¥æˆ‘ä»¬å¦‚æœè¦å®ç°ä¸€ä¸ªç±»ï¼Œä¸€èˆ¬æ˜¯é€šè¿‡æ„é€ å‡½æ•°æ¥æ¨¡æ‹Ÿç±»çš„å®ç°ï¼šfunction Person(name,age)&#123; //å®ç°ä¸€ä¸ªç±» this.name = name; this.age = age;&#125;var you = new Person('you',23); //é€šè¿‡ new æ¥æ–°å»ºå®ä¾‹ é¦–å…ˆæ–°å»ºä¸€ä¸ª Person çš„æ„é€ å‡½æ•°ï¼Œä¸ºäº†å’Œä¸€èˆ¬çš„å‡½æ•°åŒºåˆ«ï¼Œæˆ‘ä»¬ä¼šä½¿ç”¨ CamelCase æ–¹å¼æ¥å‘½åæ„é€ å‡½æ•°ã€‚ç„¶åé€šè¿‡ new æ“ä½œç¬¦æ¥åˆ›å»ºå®ä¾‹ï¼Œnew æ“ä½œç¬¦å…¶å®å¹²äº†è¿™ä¹ˆå‡ ä»¶äº‹ï¼š åˆ›å»ºä¸€ä¸ªç»§æ‰¿è‡ª Person.prototype çš„æ–°å¯¹è±¡ æ„é€ å‡½æ•° Person æ‰§è¡Œæ—¶ï¼Œç›¸åº”çš„å‚æ•°ä¼ å…¥ï¼ŒåŒæ—¶ä¸Šä¸‹æ–‡è¢«æŒ‡å®šä¸ºè¿™ä¸ªæ–°å»ºçš„å¯¹è±¡ã€‚ å¦‚æœæ„é€ å‡½æ•°è¿”å›äº†ä¸€ä¸ªå¯¹è±¡ï¼Œé‚£ä¹ˆè¿™ä¸ªå¯¹è±¡ä¼šå–ä»£ new çš„ç»“æœã€‚å¦‚æœæ„é€ å‡½æ•°è¿”å›çš„ä¸æ˜¯å¯¹è±¡ï¼Œåˆ™ä¼šå¿½ç•¥è¿™ä¸ªè¿”å›å€¼ã€‚ è¿”å›å€¼ä¸æ˜¯å¯¹è±¡function Person(name)&#123; this.name = name; return 'person'&#125;var you = new Person('you');// you çš„å€¼: Person &#123;name: "you"&#125;è¿”å›å€¼æ˜¯å¯¹è±¡function Person(name)&#123; this.name = name; return [1,2,3]&#125;var you = new Person('you');// youçš„å€¼: [1,2,3] å¦‚æœç±»çš„å®ä¾‹éœ€è¦å…±äº«ç±»çš„æ–¹æ³•ï¼Œé‚£ä¹ˆå°±éœ€è¦ç»™æ„é€ å‡½æ•°çš„ prototype å±æ€§æ·»åŠ æ–¹æ³•äº†ã€‚å› ä¸º new æ“ä½œç¬¦åˆ›å»ºçš„å¯¹è±¡éƒ½ç»§æ‰¿è‡ªæ„é€ å‡½æ•°çš„ prototype å±æ€§ã€‚ä»–ä»¬å¯ä»¥å…±äº«å®šä¹‰åœ¨ç±» prototype ä¸Šçš„æ–¹æ³•å’Œå±æ€§ã€‚ function Person(name,age)&#123; this.name = name; this.age = age;&#125;Person.prototype = &#123; sayName: function()&#123; console.log('My name is',this.name); &#125;&#125;var you = new Person('you',23);var me = new Person('me',23);you.sayName() // My name is you.me.sayName() // My name is me. ç»§æ‰¿çš„å®ç° JavaScript ä¸­å¸¸ç”¨çš„ç»§æ‰¿æ–¹å¼æ˜¯ç»„åˆç»§æ‰¿ï¼Œä¹Ÿå°±æ˜¯é€šè¿‡æ„é€ å‡½æ•°å’ŒåŸå‹é“¾ç»§æ‰¿åŒæ—¶æ¥æ¨¡æ‹Ÿç»§æ‰¿çš„å®ç°ã€‚//Person æ„é€ å‡½æ•°å¦‚ä¸Šfunction Student(name,age,clas)&#123; Person.call(this,name,age) this.clas = clas;&#125;Student.prototype = Object.create(Person.prototype); // Mark 1Student.constructor = Student; //å¦‚æœä¸æŒ‡æ˜ï¼Œåˆ™ Student ä¼šæ‰¾ä¸åˆ° constructorStudent.prototype.study = function()&#123; console.log('I study in class',this.clas)&#125;;var liming = new Student('liming',23,7);liming instanceof Person //trueliming instanceof Student //trueliming.sayName(); // My name is limingliming.study(); // I study in class 7 ä»£ç ä¸­ Mark 1 ç”¨åˆ°äº† Object.create æ–¹æ³•ã€‚è¿™ä¸ªæ˜¯ ES5 ä¸­æ–°å¢çš„æ–¹æ³•ï¼Œç”¨æ¥åˆ›å»ºä¸€ä¸ªæ‹¥æœ‰æŒ‡å®šåŸå‹çš„å¯¹è±¡ã€‚å¦‚æœç¯å¢ƒä¸å…¼å®¹ï¼Œå¯ä»¥ç”¨ä¸‹é¢è¿™ä¸ª Polyfill æ¥å®ç°ï¼ˆä»…å®ç°ç¬¬ä¸€ä¸ªå‚æ•°ï¼‰ã€‚if(!Object.create)&#123; Object.create = function(obj)&#123; function F()&#123;&#125;; F.prototype = obj; return new F(); &#125;&#125; å…¶å®å°±æ˜¯æŠŠ obj èµ‹å€¼ç»™ä¸´æ—¶å‡½æ•° F ï¼Œç„¶åè¿”å›ä¸€ä¸ª F çš„å®ä¾‹ã€‚è¿™æ ·é€šè¿‡ä»£ç  Mark 1 Student å°±å¾—åˆ°äº† Person.prototype ä¸Šçš„æ‰€æœ‰å±æ€§ã€‚æœ‰äººä¼šé—®äº†ï¼Œé‚£ä¹ˆä¸ºä»€ä¹ˆä¸å¹²è„†æŠŠ Person.prototype ç›´æ¥èµ‹å€¼ç»™ Student.prototype å‘¢ï¼Ÿ æ˜¯çš„ï¼Œç›´æ¥èµ‹å€¼æ˜¯å¯ä»¥è¾¾åˆ°å­ç±»å…±äº«çˆ¶ç±» prototype çš„ç›®çš„ï¼Œä½†æ˜¯å®ƒç ´åäº†åŸå‹é“¾ã€‚å³ï¼šå­ç±»å’Œçˆ¶ç±»å…±ç”¨äº†åŒä¸€ä¸ª prototype,è¿™æ ·å½“æŸä¸€ä¸ªå­ç±»ä¿®æ”¹ prototype çš„æ—¶å€™ï¼Œå…¶å®åŒæ—¶ä¹Ÿä¿®æ”¹äº†çˆ¶ç±»çš„ prototype,é‚£ä¹ˆå°±ä¼šå½±å“åˆ°æ‰€æœ‰åŸºäºè¿™ä¸ªçˆ¶ç±»åˆ›å»ºçš„å­ç±»ï¼Œè¿™å¹¶ä¸æ˜¯æˆ‘ä»¬æƒ³è¦çš„ç»“æœã€‚çœ‹ä¾‹å­ï¼š //Person åŒä¸Š//Student åŒä¸ŠStudent.prototype = Person.prototype;Student.prototype.sayName = function()&#123; console.log('My name is',this.name,'my class is',this.clas)&#125;var liming = new Student('liming',23,7)liming.sayName() //My name is liming,my class is 7;//å¦ä¸€ä¸ªå­ç±»function Employee(name,age,salary)&#123; Person.call(name,age); this.salary = salary;&#125;Employee.prototype = Person.prototype;var emp = new Employee('emp',23,10000);emp.sayName() //Mark 2 ä½ ä»¬çŒœ Mark 2 ä¼šè¾“å‡ºä»€ä¹ˆï¼Ÿ æˆ‘ä»¬æœŸæœ›çš„ Mark 2 åº”è¯¥ä¼šè¾“å‡º â€œMy name is empâ€. ä½†å®é™…ä¸ŠæŠ¥é”™ï¼Œä¸ºä»€ä¹ˆå‘¢ï¼Ÿå› ä¸ºæˆ‘ä»¬æ”¹å†™ Student.prototype çš„æ—¶å€™ï¼Œä¹ŸåŒæ—¶ä¿®æ”¹äº† Person.prototypeï¼Œæœ€ç»ˆå¯¼è‡´ emp ç»§æ‰¿çš„ prototype æ˜¯æˆ‘ä»¬æ‰€ä¸æœŸæœ›çš„ï¼Œå®ƒçš„ sayName æ–¹æ³•æ˜¯ My name is&#39;,this.name,&#39;my class is&#39;,this.clasï¼Œè¿™æ ·è‡ªç„¶æ˜¯ä¼šæŠ¥é”™çš„ã€‚ ES6 çš„ç»§æ‰¿éšç€ ECMAScript 6 çš„å‘å¸ƒï¼Œæˆ‘ä»¬æœ‰äº†æ–°çš„æ–¹æ³•æ¥å®ç°ç»§æ‰¿ã€‚ä¹Ÿå°±æ˜¯é€šè¿‡ class å…³é”®å­—ã€‚ ç±»çš„å®ç°class Person &#123; constructor(name,age)&#123; this.name = name; this.age = age; &#125; sayHello()&#123; console.log(`My name is $&#123;this.name&#125;,i'm $&#123;this.age&#125; years old`) &#125;&#125;var you = new Person('you',23);you.sayHello() //My name is you,i'm 23 years old. ç»§æ‰¿ES6 é‡Œé¢çš„ç»§æ‰¿ä¹Ÿå¾ˆæ–¹ä¾¿ï¼Œé€šè¿‡ extends å…³é”®å­—æ¥å®ç°ã€‚class Student extends Person&#123; constructor(name,age,cla)&#123; super(name,age); this.class = cla; &#125; study()&#123; console.log(`I'm study in class $&#123;this.class&#125;`) &#125;&#125;var liming = new Student('liming',23,7)liming.study() // I'm study in class 7. è¿™ä¸ªç»§æ‰¿ç›¸æ¯”ä¸Šé¢çš„ ES5 é‡Œé¢å®ç°çš„ç»§æ‰¿è¦æ–¹ä¾¿äº†å¾ˆå¤šï¼Œä½†å…¶å®åŸç†æ˜¯ä¸€æ ·çš„ï¼Œæä¾›çš„è¿™äº›å…³é”®å­—æ–¹æ³•åªæ˜¯è¯­æ³•ç³–è€Œå·²ï¼Œå¹¶æ²¡æœ‰æ”¹å˜ Js æ˜¯åŸºäºåŸå‹è¿™ä¹ˆä¸€ä¸ªäº‹å®ã€‚ä¸è¿‡ extends è¿™æ ·å®ç°çš„ç»§æ‰¿æœ‰ä¸€ä¸ªé™åˆ¶ï¼Œå°±æ˜¯ä¸èƒ½å®šä¹‰å±æ€§ï¼Œåªèƒ½å®šä¹‰æ–¹æ³•ã€‚è¦æ–°æ·»å±æ€§ï¼Œè¿˜æ˜¯å¾—é€šè¿‡ä¿®æ”¹ prototype æ¥è¾¾åˆ°ç›®çš„ã€‚Student.prototype.teacher = 'Mr.Li'var liming = new Student('liming',23,7)var hanmeimei = new Student('hanmeimei',23,7)liming.teacher //Mr.Lihanmeimei.teacher //Mr.Li é™æ€æ–¹æ³•ES6 è¿˜æä¾›äº† static å…³é”®å­—ï¼Œæ¥å®ç°é™æ€æ–¹æ³•ã€‚é™æ€æ–¹æ³•å¯ä»¥ç»§æ‰¿ï¼Œä½†åªèƒ½ç”±ç±»æœ¬èº«è°ƒç”¨ï¼Œä¸èƒ½è¢«å®ä¾‹è°ƒç”¨ã€‚class Person&#123; constructor(name,age)&#123; this.name = name; this.age = age; &#125; static say()&#123; console.log('Static') &#125;&#125;class Student extends Person&#123;&#125;Person.say() // StaticStudent.say() // Staticvar you = new Person('you',23);you.say() // TypeError: liming.say is not a function å¯ä»¥çœ‹åˆ°ï¼Œåœ¨å®ä¾‹ä¸Šè°ƒç”¨çš„æ—¶å€™ä¼šç›´æ¥æŠ¥é”™ã€‚ Superå…³é”®å­—åœ¨å­ç±»ä¸­å¯ä»¥é€šè¿‡ super æ¥è°ƒç”¨çˆ¶ç±»ï¼Œæ ¹æ®è°ƒç”¨ä½ç½®çš„ä¸åŒï¼Œè¡Œä¸ºä¹Ÿä¸åŒã€‚åœ¨ constructor ä¸­è°ƒç”¨ï¼Œç›¸å½“äºè°ƒç”¨çˆ¶ç±»çš„ constructor æ–¹æ³•ï¼Œè€Œåœ¨æ™®é€šæ–¹æ³•é‡Œé¢è°ƒç”¨åˆ™ç›¸å½“ä¸è°ƒç”¨çˆ¶ç±»æœ¬èº«ã€‚class Person &#123; constructor(name,age)&#123; this.name = name; this.age = age; &#125; sayHello()&#123; console.log(`My name is $&#123;this.name&#125;,i'm $&#123;this.age&#125; years old`) &#125;&#125;class Student extends Person&#123; constructor(name,age,cla)&#123; super(name,age); // å¿…é¡»åœ¨å­ç±»è°ƒç”¨ this å‰æ‰§è¡Œï¼Œè°ƒç”¨äº†çˆ¶ç±»çš„ constructor this.class = cla; &#125; sayHello()&#123; super.sayHello; // è°ƒç”¨çˆ¶ç±»æ–¹æ³• console.log('Student say') &#125;&#125;var liming = new Student('liming',23,7);liming.say() // My name is liming,i'm 23 years old.\n Student say. æ€»ç»“è‡³æ­¤ï¼Œæˆ‘ä»¬å¯ä»¥çœ‹åˆ°ï¼šåœ¨ ES6 å‘å¸ƒä»¥åï¼ŒJavaScript ä¸­å®ç°ç»§æ‰¿æœ‰äº†ä¸€ä¸ªæ ‡å‡†çš„æ–¹æ³•ã€‚è™½ç„¶å®ƒä»¬åªæ˜¯è¯­æ³•ç³–ï¼ŒèƒŒåçš„æœ¬è´¨è¿˜æ˜¯é€šè¿‡åŸå‹é“¾ä»¥åŠæ„é€ å‡½æ•°å®ç°çš„ï¼Œä¸è¿‡åœ¨å†™æ³•ä¸Šæ›´æ˜“äºæˆ‘ä»¬ç†è§£è€Œä¸”ä¹Ÿæ›´åŠ æ¸…æ™°ã€‚ å‚è€ƒï¼š JavaScriptç»§æ‰¿æ–¹å¼è¯¦è§£ JavaScript åŸå‹ç³»ç»Ÿçš„å˜è¿ï¼Œä»¥åŠ ES6 class]]></content>
      <categories>
        <category>æŠ€æœ¯</category>
      </categories>
      <tags>
        <tag>JavaScript</tag>
        <tag>inherit</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[Hexoéƒ¨ç½²åˆ°VPSå¹¶å¯ç”¨HTTPS]]></title>
    <url>%2F2016%2F03%2F10%2FHexo%E9%83%A8%E7%BD%B2%E5%88%B0VPS%E5%B9%B6%E5%90%AF%E7%94%A8HTTPS%2F</url>
    <content type="text"><![CDATA[ä¸Šå‘¨ä¹°äº†ä¸ª VPS ç© ï¼Œä»æ¿ç“¦å·¥ä¹°çš„ï¼Œä¸€å¹´çš„ 19 åˆ€ã€‚æ€§ä»·æ¯”è¿˜ç®—åˆé€‚ï¼Œè¿™æ˜¯é…ç½®ï¼š10 GB SSD RAID-10 Disk Space256 MB RAM500 GB TransferGigabit portMultiple locations è¿™æ˜¯è´­ä¹°é“¾æ¥ã€‚ ä¹°è¿‡æ¥ï¼Œå…ˆæ˜¯æ­äº†ä¸ª SS è§£å†³ç§‘å­¦ä¸Šç½‘çš„é—®é¢˜ã€‚ç„¶åæƒ³æƒ³è¦ä¸è¦æŠŠåšå®¢ä¹Ÿè¿ç§»è¿‡å»ç®—äº†,ä¸€ä¸ª ss åˆç”¨ä¸äº†å¤šå°‘æµé‡ã€‚äºæ˜¯è¯´å¹²å°±å¹²ï¼Œä¸€ç•ªæœç´¢æŸ¥è¯¢åï¼Œè¾¾æˆæˆå°±ã€‚ ç®€å•çš„è®°å½•ä¸‹æ“ä½œçš„æ­¥éª¤ï¼š å®¢æˆ·ç«¯ï¼š é…ç½® ssh æœ¬åœ°éƒ¨ç½² hexo æœåŠ¡å™¨ï¼š å®‰è£…æ‰€éœ€è½¯ä»¶ a. Git b. Nginx ä¸ºäº†å®‰å…¨ä¸æ–¹ä¾¿ï¼Œæ–°å»ºä¸“ç”¨ä¸éƒ¨ç½² hexo çš„ç”¨æˆ·gitï¼Œå¹¶ç»™äºˆç›¸åº”æƒé™ã€‚ é…ç½® sshï¼Œä¸å®¢æˆ·ç«¯è¾¾æˆé€šé“ é…ç½® git hooksï¼Œè¿™æ ·æœ¬åœ°åœ¨ hexo éƒ¨ç½²åˆ°æœåŠ¡å™¨ git ç”¨æˆ·çš„å¯¹åº”ä»“åº“åå°±ä¸ç”¨åœ¨æŠŠå®ƒå¤åˆ¶åˆ°ç”¨ä»¥è®¿é—®çš„ç½‘ç«™çš„æ–‡ä»¶å¤¹äº†ã€‚ #!/bin/bashGIT_REPO=/home/git/hexo.git #gitä»“åº“TMP_GIT_CLONE=/tmp/hexoPUBLIC_WWW=/var/www/hexo #ç½‘ç«™ç›®å½•rm -rf $&#123;TMP_GIT_CLONE&#125;git clone $&#123;GIT_REPO&#125; $&#123;TMP_GIT_CLONE&#125;rm -rf $&#123;PUBLIC_WWW&#125;/*cp -rf $&#123;TMP_GIT_CLONE&#125;/* $&#123;PUBLIC_WWW&#125; é…ç½®nginxï¼Œå¹¶å¯åŠ¨nginxæœåŠ¡ é‡åˆ°çš„é—®é¢˜ è®¿é—® vps åœ°å€ï¼Œç›´æ¥æ˜¾ç¤º403 forbiddenï¼Œä»¥ä¸ºæ˜¯æƒé™é—®é¢˜ï¼Œç½‘ä¸ŠæŸ¥äº†åŠå¤©ä¹Ÿæ²¡è§£å†³ã€‚æœ€åå‘ç°ç”¨äºç½‘ç«™çš„ç›®å½•ä¸‹æ˜¯ç©ºçš„ã€‚ ç”±é—®é¢˜1æ¨æ–­å‡ºï¼ŒGit hooks å‹æ ¹æ²¡èµ·ä½œç”¨ã€‚å› ä¸ºç”¨äºæ”¾ç½‘ç«™æ–‡ä»¶å¤¹ä¸‹ä¸€ç›´éƒ½æ˜¯ç©ºçš„ï¼Œäºæ˜¯æ‰‹åŠ¨è¯•git hooks ä¸‹é¢çš„å‘½ä»¤ï¼Œæ‰§è¡Œåˆ° rm -rf ${PUBLIC_WWW}çš„æ—¶å€™ï¼Œç³»ç»Ÿæç¤ºæ“ä½œè¢«æ‹’ç»ï¼Œå‘ç°æ˜¯æƒé™é—®é¢˜ï¼Œèµ‹äºˆgitç”¨æˆ·ç”¨äºæ”¾ç½‘ç«™çš„ www/hexo çš„æƒé™ã€‚ ssh åœ¨æœåŠ¡å™¨é‡å¯åå‡ºç°é—®é¢˜ï¼Œå¤šæ–¹æ’æŸ¥åå‘ç°ä¹Ÿæ˜¯æƒé™é—®é¢˜ï¼Œèµ‹äºˆ git ç”¨æˆ·.ssh æ–‡ä»¶ 700 æƒé™ è¾“å…¥ www.kisnows.com ï¼Œè®¿é—®æˆåŠŸï¼Œå“ˆå“ˆï¼Œå¥½å¼€å¿ƒã€‚è€Œä¸”å›½å†…è®¿é—®é€Ÿåº¦æ¯”åŸæ¥å¿«äº†ä¸€ç‚¹ç‚¹ï¼Œè™½ç„¶å°±é‚£ä¹ˆä¸€ç‚¹ç‚¹ã€‚ æƒ³æƒ³ä¹Ÿä¸Šä¸ª SSL å§ï¼Œä¸ç„¶å¤ªè½åäº†ï¼Œæ¯•ç«Ÿæœ€è¿‘ç”µä¿¡åŠ«æŒå¾ˆä¸¥é‡ã€‚å› ä¸ºä¸æƒ³æŠ•å…¥è¿‡å¤§æˆæœ¬ï¼Œå°±æ‰“ç®—ç”¨ cloudFlare æä¾›çš„å…è´¹ SSLã€‚è™½ç„¶åªæ˜¯æµè§ˆå™¨åˆ° cloudFlare ä¹‹é—´æ˜¯åŠ å¯†çš„ï¼Œä½†æ˜¯æœ‰æ€»æ¯”æ²¡æœ‰å¼ºå˜›ã€‚äºæ˜¯æŠŠ DNS æœåŠ¡ä» DNSPod åˆ‡æ¢åˆ°äº†cloudFlareï¼Œå¹¶å€ŸåŠ© cloudFlare å…¨ç«™å¯ç”¨äº† HTTPSï¼ŒåŒæ—¶å°†é¡¶çº§åŸŸåé‡å®šå‘åˆ°äº†www ä¸‹çš„äºŒçº§åŸŸåã€‚æ–¹æ³•å¦‚ä¸‹ï¼š å¯ç”¨HTTPSè¿›å…¥ cloudFlare ç®¡ç†ä¸­å¿ƒï¼ŒCryptoä¸‹ å¼ºåˆ¶éHTTPSè®¿é—®è·³è½¬åˆ°HTTPSä½äº Page Rules æ¨¡å—ä¸‹ä¸Šå›¾1ï¼Œé€‰ always use httpsï¼Œç„¶åå¦‚å›¾ç¬¬ä¸€æ¡è§„åˆ™ï¼Œhttp://*.kisnows.com/* è¿™æ ·æ‰€æœ‰åŒ¹é…çš„æ‰€æœ‰è®¿é—®ï¼Œéƒ½ä¼šèµ° https äº†ã€‚ é¡¶çº§åŸŸåé‡å®šå‘åˆ°å¸¦ www çš„äºŒçº§åŸŸåä¸‹ä¹Ÿæ˜¯ç”¨ Page Rulesï¼Œå¦‚ä¸Šå›¾2ã€‚é€‰ Forwardingï¼Œç„¶ååŒ¹é…å¦‚ä¸‹å¡«å†™å°±OKäº†ï¼šForwarding ä¸­çš„ $1 å°±æ˜¯ kisnows.com/* ä¸­ * åŒ¹é…åˆ°å…ƒç´ ã€‚ è‡³æ­¤ï¼Œä¸ºæœŸä¸¤å¤©çš„æŠ˜è…¾å®Œæ¯•ï¼Œå…¨ç«™è¿ç§»åˆ°äº† VPSï¼Œå¹¶å…¨ç¨‹å¯ç”¨ HTTPSã€‚çœŸæ˜¯ç”Ÿå‘½ä¸æ¯ï¼ŒæŠ˜è…¾ä¸æ­¢å•Šï¼ å‚è€ƒæ–‡ç« ï¼šhttp://tiktoking.github.io/2016/01/26/hexo/http://www.hansoncoder.com/2016/03/02/VPS%20building%20Hexo/http://hejun.me/2015/01/05/deploy-hexo-on-cloud/]]></content>
      <categories>
        <category>æŠ€æœ¯</category>
      </categories>
      <tags>
        <tag>ç½‘ç«™å»ºè®¾</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[HTTP ç¼“å­˜]]></title>
    <url>%2F2016%2F03%2F07%2Fhttp-cache%2F</url>
    <content type="text"><![CDATA[ä¸‹åˆæ„å¤–çš„æ¥åˆ°äº†é˜¿é‡Œé’‰é’‰å‰ç«¯çš„é¢è¯•ï¼Œå¾ˆæ˜¯æ¬£å–œã€‚é¢è¯•å†…å®¹ä»åšçš„é¡¹ç›®ï¼Œåˆ°ä½¿ç”¨çš„æŠ€æœ¯ Angularã€Reactã€Express ç­‰ï¼Œè®©æˆ‘æ„Ÿè§‰åˆ°è‡ªå·±çš„ç†è§£è¿˜æ˜¯ä¸å¤Ÿæ·±åˆ»ã€‚æ¯”å¦‚æˆ‘è¯´æˆ‘å–œæ¬¢ Reactï¼Œå¤§é¡¹ç›®ä¸­éœ€è¦é…åˆ Redux æ¥ç”¨å¤„ç†æ•°æ®ï¼Œç„¶åå°±é—®åˆ° Redux åˆ°åº•è§£å†³äº†å“ªäº›é—®é¢˜ï¼Œæˆ‘æ²¡èƒ½æ¸…æ¥šçš„ç­”ä¸Šæ¥ã€‚ä½†æ˜¯æ•´ä½“ä¸Šï¼Œé¢è¯•çš„å‰é¢éƒ¨åˆ†ï¼Œè‡ªæˆ‘æ„Ÿè§‰è¿˜æ˜¯å¾ˆä¸é”™çš„ã€‚ä½†æ˜¯åˆ°æœ€åï¼Œé¢è¯•å®˜è¯´é—®ä¸€ä¸ªæ¯”è¾ƒåŸºç¡€çš„é—®é¢˜ï¼šå¦‚ä½•åœ¨HTTPåè®®ä¸­æ§åˆ¶ç¼“å­˜ï¼Ÿæˆ‘æ‡µäº†ï¼Œå¹³æ—¶å·¥ä½œä¸­æ ¹æœ¬æ¥è§¦ä¸åˆ°ã€‚åªèƒ½å‡­è‡ªå·±æ„Ÿè§‰è¯´ï¼Œä»æ–‡ä»¶åçš„æ›´æ”¹ä»¥åŠåœ¨ HTTP çš„ header ä¸­è®¾ç½®ç›¸åº”å‚æ•°æ¥è®¾ç½®ï¼Œä½†å…·ä½“æ€æ ·è®¾ç½®ï¼Œè®¾ç½®çš„å†…å®¹æ˜¯ä»€ä¹ˆï¼Œæˆ‘å®Œå…¨ç­”ä¸ä¸Šæ¥ã€‚æ„Ÿè§‰è‚¯å®šæ˜¯è¦æŒ‚åœ¨è¿™é‡Œã€‚ä¸è¿‡ä¿—è¯è¯´çš„å¥½ï¼Œäººä¸èƒ½åœ¨åŒä¸€ä¸ªåœ°æ–¹è·Œåˆ°ä¸¤æ¬¡ï¼Œè°¨ä»¥æ­¤ç¯‡è®°å½•HTTPç¼“å­˜çš„ç›¸åº”å†…å®¹ã€‚ æ¦‚è§ˆHTTP æ§åˆ¶ç¼“å­˜ä¸»è¦æœ‰ä¸€ä¸‹å‡ ç§æ–¹å¼ï¼š Expires Cache-Control Last-Modified/If-Modified-Since Etag/If-None-Match æ¥ä¸‹æ¥ï¼Œå°±ä¸€ä¸ªä¸€ä¸ªæ¥äº†è§£ã€‚ Expiresè¿‡æœŸæ—¶é—´ï¼Œæœ‰ç‚¹ç±»ä¼¼äº cookies é‡Œé¢çš„ Expiresã€‚å¯ä»¥åœ¨ header ä¸­è®¾ç½®ä¸€ä¸ªå…·ä½“çš„è¿‡æœŸæ—¶é—´ï¼Œåœ¨è¿™ä¸ªè¿‡æœŸæ—¶é—´å†…ï¼Œæµè§ˆå™¨éƒ½ä¸ä¼šå‘æœåŠ¡å™¨è¯·æ±‚è¿™ä¸ªæ–‡ä»¶ï¼Œä¼šç›´æ¥å­˜æœ¬åœ°çš„ç¼“å­˜ä¸­è¯»å–ã€‚ä¸Šå›¾æ˜¯æˆ‘åšå®¢ä¸­ä¸€ä¸ª js æ–‡ä»¶çš„ HTTP headerï¼Œå¯ä»¥çœ‹åˆ°å…¶ä¸­çº¢æ¡†1 Expires è®¾ç½®ä¸ºå½“å‰ Date çš„4ä¸ªå°æ—¶åï¼Œä¹Ÿå°±æ˜¯è¯´æ­£å¸¸æƒ…å†µè¿™ä¸ªæ–‡ä»¶åœ¨ Expires è¿™ä¸ªæ—¶é—´ç‚¹ä»¥å‰çš„è¯·æ±‚éƒ½ä¼šç›´æ¥ä½¿ç”¨æœ¬åœ°ç¼“å­˜ï¼Œè€Œä¸ç”¨ä»æœåŠ¡ç«¯é‡æ–°è·å–ã€‚éœ€è¦æ³¨æ„çš„æ˜¯ï¼ŒExpires æ˜¯ HTTP 1.0 çš„ä¸œè¥¿ï¼Œç°åœ¨ç»å¤§å¤šæ•°æµè§ˆå™¨éƒ½é»˜è®¤ä½¿ç”¨ HTTP 1.1ï¼Œæ‰€ä»¥ç”¨ Expires æ§åˆ¶ç¼“å­˜ä¸æ˜¯é¦–é€‰çš„æ–¹æ³•ã€‚ Cache-controlCache-control ä¸ Expires ä½œç”¨åŸºæœ¬ç›¸åŒï¼Œéƒ½æ˜¯æ ‡å¿—å‡ºå½“å‰èµ„æºçš„æœ‰æ•ˆæœŸï¼Œä»¥æ­¤æ¥æ§åˆ¶æµè§ˆå™¨æ˜¯ä½¿ç”¨æœ¬åœ°ç¼“å­˜è¿˜æ˜¯ä»æœåŠ¡å™¨é‡æ–°è·å–èµ„æºã€‚ä¸è¿‡ï¼Œä¸åŒçš„åœ°æ–¹åœ¨äºï¼ŒCache-control èƒ½å¤Ÿæ§åˆ¶çš„æ›´åŠ ç»†è‡´ï¼Œå½“headerä¸­åŒæ—¶å­˜åœ¨ Expires æ—¶ï¼ŒCache-control çš„ä¼˜å…ˆçº§è¦æ›´é«˜ä¸€äº›ã€‚ HTTPåè®®å¤´ Cache-Control çš„å€¼å¯ä»¥æ˜¯ publicã€privateã€no-cacheã€no- storeã€no-transformã€must-revalidateã€proxy-revalidateã€max-ageå„ä¸ªæ¶ˆæ¯ä¸­çš„æŒ‡ä»¤å«ä¹‰å¦‚ä¸‹ï¼š Public æŒ‡ç¤ºå“åº”å¯è¢«ä»»ä½•ç¼“å­˜åŒºç¼“å­˜ã€‚ Private æŒ‡ç¤ºå¯¹äºå•ä¸ªç”¨æˆ·çš„æ•´ä¸ªæˆ–éƒ¨åˆ†å“åº”æ¶ˆæ¯ï¼Œä¸èƒ½è¢«å…±äº«ç¼“å­˜å¤„ç†ã€‚è¿™å…è®¸æœåŠ¡å™¨ä»…ä»…æè¿°å½“ç”¨æˆ·çš„éƒ¨åˆ†å“åº”æ¶ˆæ¯ï¼Œæ­¤å“åº”æ¶ˆæ¯å¯¹äºå…¶ä»–ç”¨æˆ·çš„è¯·æ±‚æ— æ•ˆã€‚ no-cache æŒ‡ç¤ºè¯·æ±‚æˆ–å“åº”æ¶ˆæ¯ä¸èƒ½ç¼“å­˜ no-store ç”¨äºé˜²æ­¢é‡è¦çš„ä¿¡æ¯è¢«æ— æ„çš„å‘å¸ƒã€‚åœ¨è¯·æ±‚æ¶ˆæ¯ä¸­å‘é€å°†ä½¿å¾—è¯·æ±‚å’Œå“åº”æ¶ˆæ¯éƒ½ä¸ä½¿ç”¨ç¼“å­˜ã€‚ max-age æŒ‡ç¤ºå®¢æˆ·æœºå¯ä»¥æ¥æ”¶ç”Ÿå­˜æœŸä¸å¤§äºæŒ‡å®šæ—¶é—´ï¼ˆä»¥ç§’ä¸ºå•ä½ï¼‰çš„å“åº”ã€‚ min-fresh æŒ‡ç¤ºå®¢æˆ·æœºå¯ä»¥æ¥æ”¶å“åº”æ—¶é—´å°äºå½“å‰æ—¶é—´åŠ ä¸ŠæŒ‡å®šæ—¶é—´çš„å“åº”ã€‚ max-stale æŒ‡ç¤ºå®¢æˆ·æœºå¯ä»¥æ¥æ”¶è¶…å‡ºè¶…æ—¶æœŸé—´çš„å“åº”æ¶ˆæ¯ã€‚å¦‚æœæŒ‡å®šmax-staleæ¶ˆæ¯çš„å€¼ï¼Œé‚£ä¹ˆå®¢æˆ·æœºå¯ä»¥æ¥æ”¶è¶…å‡ºè¶…æ—¶æœŸæŒ‡å®šå€¼ä¹‹å†…çš„å“åº”æ¶ˆæ¯ã€‚ å¦‚å›¾ï¼Œçº¢æ¡†2ä¸Šé¢çš„ Cache-Control è¿™ä¸€æ ï¼Œå€¼ä¸º publicï¼Œmax-age=14400. å°±æ˜¯è¯´å®ƒçš„æœ‰æ•ˆæœŸæ˜¯ 14400sï¼Œä¹Ÿå°±æ˜¯4hï¼Œå’Œä¸Šé¢çš„ Expires çš„è¿‡æœŸæ—¶é—´æ˜¯ä¸€æ ·çš„ï¼Œä½†æ˜¯å®ƒä¸åƒ Expires é‚£æ ·å¿…é¡»ç»™ä¸€ä¸ªç±»ä¼¼ Monï¼Œ07 Mar 2016 17:14:33 GMT è¿™æ ·å…·ä½“çš„æ—¶é—´ï¼Œåªéœ€è¦ç»™å®šä¸€ä¸ªæœ€å¤§å¯¿å‘½çš„æ—¶é—´å°±å¯ä»¥äº†ã€‚è¿™ä¸ªåº”è¯¥æ˜¯æ¯”è¾ƒå¸¸ç”¨çš„æ–¹æ³•ã€‚ Last-Modified/If-Modified-Since Last-Modified è¡¨ç¤ºè¿™ä¸ªèµ„æºçš„æœ€åä¿®æ”¹æ—¶é—´ï¼ŒæœåŠ¡å™¨åœ¨ç›¸åº”è¯·æ±‚æ—¶ï¼Œä¼šå‘Šè¯‰æµè§ˆå™¨æ­¤èµ„æºçš„æœ€åä¿®æ”¹æ—¶é—´ã€‚ If-Modified-Since å‘é€HTTPè¯·æ±‚æ—¶ï¼Œæµè§ˆå™¨ä¼šæŠŠç¼“å­˜èµ„æºçš„æœ€åä¿®æ”¹æ—¶é—´ä¸€èµ·å‘é€åˆ°æœåŠ¡å™¨å»ï¼ŒæœåŠ¡å™¨ä¼šç”¨è¿™ä¸ªæ—¶é—´ä¸æœåŠ¡å™¨ä¸Šå®é™…æ–‡ä»¶çš„æœ€åä¿®æ”¹äº‹ä»¶è¿›è¡Œå¯¹æ¯”ã€‚å¦‚æœæ—¶é—´ä¸€è‡´ï¼Œåˆ™è¿”å› HTTP çŠ¶æ€ç  304ï¼Œæµè§ˆå™¨æ¥æ”¶åˆ°åä¼šç›´æ¥æ˜¾ç¤ºç¼“å­˜çš„æ–‡ä»¶ã€‚å¦‚æœæ—¶é—´ä¸ä¸€è‡´ï¼Œåˆ™è¿”å› HTTP çŠ¶æ€ç  200 å’Œæ–°çš„æ–‡ä»¶å†…å®¹ï¼Œæµè§ˆå™¨æ‹¿åˆ°æ–‡ä»¶åä¼šä¸¢æ‰æœ¬åœ°æ—§æ–‡ä»¶ï¼Œç¼“å­˜æ–°æ–‡ä»¶å¹¶å±•ç¤ºå‡ºæ¥ã€‚è¦æ³¨æ„çš„æ˜¯ Last-Modified/If-Modified-Since éœ€è¦é…åˆ Cache-control ä½¿ç”¨ï¼Œåªæœ‰å½“æœ¬åœ°çš„èµ„æºè¿‡æœŸæ—¶ï¼ˆå³è¶…è¿‡äº†max-age å®šä¹‰çš„æ—¶é—´ï¼‰ï¼Œæ‰ä¼šå‘æœåŠ¡å™¨å‘é€ç›¸åº”çš„å¸¦æœ‰ If-Modified-Since çš„è¯·æ±‚ã€‚ Etag/If-None-Match Etag/If-None-Match åŒæ ·éœ€è¦é…åˆ Cache-control ä½¿ç”¨ã€‚ Etag æœåŠ¡å™¨ç›¸åº”æµè§ˆå™¨è¯·æ±‚æ—¶ï¼Œä¼šå‘Šè¯‰æµè§ˆå™¨å½“å‰èµ„æºåœ¨æœåŠ¡çš„å”¯ä¸€æ ‡è¯†ï¼Œæ ‡è¯†è§„åˆ™æœ‰æœåŠ¡å™¨å†³å®šã€‚If-None-Match å½“èµ„æºè¿‡æœŸæ—¶ï¼ˆå³è¶…è¿‡äº†max-age å®šä¹‰çš„æ—¶é—´ï¼‰ï¼Œå‘ç°èµ„æºå…·æœ‰ Etag å£°æ˜ï¼Œåˆ™åœ¨å†æ¬¡å‘æœåŠ¡å™¨å‘é€æ±‚æƒ…æ—¶å¸¦ä¸Š If-None-Matchï¼ˆå³æœ¬åœ°ç¼“å­˜èµ„æºçš„ Etag å€¼ï¼‰ã€‚æœåŠ¡å™¨æ”¶åˆ°è¯·æ±‚åå¦‚æœå‘ç°æœ‰ If-None-Match åˆ™ä¸æœåŠ¡ç«¯è¢«è¯·æ±‚èµ„æºçš„ Etag è¿›è¡Œæ¯”å¯¹ï¼Œå¦‚æœç›¸åŒåˆ™è¯´æ˜èµ„æºæ— æ›´æ”¹å¹¶è¿”å› 304ï¼Œå¦åˆ™è¿”å› 200 å’Œæ–°çš„èµ„æºã€‚ è¿™å››ç§æ–¹å¼çš„ä¼˜å…ˆçº§å¯ä»¥é€šè¿‡ä¸€å¼ å›¾æ¥è¯´æ˜ï¼šå›¾ç‰‡æ¥è‡ªå¯ä»¥çœ‹åˆ° Etag çš„ä¼˜å…ˆçº§æ˜¯å¤§äº Last-Modified çš„ã€‚ å‚è€ƒæ–‡ç« ï¼š1.æµè§ˆå™¨ç¼“å­˜æœºåˆ¶2.æµè§ˆå™¨ç¼“å­˜ç›¸å…³çš„HTTPå¤´ä»‹ç»:Expires,Cache-Control,Last-Modified,ETag 3.HTTPçš„è¯·æ±‚å¤´æ ‡ç­¾ If-Modified-Since]]></content>
      <categories>
        <category>æŠ€æœ¯</category>
      </categories>
      <tags>
        <tag>http</tag>
        <tag>ç¼“å­˜</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[Postman çš„ç®€å•ä½¿ç”¨]]></title>
    <url>%2F2016%2F02%2F26%2Fsimple-use-of-postman%2F</url>
    <content type="text"><![CDATA[Postman æ˜¯ä¸€æ¬¾ç”¨æ¥æµ‹è¯• WEB æ¥å£çš„å·¥å…·ï¼Œå¯ä»¥ç®€å•çš„å‘é€ GET ã€POSTã€PUTã€DELETE ç­‰è¯·æ±‚ï¼Œå¯ä»¥åœ¨ chrome å•†åº—é‡Œé¢æœç´¢å®‰è£…ã€‚ä¸ºäº†ä»‹ç»å®ƒçš„åŠŸèƒ½ï¼Œé¦–å…ˆæœ¬åœ°èµ·ä¸€ä¸ªæœåŠ¡å™¨ï¼švar http = require('http');var url = require('url');var querystring = require('querystring');http.createServer(function (req, res) &#123; res.writeHead(200, &#123; 'content-type': 'text/json' &#125;); if (req.method === 'GET') &#123; var params = url.parse(req.url, true).query; res.write(params.name + ' is ' + params.age + ' years old'); res.on('error', function (err) &#123; throw new Error(err); &#125;) res.end(); &#125; else &#123; var resDate = []; req .on('data', function (chunk) &#123; resDate.push(chunk); &#125;) .on('end', function () &#123; var params = querystring.parse(resDate.join('')); res.write(JSON.stringify(params)); res.end(); &#125;) .on('error', function (e) &#123; throw new Error(e) &#125;) &#125;&#125;).listen(8088);console.log('Server listen at localhost:8088'); ç”¨æ¥ç›‘å¬ POST å’Œ GET è¯·æ±‚ï¼Œå¹¶è¿”å›ç›¸åº”çš„æ•°æ®ã€‚æ¥ä¸‹æ¥æ‰“å¼€ Postman ï¼Œç•Œé¢å¾ˆç®€æ´ï¼Œæ‰€æœ‰çš„åŠŸèƒ½éƒ½åœ¨å›¾ä¸Šæ ‡æ³¨äº†å‡ºæ¥ä¸Šå›¾æ˜¯æ¨¡æ‹Ÿ post è¯·æ±‚ï¼Œå¡«å¥½è¦å‘é€çš„å‚æ•°ï¼Œç‚¹å‡» send ï¼Œå°±å¯ä»¥çœ‹åˆ°è¿”å›äº†æ­£ç¡®çš„ç»“æœ&#123; "name": "moqiao", "age": "23"&#125; GET è¯·æ±‚åŒç†ã€‚]]></content>
      <categories>
        <category>æŠ€æœ¯</category>
      </categories>
      <tags>
        <tag>Postman</tag>
        <tag>è°ƒè¯•å·¥å…·</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[ç”¨ES6é‡æ„fullPage]]></title>
    <url>%2F2016%2F02%2F21%2Ffullpage-js-es6%2F</url>
    <content type="text"><![CDATA[ç”¨ ES6 é‡å†™äº† fullpage-light.jsã€‚ä¸»è¦åšäº†ä¸€ä¸‹ä¿®æ”¹ï¼š æ¨¡å—åŒ–ï¼šå°†æ•´ä¸ªæ–‡ä»¶é—®ä¸ªæˆå¤šä¸ªç‹¬ç«‹çš„æ¨¡å—ï¼Œæ¯ä¸ªæ¨¡å—è´Ÿè´£ä¸€ä¸ªåŠŸèƒ½ æ–°è¯­æ³•ï¼šæ›¿æ¢ä¸€äº›æ–°çš„è¯­æ³•ï¼Œæ¯”å¦‚å˜é‡å£°æ˜çš„ let,const,Object.assign ç­‰ è½¬ç ï¼šå› ä¸ºç›®å‰æµè§ˆå™¨è¿˜å¹¶ä¸æ”¯æŒ ES2015,æ‰€ä»¥è¿˜éœ€è¦ç”¨ Babel åšä¸€ä¸‹è½¬ç  æ¨¡å—åŒ–æ ¹æ®åŠŸèƒ½ï¼Œå°†æ•´ä¸ªæ–‡ä»¶åˆ†å‰²æˆä¸ºäº†äº”ä¸ªæ¨¡å—ã€‚-bootstrap.js //æ–¹æ³•å’ŒåŠŸèƒ½-constant.js //ä¸€äº›å¸¸é‡-event.js //ç»‘å®šçš„äº‹ä»¶-index.js //å…¥å£-utils.js //å·¥å…·å‡½æ•° è¿™æ ·åŸæ¥ä¸€ä¸ªå¾ˆå¤§æ–‡ä»¶å°±è¢«åˆ†å‰²æˆä¸ºäº†äº”ä¸ªç‹¬ç«‹çš„æ¨¡å—ï¼Œæ¯ä¸ªæ¨¡å—åªè´Ÿè´£è‡ªå·±çš„åŠŸèƒ½å°±å¥½ï¼Œç»´æŠ¤èµ·æ¥ä¼šæ–¹ä¾¿å¾ˆå¤šã€‚ æ–°è¯­æ³•é™¤äº†ç”¨äº† let,const è¿™ä¸ªå£°æ˜å˜é‡çš„å…³é”®å­—å¤–ï¼Œæœ€ä¸»è¦è¿˜ç”¨ Object.assign è¿™ä¸ªæ–¹æ³•æ›¿æ¢äº†ä¸‹é¢è¿™ä¸ªå‡½æ•°/** * æ‰©å±• Option å¯¹è±¡ * @param &#123;Object&#125; Default é»˜è®¤è®¾ç½® * @param &#123;Object&#125; Customize è‡ªå®šä¹‰è®¾ç½® * @returns &#123;Object&#125; Default æ‰©å±•åçš„è®¾ç½® */function extendOption(Default, Customize) &#123; if (typeof Customize !== 'object') &#123; Customize = &#123;&#125;; &#125; for (var i in Customize) &#123; if (Default.hasOwnProperty(i)) &#123; Default[i] = Customize[i]; &#125; &#125; return Default;&#125; options = extendOption(defaults, Customize); //ç°åœ¨options = Object.assign(&#123;&#125;, defaults, Customize); æ—¢ç„¶ç”¨åˆ°äº†Object.assignï¼Œå°±æ¥è¯´è¯´å®ƒå§ã€‚å‚è€ƒMDNä¸Šçš„å®šä¹‰ï¼š Object.assign() æ–¹æ³•å¯ä»¥æŠŠä»»æ„å¤šä¸ªçš„æºå¯¹è±¡æ‰€æ‹¥æœ‰çš„è‡ªèº«å¯æšä¸¾å±æ€§æ‹·è´ç»™ç›®æ ‡å¯¹è±¡ï¼Œç„¶åè¿”å›ç›®æ ‡å¯¹è±¡ã€‚Object.assign(target, â€¦sources) ä¹Ÿå°±æ˜¯è¯´ï¼Œå®ƒå¯ä»¥æŠŠâ€¦sourcesåŒ…å«å¯¹è±¡ä¸Šæ‰€æœ‰å¯æšä¸¾çš„å±æ€§ï¼Œå¤åˆ¶åˆ°ç›®æ ‡å¯¹è±¡ã€‚è¿™æ ·æµ…æ‹·è´ä¸€ä¸ªå¯¹è±¡å°±å¾ˆå®¹æ˜“äº†ã€‚var obj = &#123;a:1,b:2&#125;var copy = Object.assign(&#123;&#125;,obj);//console.log(copy);//Object &#123;a: 1, b: 2&#125; åŒæ—¶ä¹Ÿå¯ä»¥ç”¨æ¥åˆå¹¶è‹¥å¹²çš„å¯¹è±¡var a = &#123;a:1&#125;var b = &#123;b:1&#125;var c = &#123;c:1&#125;var copy = Object.assign(&#123;&#125;,a,b,c)copyObject &#123;a: 1, b: 1, c: 1&#125; ä½†æ˜¯éœ€è¦æ³¨æ„çš„æ˜¯ç»§æ‰¿å±æ€§å’Œä¸å¯æšä¸¾å±æ€§æ˜¯ä¸èƒ½æ‹·è´çš„ï¼Œå¦‚æœä½ å°è¯•è¿™ä¹ˆåšï¼Œä¼šå‘ç°è™½ç„¶è¯­å¥ä¸ä¼šæŠ¥é”™ï¼Œä½†æ˜¯ç»§æ‰¿å±æ€§å’Œä¸å¯æšä¸¾çš„å±æ€§å¹¶æ²¡æœ‰æ‹·è´æˆåŠŸã€‚å…¼å®¹æ€§ä¸Šï¼Œç›®å‰ chrome å·²ç»æ”¯æŒè¿™ä¸ªå±æ€§äº†ï¼Œä¸Šé¢çš„ä¾‹å­éƒ½æ˜¯åœ¨ chrome æ§åˆ¶å°ä¸Šå®éªŒè¿‡çš„ã€‚ è½¬ç å› ä¸ºç°åœ¨æµè§ˆå™¨å¤§å¤šè¿˜ä¸æ”¯æŒ ES2015 çš„è¯­æ³•ï¼Œæ‰€ä»¥webpack+Babel æ¥å°†ä»£ç è½¬æ¢ä¸º ES5 çš„è¯­æ³•ã€‚è¿™æ ·ï¼Œå°±å¯ä»¥ç›´æ¥åœ¨ç°ä»£æµè§ˆå™¨é‡Œé¢ä½¿ç”¨äº†ã€‚ æ€»ç»“ES6 å¸¦æ¥äº†å¾ˆå¤§çš„æ”¹è¿›ã€‚æ¯”å¦‚ let å’Œ const çš„å—çº§ä½œç”¨åŸŸå¯ä»¥é¿å…ä¸€äº›å‘ï¼Œåˆç†ä½¿ç”¨ç®­å¤´å‡½æ•°ä¹Ÿå¯æé«˜ä»£ç çš„å¯è¯»æ€§ï¼Œä»¥åŠ class,promise,module ç­‰æ–°ç‰¹æ€§ï¼Œå¯ä»¥å¤§å¤§æé«˜ç¼–ç¨‹çš„å¿«æ„Ÿã€‚è™½ç„¶ç›®å‰å…¼å®¹æ€§ä¸Šè¿˜æ˜¯æœ‰å¾ˆå¤šé—®é¢˜ï¼Œä½†æ˜¯æœ‰ babel è½¬ç å™¨çš„å­˜åœ¨ï¼Œä¹Ÿç®—æ˜¯å¯ä»¥é€æ­¥ä» ES3 å’Œ ES5 è¿‡æ¸¡åˆ° ES2015 äº†ï¼Œå°¤å…¶æ˜¯æœ€è¿‘åœ¨å°è¯•ç”¨ Reactï¼Œå‘ç°ç”¨ ES2015 ç®€ç›´çˆ½çš„é£èµ·ã€‚]]></content>
      <categories>
        <category>æŠ€æœ¯</category>
      </categories>
      <tags>
        <tag>JavaScript</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[æ‰‹æœºä¸Šé”®ç›˜å¼¹å‡ºæ—¶çš„ä¸€äº›é—®é¢˜]]></title>
    <url>%2F2016%2F01%2F12%2F%E8%A7%A3%E5%86%B3%E6%89%8B%E6%9C%BA%E9%94%AE%E7%9B%98%E8%A6%86%E7%9B%96%E5%BC%B9%E7%AA%97%E9%97%AE%E9%A2%98%2F</url>
    <content type="text"><![CDATA[åšæ‰‹æœºå•†åŸæ¥åˆ°ä¸€ä¸ªéœ€æ±‚ã€‚å…·ä½“å¤§æ¦‚æ˜¯è¿™æ ·å­çš„ï¼Œè¦æ±‚ç”¨æˆ·ç‚¹å‡»è´­ä¹°æŒ‰é’®åï¼Œç›´æ¥æ˜¾ç¤ºè¾“å…¥å¯†ç çš„å¼¹çª—å¹¶å¼¹å‡ºé”®ç›˜ã€‚æ‹¿åˆ°éœ€æ±‚ä¸€æƒ³ï¼Œè¿™æŒºç®€å•çš„ã€‚å°±éº»åˆ©çš„å†™äº†ä¸ªæ¨¡æ‹Ÿçš„å¯†ç è¾“å…¥æ¡†ï¼Œç„¶ååœ¨ç”¨æˆ·ç‚¹å‡»è´­ä¹°æŒ‰é’®çš„æ—¶å€™è®©ä»–å¼¹å‡ºæ¥ï¼Œå¹¶ä¸”è®©ç„¦ç‚¹ focus åœ¨ input æ¡†ä¸Šã€‚Chrome ä¸Šä¸€è¯•ï¼Œå®Œå…¨æ²¡é—®é¢˜ï¼Œè§‰å¾—è‡ªå·±ç®€ç›´å¤ªæ£’äº†æœ‰æ²¡æœ‰ã€‚å¯æ˜¯æ‹¿å‡ºè‡ªå·±çš„æ‰‹æœºä¸€è¯•ï¼Œoh no ~,é”®ç›˜ç›´æ¥æŠŠé¡µé¢ç»™æ¨äº†ä¸Šå»ï¼Œå¯¼è‡´å®Œå…¨çœ‹ä¸åˆ°å¼¹çª—å¼¹çš„æ˜¯ä¸ªä»€ä¹ˆä¸œè¥¿ã€‚ä½†æ˜¯åœ¨ Android ä¸Šæ˜¯æ²¡æœ‰ä»»ä½•é—®é¢˜çš„ã€‚è§‚å¯Ÿäº†ä¸‹æ˜¯å› ä¸º Android å’Œ ios ä¸Šé”®ç›˜å¼¹å‡ºçš„è¡Œä¸ºæ˜¯ä¸ä¸€æ ·çš„ï¼ŒAndroid ä¸Šé”®ç›˜å¼¹å‡ºæ¥ï¼Œç›´æ¥è¦†ç›–åœ¨åŸæ¥çš„é¡µé¢ä¸Šï¼Œè€Œ ios ä¸Šé”®ç›˜å¼¹å‡ºæ¥çš„æ—¶å€™ä¼šç›´æ¥æŠŠæ•´ä¸ªé¡µé¢æ¨ä¸Šå»ã€‚æ€ä¹ˆè§£å†³å‘¢ï¼Ÿå…¶å®ä¹ŸæŒºå¥½è§£å†³ï¼Œå°±æ˜¯é’ˆå¯¹ä¸åŒç³»ç»Ÿ hack ä¸€ä¸‹ã€‚è´­ä¹°é¡µé¢è¿™ä¸ªå¼¹çª—çš„å®šä½æ˜¯è¿™ä¹ˆå®šä½çš„ï¼š// åé¢çš„é®ç½©.dialog-wrap&#123; width: 100%; height: 100%; background: rgba(0,0,0,.7); position: relative;&#125;// å¯†ç è¾“å…¥æ¡†.password-dialog&#123; position: absolute; top: 0; left: 0; bottom: 0; right: 0; margin: 0;&#125; åœ¨å¼¹çª—å¼¹å‡ºçš„æ—¶å€™ï¼Œåˆ¤æ–­å½“å‰è®¾å¤‡æ˜¯ Android è¿˜æ˜¯ ios ï¼Œå¦‚æœæ˜¯ ios è®¾å¤‡ï¼Œè°ƒæ•´ä¸€ä¸‹å¯†ç è¾“å…¥æ¡†å®šä½å°± OK äº†ã€‚$$('.go-buy').click(function()&#123; showPassword(); //è°ƒå‡ºå¼¹çª— if(!device.android)&#123; // å¦‚æœä¸æ˜¯å®‰å“ï¼Œé‚£å°±è°ƒæ•´å®šä½ $$('.password-dialog').css(&#123; 'top': 'initial', 'bottom': '20px' &#125;) &#125;&#125;) æœ€ç»ˆå°±è¾¾åˆ°äº†ç›®æ ‡ï¼Œ ä¹‹å‰ä¹Ÿé‡åˆ°è¿‡ç±»ä¼¼çš„é—®é¢˜ï¼Œæ¯”å¦‚é¡µé¢ä¸Šæœ‰ä¸€ä¸ªè¾“å…¥æ¡†ï¼Œåœ¨ Android ä¸Šç‚¹å‡»è¾“å…¥æ¡†è°ƒå‡ºé”®ç›˜çš„æ—¶å€™ï¼Œå› ä¸ºé”®ç›˜ä¸ä¼šæŠŠé¡µé¢æ¨ä¸Šå»ï¼Œå¯¼è‡´å¦‚æœè¿™ä¸ªè¾“å…¥æ¡†åœ¨å½“å‰é¡µé¢æ¯”è¾ƒé ä¸‹çš„ä½ç½®ï¼Œå°±å¯èƒ½è¢«å¼¹å‡ºçš„é”®ç›˜è¦†ç›–æ‰ï¼Œçœ‹ä¸åˆ°å½“å‰é€‰ä¸­çš„è¾“å…¥æ¡†ï¼Œå½±å“ç”¨æˆ·ä½“éªŒã€‚è§£å†³æ–¹æ³•å…¶å®ä¹Ÿå¾ˆç®€å•ï¼Œå°±æ˜¯å½“ç‚¹å‡»è¾“å…¥æ¡†å¼¹å‡ºé”®ç›˜çš„æ—¶å€™ï¼Œè°ƒæ•´é¡µé¢ scrollTop å€¼ï¼Œè®©é¡µé¢çš„å¯è§†åŒºåŸŸåˆšå¥½æ»šåŠ¨åˆ°è¾“å…¥æ¡†è¿™ä¸€å—ï¼Œä¹Ÿå°±è§£å†³äº†è¿™ä¸ªé—®é¢˜ã€‚ è¿™äº›å‘ï¼Œåœ¨äº‹åçœ‹èµ·æ¥éƒ½å¾ˆç®€å•ï¼Œç„¶è€Œå½“åˆšé‡åˆ°çš„æ—¶å€™å°±æ˜¯ä¸çŸ¥é“æ€ä¹ˆè§£å†³ã€‚æ¯”å¦‚å¯†ç è¾“å…¥æ¡†é‚£ä¸ªï¼Œå½“æ—¶æ€»æ˜¯åœ¨æƒ³æ€ä¹ˆæ‰èƒ½è®©é”®ç›˜ä¸æŠŠé¡µé¢æ¨ä¸Šå»ï¼Œå¦‚æœä»è¿™ä¸ªè§’åº¦å»æƒ³è§£å†³åŠæ³•é‚£ææ€•å¾ˆéš¾æƒ³å‡ºåŠæ³•æ¥ï¼Œå› ä¸ºæ‰‹æœºæ“ä½œç³»ç»Ÿåœ¨å®ç°çš„æ—¶å€™äººå®¶å°±é‚£ä¹ˆè§„å®šäº†ï¼Œä½ æ€»ä¸èƒ½ç”¨ js å»æ”¹è¿™ä¸ªé”®ç›˜å¼¹å‡ºæ–¹å¼å§ï¼Œé™¤éä½ å†™ä¸ªæ¨¡æ‹Ÿé”®ç›˜ï¼Œä½†é‚£å°±æ˜¯èˆè¿‘æ±‚è¿œäº†ã€‚ä½†æ˜¯å¦‚æœæ¢ä¸ªè§’åº¦ï¼Œä»è°ƒæ•´é¡µé¢ä¸Šå…ƒç´ å®šä½æ¥è§£å†³ï¼Œé‚£å°±å¾ˆç®€å•äº†ã€‚æ‰€ä»¥ç¢°åˆ°é—®é¢˜ï¼Œä¸€å®šè¦ä»å¤šç§è§’åº¦å»æƒ³è§£å†³åŠæ³•ï¼Œè¿™æ ·æ‰èƒ½æ›´å®¹æ˜“çš„æ‰¾åˆ°é—®é¢˜çš„è§£å†³åŠæ³•ã€‚ä¸€å®šè¦æ”¾å¼€çœ¼ç•Œï¼Œæ”¾å¼€çœ¼ç•Œå•Šï¼]]></content>
      <categories>
        <category>æŠ€æœ¯</category>
      </categories>
      <tags>
        <tag>JavaScript</tag>
        <tag>æ‰‹æœºå¼€å‘</tag>
        <tag>ios</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[2015å¹´ç»ˆæ€»ç»“]]></title>
    <url>%2F2015%2F12%2F30%2F2015-year-end-summary%2F</url>
    <content type="text"><![CDATA[æ¥åˆ°æ­å·å›æƒ³ä¸€ä¸‹äºŒæœˆäºŒåå…«å·æ€€ç€å¿å¿‘çš„å¿ƒæ¥åˆ°æ­å·ã€‚ é‚£å¤©å¤©è¿˜ä¸‹ç€å¤§é›¨ï¼Œæˆ‘ä»æœºåœºå‡ºæ¥ä¸€è·¯å¤§å·´åŠ åœ°é“åˆ°æ»¨æ±ŸåŒºã€‚å‡ºäº†åœ°é“ç«™ï¼Œç«™å£ä¸€ä¸ªä¸‰è½®å¸ˆå‚…ä¸€çœ‹æˆ‘æ‹‰ä¸€ä¸ªè¡Œæç®±ï¼Œæ˜æ˜¾å¤–åœ°äººï¼Œéš”è€è¿œå°±å†å–ï¼Œèµ°ä¸èµ°ï¼æƒ³æƒ³æˆ‘æ€ä¹ˆä¹Ÿæ˜¯æœ‰å¯¼èˆªçš„äººï¼Œæ€ä¹ˆèƒ½è®©ä½ ä»¬å‘ã€‚ç„¶åå°±è·Ÿç€å¯¼èˆªæ‰¾é…’åº—ï¼Œç»“æœæ€ä¹ˆæ‰¾ä¹Ÿæ‰¾ä¸åˆ°ï¼Œå°±åœ¨ç›®çš„åœ°æ—è¾¹è½¬æ¥è½¬å»ï¼Œé—®è·¯äººä¹Ÿæ²¡äººå¬è¿‡é…’åº—åï¼Œæˆ‘ä¸€åº¦è®¤ä¸ºæ˜¯ä¸æ˜¯è®¢çš„é…’åº—æœ‰é—®é¢˜ã€‚æœ€åæ— å¥ˆï¼Œåˆè·‘å›åœ°é“å£ï¼Œæäº†äºŒåå—ä¸Šäº†ä¸‰è½®ï¼Œç»“æœäº”åˆ†é’Ÿå°±å¼€åˆ°äº†ï¼Œå…¶å®é‚£é…’åº—è·ç¦»åœ°é“å£ä¹Ÿå°±ä¸åˆ°ä¸€å…¬é‡Œï¼Œå› ä¸ºä¸‹é›¨è§†çº¿ä¸å¥½æ‰€ä»¥æˆ‘ä¸€ç›´æ‰¾ä¸åˆ°ã€‚åˆ°äº†é…’åº—ï¼Œæ”¶æ‹¾äº†ä¸€ä¸‹å‘ç°è¡Œæç®±éƒ½è¢«é›¨æ°´æ‰“æ¹¿äº†ï¼Œèµ¶ç´§æ‰“å¼€çœ‹äº†ä¸€ä¸‹ï¼Œè¿˜å¥½ï¼Œåªæœ‰åŸºæœ¬æ”¾åœ¨å¤–é¢çš„ä¹¦æœ‰ç‚¹æ½®ï¼Œè¡£æœä»€ä¹ˆçš„è¿˜æ˜¯å¹²çš„ã€‚æ´—äº†ä¸ªæ¾¡ï¼Œå°±å‡ºå»æ„Ÿå—è¿™ä¸ªè¢«èª‰ä¸ºäººé—´å¤©å ‚çš„é™Œç”ŸåŸå¸‚äº†ã€‚ä¸å¾—ä¸è¯´ï¼Œæ­å·åŸå¸‚çœŸçš„å¾ˆå¹²å‡€ï¼Œè€Œä¸”ç»¿åŒ–ä¹Ÿå¾ˆå¥½ï¼Œä½†æ˜¯é›¨çœŸçš„çœŸçš„å¤ªå¤šäº† æ‰¾æˆ¿å­åˆ°ä¸€ä¸ªæ–°çš„åŸå¸‚å·¥ä½œï¼Œé¦–è¦çš„äº‹æƒ…å°±æ˜¯æ‰¾æˆ¿å­ã€‚è¯´é“æ‰¾æˆ¿å­ï¼Œä¸å¾—ä¸è¯´è¿™æ˜¯ä¸€ä¸ªéå¸¸ç—›è‹¦çš„è¿‡ç¨‹ã€‚ ä»å¥½å‹ä¸‰æœˆåˆæ¥åˆ°æ­å·å¼€å§‹æ‰¾æˆ¿å­ï¼Œæ‰¾äº†å·®ä¸å¤šä¸€æ˜ŸæœŸçš„æ—¶é—´ï¼Œæœ€åè¿˜æ˜¯åœ¨æ²¡åŠæ³•ï¼Œä¸¤ä¸ªäººç¬¬äºŒå¤©éƒ½è¦ä¸Šç­çš„æƒ…å†µéšä¾¿æ‰¾äº†ä¸€ä¸ªä¸¤å±…å®¤ç§Ÿäº†ä¸‹æ¥ã€‚è¿™æˆ¿é—´è¯´å¥½ä¹Ÿè¿˜è¡Œï¼Œè¯´ä¸å¥½é‚£å°±æ˜¯å¤ªåµäº†ï¼Œå°¤å…¶æ˜¯å¤©æ°”å¾ˆå†·æˆ–è€…å¾ˆçƒ­äººä»¬éœ€è¦å¼€ç©ºè°ƒçš„æ—¶å€™ï¼Œé‚£å™ªéŸ³ï¼Œæ™šä¸Šä¸æˆ´è€³å¡æ˜¯æ²¡æ³•ç¡è§‰çš„ã€‚ç¡çœ è´¨é‡ä¸å¥½å¤§å¤§å½±å“æˆ‘äº†æ—¥å¸¸å·¥ä½œå’Œç”Ÿæ´»ï¼Œå¯æ˜¯ç”±äºç§ç§åŸå› ï¼Œæš‚æ—¶åˆä¸èƒ½æ¬å®¶ï¼Œæ‰€ä»¥ä¹Ÿå°±åœ¨å„ç§å™ªéŸ³ä¸­åº¦è¿‡äº†å°ä¸€å¹´æ—¶é—´ã€‚ å·¥ä½œæœ¬æ¥æ˜¯æ‹¿åˆ°ä½™æ­åŒºä¸€å®¶å…¬å¸offerçš„ï¼Œä¸‰æœˆä¸€å·è¦å»æŠ¥åˆ°çš„ã€‚ä½†æ˜¯è¢«æˆ‘ä»¬ç°åœ¨çš„è€å¤§æå‰ä¸€å¤©æ‹‰å»é¢è¯•ï¼Œå‘çš„offerè™½ç„¶è–ªæ°´æ²¡ç»™åˆ°ä½ï¼Œç”šè‡³è¿˜ä¸å¦‚å¦ä¸€å®¶å…¬å¸ç»™çš„å¤šæƒ…å†µï¼Œä¾ç„¶é€‰æ‹©äº†ç°åœ¨çš„å…¬å¸ã€‚ä¸ºä»€ä¹ˆå‘¢ï¼Ÿä¹Ÿè®¸æˆ‘å‚»å§ï¼Œè‡³å°‘ç°åœ¨çœ‹æ¥å½“æ—¶æˆ‘ç¡®å®æ˜¯å‚»ã€‚ä¸€ä¸ªå…¬å¸ç»™ä½ è–ªæ°´çš„å¤šå°‘ï¼Œä¹Ÿå°±æ˜¯å¯¹ä½ èƒ½åŠ›çš„è®¤å¯æœ‰å¤šå°‘ã€‚æ•´ä¸ªå·¥ä½œå†…å®¹ï¼Œæˆ‘è¿˜æ˜¯å¯ä»¥è½»æ¾ hold ä½çš„ï¼Œä» PC åˆ° Mobileï¼Œå¤§å¤§å°å°ä¹Ÿæœ‰æˆåä¸ªé¡¹ç›®ï¼Œè™½ç„¶æœ‰æ—¶ä¼šæœ‰äº›æ£˜æ‰‹çš„é—®é¢˜ï¼Œä½†æ˜¯åœ¨è€å¤§çš„æŒ‡ç‚¹ä¸‹è¿˜æ˜¯è½»æ¾è§£å†³äº†ã€‚æ€»ä½“ä¸Šæ¥çœ‹ï¼Œå·¥ä½œå†…å®¹éš¾åº¦ä¸å¤§ï¼Œéè¦è¯´æœ‰éš¾åº¦ï¼Œé‚£ä¹Ÿåªæœ‰å·¥ä½œé‡ä¸Šçš„éš¾åº¦ï¼Œå¯¹è¿™ä¸€ç‚¹æˆ‘å·²ç»æ— åŠ›åæ§½äº†ã€‚å…¬å¸ä¹Ÿä¸çŸ¥é“æ˜¯å› ä¸ºè¦ä¸Šå¸‚è¿˜æ˜¯ä»€ä¹ˆåŸå› ï¼Œæ•´ä½“ä¸Šéƒ½æ¯”è¾ƒæµ®èºï¼Œä»¥è‡³äºä¼šå‡ºç°è¯´è®©ä¸‰å¤©æå®Œä¸€ä¸ªæ‰‹æœºå•†åŸè¿™ç§å¥‡è‘©çš„äº‹æƒ…ã€‚ä¸è¿‡å·¥ä½œå½’å·¥ä½œï¼Œä¸èƒ½å› ä¸ºå·¥ä½œéš¾åº¦ä¸å¤§ï¼Œå°±å¿˜äº†æå‡è‡ªå·±çš„æŠ€èƒ½ã€‚è¿™ä¸€å¹´æ—¶é—´é‡Œï¼Œå¤§åŠçš„ä¸šä½™æ—¶é—´éƒ½ç”¨åœ¨ç»™è‡ªå·±å……ç”µä¸Šäº† ã€‚å…¶å®æ˜¯å› ä¸ºå‘¨æœ«åªæœ‰è‡ªå·±ä¸€ä¸ªäººï¼Œå®Œå…¨ä¸çŸ¥é“è¯¥å¹²å˜›ï¼Œé™¤äº†å¶å°”ä¸€ä¸ªäººå»è¥¿æ¹–è¾¹èµ°èµ°ï¼Œä¹Ÿå°±åªèƒ½å†™å†™ä»£ç ï¼ŒèŠä»¥æ…°è—‰äº†ã€‚ å…¶å®ƒå¹´åˆå‡‘äº†å¥—å¨å…·ï¼Œåƒæ¨¡åƒæ ·çš„ç‚’äº†å‡ æ¬¡èœï¼Œç„¶ååŸºæœ¬å°±å†ä¹Ÿæ²¡æœ‰è¿›è¿‡å¨æˆ¿ï¼› å…­æœˆä»½æˆ‘æŠ•å¥”çš„å¥½å‹å› ä¸ºç½‘æ˜“åŠ ç­è¿‡äºä¸¥é‡ç¦»å¼€äº†æ­å·ï¼Œå¯ç¨‹å»äº†æ­¦æ±‰ï¼Œå¥½å‹çš„ç¦»å»ä¼´éšçš„æ˜¯æ¢äº†ä¸€ä¸ªæ–°çš„å®¤å‹ï¼Œçˆ±å…»èŠ±å…»é±¼ï¼Œæœ‰æ—¶è¿˜ä¼šåšé¡¿é¥­ç»™æˆ‘åƒï¼› ä¸€ä¸ªäººå»æ¸¸æ³³ï¼Œæ³³æ± ç©äº†ä¸€ä¼šå‡ºå»ä¸Šäº†ä¸ªå•æ‰€ï¼Œå›æ¥å¿˜äº†å¸¦æ³³é•œç›´æ¥è·³åˆ°æ·±æ°´åŒºï¼Œç„¶åççœ¼ä¸€ç‰‡æµ‘æµŠï¼Œæ°´æ€§ä¸å¥½çš„æˆ‘å½“æ—¶å“å¾—è¿å‘›å‡ å£æ°´ï¼Œå¼ºè¡Œç¨³å®šæƒ…ç»ªååŠªåŠ›æ¸¸åˆ°äº†å¯¹å²¸ã€‚äº‹åæƒ³æƒ³çœŸæ˜¯åæ€•ï¼Œæ·±æ°´åŒºé‚£ä¹ˆå¤šäººï¼Œå¦‚æœå½“æ—¶æ²¡èƒ½ç¨³å®šç´§å¼ çš„æƒ…ç»ªæ°å¥½å®‰å…¨å‘˜åˆæ²¡çœ‹åˆ°æˆ‘ï¼Œé‚£æˆ‘åŸºæœ¬ä¸Š GG äº†ï¼Œä»¥åä¸€ä¸ªäººè¿˜æ˜¯ä¸è¦å»æ·±æ°´åŒºäº†ï¼› é™ªä¼´äº†è‡ªå·±å››å¹´çš„ç”µè„‘çªç„¶æ•£çƒ­é£æ‰‡ä¸è½¬äº†ï¼Œæ·˜å®ä¹°äº†é£æ‰‡è£…ä¸Šï¼Œé£æ‰‡æ˜¯å¥½äº†ï¼Œç»“æœå±å¹•ä¸äº®äº†ï¼Œæ¢äº†è·Ÿå±çº¿ä¾ç„¶æ²¡æœ‰ä»€ä¹ˆç”¨ï¼Œåªèƒ½å‰æ‰‹ä¹°äº†ä¸ª23å¯¸çš„æ˜¾ç¤ºå™¨å¤–æ¥ï¼Œä¸è¿‡å±å¤§çœŸå¿ƒçˆ½ï¼› ä¸‹é›¨å¤©æ—©ä¸Šä¸Šç­æ—¶ä¸ºäº†å¸®ä¸€ä¸ªçš„å“¥æ¨æŠ›äº†é”šçš„è½¦è€Œé”™è¿‡äº†å…¬äº¤ï¼Œä¸è¿‡è¿˜å¥½çš„å“¥å…è´¹æŠŠæˆ‘é€åˆ°äº†ä¸Šç­çš„åœ°æ–¹ï¼› ä¸€ä¸ªäººè·‘å»çœ‹ç”µå½±ï¼Œç»“æœçœ‹çš„è‡ªå·±çœ¼æ³ªå”°å”°çš„ï¼Œæœç„¶æ˜¯éšç€å¹´é¾„çš„å¢é•¿ï¼Œäººä¹Ÿå˜å¾—è¶Šæ¥è¶Šæ„Ÿæ€§äº†ï¼› å±•æœ›20162015å¹´åšä¸ºè‡ªå·±è½¬è¡Œåçš„ç¬¬ä¸€å¹´ï¼Œæ•´ä½“ä¸Šå¯¹è‡ªå·±è¿˜æ˜¯æ¯”è¾ƒæ»¡æ„çš„ï¼Œä½†æ˜¯ä¸èƒ½æ‡ˆæ€ ï¼Œè¦ç»§ç»­ä¿æŒæŠ€æœ¯èƒ½åŠ›çš„å¢é•¿ï¼Œä½†åŒæ—¶ä¹Ÿè¦æé«˜è‡ªå·±çš„ç”Ÿæ´»è´¨é‡ï¼Œæ¯•ç«Ÿå·¥ä½œæ˜¯ä¸ºäº†æ›´å¥½çš„ç”Ÿæ´»å˜›ã€‚ åœ¨æ­¤ç»™æ˜å¹´è®¢ä¸ªç®€å•çš„è§„å®šï¼š æ¯ä¸ªæœˆè‡³å°‘å†™ä¸€ç¯‡åšå®¢ è‡³å°‘æ¯ä¸¤å‘¨çœ‹ä¸€æ¬¡ç”µå½± æ¯ä¸¤ä¸ªæœˆçœ‹ä¸€æœ¬ä¹¦ åŠ å¼ºèº«ä½“é”»ç‚¼ è¯¥è¿½çš„ç¾å‰§ä¸èƒ½è½ä¸‹ å½“ç„¶è¿™äº›è®¡åˆ’å¹¶ä¸ä¼šæ‰§è¡Œï¼Œo(âˆ©_âˆ©)o å“ˆå“ˆ]]></content>
      <categories>
        <category>éšç¬”</category>
      </categories>
      <tags>
        <tag>å¹´ç»ˆæ€»ç»“</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[react-v2ex]]></title>
    <url>%2F2015%2F12%2F26%2Freact-v2ex%2F</url>
    <content type="text"><![CDATA[ä¸ºäº†ç»ƒæ‰‹ï¼Œç”¨ react å†™äº†ä¸ª v2ex çš„é¦–é¡µï¼šé¡µé¢åœ°å€é¡¹ç›®åœ°å€ æ•´ä¸ªé¡¹ç›®åŸºç¡€ react æ­å»ºï¼Œæ ·å¼æœ¬æ¥æ‰“ç®—ç”¨ inlineStyle æ¥å†™çš„ï¼Œä½†æ˜¯å‘ç°å†™èµ·æ¥å¤ªç´¯ï¼Œäºæ˜¯è¿˜æ˜¯ç”¨å›åˆ° sassï¼Œæœ€åç”¨ webpackæ¥ç¼–è¯‘ã€‚æœ¬æ¥æƒ³ç€çœ‹èƒ½ä¸èƒ½ç›´æ¥è°ƒç”¨ V ç«™çš„ API æ¥åšä¸€ä¸ªçº¯å‰ç«¯çš„é¦–é¡µï¼Œæ‰€æœ‰çš„æ•°æ®éƒ½ç”¨ ajax æ¥è°ƒï¼Œä½†æ˜¯å‘ç°å› ä¸ºè·¨åŸŸçš„é—®é¢˜ï¼Œå‰ç«¯æ— æ³•æ‹¿åˆ°æ•°æ®ï¼Œä¹Ÿå°±æ”¾å¼ƒäº†ï¼Œæœ€ç»ˆä¹Ÿåªèƒ½æ˜¯ä¸€ä¸ªé™æ€é¡µé¢ã€‚ è¯´ä¸€ä¸‹å†™ä»£ç ä¸­é‡åˆ°çš„ä¸€äº›é—®é¢˜å§ï¼Œé¦–å…ˆæ•´ä¸ªé¡¹ç›®çš„æ–‡ä»¶ç»“æ„å¦‚ä¸‹ï¼šâ”‚ .babelrcâ”‚ .editorconfigâ”‚ .eslintrcâ”‚ .gitignoreâ”‚ index.htmlâ”‚ index.jsâ”‚ package.jsonâ”‚ readme.mdâ”‚ server.jsâ”‚ tree.txtâ”‚ webpack.config.jsâ”‚ â”œâ”€apiâ”‚ hot.jsonâ”‚ latest.jsonâ”‚ â”œâ”€buildâ”‚ bundle.jsâ”‚ index.htmlâ”‚ â”œâ”€componentsâ”‚ CommunityStatus.jsâ”‚ Footer.jsâ”‚ Header.jsâ”‚ Main.jsâ”‚ SearchInput.jsâ”‚ TopicsHot.jsâ”‚ UserLink.jsâ”‚ UserPanel.jsâ”‚ â”œâ”€containersâ”‚ App.jsâ”‚ â”œâ”€sassâ”‚ â”‚ main.scssâ”‚ â”‚ _config.scssâ”‚ â”‚ _global.scssâ”‚ â”‚ _normalize.scssâ”‚ â”‚ _page.scssâ”‚ â”‚ â”‚ â””â”€componentsâ”‚ _CommunityStatus.scssâ”‚ _Footer.scssâ”‚ _Header.scssâ”‚ _Main.scssâ”‚ _TopicHot.scssâ”‚ _UserPanel.scssâ”‚ â”œâ”€staticâ”‚ â””â”€imagesâ”‚ qbar_light@2x.pngâ”‚ â””â”€utils getData.js ä¼˜ç‚¹å…ˆè¯´è¯´ç”¨ react å†™çš„ä¼˜ç‚¹ï¼Œå®ƒç«èµ·æ¥ä¸æ˜¯æ²¡æœ‰é“ç†çš„ï¼Œç¡®å®æ˜¯æœ‰å¾ˆå¤šä¼˜ç‚¹çš„ï¼Œæˆ‘è¿™é‡Œåªè¯´å®é™…ç ä»£ç ä¸­çš„ä¼˜ç‚¹ï¼Œä¸æ¶‰åŠ virtualDom å¸¦æ¥çš„æ€§èƒ½æå‡ä¹‹ç±»çš„ã€‚ ç»“æ„æ¸…æ™°å› ä¸º react æœ¬èº«å°±æ˜¯ç»„ä»¶åŒ–çš„ï¼Œæ‰€ä»¥æ•´ä¸ªé¡µé¢æŒ‰ç»“æ„è¢«åˆ†ä¸ºå‡ ä¸ªç»„ä»¶ï¼Œæ¯ä¸ªç»„ä»¶è‡ªå·±ç®¡ç†è‡ªå·±çš„å±•ç¤ºå’Œè¡Œä¸ºï¼Œæœ€åé€šè¿‡å®¹å™¨ç»„åˆèµ·æ¥ï¼Œç»“æ„éå¸¸æ¸…æ™°ã€‚ç»„ä»¶çš„çŠ¶æ€éƒ½æ˜¯é€šè¿‡ state æˆ–è€… props æ¥æ§åˆ¶ï¼Œè€Œæˆ‘è®¤ä¸ºå¤§å¤šæ•°ç»„ä»¶åªéœ€è¦ props å°±è¡Œäº†ï¼Œåªåœ¨é¡¶å±‚ç»„ä»¶ä¸Šæ§åˆ¶ stateï¼Œè¿™æ ·å¯ä»¥æ›´åŠ æ¸…æ™°çš„ç®¡ç† stateã€‚ æ˜“äºç»´æŠ¤å› ä¸ºç»“æ„æ¸…æ™°ï¼Œæ‰€ä»¥å¯ä»¥é¢„æƒ³åˆ°ï¼Œè¿™æ ·æ˜¯æ˜“äºç»´æŠ¤çš„ã€‚æ¯”å¦‚å¤´éƒ¨è¦æ”¹ç»“æ„å’Œæ ·å¼ï¼Œé‚£å°±åªæ”¹ Hearker.js å’Œå¯¹åº” _Header.scss å°±è¡Œäº†ï¼Œæˆ–è€…è¦æ”¹é€»è¾‘ï¼Œé‚£åªè¦ä¿®æ”¹ Hearker.js ä¸­å’Œ props æˆ–è€… state ç›¸å…³çš„ä»£ç å°±è¡Œäº†ï¼Œä¸ç”¨åƒä»¥å‰é‚£æ ·åœ¨æ•´ä¸ªé¡µé¢çš„é€»è¾‘é‡Œé¢å»æ‰¾è¿™å—çš„ä»£ç ã€‚è¿™æ ¹æˆ‘ç›®å‰ç»´æŠ¤çš„ä¸€äº›è€é¡¹ç›®æ¥æ¯”ï¼Œç»´æŠ¤æ€§ä¸Šç®€ç›´æ˜¯å¤©å£¤ä¹‹åˆ«ï¼Œå†ä¹Ÿä¸ç”¨æ„æ‰¾ä¸åˆ°ä»£ç åœ¨å“ªæ”¹äº†ï¼Œä¹Ÿä¸ç”¨åæ§½é‚£ä¸€ä¸²ä¸²çš„ä¸çŸ¥é“å¹²ä»€ä¹ˆçš„ jquery ä»£ç äº†ã€‚ çœå»äº†æ¨¡ç‰ˆå¼•æ“å› ä¸º react å¯ä»¥è¯´æ˜¯è‡ªå¸¦äº†æ¨¡ç‰ˆå¼•æ“ï¼Œç±»ä¼¼çš„ jade æˆ–è€… ejs ä¹‹ç±»çš„æ¨¡ç‰ˆå¼•æ“ä¹Ÿå°±ä¸éœ€è¦äº†ï¼Œç±»ä¼¼è¿™æ ·æ‹¿åˆ°æ•°æ®ç›´æ¥æ¸²æŸ“å°±è¡Œäº†ã€‚&lt;div&gt; &#123;Hot.map((topic, index) =&gt; &lt;TopicsHotItem &#123;...topic&#125; key=&#123;index&#125; /&gt; )&#125;&lt;/div&gt; ç¼ºç‚¹ç»„ä»¶åˆ’åˆ†å¤§å°çš„ç–‘æƒ‘ä¸€ä¸ªé¡µé¢åˆ°åº•è¦åˆ’åˆ†æˆå‡ ä¸ªéƒ¨åˆ†ï¼Ÿæ ¹æ®é€»è¾‘åˆ†è¿˜æ˜¯æ ¹æ®é¡µé¢å¸ƒå±€åˆ†ï¼Ÿç»„ä»¶åˆ†åˆ°é‚£ä¸ªå±‚çº§ï¼ŸåƒVç«™çš„è¿™ä¸ªå¤´éƒ¨ï¼Œæ˜¯åˆ’åˆ†æˆä¸€ä¸ªç»„ä»¶è¿˜æ˜¯ä¸‰ä¸ªï¼Ÿå½“ç„¶è¿™ä¸ªå¯èƒ½ä¸èƒ½ç®—æ˜¯ç¼ºç‚¹ï¼Œå¯èƒ½æ˜¯å› ä¸ºæˆ‘ç»éªŒä¸è¶³ä»¥è‡³äºæ— æ³•ç¡®å®šè¯¥å¦‚ä½•åŒ–åˆ†ã€‚ æŠ¥é”™ä¸å‹å¥½æ¯”å¦‚æˆ‘ className ä¹ æƒ¯æ€§çš„å†™æˆäº† classï¼Œç„¶è€Œconsoleé‡Œé¢åªæ˜¯æŠ¥äº†ä¸ª Did you mean className çš„é”™ï¼Œä½†æ˜¯æŠ¥ä¸å‡ºæ¥é”™åœ¨å“ªä¸ªæ–‡ä»¶ï¼Œæ›´ä¸ç”¨æŒ‡æœ›æŠ¥é”™åœ¨å“ªè¡Œäº†ï¼Ÿåªèƒ½è‡ªå·±å»æ‰¾ï¼Œå½“é¡¹ç›®å¤§èµ·æ¥çš„æ—¶å€™ï¼Œè¿™ä¸ªè‚¯å®šå¾ˆå‘çˆ¹ã€‚ æ€»ç»“æ•´ä½“æ¥è¯´ï¼Œ react å†™èµ·æ¥è¿˜æ˜¯å¾ˆçˆ½çš„ï¼Œè€Œä¸”æœ‰ç‚¹ä¹Ÿå¾ˆæ˜ç¡®ï¼Œç»„ä»¶åŒ–Â·å•å‘æ•°æ®æµÂ·å‡½æ•°å¼ç¼–ç¨‹ï¼Œè™½ç„¶æœ‰ä¸€äº›ä¸æˆç†Ÿçš„é—®é¢˜ï¼Œä½†æ˜¯ä¼˜ç‚¹è¿˜æ˜¯çªå‡ºï¼Œå¦‚æœå¯ä»¥çš„è¯ï¼Œåœ¨ä¸€äº›å°å‹é¡¹ç›®é‡Œå®é™…è¯•æ°´ä¸€ä¸‹åº”è¯¥è¿˜æ˜¯ä¸é”™çš„ã€‚]]></content>
      <categories>
        <category>æŠ€æœ¯</category>
      </categories>
      <tags>
        <tag>JavaScript</tag>
        <tag>React</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[åŸºäº Express+Gulp+BrowserSync æ­å»ºé«˜æ€§èƒ½çš„å‰ç«¯å¼€å‘ç¯å¢ƒ]]></title>
    <url>%2F2015%2F11%2F02%2Fdev-environment-Express-Gulp-BrowserSync%2F</url>
    <content type="text"><![CDATA[åŸæ–‡å‘å¸ƒäºæˆ‘çš„åšå®¢ ä¸ºä»€ä¹ˆè¦æ­è¿™ä¹ˆä¸€å¥—æ¡†æ¶å…¬å¸ Pc ç«¯ä»¥å‰é—ç•™çš„é¡¹ç›®ï¼Œéƒ½æ˜¯åŸºäºjekyll+ruby-sassè¿™ä¸€å¥—æ¯”è¾ƒè€çš„æŠ€æœ¯æ­å»ºçš„ã€‚ä¸è¿‡ jekyll çš„æ¨¡ç‰ˆç»§æ‰¿åŠ ä¸Š sass å¼ºå¤§é¢„å¤„ç†èƒ½åŠ›ï¼ŒåŒæ—¶é…åˆ Grunt åšä»»åŠ¡ç®¡ç†ï¼Œä¸€åˆ‡è¿˜æ˜¯å¾ˆå¾—å¿ƒåº”æ‰‹çš„ã€‚ ç„¶è€Œéšç€é¡¹ç›®è§„æ¨¡çš„æ€¥å‰§å¢å¤§ï¼Œè¿™ä¸€å¥—ä¸œè¥¿çš„é€Ÿåº¦æ˜¯åœ¨æ˜¯å¤ªæ…¢äº†ï¼Œä¸€è‡³äºåæ¥ä¸€æ—¦è¿™ä¸ªé¡¹ç›®æœ‰éœ€è¦æ±‚è¦æ”¹æˆ‘å°±å¤´ç–¼ï¼Œå€’ä¸æ˜¯è¯´å¤´ç–¼éœ€æ±‚æ€ä¹ˆæ”¹ï¼Œè€Œæ˜¯ä½ éšä¾¿æ”¹ä¸€ä¸ªæ–‡ä»¶ï¼Œä» jekyll æ£€æµ‹åˆ°æ”¹åŠ¨åˆ°ç¼–è¯‘å®Œ sass åˆ°æµè§ˆå™¨è‡ªåŠ¨åˆ·æ–°ï¼ŒåŸºæœ¬éœ€è¦ 40+ sï¼Œè¿™å®Œå…¨ä¸èƒ½æ¥å—ã€‚ äºæ˜¯ä¸€ç›´å°±æ‰“ç®—æ–°æ­ä¸€å¥—å¼€å‘ç¯å¢ƒï¼Œåˆšå¥½å‰æ®µæ—¶é—´æœ‰ä¸ªæ–°é¡¹ç›®ï¼Œæˆ‘å°±æ‹¿æ¥æ“åˆ€åŠ¨æ‰‹äº†ï¼Œç›®å‰å·²ç»ç”¨å®ƒåšäº†ä¿©ä¸ªé¡¹ç›®ä¸‹æ¥ï¼Œåœ¨åŸæœ‰åŸºç¡€ä¸Šåšäº†ä¸€äº›ä¿®æ”¹ä¹‹åï¼Œå·²ç»å®Œå…¨å¯ä»¥æ›¿ä»£åŸæ¥é‚£ä¸€å¥—æ‡‚äº†ã€‚ æ€§èƒ½å¾—ç›Šäº node-sass å¯¹ ruby-sass åœ¨ç¼–è¯‘é€Ÿåº¦ä¸Šçš„ç¢¾å‹ä»¥åŠè¢« jade å®Œçˆ†çš„ jekyllã€‚ç°åœ¨é¡¹ç›®ä¸­ä»æ–‡ä»¶å˜åŠ¨=&gt;ç¼–è¯‘å®Œæˆ=&gt;æµè§ˆå™¨è‡ªåŠ¨åˆ·æ–°ï¼Œæ•´ä¸ªè¿‡ç¨‹åœ¨ 1s å·¦å³ï¼Œå¯ä»¥è¯´é€Ÿåº¦æå‡äº†å‡ åå€ã€‚è€Œä¸”æ•´ä¸ªè¿‡ç¨‹éƒ½æ˜¯å…¨è‡ªåŠ¨çš„ï¼Œæ— è®ºä½ ä¿®æ”¹äº† js,css è¿˜æ˜¯ html æ–‡ä»¶ï¼Œæµè§ˆå™¨éƒ½ä¼šåœ¨é‡æ–°ç¼–è¯‘å®Œæˆåè‡ªåŠ¨åˆ·æ–°ã€‚ æ–‡ä»¶ç»“æ„è¿™æ˜¯é¡¹ç›®å¼€å‘æ—¶çš„æ–‡ä»¶ç»“æ„ï¼š å…¶ä¸­ public,router,views éƒ½æ˜¯ express é»˜è®¤çš„æ–‡ä»¶ç»“æ„ï¼Œè¿™é‡Œå°±ä¸åšä»‹ç»äº†ã€‚submodule æ˜¯æˆ‘ä»¬ä¸åŒé¡¹ç›®ä¸­å…¬ç”¨çš„ä»£ç åº“ï¼Œè¿™æ ·å¯ä»¥å°‘å†™å¾ˆå¤šå…¬å…±ä»£ç ã€‚ æŠ€æœ¯ç»†èŠ‚æ•´ä¸ªé¡¹ç›®çš„æŠ€æœ¯æ ˆæ˜¯ jade+node-sass+jsï¼Œå®ç°å…¨è‡ªåŠ¨å¼€å‘ã€‚é¦–å…ˆåœ¨ views ä¸‹é¢ï¼Œå®šä¹‰å¥½ jade æ¨¡ç‰ˆæ–‡ä»¶ï¼Œç„¶åå¼€å§‹æ–°åŠ é¡µé¢ å…³ç³»ä¾èµ–è¿™ä¸ªç¯å¢ƒï¼Œä¸»è¦åŸºäº Express,Gulp ä»¥åŠä¸€ç³»åˆ—çš„Gulpæ’ä»¶æ­å»ºï¼Œè¿™ä¸ªæ˜¯å¼€å‘ç¯å¢ƒçš„ä¾èµ–å…³ç³»ï¼š&#123; "dependencies": &#123; "body-parser": "~1.13.2", "cookie-parser": "~1.3.5", "debug": "~2.2.0", "express": "~4.13.1", "jade": "~1.11.0", "morgan": "~1.6.1", "serve-favicon": "~2.3.0" &#125;, "devDependencies": &#123; "browser-sync": "^2.9.1", "del": "^2.0.2", "gulp": "^3.9.0", "gulp-autoprefixer": "^3.0.1", "gulp-jade": "^1.1.0", "gulp-nodemon": "^2.0.4", "gulp-sass": "^2.0.4", "gulp-sourcemaps": "^1.5.2", "jade": "^1.11.0" &#125;&#125; å…¶ä¸­ï¼Œexpress ä¸»è¦ç”¨æ¥æ¸²æŸ“ jade æ¨¡ç‰ˆå¼•æ“ä»¥åŠæä¾›è·¯ç”±åŠŸèƒ½ï¼ŒåŒæ—¶èµ·ä¸€ä¸ªæœ¬åœ°çš„æœåŠ¡å™¨ã€‚æœ‰äººè¯´ï¼Œæ¸²æŸ“jade æ¨¡ç‰ˆï¼Œæˆ‘ç›´æ¥ç”¨ gulp ä¹Ÿå¯ä»¥å•Šã€‚æ˜¯çš„ï¼Œgulp æ˜¯å¯ä»¥ç›´æ¥æ¸²æŸ“ jade æ¨¡ç‰ˆï¼Œä½†æ˜¯æœ‰ä¸€ä¸ªé—®é¢˜ï¼Œå°±æ˜¯å¦‚æœä½ æœ¬åœ°åªä¿®æ”¹äº†ä¸€ä¸ª jade æ–‡ä»¶æ—¶å€™ï¼Œgulp ä¹Ÿéœ€è¦æŠŠæ‰€æœ‰çš„ jade æ–‡ä»¶å…¨éƒ¨æ¸²æŸ“ä¸€éï¼Œè¿™æ˜æ˜¾ä¼šæµªè´¹å¾ˆå¤šæ—¶é—´ã€‚ æ‰€ä»¥æˆ‘å¼•å…¥äº† expressï¼Œåªä¼šæŒ‰éœ€æ¸²æŸ“ jadeï¼ŒèŠ‚çœäº†å¾ˆå¤šæ—¶é—´ã€‚åŒæ—¶ä¸€ä¸ªé«˜æ•ˆçš„å¼€å‘ç¯å¢ƒå¿…é¡»æœ‰æµè§ˆå™¨è‡ªåŠ¨åˆ·æ–°ï¼Œä½†æ˜¯ express æ²¡æœ‰è¿™ä¸ªåŠŸèƒ½ã€‚æ‰€ä»¥æˆ‘å¼•å…¥äº† browser-syncï¼Œç”¨å®ƒæ¥ä»£ç† express å¯åŠ¨çš„æœ¬åœ°æœåŠ¡ï¼Œç„¶åæ¥ç›‘æµ‹æœ¬åœ°æ–‡ä»¶çš„å˜åŠ¨ï¼Œæ¥åšåˆ°æµè§ˆå™¨è‡ªåŠ¨åˆ·æ–°ã€‚ æœ‰åŒå­¦å¯èƒ½ä¼šé—®äº†ï¼Œå¦‚æœæˆ‘æ”¹äº† express ç›¸åº”çš„ js æ–‡ä»¶æ€ä¹ˆåŠï¼Œæˆ–è€… jade æ–‡ä»¶ç¼–è¯‘å‡ºé”™äº†æ€ä¹ˆåŠã€‚å› ä¸ºè¿™äº›æ—¶å€™ express æœåŠ¡å™¨éƒ½ä¼š crash æ‰ï¼Œéœ€è¦é‡å¯ã€‚æ‰€ä»¥æˆ‘å¼•å…¥äº† nodemonï¼Œæ¥åš express æœåŠ¡å™¨çš„è‡ªåŠ¨é‡å¯åŠŸèƒ½ã€‚ åœ¨è¿™ä¸ªç¯å¢ƒä¸‹é¢ï¼Œæˆ‘åœ¨å¼€å‘ä¸­æ‰€èƒ½ç¢°åˆ°çš„æ‰€æœ‰ jadeï¼Œscssï¼Œjs æ–‡ä»¶çš„æ”¹åŠ¨éƒ½ä¼šè¢«æ£€æµ‹åˆ°å¹¶ä½œå‡ºç›¸åº”çš„åŠ¨ä½œï¼Œè€Œä¸”é€Ÿåº¦è¿˜éå¸¸å¿«ã€‚è®©æˆ‘å¯ä»¥èŠ±æ›´å¤šæ—¶é—´åœ¨ä¸šåŠ¡ä»£ç çš„å¼€å‘ä¸Šï¼Œè€Œä¸æ˜¯ä¸æ–­é‡å¯æœåŠ¡å’Œåˆ·æ–°æµè§ˆå™¨ã€‚ æœ€åè¿™ä¸ªä¸œè¥¿è¢«æˆ‘æ”¾åˆ° Githubä¸Šäº†ï¼Œåœ°å€åœ¨è¿™ã€‚ åŒæ—¶é™„ä¸Š gulpfile å…¨æ–‡ï¼Œä»¥ä¾›å‚è€ƒï¼š 'use strict';var gulp = require('gulp');var browserSync = require('browser-sync');var reload = browserSync.reload;var sass = require('gulp-sass');var prefix = require('gulp-autoprefixer');var nodemon = require('gulp-nodemon');var sourcemaps = require('gulp-sourcemaps');var jade = require('gulp-jade');var stylus = require('gulp-stylus');var rename = require('gulp-rename');var del = require('del');//dev task start//DONE can not compile the sass or less filegulp.task('sass', function () &#123; return gulp.src(['./sass/personal.scss']) .pipe(sourcemaps.init()) .pipe(sass(&#123;errLogToConsole: true&#125;) .on('error', sass.logError)) .pipe(prefix('last 2 versions', '&gt; 1%', 'ie 8', 'Android 2')) .pipe(sourcemaps.write()) .pipe(gulp.dest('./public/css')) .pipe(reload(&#123;stream: true&#125;));&#125;);gulp.task('browser-sync', ['nodemon'], function () &#123; browserSync.init(null, &#123; proxy: 'http://localhost:3000', files: ['public/**/*.*', 'views/**/*.*', 'submodule/**/*.*'], browser: 'google chrome', notify: false, port: 5000 &#125;);&#125;);gulp.task('movesub', function () &#123; return gulp.src(['./submodule/images/**/*.*'], &#123;base: './submodule'&#125;) .pipe(gulp.dest('./public'))&#125;);gulp.task('stylus', function () &#123; return gulp.src('submodule/stylus/public.styl') .pipe(stylus()) .pipe(rename(&#123; extname: '.scss' &#125;)) .pipe(gulp.dest('submodule/stylus/'))&#125;);gulp.task('nodemon', function (cb) &#123; del(['./public/*.html']); var called = false; return nodemon(&#123; script: 'bin/www' &#125;).on('start', function () &#123; if (!called) &#123; cb(); called = true; &#125; &#125;);&#125;);//dev task endgulp.task('clean', function (cb) &#123; del(['./dist/*'], cb)&#125;);gulp.task('copy', function () &#123; return gulp.src([ 'public/css/**/*', 'public/images/**/*', 'public/js/**/*', 'public/pageScripts/**/*' ], &#123;base: './public'&#125;) .pipe(gulp.dest('./dist'))&#125;);//build task start//DONE add build taskgulp.task('jade', function () &#123; return gulp.src(['views/**/*.jade', '!views/layout/**/*.jade', '!views/includes/**/*.jade']) .pipe(jade(&#123;pretty: true&#125;)) .pipe(gulp.dest('./dist'));&#125;);//build task endgulp.task('dist', ['clean', 'copy', 'jade']);gulp.task('default', ['browser-sync', 'sass', 'movesub'], function () &#123; gulp.watch(['sass/**/*.*', '.submodule/stylus/**/*.*'], ['sass']);&#125;);]]></content>
      <categories>
        <category>æŠ€æœ¯</category>
      </categories>
      <tags>
        <tag>JavaScript</tag>
        <tag>Express</tag>
        <tag>å¼€å‘ç¯å¢ƒ</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[Canvas åŸºç¡€]]></title>
    <url>%2F2015%2F10%2F19%2Ffirst-contact-of-canvas%2F</url>
    <content type="text"><![CDATA[é¦–å…ˆå¼•ç”¨ MDN ä¸Šå¯¹äº canvas çš„å®šä¹‰ï¼š &lt;canvas&gt; æ˜¯ HTML5 æ–°å¢çš„å…ƒç´ ï¼Œå¯ä½¿ç”¨JavaScriptè„šæœ¬æ¥ç»˜åˆ¶å›¾å½¢ã€‚ä¾‹å¦‚ï¼šç”»å›¾ï¼Œåˆæˆç…§ç‰‡ï¼Œåˆ›å»ºåŠ¨ç”»ç”šè‡³å®æ—¶è§†é¢‘å¤„ç†ä¸æ¸²æŸ“ã€‚ ä¹Ÿå°±æ˜¯è¯´è¿™æ˜¯æµè§ˆå™¨æä¾›ç»™æˆ‘ä»¬çš„ä¸€ä¸ªç”»å¸ƒå’Œä¸°å¯Œçš„æ¥å£ï¼Œå¯ä»¥ç”¨æ¥åˆ¶ä½œå„ç§å¤æ‚çš„æ•ˆæœã€‚&lt;canvas&gt; å…ƒç´ åˆ›é€ äº†ä¸€ä¸ªå›ºå®šå¤§å°çš„ç”»å¸ƒï¼Œå®ƒå…¬å¼€äº†ä¸€ä¸ªæˆ–å¤šä¸ªæ¸²æŸ“ä¸Šä¸‹æ–‡ã€‚å…¶å¯ä»¥ç”¨æ¥ç»˜åˆ¶å’Œå¤„ç†è¢«ç°å®çš„é¡µé¢ã€‚è¿™æ˜¯ canvas 2d çš„åæ ‡ï¼Œå¯ä»¥çœ‹åˆ°å·¦ä¸Šè§’ä¸ºåŸç‚¹ï¼Œæ¨ªè½´ä¸ºxè½´ï¼Œçºµè½´ä¸ºyè½´ã€‚æˆ‘ä»¬æ‰€æœ‰çš„canvas2dçš„åŠŸèƒ½å®ç°éƒ½æ˜¯åœ¨è¿™ä¸ªåæ ‡ç³»ä¸­ã€‚ åŸºæœ¬ç”¨æ³•æœ¬æ–‡åªç®€å•ä»‹ç»ä¸€ä¸‹çŸ©å½¢ã€çº¿æ®µå’Œåœ†å¼§çš„ç”»æ³•ã€‚ çŸ©å½¢é€šè¿‡ä¸€ä¸ªç®€å•çš„ä¾‹å­æ¥äº†è§£ä¸€ä¸‹åŸºæœ¬çš„APIï¼š HTML:&lt;canvas id="canvas" style="height:100%"&gt; å½“å‰æµè§ˆå™¨ä¸æ”¯æŒCanvasï¼Œè¯·æ›´æ¢æµè§ˆå™¨åå†è¯•&lt;/canvas&gt; JavaScript:var canvas = document.getElementById(&apos;canvas&apos;);var ctx = canvas.getContext(&apos;2d&apos;);var WINDOW_WIDTH = window.screen.availWidth;var WINDOW_HEIGHT = window.screen.availHeight;ctx.clearRect(0, 0, WINDOW_WIDTH, WINDOW_HEIGHT)ctx.beginPath();ctx.fillStyle = &apos;#000&apos;;ctx.fillRect(10, 10, 55, 50);ctx.fillStyle = &apos;rgba(0,0,200,0.5)&apos;ctx.fillRect(30, 30, 55, 50); é¡µé¢ä¸Šä¼šå¦‚ä¸‹æ˜¾ç¤ºï¼š é¦–å…ˆè·å–åˆ° canvas å…ƒç´ ï¼Œå¹¶é€šè¿‡ getContext(â€˜2dâ€™) è·å–åˆ°å®ƒçš„æ¸²æŸ“ä¸Šä¸‹æ–‡ã€‚ clearRect(x, y, width, height)æ¸…ç©ºæŒ‡å®šåŒºåŸŸï¼Œå¦‚æœéœ€è¦åšåŠ¨ç”»çš„è¯ï¼Œæ¯æ¬¡é‡æ–°æ¸²æŸ“å‰éƒ½éœ€è¦è°ƒç”¨è¿™ä¸ªå‡½æ•°æ¥æ¸…é™¤å‰ä¸€å¸§çš„å†…å®¹ã€‚ beginPath()æ–°å»ºä¸€æ¡è·¯å¾„ fillStyleç”¨æ¥è®¾ç½®è¦å¡«å……çš„é¢œè‰² ctx.fillRect(10, 10, 55, 50);ä»¥xè½´ç­‰äº10ï¼Œyè½´ç­‰äº10ä¸ºèµ·ç‚¹ï¼Œç»˜åˆ¶ä¸€ä¸ªå®½55é«˜50çš„çŸ©å½¢ã€‚ strokeRect(x,y,width,height)è·ŸfillRectä¸åŒçš„åœ°æ–¹åœ¨äºï¼ŒstrokeRectä¼šç»˜åˆ¶ä¸€ä¸ªçŸ©å½¢çš„è¾¹æ¡†ï¼Œå¦‚ä¸‹ï¼š çº¿æ®µç»˜åˆ¶ä¸€ä¸ªä¸‰è§’å½¢ctx.beginPath();ctx.moveTo(75, 50);ctx.lineTo(100, 75);ctx.lineTo(100, 25);ctx.closePath();ctx.stroke(); moveTo(x,y)å®šä¹‰ä¸€ä¸ªèµ·ç‚¹ï¼Œä»è¿™ä¸ªç‚¹å¼€å§‹ç»˜åˆ¶ lineTo(x,y)ç»˜åˆ¶ä¸€æ¡ä»å½“å‰ä½ç½®åˆ°æŒ‡å®šxä»¥åŠyä½ç½®çš„ç›´çº¿ closePath()é—­åˆå½“å‰è·¯å¾„ï¼Œä¹Ÿå¯ä»¥ç”¨lineToåˆ°èµ·ç‚¹æ¥ä»£æ›¿ storke()æ ¹æ®å·²æœ‰è·¯å¾„çš„æ¥ç»˜åˆ¶çº¿æ®µï¼Œä¹Ÿå°±æ˜¯è¯´å¦‚æœä¸æ‰§è¡Œstroke(),é‚£ä¹ˆç”»å¸ƒä¸Šä»€ä¹ˆéƒ½æ²¡æœ‰ã€‚ åœ†å¼§arc(x, y, radius, startAngle, endAngle, anticlockwise)è¯¥æ–¹æ³•æœ‰äº”ä¸ªå‚æ•°ï¼š x,yä¸ºç»˜åˆ¶åœ†å¼§æ‰€åœ¨åœ†ä¸Šçš„åœ†å¿ƒåæ ‡ã€‚radiusä¸ºåŠå¾„ã€‚startAngleä»¥åŠendAngleå‚æ•°ç”¨å¼§åº¦å®šä¹‰äº†å¼€å§‹ä»¥åŠç»“æŸçš„å¼§åº¦ã€‚è¿™äº›éƒ½æ˜¯ä»¥xè½´ä¸ºåŸºå‡†ã€‚å‚æ•°anticlockwise ä¸ºä¸€ä¸ªå¸ƒå°”å€¼ã€‚ä¸ºtrueæ—¶ï¼Œæ˜¯é€†æ—¶é’ˆæ–¹å‘ï¼Œå¦åˆ™é¡ºæ—¶é’ˆæ–¹å‘ã€‚çœ‹ä¸ªç›´è§‚çš„ä¾‹å­ï¼šctx.beginPath();truectx.arc(75, 75, 50, 0, Math.PI * 2, true);truectx.moveTo(110, 75);truectx.arc(75, 75, 35, 0, Math.PI, false);truectx.moveTo(65, 65);truectx.arc(60, 65, 5, 0, Math.PI * 2, true);truectx.moveTo(95, 65);truectx.arc(90, 65, 5, 0, Math.PI * 2, true);truectx.stroke();truectx.clearRect(0, 0, 500, 500);truefor (var i = 0; i &lt; 4; i++) &#123;truetruefor (var j = 0; j &lt; 3; j++) &#123;truetruetruectx.beginPath();truetruetruevar x = 20 + j * 40;truetruetruevar y = 20 + i * 40;truetruetruevar radisu = 20;truetruetruevar startAngle = 0;truetruetruevar endAngle = Math.PI + (Math.PI * j) / 2;truetruetruevar anticlockwise = i % 2 == 0 ? true : false;truetruetruectx.arc(x, y, radisu, startAngle, endAngle, anticlockwise);truetruetrueif (i &gt; 1) &#123;truetruetruetruectx.fill();truetruetrue&#125; else &#123;truetruetruetruectx.stroke();truetruetrue&#125;truetrue&#125;true&#125; é€šè¿‡è¿™ä¸ªä¾‹å­å¯ä»¥çœ‹æ¸…æ¥šçš„çœ‹åˆ° fill å’Œ stroke è¿™ä¸ªä¸¤ä¸ªå‡½æ•°çš„åŒºåˆ«ï¼Œå‰è€…æ¸²æŸ“è¾¹æ¡†ï¼Œåè€…å¡«å……æ•´ä¸ªæŒ‡å®šåŒºåŸŸã€‚åŒæ—¶å¯ä»¥åŒºåˆ†ï¼Œanticlockwise åˆ†åˆ« true å’Œ false æ—¶æ¸²æŸ“çš„æœºåˆ¶ï¼Œå‰è€…ä¸ºé€†æ—¶é’ˆï¼Œåè€…ä¸ºé¡ºæ—¶é’ˆã€‚# æ€»ç»“ä»…ä»…é€šè¿‡è¿™ä¸‰ä¸ªåŸºç¡€çš„ç”¨æ³•ï¼Œå°±å¯ä»¥åˆ¶ä½œå‡ºå¾ˆå¤šæ¼‚äº®çš„åŠ¨ç”»äº†ã€‚æˆ‘è¿™é‡Œåšäº†ä¸€ä¸ªç®€å•è¿åŠ¨çš„å°çƒï¼ŒåŒæ—¶åšäº†è¾¹ç•Œåˆ¤å®šã€‚ å‚è€ƒæ–‡ç« ï¼š MDN-Canvas]]></content>
      <categories>
        <category>æŠ€æœ¯</category>
      </categories>
      <tags>
        <tag>canvas</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[è½»é‡çº§fullPageæ•´å±æ»šåŠ¨æ¡†æ¶V1.3å‘å¸ƒ]]></title>
    <url>%2F2015%2F10%2F13%2Ffullpage-js%2F</url>
    <content type="text"><![CDATA[é¡¹ç›®åˆè¡·å‰æ®µæ—¶é—´æ¥åˆ°ä¸€ä¸ªæ–°çš„é¡¹ç›®ï¼Œæ˜¯ä¸€ä¸ªæ•´å±æ»šåŠ¨çš„å•é¡µåº”ç”¨ã€‚ æœ¬æ¥æ‰“ç®—å®Œå…¨è‡ªå·±å†™çš„ï¼Œä½†æ˜¯ç”±äºé¡¹ç›®æ—¶é—´åƒç´§ï¼Œå°±ç”¨äº†fullpageè¿™ä¸ªæ¡†æ¶ã€‚è¿™ä¸ªæ¡†æ¶ç¡®å®å¾ˆå¼ºå¤§ï¼Œå‡ ä¹ä½ æƒ³è¦çš„APIå®ƒéƒ½æœ‰ï¼Œæ‰€ä»¥ç”¨èµ·æ¥ä¹Ÿå¾ˆæ–¹ä¾¿ã€‚ ä½†æ˜¯å®ƒä¹Ÿæœ‰å‡ ä¸ªç¼ºç‚¹ï¼Œç¬¬ä¸€å®ƒå¿…é¡»ä¾èµ– jQuery,è€Œä¸”æ–‡ä»¶ä½“ç§¯ä¹Ÿæ¯”è¾ƒåºå¤§ï¼Œå¯¹äºç§»åŠ¨ç«¯æ¥è¯´ä¸æ˜¯å¾ˆå‹å¥½ã€‚äºæ˜¯è‡ªå·±å°±æŠ½å‡ºä¸šä½™æ—¶é—´ï¼Œå†™äº†è¿™ä¸ªé¡¹ç›®ã€‚ é¡¹ç›®åœ°å€ ä¸€ä¸ªç®€å•çš„DEMO changeListV1.3.0 ä¿®å¤å¯¹firefoxçš„æ”¯æŒ æ·»åŠ é¡µé¢å¯¼èˆªæ§åˆ¶ è§£å†³ä¸€äº›bug V1.1.0 æ·»åŠ è‡ªåŠ¨æ’­æ”¾ æ·»åŠ å¾ªç¯æ’­æ”¾ V1.0.0 æ”¯æŒç§»åŠ¨ç«¯è§¦æ‘¸æ§åˆ¶ æ·»åŠ slideæ°´å¹³æ»‘åŠ¨ æ·»åŠ PCç«¯é”®ç›˜æ§åˆ¶å’Œé¼ æ ‡æ»šè½®æ§åˆ¶ æä¾›å®ç”¨çš„APIæ–¹ä¾¿å¼€å‘ ç®€ä»‹ä¸€ä¸ªè½»å·§çš„fullpageæ¡†æ¶ï¼Œä¸ä¾èµ–å…¶ä»–ä»»ä½•åº“ï¼Œä¸»è¦é’ˆå¯¹ç§»åŠ¨ç«¯è®¾å¤‡ï¼ˆåŒæ—¶ä¹Ÿæ”¯æŒæ¡Œé¢ç«¯ï¼‰ï¼Œå‹ç¼©åä¸åˆ°4kbã€‚è½»æ¾åˆ›å»ºç‚«é…·çš„å•é¡µæ»‘åŠ¨ç½‘ç«™ã€‚ å…¼å®¹æ€§ Android 4.1+ Safari 7.1+ IE Edge Opera Chrome ä½¿ç”¨æ–¹æ³• å¼•å…¥ JavaScript æ–‡ä»¶ fullpage.js å¼•å…¥ css æ–‡ä»¶ fullpage.cssï¼ˆå¦‚æœä½ ä½¿ç”¨lessï¼Œåˆ™å¯ä»¥åœ¨lessä¸»æ–‡ä»¶ä¸­å¼•å…¥fullpage.lessï¼‰ æŒ‰ç…§ä¸‹é¢æ ¼å¼ä¹¦å†™htmlä»£ç ï¼ˆå…¶ä¸­ id ä¸º sectionContent çš„ä¸ºåŒ…è£¹å±‚ï¼Œä½ å¯ä»¥è‡ªå®šä¹‰ä¿®æ”¹å…¶idï¼‰ &lt;div id=&quot;sectionContent&quot; class=&quot;fp-section-content&quot;&gt; &lt;div class=&quot;fp-section&quot;&gt; &lt;div class=&quot;fp-slide-wrap&quot;&gt; &lt;div class=&quot;fp-slide&quot;&gt;1&lt;/div&gt; &lt;div class=&quot;fp-slide&quot;&gt;2&lt;/div&gt; &lt;div class=&quot;fp-slide&quot;&gt;3&lt;/div&gt; &lt;div class=&quot;fp-slide&quot;&gt;4&lt;/div&gt; &lt;div class=&quot;fp-slide&quot;&gt;5&lt;/div&gt; &lt;/div&gt; &lt;/div&gt; &lt;div class=&quot;fp-section&quot;&gt;2&lt;/div&gt; &lt;div class=&quot;fp-section&quot;&gt;3&lt;/div&gt; &lt;/div&gt; åˆå§‹åŒ–ç®€å•ä½¿ç”¨ï¼Œåªè¦åœ¨é¡µé¢åŠ è½½å®Œæˆåæ‰§è¡Œï¼š fullpage.init(&apos;#sectionContent&apos;); å¦‚æœéœ€è¦å®šåˆ¶åŒ–ï¼Œåˆ™éœ€è¦å¦‚ä¸‹æ–¹æ³•ï¼šfullpage.init(&apos;#sectionContent&apos;,&#123; threshold: 10, //è§¦å‘æ»šåŠ¨äº‹ä»¶çš„é˜ˆå€¼ï¼Œè¶Šå°è¶Šçµæ• pageSpeed: 600, //æ»šå±é€Ÿåº¦ï¼Œå•ä½ä¸ºæ¯«ç§’ ms afterLoad: null, //é¡µé¢è½½å…¥äº‹ä»¶ï¼Œå…·ä½“æŸ¥çœ‹ä¸‹é¢çš„ afterLoad å‡½æ•° beforeLeave: null //é¡µé¢ç¦»å¼€äº‹ä»¶ï¼Œå…·ä½“æŸ¥çœ‹ä¸‹é¢çš„ beforeLeave å‡½æ•° &#125;); ##beforeLeave(leaveIndex,nowIndex)ç¦»å¼€å½“å‰é¡µé¢æ—¶è§¦å‘çš„äº‹ä»¶ï¼Œå‡½æ•°ä¸­ this æŒ‡å‘å½“å‰é¡µé¢çš„ section,leaveIndexä¸ºè¦ç¦»å¼€é¡µé¢çš„ index ï¼ŒnowIndex ä¸ºè¦è½½å…¥é¡µé¢çš„ Index ##afterLoad(afterIndex)è½½å…¥ä¸‹ä¸€å¼ é¡µé¢åè§¦å‘çš„äº‹ä»¶ï¼Œå‡½æ•°ä¸­ this æŒ‡å‘å°†è¦è½½å…¥é¡µé¢çš„ section, afterIndex ä¸ºè¦è½½å…¥é¡µé¢çš„ indexfullpage.init('#sectionContent', &#123; beforeLeave: function (leaveIndex, nowIndex) &#123; //å¦‚æœç°åœ¨åœ¨ç¬¬1ä¸ªé¡µé¢ï¼Œå‘ä¸‹æ»šåŠ¨å if (nowIndex === 2) &#123; //leaveIndex = 1,nowIndex = 2 console.log('You will leave page 2') //è¿™æ¡è¯­å¥ä¼šæ‰§è¡Œ &#125; console.log(this, leaveIndex, nowIndex) //è¿™é‡Œçš„ this æŒ‡å‘å°†è¦ç¦»å¼€çš„é¡µé¢å…ƒç´ ï¼Œå³ç¬¬ä¸€ä¸ªé¡µé¢ &#125;, afterLoad: function (afterIndex) &#123; //afterIndex = 2 if (afterIndex === 2) &#123; console.log('You will go to page 2') //è¿™æ¡è¯­å¥ä¼šæ‰§è¡Œ &#125; console.log(this, afterIndex) //æ­¤å¤„ this æŒ‡å‘å½“å‰è½½å…¥çš„é¡µé¢ï¼Œå³ç¬¬äºŒä¸ªé¡µé¢ &#125;&#125;); æ–¹æ³•##init(el,options)é¡µé¢åˆå§‹åŒ–ï¼Œelä¸ºæœ€å¤–åŒ…è£¹å±‚é€‰æ‹©å™¨ï¼Œoptionsæ˜¯è¦å®šåˆ¶çš„å‚æ•°ã€‚å…·ä½“åŒåˆå§‹åŒ– ##moveTo(index,slideIndex)æ»šåŠ¨åˆ°æŒ‡å®šé¡µé¢,index ä¸ºå¿…é€‰å‚æ•°ï¼ŒslideIndexä¸ºå¯é€‰å‚æ•°fullpage.moveTo(1) //æ»šåŠ¨åˆ°ç¬¬ä¸€ä¸ªé¡µé¢fullpage.moveTo(3,2) //æ»šåŠ¨åˆ°ç¬¬ä¸‰ä¸ªé¡µé¢çš„ç¬¬äºŒä¸ªslider ##moveToNext(callback)å‚ç›´æ»šåŠ¨åˆ°ä¸‹ä¸€ä¸ªé¡µé¢,callbackä¸ºå›æ‰å‡½æ•°ï¼Œå¯é€‰ã€‚fullpage.moveToNext(); //æ»šåŠ¨åˆ°ä¸‹ä¸€ä¸ªé¡µé¢fullpage.moveToNext(callback) //æ»šåŠ¨åˆ°ä¸‹ä¸€ä¸ªé¡µé¢åï¼Œæ‰§è¡Œ callbackfullpage.moveToNext(callback,params...) //æ»šåŠ¨åˆ°ä¸‹ä¸€ä¸ªé¡µé¢åï¼Œæ‰§è¡Œ callback,paramsä¸ºcallbackçš„å‚æ•°ï¼Œæ ¹æ®æƒ…å†µä¼ å…¥function foo(a,b)&#123; console.log(a,b)&#125;fullpage.moveToNext(foo,1,2) //æ»šåŠ¨åˆ°ä¸‹ä¸€ä¸ªé¡µé¢ï¼Œå¹¶è¾“å‡º 1ï¼Œ2 moveToPre(callback)å‚ç›´æ»šåŠ¨åˆ°ä¸Šä¸€ä¸ªé¡µé¢ï¼Œç”¨æ³•åŒ moveToNext(callback) slideToNext()æ°´å¹³æ»šåŠ¨åˆ°ä¸‹ä¸€ä¸ªé¡µé¢ï¼ˆé¡µé¢å‘å·¦æ»šåŠ¨ï¼‰ slideToPre()æ°´å¹³æ»šåŠ¨åˆ°ä¸Šä¸€ä¸ªé¡µé¢ï¼ˆé¡µé¢å‘å³æ»šåŠ¨ï¼‰ TODO æ·»åŠ æ»šåŠ¨åˆ°æŒ‡å®šé¡µé¢æ–¹æ³• é¡µé¢æ»šåŠ¨æ—¶ï¼Œé¡µé¢è½½å…¥æˆ–ç¦»å¼€æ—¶æ·»åŠ è‡ªå®šä¹‰äº‹ä»¶ æ¨ªå±æ»šåŠ¨æ”¯æŒ æ·»åŠ é¼ æ ‡æ»šè½®æ§åˆ¶ æ·»åŠ é”®ç›˜æ§åˆ¶]]></content>
      <categories>
        <category>æŠ€æœ¯</category>
      </categories>
      <tags>
        <tag>JavaScript</tag>
        <tag>project</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[åˆè¯• react-router]]></title>
    <url>%2F2015%2F10%2F08%2Freact-router%2F</url>
    <content type="text"><![CDATA[react-router æä¾›ç®€å•æœ‰å¼ºå¤§ API æ¥æ–¹ä¾¿æˆ‘ä»¬åœ¨Reactæ­å»ºçš„å•é¡µé¢ä¸­å®ç°è·¯ç”±åŠŸèƒ½ã€‚é¦–å…ˆçœ‹ä¸€ä¸ªç®€å•çš„ä¾‹å­ï¼šimport React from 'react'import &#123;render,findDOMNode&#125; from 'react-dom'import &#123; Router, Route, Link &#125; from 'react-router'let Page1 = React.createClass(&#123; render()&#123; return ( &lt;div&gt;&lt;h1&gt;Page1&lt;/h1&gt;Lorem ipsum dolor sit amet, consectetur adipisicing elit. Ab accusantium animi dicta dignissimos earum eos esse impedit ipsum iste laboriosam numquam odio perspiciatis porro, quas sequi tempore vero vitae voluptates?&lt;/div&gt; ) &#125;&#125;);let Page2 = React.createClass(&#123; render()&#123; return ( &lt;div&gt;&lt;h1&gt;Page2&lt;/h1&gt;Lorem ipsum dolor sit amet, consectetur adipisicing elit. Fuga porro voluptas voluptatum. Corporis debitis deleniti, doloremque et eum ex id iste magni nobis nostrum quae, reiciendis rem repellendus similique tempora.&lt;/div&gt; ) &#125;&#125;);let App = React.createClass(&#123; render()&#123; return ( &lt;div &gt; &lt;Link to="/page1"&gt;Page1&lt;/Link&gt; &lt;Link to="/page2"&gt;Page2&lt;/Link&gt; &lt;/div&gt; ) &#125;&#125;);render(( &lt;Router&gt; &lt;Route path="/" component=&#123;App&#125;&gt; &lt;Route path="page1" component=&#123;Page1&#125;/&gt; &lt;Route path="page2" component=&#123;Page2&#125;/&gt; &lt;/Route&gt; &lt;/Router&gt;), document.body); åªéœ€è¦åœ¨ &lt;Link&gt; æ ‡ç­¾ä¸­çš„ to å±æ€§ä¸­å®šä¹‰è·¯å¾„ï¼Œé‚£ä¹ˆåœ¨æ¸²æŸ“å‡ºçš„é¡µé¢ä¸­ç‚¹å‡» Page1 æˆ– Page2 æ ‡ç­¾ï¼Œå°±ä¼šæ˜¾ç¤ºç›¸åº”çš„ Componentsï¼Œè€Œä¸” url ä¹Ÿä¼šè·Ÿç€è·¯å¾„è¿›è¡Œå˜åŒ–ã€‚æˆ‘ä»¬æ¥ç®€å•åˆ†æä¸€ä¸ªè¿™æ®µä»£ç ï¼Œè¿™é‡Œæˆ‘ä»¬å®šä¹‰äº†ä¸‰ä¸ªè·¯ç”±ï¼Œä¸€ä¸ªæŒ‡å‘æ ¹ç›®å½•å³ â€˜/â€˜,ä¸€ä¸ªæŒ‡å‘ â€˜page/â€˜,ä¸€ä¸ªæŒ‡å‘ â€˜page/2â€™.è·¯ç”±å®šä¹‰å¿…é¡»åŒ…è£¹åœ¨ &lt;Router&gt;&lt;/Router&gt; ä¸­ã€‚&lt;Route&gt;&lt;/Route&gt;ä¸ºæ¯ä¸€ä¸ªè·¯ç”±è¦å®šä¹‰çš„è·¯å¾„ï¼Œå¹¶å¤„ç†å®ƒçš„è¡Œä¸ºã€‚å…¶ä¸­ path ä¸ºè·¯å¾„ï¼Œ component ä¸ºè¦æ¸²æŸ“çš„ç»„ä»¶ã€‚å¹¶ä¸”è¿˜å¯ä»¥æä¾›ç›¸åº”çš„ handleï¼Œç”¨æ¥å¤„ç†æ§åˆ¶è·¯ç”±çš„è¡Œä¸ºã€‚æ¥ä¸‹æ¥æˆ‘ä»¬æ¥æ¨¡æ‹Ÿä¸€ä¸ªæ‹¦æˆªç™»é™†çš„è¡Œä¸ºã€‚import React from 'react'import &#123;render,findDOMNode&#125; from 'react-dom'import &#123; Router, Route, Link, History &#125; from 'react-router'import TransitionGroup from 'react-addons-transition-group'require('./index.css');let goLogin = &#123; isLogin: true, login()&#123; this.isLogin ? this.onChange(false) : this.onChange(true) this.isLogin = !this.isLogin &#125;, onChange()&#123; &#125;&#125;;let App = React.createClass(&#123; getInitialState()&#123; return &#123; login: goLogin.isLogin &#125; &#125;, updateAuth(logged)&#123; this.setState(&#123; login: logged &#125;) &#125;, componentWillMount()&#123; goLogin.onChange = this.updateAuth &#125;, render()&#123; return ( &lt;div &gt; &lt;nav className="nav"&gt; &#123;this.state.login ? ( &lt;Link to="/logout"&gt;Log out&lt;/Link&gt; ) : ( &lt;Link to="/login"&gt;Log in&lt;/Link&gt; ) &#125; &lt;/nav&gt; &lt;ul&gt; &lt;li&gt;&lt;Link to="/page1" activeClassName="active"&gt;Page1&lt;/Link&gt;&lt;/li&gt; &lt;li&gt;&lt;Link to="/page2" activeClassName="active"&gt;Page2&lt;/Link&gt;&lt;/li&gt; &lt;/ul&gt; &#123;this.props.children&#125; &lt;/div&gt; ) &#125;&#125;); let Login = React.createClass(&#123; mixins: [History], handleClick(event)&#123; event.preventDefault(); goLogin.login(); var &#123;location&#125; = this.props if (location.state &amp;&amp; location.state.nextPathname) &#123; this.history.replaceState(null, location.state.nextPathname) &#125; else &#123; this.history.replaceState(null, '/about') &#125; console.log(this.history) &#125;, render()&#123; return ( &lt;div&gt; &lt;button onClick=&#123;this.handleClick&#125;&gt;Login&lt;/button&gt; &lt;/div&gt; ) &#125;&#125;);let Logout = React.createClass(&#123; componentDidMount()&#123; goLogin.login() &#125;, render()&#123; return ( &lt;div&gt; &lt;p&gt;You are now logged out&lt;/p&gt; &lt;/div&gt; ) &#125;&#125;);let About = React.createClass(&#123; render()&#123; return ( &lt;div&gt; &lt;h1&gt;ç™»å½•æˆåŠŸ&lt;/h1&gt; &lt;/div&gt; ) &#125;&#125;)let Page1 = React.createClass(&#123; render()&#123; return ( &lt;div className="page"&gt;&lt;h1&gt;Page1&lt;/h1&gt;Lorem ipsum dolor sit amet, consectetur adipisicing elit. Ab accusantium animi dicta dignissimos earum eos esse impedit ipsum iste laboriosam numquam odio perspiciatis porro, quas sequi tempore vero vitae voluptates?&lt;/div&gt; ) &#125;&#125;);let Page2 = React.createClass(&#123; getInitialState()&#123; return &#123; className: 'pageactive' &#125; &#125;, handler()&#123; if (this.state.className === 'pageactive') &#123; this.setState(&#123; className: '' &#125;) &#125; else &#123; this.setState(&#123; className: 'pageactive' &#125;) &#125; &#125;, render()&#123; return ( &lt;div className=&#123;`$&#123;this.state.className&#125; page`&#125; onClick=&#123;this.handler&#125;&gt;&lt;h1&gt;Page2&lt;/h1&gt;Lorem ipsum dolor sit amet, consectetur adipisicing elit. Fuga porro voluptas voluptatum. Corporis debitis deleniti, doloremque et eum ex id iste magni nobis nostrum quae, reiciendis rem repellendus similique tempora.&lt;/div&gt; ) &#125;&#125;) å®šä¹‰ needLogin å‡½æ•°ï¼Œç”¨æ¥åˆ¤æ–­ç”¨æˆ·å¦ç™»é™†å¹¶æ ¹æ®æƒ…å†µè·³è½¬åˆ°ç›¸åº”çš„é¡µé¢ã€‚function needLogin(nextState, replaceState) &#123; if (!goLogin.isLogin) &#123; replaceState(&#123;nextPathname: nextState.location.pathname&#125;, '/login') &#125;&#125; æœ€åï¼Œæ‰§è¡Œ render å‘½ä»¤ã€‚render(( &lt;Router&gt; &lt;Route path="/" component=&#123;App&#125;&gt; &lt;Route path="login" component=&#123;Login&#125;/&gt; &lt;Route path="logout" component=&#123;Logout&#125;/&gt; &lt;Route path="about" component=&#123;About&#125;/&gt; &lt;Route path="page1" component=&#123;Page1&#125;/&gt; &lt;Route path="page2" component=&#123;Page2&#125; onEnter=&#123;needLogin&#125;/&gt; &lt;/Route&gt; &lt;/Router&gt;), document.body); ç‚¹å‡»è¿™é‡ŒæŸ¥çœ‹DEMOè¿™æ®µä»£ç å®ç°äº†è¿™ä¹ˆä¸€ä¸ªåŠŸèƒ½ï¼š é¦–å…ˆé¡µé¢é»˜è®¤ä¸ºæœªç™»å½•çŠ¶æ€ã€‚ æ­¤æ—¶ç‚¹å‡» Page1,ä¼šæ˜¾ç¤º Page1 çš„å†…å®¹ã€‚ ç‚¹å‡» Page2 çš„æ—¶å€™ï¼ŒPageå†…å®¹çš„æ˜¾ç¤ºè¢«æ‹¦æˆªï¼Œå‡ºç°ç™»é™†é¡µé¢ã€‚ å½“ä½ ç‚¹å‡» login åï¼Œå°±ä¼šæ˜¾ç¤º Page2 çš„å†…å®¹ï¼Œå¹¶ä¸”çŠ¶æ€åˆ‡æ¢ä¸º Logout. å½“æˆ‘ä»¬ç‚¹å‡» Logout çš„æ—¶å€™ï¼Œå°±ä¼šé€€å‡ºç™»å½•ã€‚ åœ¨è¿™æ®µä»£ç ä¸­ï¼Œå½“æˆ‘ä»¬ç‚¹å‡» page2 çš„æ—¶å€™ï¼Œé¦–å…ˆä¼šè§¦å‘ &lt;Link&gt; æ ‡ç­¾ä¸­çš„ to å±æ€§æ¥æ‰¾åˆ°å¯¹åº”çš„pathä¸º page2 çš„è·¯ç”±ï¼Œç„¶åä¼šè§¦å‘ needLogin äº‹ä»¶ã€‚åœ¨ needLogin äº‹ä»¶ä¸­ï¼Œæˆ‘ä»¬åˆ¤æ–­ goLogin.isLogin äº‹ä»¶ï¼Œå¦‚æœæœªç™»å½•ï¼Œåˆ™å°†è·¯å¾„æ›¿æ¢ä¸º â€˜/loginâ€™.å¹¶åœ¨ &lt;Route&gt; ä¸­æ‰¾åˆ° path ä¸º â€˜/loginâ€™ çš„ä¸€é¡¹ï¼Œç„¶åæ¸²æŸ“ Login ç»„ä»¶ã€‚ä¹Ÿå°±æ˜¯è¯´æˆ‘ä»¬å¯ä»¥åœ¨ &lt;Route&gt; ä¸­ç›‘å¬äº‹ä»¶ï¼Œä»¥æ­¤æ¥æ ¹æ®éœ€è¦åŠ¨æ€çš„æ”¹å˜è·¯ç”±åœ°å€ã€‚]]></content>
      <categories>
        <category>æŠ€æœ¯</category>
      </categories>
      <tags>
        <tag>JavaScript</tag>
        <tag>React</tag>
        <tag>react-router</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[learnyounode-functional-javascript]]></title>
    <url>%2F2015%2F09%2F23%2Flearnyounode-functional-javascript%2F</url>
    <content type="text"><![CDATA[å‘çˆ¹çš„CMDä¸çŸ¥æ€ä¹ˆå›äº‹ï¼Œåœ¨åšåˆ°å€’æ•°ç¬¬ä¸‰é“é¢˜åçªç„¶ç½¢å·¥äº†ï¼Œä¸èƒ½é€‰æ‹©é¢˜ç›®ï¼Œå…¬å¸å’Œè‡ªå·±çš„ç”µè„‘éƒ½æ˜¯è¿™æ ·ã€‚äºæ˜¯æœ€åä¸‰é“é¢˜è¿˜æ˜¯æ”¾å¼ƒäº†ï¼Œä¹Ÿæ²¡ç²¾åŠ›å»æ‰¾é‚£ä¸‰é“é¢˜åˆ°åº•æ˜¯ä»€ä¹ˆäº†ï¼Œå°±è¿™æ ·å§ã€‚ åšé¢˜çš„è¿‡ç¨‹ä¸­æœ‰ä¸ªéœ€è¦æ³¨æ„çš„åœ°æ–¹ï¼Œä¹Ÿæ˜¯åœ¨jsä¸­ä¸€ä¸ªå¾ˆå¸¸ç”¨çš„æ–¹æ³•ã€‚é‚£å°±æ˜¯è¢«setTimeoutå»¶è¿Ÿçš„å‡½æ•°ä¼šç­‰å‰é¢å‡½æ•°å½»åº•æ‰§è¡Œå®Œä»¥åï¼Œæ‰ä¼šæ‰§è¡Œ,ä¹Ÿå°±æ˜¯è¯´å¯ä»¥é˜»å¡jsçš„è¿›ç¨‹ã€‚å¦‚ä¸‹ï¼šfunction repeat(operation, num) &#123; // modify this so it can be interrupted if (num &lt;= 0) return operation(); setTimeout(function()&#123; return repeat(operation, --num); &#125;,0)&#125;module.exports = repeat Operationæ˜¯ä¸€ä¸ªæ“ä½œå¾ˆè´¹æ—¶é—´çš„å‡½æ•°ï¼Œå¦‚æœä¸ç”¨setTimeoutå»¶è¿Ÿåé¢çš„é€’å½’è°ƒç”¨çš„è¯ï¼Œå°±ä¼šé€ æˆrepeatå‡½æ•°å·²ç»æ‰§è¡Œå®Œäº†ï¼Œä½†æ˜¯å«æœ‰å¾ˆå¤šä¸ªoperationæ²¡æœ‰æ‰§è¡Œå®Œçš„æƒ…å†µã€‚ å…¶å®ƒçš„åˆ°æ²¡æœ‰ä»€ä¹ˆäº†ï¼Œæ‰€æœ‰ä»£ç éƒ½æ”¾åœ¨è¿™é‡Œ]]></content>
      <categories>
        <category>æŠ€æœ¯</category>
      </categories>
      <tags>
        <tag>JavaScript</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[ECMAScript6å­¦ä¹ ç®€è®°ï¼ˆä¸‰ï¼‰- å‡½æ•°æ‰©å±•]]></title>
    <url>%2F2015%2F09%2F08%2FLearning-ECMAScript6-Three%2F</url>
    <content type="text"><![CDATA[1.å‡½æ•°å‚æ•°é»˜è®¤å€¼ä»¥å‰æˆ‘ä»¬ç»å¸¸ä¼šäº›ä¸‹é¢çš„ä»£ç  function doS(e)&#123; e = e|window.e; //doSomeThing with e&#125; é€šè¿‡è¿™æ ·çš„æ–¹æ³•æ¥ç»™å‡½æ•°è®¾ç½®é»˜è®¤å€¼ï¼Œè¿™æ ·æœ‰ä¸€ä¸ªç¼ºç‚¹å°±æ˜¯ï¼Œå¦‚æœä¼ è¿›æ¥çš„å‚æ•°å¯¹åº”çš„å¸ƒå°”å€¼ä¸ºfalseï¼Œæ¯”å¦‚ç©ºå­—ç¬¦ä¸²æˆ–è€…0ï¼Œé‚£å°±å°´å°¬äº†ã€‚ æ‰€ä»¥å¦‚æœæˆ‘ä»¬è¿˜æƒ³ä¸Šé¢çš„ä»£ç å¾—åˆ°æ­£ç¡®çš„ç»“æœï¼Œå°±éœ€è¦å¯¹eåœ¨åšä¸€ä¸ªåˆ¤æ–­ï¼Œåˆ¤æ–­å®ƒæ˜¯å¦è¢«èµ‹å€¼äº†ã€‚ è¿™æ ·ä¼šå¾ˆéº»çƒ¦ï¼Œæ‰€ä»¥ES6æœ‰äº†æ–°çš„æ–¹æ³•ï¼Œå¦‚ä¸‹ function doS(e=window.e)&#123; //doSomeThing with e&#125; è¿™æ ·ä¸å°½ä»£ç ç®€çŸ­äº†å¾ˆå¤šï¼Œè€Œä¸”å¯è¯»æ€§å¤§å¤§æé«˜ï¼Œçœ‹ä»£ç çš„äººå¯ä»¥ä¸€æ ·çœ‹åˆ°é‚£äº›å‚æ•°æ˜¯æœ‰é»˜è®¤å€¼çš„ã€‚åŒæ—¶ï¼Œé»˜è®¤å€¼çš„è®¾ç½®ä¹Ÿéå¸¸äººæ€§åŒ– function get(url,&#123;body='',method='GET')&#123; console.log(method);&#125; ä¸Šé¢çš„ä»£ç ä¸­ï¼Œä¼ å…¥ç¬¬äºŒä¸ªå‚æ•°æ˜¯ä¸€ä¸ªå¯¹è±¡ï¼Œæˆ‘ä»¬å¯ä»¥ç»™å¯¹è±¡çš„å±æ€§è®¾ç½®é»˜è®¤å€¼ã€‚ ç”šè‡³è¿˜å¯ä»¥è®¾ç½®åŒé‡é»˜è®¤å€¼ã€‚fetch(url, &#123; method = 'GET' &#125; = &#123;&#125;)&#123; console.log(method);&#125; ä¸Šé¢ä»£ç ä¸­ï¼Œè°ƒç”¨å‡½æ•°fetchæ—¶ï¼Œå¦‚æœä¸å«ç¬¬äºŒä¸ªå‚æ•°ï¼Œåˆ™é»˜è®¤å€¼ä¸ºä¸€ä¸ªç©ºå¯¹è±¡ï¼›å¦‚æœåŒ…å«ç¬¬äºŒä¸ªå‚æ•°ï¼Œåˆ™å®ƒçš„methodå±æ€§é»˜è®¤å€¼ä¸ºGETã€‚ å‚æ•°çš„é»˜è®¤å€¼è®¾ç½®åŒæ ·æ”¯æŒè§£æ„èµ‹å€¼ï¼Œ function ha(&#123;x,y=5&#125;)&#123; console.log(x,y);&#125;ha() //TypeError: Cannot read property 'x' of undefinedha(&#123;&#125;) //undefined 5ha(&#123;x:1&#125;) //1 5ha(&#123;x:1,y:2&#125;) //1 2 å®šä¹‰é»˜è®¤å€¼çš„å‚æ•°ï¼Œå¿…é¡»åœ¨å‚æ•°çš„å°¾éƒ¨ï¼Œå› ä¸ºæœ‰äº†é»˜è®¤ä¹‹åå‚æ•°å¯ä»¥è¢«çœç•¥ï¼Œè€Œåªæœ‰ä½äºå°¾éƒ¨ï¼Œå‡½æ•°æ‰èƒ½åˆ¤æ–­åˆ°åº•çœç•¥äº†é‚£ä¸ªå‚æ•°ã€‚ å¦‚æœç»™è®¾ç½®é»˜è®¤å€¼çš„å‚æ•°ä¼ å…¥undefinedå’Œnull,å‰è€…è¯¥å‡½æ•°ä¼šè§¦å‘é»˜è®¤å€¼ï¼Œè€Œåè€…ä¸ä¼šã€‚ function a(b=1,c=2)&#123; console.log(b,c);&#125;a(undefined,null);//1 null éœ€è¦æ³¨æ„çš„æ˜¯ï¼Œå¦‚æœè®¾ç½®äº†é»˜è®¤å€¼ï¼Œé‚£ä¹ˆå‡½æ•°çš„lengthå±æ€§ä¼šå¤±çœŸ &gt; (function a(a,b)&#123;&#125;).length2&gt; (function b(a,b,c)&#123;&#125;).length3&gt; (function c(a,b,c=1)&#123;&#125;).length2&gt; (function e(a,b=1,c=1)&#123;&#125;).length1 å¯ä»¥çœ‹åˆ°ï¼Œæ²¡è®¾ç½®é»˜è®¤å€¼çš„æ—¶å€™ï¼Œå‡½æ•°çš„lengthç­‰äºå®ƒçš„å‚æ•°ä¸ªæ•°ï¼Œè€Œè®¾ç½®äº†é»˜è®¤å€¼ä¹‹åï¼Œå®ƒçš„lengthå€¼ç­‰äºæ²¡æœ‰è®¾ç½®é»˜è®¤å€¼çš„å‚æ•°çš„ä¸ªæ•°ã€‚ 2.restå‚æ•°restå‚æ•°ç”¨äºè·å–å‡½æ•°çš„å¤šä½™å˜é‡ï¼Œè¿™æ ·å¯ä»¥é¿å…ä½¿ç”¨argumentså¯¹è±¡ã€‚ function add(...values) &#123; let sum = 0; values.forEach(function(value)&#123; sum += value; &#125;); return sum;&#125;&gt; add(1,2,3,4,5)15 å¯ä»¥çœ‹åˆ°ï¼Œè¯¥å‡½æ•°å¯ä»¥è¿”å›ä¼ å…¥å‚æ•°çš„å’Œã€‚åŒæ—¶ï¼Œæ³¨æ„åˆ°restå‚æ•°å…¶å®æ˜¯ä¸€ä¸ªæ•°ç»„ï¼Œæ‰€ä»¥æ•°ç»„çš„æ–¹æ³•å®ƒéƒ½å¯ä»¥ä½¿ç”¨ï¼Œæ‰€ä»¥ä¸Šé¢ä»£ç ä¸­çš„forEachæ˜¯å¯ä»¥ä½¿ç”¨çš„ã€‚ éœ€è¦æ³¨æ„çš„æ˜¯ï¼Œrestå‚æ•°åŒå‚æ•°çš„é»˜è®¤å€¼ä¸€æ ·ï¼Œå¿…é¡»åœ¨å‚æ•°çš„æœ€åã€‚è€Œå‡½æ•°çš„lengthå±æ€§æ˜¯ä¸åŒ…æ‹¬restå‚æ•°çš„ã€‚ (function(a) &#123;&#125;).length // 1(function(...a) &#123;&#125;).length // 0(function(a, ...b) &#123;&#125;).length // 1 3.æ‰©å±•è¿ç®—ç¬¦æ‰©å±•è¿ç®—ç¬¦ï¼Œç¬¦å·ä¸‰ä¸ªç‚¹ï¼ˆâ€¦ï¼‰ï¼Œå®ƒå¯ä»¥çœ‹ä½œæ˜¯restå‚æ•°çš„ä½ è¿ç®—ï¼Œå¯ä»¥è®²ä¸€ä¸ªæ•°ç»„è½¬ä¸ºç”¨é€—å·åˆ†å‰²çš„å‚æ•°åºåˆ—ã€‚ &gt; let array = [1,2,34];&gt; console.log(...array)1 2 34&gt; console.log(11,22,...array,4)11 22 1 2 34 4 è¯¥è¿ç®—ç¬¦ä¸»è¦ç”¨äºå‡½æ•°çš„è°ƒç”¨ã€‚ function push(array, ...items) &#123; array.push(...items);&#125;function add(x, y) &#123; return x + y;&#125;var numbers = [4, 38];add(...numbers) // 42 ä¸Šé¢ä»£ç ä¸­ï¼Œarray.push(â€¦items)å’Œadd(â€¦numbers)è¿™ä¸¤è¡Œï¼Œéƒ½æ˜¯å‡½æ•°çš„è°ƒç”¨ï¼Œå®ƒä»¬çš„éƒ½ä½¿ç”¨äº†æ‰©å±•è¿ç®—ç¬¦ã€‚è¯¥è¿ç®—ç¬¦å°†ä¸€ä¸ªæ•°ç»„ï¼Œå˜ä¸ºå‚æ•°åºåˆ—ã€‚ ç”±äºæ‰©å±•è¿ç®—ç¬¦å¯ä»¥å±•å¼€æ•°ç»„ï¼Œæ‰€ä»¥ä¸å†éœ€è¦applyæ–¹æ³•ï¼Œå°†æ•°ç»„è½¬ä¸ºå‡½æ•°çš„å‚æ•°äº†ã€‚// ES5çš„å†™æ³•function f (x, y, z)&#123;&#125;var args = [0, 1, 2];f.apply(null, args);// ES6çš„å†™æ³•function f (x, y, z)&#123;&#125;var args = [0, 1, 2];f(...args); ä¸€ä¸ªå®é™…çš„ä¾‹å­ï¼š &gt; let a=[1,23,12,31,23,12,31,23,123,12,31,24,]'use strict'&gt; Math.max(...a)123//ES5è¦å®ç°åŒæ ·çš„åŠŸèƒ½åˆ™éœ€è¦Math.max.apply(null,a); æ‰©å±•è¿ç®—ç¬¦å¯ä»¥ç®€åŒ–å¾ˆå¤šç§ES5çš„å†™æ³• // ES5[1, 2].concat(more)// ES6[1, 2, ...more]// ES5list.push.apply(list, [3, 4])// ES6list.push(...[3, 4])// ES5list = [1,2,3,4]var a = list[0], rest = list.slice(1)a = 1,rest = [2,3,4]// ES6 è¿™é‡Œæ˜¯ç”¨åˆ°äº†è§£æ„èµ‹å€¼var [a, ...rest] = lista = 1,rest = [2,3,4]// ES5new (Date.bind.apply(Date, [null, 2015, 1, 1]))// ES6new Date(...[2015, 1, 1]); éœ€è¦æ³¨æ„çš„æ˜¯ï¼Œå¦‚æœå°†æ‰©å±•è¿ç®—ç¬¦ç”¨äºæ•°ç»„èµ‹å€¼ï¼Œåªèƒ½æ”¾åœ¨å‚æ•°çš„æœ€åï¼Œå¦åˆ™ä¼šæŠ¥é”™ã€‚ï¼ˆè¿™æ˜¯è‚¯å®šçš„å˜›ï¼Œå¦åˆ™ç¨‹åºæ€ä¹ˆçŸ¥é“æ‰©å±•è¿ç®—ç¬¦çš„é•¿åº¦æ˜¯å¤šå°‘ï¼‰ã€‚ æ‰©å±•è¿ç®—ç¬¦å¯ä»¥å°†å­—ç¬¦ä¸²è½¬ä¸ºæ•°ç»„(Array.from()ä¹Ÿå¯ä»¥)ã€‚ &gt; [...'hello'][ 'h', 'e', 'l', 'l', 'o' ] 4.ç®­å¤´å‡½æ•°åŸºæœ¬ç”¨æ³•ä½¿ç”¨â€˜ç®­å¤´â€™æ¥å¿«é€Ÿå®šä¹‰å‡½æ•°let fn = f =&gt; f; ç›¸å½“äºlet fn = function(f)&#123; return f;&#125; å½“ä¸éœ€è¦å‚æ•°çš„æ—¶å€™ï¼Œæˆ–å‚æ•°å¤§äºä¸€ä¸ªçš„æ—¶å€™ï¼Œç”¨æ‹¬å·ä»£è¡¨å‚æ•°éƒ¨åˆ†ï¼š var f = () =&gt; 5;//ç­‰äºvar f = function()&#123;return 5&#125;;var sum =(sum1,sum2) =&gt; num1 + num2;//ç­‰äºvar sum = function(sum1,sum2)&#123; return sum1+sum2;&#125; æ€»ä¹‹ç®­å¤´åé¢å°±æ˜¯å‡½æ•°è¦returnçš„å†…å®¹ã€‚å½“ç®­å¤´å‡½æ•°çš„ä»£ç å—éƒ¨åˆ†å¤šä½™ä¸€æ¡è¯­å¥çš„æ—¶å€™ï¼Œéœ€è¦ç”¨å¤§æ‹¬å·æ‹¬èµ·æ¥ï¼Œå¹¶ä¸”ä½¿ç”¨returnè¿”å›ã€‚è€Œç”±äºå¤§æ‹¬å·è¢«è§£é‡Šä¸ºä»£ç å—ï¼Œæ‰€ä»¥å¦‚æœç®­å¤´å‡½æ•°éœ€è¦è¿”å›å¯¹è±¡çš„æ—¶å€™ï¼Œå¿…é¡»åœ¨å¯¹è±¡å¤–é¢åŠ ä¸Šæ‹¬å·ï¼Œå¦åˆ™ä¼šè¢«è§£é‡Šä¸ºä»£ç å—ã€‚ var sum = (num1,num2) =&gt; &#123;return num1+num2&#125;;var sum1 = sumI =&gt; (&#123;su1:'1',su2:'2'&#125;); åŒæ ·ï¼Œç®­å¤´å‡½æ•°å¯ä»¥é…åˆå˜é‡çš„è§£æ„èµ‹å€¼ã€‚ let person = (&#123;you,i&#125;) =&gt; you + 'love' + i;&gt; person(&#123;you:'y',i:'i'&#125;)'ylovei'//ç­‰äºvar person = function(obj)&#123; return obj.you +'love'+obj.i;&#125; ä½¿ç”¨æ³¨æ„ç‚¹ ç®­å¤´å‡½æ•°æœ‰å‡ ä¸ªä½¿ç”¨æ³¨æ„ç‚¹ã€‚ ï¼ˆ1ï¼‰å‡½æ•°ä½“å†…çš„thiså¯¹è±¡ï¼Œç»‘å®šå®šä¹‰æ—¶æ‰€åœ¨çš„å¯¹è±¡ï¼Œè€Œä¸æ˜¯ä½¿ç”¨æ—¶æ‰€åœ¨çš„å¯¹è±¡ã€‚ ï¼ˆ2ï¼‰ä¸å¯ä»¥å½“ä½œæ„é€ å‡½æ•°ï¼Œä¹Ÿå°±æ˜¯è¯´ï¼Œä¸å¯ä»¥ä½¿ç”¨newå‘½ä»¤ï¼Œå¦åˆ™ä¼šæŠ›å‡ºä¸€ä¸ªé”™è¯¯ã€‚ ï¼ˆ3ï¼‰ä¸å¯ä»¥ä½¿ç”¨argumentså¯¹è±¡ï¼Œè¯¥å¯¹è±¡åœ¨å‡½æ•°ä½“å†…ä¸å­˜åœ¨ã€‚å¦‚æœè¦ç”¨ï¼Œå¯ä»¥ç”¨Restå‚æ•°ä»£æ›¿ã€‚ ï¼ˆ4ï¼‰ä¸å¯ä»¥ä½¿ç”¨yieldå‘½ä»¤ï¼Œå› æ­¤ç®­å¤´å‡½æ•°ä¸èƒ½ç”¨ä½œGeneratorå‡½æ•°ã€‚ ä¸Šé¢å››ç‚¹ä¸­ï¼Œç¬¬ä¸€ç‚¹å°¤å…¶å€¼å¾—æ³¨æ„ã€‚thiså¯¹è±¡çš„æŒ‡å‘æ˜¯å¯å˜çš„ï¼Œä½†æ˜¯åœ¨ç®­å¤´å‡½æ•°ä¸­ï¼Œå®ƒæ˜¯å›ºå®šçš„ã€‚ä¸‹é¢çš„ä»£ç æ˜¯ä¸€ä¸ªä¾‹å­ï¼Œå°†thiså¯¹è±¡ç»‘å®šå®šä¹‰æ—¶æ‰€åœ¨çš„å¯¹è±¡ã€‚ ç‰ˆæƒæ–‡ç« ä¸­æ‰€æœ‰ä»£ç çš†æ¥è‡ªæˆ–æ¼”å˜è‡ªï¼š é˜®ä¸€å³°-ECMAScript 6 å…¥é—¨,æœ¬æ–‡åŒæ ·éµå¾ªç½²å-éå•†ç”¨è®¸å¯è¯.]]></content>
      <categories>
        <category>æŠ€æœ¯</category>
      </categories>
      <tags>
        <tag>å­¦ä¹ ç¬”è®°</tag>
        <tag>es6</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[ECMAScript6å­¦ä¹ ç®€è®°ï¼ˆäºŒï¼‰- æ•°ç»„æ‰©å±•]]></title>
    <url>%2F2015%2F09%2F02%2Flearning-ECMAScript6-Two%2F</url>
    <content type="text"><![CDATA[Array.from()å°†ç±»æ•°ç»„æˆ–å¯è¿­ä»£å¯¹è±¡è½¬æ¢ä¸ºçœŸæ­£çš„æ•°ç»„ã€‚ å¯è½¬æ¢çš„ç±»åˆ«Domé›†åˆlet ps = document.querySelectAll('p'); //é€šè¿‡Array.from è½¬æ¢åå¯ä»¥ä½¿ç”¨forEachæ–¹æ³•Array.from(ps).forEach(function(p,index)&#123; "use strict";trueconsole.log(p,index)&#125;); argumentså¯¹è±¡function foo() &#123; "use strict";truevar args = Array.from(arguments); //å¯ä»¥æ›¿ä»£ä»¥å‰ä¸‹é¢è¿™ç§æ–¹å¼æ¥è½¬æ¢truevar argvs = Array.prototype.slice.call(arguments);trueconsole.log(argvs, args);&#125;foo(1, 2, 3, 4); //[ 1, 2, 3, 4 ] [ 1, 2, 3, 4 ] æ‹¥æœ‰lengthå±æ€§çš„å¯¹è±¡var obj = &#123;true0: 'a',true1: 'b',true2: 'c',truelength: 3&#125;;var obj1 = &#123;true0: 'a',true1: 'b',true2: 'c'&#125;;console.log(Array.from(obj)); //['a','b','c']console.log(Array.from(obj1)); //[] æ²¡æœ‰lengthå±æ€§ï¼Œæ— æ³•è½¬æ¢ æ³¨æ„ï¼Œå¯¹è±¡çš„å±æ€§å€¼å¿…é¡»æ˜¯æ•°å­—ï¼Œå¦åˆ™è½¬æ¢çš„æ•°ç»„å†…å®¹éƒ½æ˜¯undefined let obj2=&#123;true'a':1,true'b':2,true'c':3,truelength:3&#125;;console.log(Array.from(obj2)); //[ undefined, undefined, undefined ] åŒæ—¶Array.from()æ¥å—ç¬¬äºŒä¸ªå‚æ•°ï¼Œä½œç”¨ç±»ä¼¼äºmapæ–¹æ³•console.log(Array.from(obj, x=&gt;x + '1')); //[ 'a1', 'b1', 'c1' ] ç±»ä¼¼äºmapæ–¹æ³• #Array.of()å¯å°†ä¸€ç»„å€¼è½¬æ¢ä¸ºæ•°ç»„Array.of(3, 12, 2, 3, 24, 2); //[ 3, 12, 2, 3, 24, 2 ] å°†ä¸€ç»„å€¼è½¬æ¢ä¸ºæ•°ç»„Array.of(3, &apos;12&apos;, [2], 3, 24, 2); //[ 3, &apos;12&apos;, [ 2 ], 3, 24, 2 ] è¿™ä¸ªæ–¹æ³•çš„ç›®çš„æ˜¯ä¸ºäº†å¼¥è¡¥æ•°ç»„æ„é€ å‡½æ•°çš„Array()çš„ä¸è¶³ï¼Œå› ä¸ºå½“å‚æ•°ä¸ªæ•°ä¸åŒæ—¶ï¼Œå®ƒä¼šäº§ç”Ÿä¸åŒçš„æ•ˆæœArray(8) // [ , , , , , , , ]Array(3,11) // [3, 11] find()å’ŒfindIndex() æ•°ç»„å®ä¾‹çš„findæ–¹æ³•ï¼Œç”¨äºæ‰¾å‡ºç¬¬ä¸€ä¸ªç¬¦åˆæ¡ä»¶çš„æ•°ç»„æˆå‘˜ã€‚å®ƒçš„å‚æ•°æ˜¯ä¸€ä¸ªå›è°ƒå‡½æ•°ï¼Œæ‰€æœ‰æ•°ç»„æˆå‘˜ä¾æ¬¡æ‰§è¡Œè¯¥å›è°ƒå‡½æ•°ï¼Œç›´åˆ°æ‰¾å‡ºç¬¬ä¸€ä¸ªè¿”å›å€¼ä¸ºtrueçš„æˆå‘˜ï¼Œç„¶åè¿”å›è¯¥æˆå‘˜ã€‚å¦‚æœæ²¡æœ‰ç¬¦åˆæ¡ä»¶çš„æˆå‘˜ï¼Œåˆ™è¿”å›undefinedã€‚ var found = [1, 2, 3, 4, -1].find(n=&gt;n &lt; 0); //find æ‰¾å‡ºç¬¬ä¸€ä¸ªè¿”å›å€¼ä¸ºtrueçš„æˆå‘˜var founded = [1, 2, 3, 4, -1].find(function (b) &#123;truereturn b &gt; 3&#125;);console.log('result:', found, founded); //result: -1 4 findIndexè¿”å›ç¬¬ä¸€ä¸ªç¬¦åˆæ¡ä»¶çš„å€¼çš„index,å¦‚æœæ²¡æ‰¾åˆ°åˆ™è¿”å› -1. var foundIndex = [1,2,324,5,34].findIndex(function(value,index,arr)&#123; "use strict";truereturn value &gt; 100;&#125;);console.log(foundIndex); //2 è¿™ä¸¤ä¸ªæ–¹æ³•éƒ½å¯ä»¥å‘ç°NaNï¼Œè€ŒIndexOfæ˜¯ä¸èƒ½å‘ç°çš„ã€‚ console.log([2,3,4,NaN].indexOf(NaN)); //-1console.log([1,2,NaN].find(value=&gt;Object.is(NaN,value))); //NaNconsole.log([1,2,3,4,NaN].findIndex(value=&gt;Object.is(NaN,value))); //4 Array.fill()ä½¿ç”¨ç»™å®šå€¼ï¼Œå¡«å……ä¸€ä¸ªæ•°ç»„[1,2,3,4].fill('a'); //[ 'a', 'a', 'a', 'a' ]new Array(6).fill(3); //[ 3, 3, 3, 3, 3, 3 ] fill()è¿˜å¯ä»¥æ¥å—ç¬¬äºŒä¸ªå’Œç¬¬ä¸‰ä¸ªå‚æ•°ï¼Œç”¨äºæŒ‡å®šå¡«å……çš„èµ·å§‹ä½ç½®å’Œç»“æŸä½ç½®ã€‚[1,2,3,4].fill(8,1,2) //[1,8,3,4][1,2,3,4].fill(8,1,3) //[ 1, 8, 8, 4 ] entries()ï¼Œkeys()å’Œvalues()è¿™ä¸‰ä¸ªæ–¹æ³•éƒ½æ˜¯ç”¨æ¥éå†æ•°ç»„ï¼Œå¯ä»¥ä½¿ç”¨for...ofæ¥è¿›è¡Œéå†ï¼Œkeys()ç”¨æ¥éå†é”®åï¼Œvalues()ç”¨æ¥éå†é”®å€¼ï¼Œentries()å¯¹é”®å€¼å¯¹éå†ã€‚ for (let index of ['a', 'b'].keys()) &#123;trueconsole.log(index);&#125;// 0// 1for (let elem of ['a', 'b'].values()) &#123;trueconsole.log(elem);&#125;// 'a'// 'b'for (let [index, elem] of ['a', 'b'].entries()) &#123;trueconsole.log(index, elem);&#125;// 0 "a"// 1 "b" ä¸ªäººæ„Ÿè§‰æ„ä¹‰ä¸å¤§ï¼Œå’Œä»¥å‰çš„forEachæ˜¯ä¸€æ ·çš„åŠŸèƒ½ï¼Œæœ‰ä¸ªä¸åŒçš„åœ°æ–¹æ˜¯å¦‚æœä¸é€‚ç”¨for...oféå†çš„è¯ï¼Œå¯ä»¥ä½¿ç”¨nextæ¥æ‰‹åŠ¨éå†ã€‚let word = ['h','e','l','l','o'];let entries = word.entries();console.log(entries.next().value); [0,'h']console.log(entries.next().value); [1,'e'] å…¶ä»–æ–¹æ³•è¿™äº›éƒ½å±äºES7è¦å®ç°çš„å†…å®¹ includeåˆ¤æ–­ä¸€ä¸ªæ•°ç»„æ˜¯å¦åŒ…å«ç»™å®šçš„å€¼ï¼Œè¿”å›çš„æ˜¯ä¸€ä¸ªå¸ƒå°”å€¼ã€‚ æ•°ç»„æ¨å¯¼æ„Ÿè§‰è¿™é‡Œè·Ÿpythonè¶Šæ¥è¶Šåƒäº†ã€‚ var a1 = [1, 2, 3, 4];var a2 = [for (i of a1) i * 2];a2 // [2, 4, 6, 8] forâ€¦of åé¢è¿˜å¯ä»¥é™„åŠ ifè¯­å¥ï¼Œç”¨æ¥è®¾å®šå¾ªç¯çš„é™åˆ¶æ¡ä»¶ã€‚ var years = [ 1954, 1974, 1990, 2006, 2010, 2014 ];[for (year of years) if (year &gt; 2000) year];// [ 2006, 2010, 2014 ][for (year of years) if (year &gt; 2000) if(year &lt; 2010) year];// [ 2006][for (year of years) if (year &gt; 2000 &amp;&amp; year &lt; 2010) year];// [ 2006] Array.observe()ï¼ŒArray.unobserve()ç”¨äºç›‘å¬å’Œæ•°ç»„çš„å˜åŒ–ï¼Œåˆ¶å®šå›è°ƒå‡½æ•°ã€‚æ¯”è¾ƒæœŸå¾…è¿™ä¸ªæ–¹æ³•ï¼Œä½œç”¨ä¼šå¾ˆå¤§ã€‚ #ç‰ˆæƒæ–‡ç« ä¸­æ‰€æœ‰ä»£ç çš†æ¥è‡ªæˆ–æ¼”å˜è‡ªï¼š é˜®ä¸€å³°-ECMAScript 6 å…¥é—¨,æœ¬æ–‡åŒæ ·éµå¾ªç½²å-éå•†ç”¨è®¸å¯è¯.]]></content>
      <categories>
        <category>æŠ€æœ¯</category>
      </categories>
      <tags>
        <tag>å­¦ä¹ ç¬”è®°</tag>
        <tag>es6</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[ECMAScript6å­¦ä¹ ç®€è®°ï¼ˆä¸€ï¼‰-å˜é‡å£°æ˜Â·å­—ç¬¦ä¸²æ‰©å±•Â·æ•°å€¼æ‰©å±•]]></title>
    <url>%2F2015%2F08%2F21%2FLearning-ECMAScript6-One%2F</url>
    <content type="text"><![CDATA[let å’Œ const å‘½ä»¤let å‘½ä»¤let å£°æ˜çš„å˜é‡ï¼Œåªå­˜åœ¨ä¸æ‰€å£°æ˜çš„ä»£ç å—å†…ã€‚ &#123; let a = 10; var b = 11;&#125;console.log(a) //ReferenceError: a is not definedconsole.log(b) //11 å¯ä»¥çœ‹åˆ°ï¼Œåœ¨ä»£ç å—å¤–é¢ï¼Œæ˜¯ä¸èƒ½è®¿é—®åˆ°ç”¨ let å£°æ˜çš„å˜é‡ï¼Œä¹Ÿå°±æ˜¯è¯´ let å£°æ˜çš„å˜é‡æ˜¯åŸºäºå—çº§ä½œç”¨åŸŸçš„ã€‚è¿™æ ·å°±å¯ä»¥é¿å…ä¸€äº›å˜é‡å£°æ˜çš„é—®é¢˜ã€‚ var arr = [1,2,3]for(let i = 0;i&lt;arr.length;i++)&#123;&#125;console.log(i) //ReferenceError: a is not defined å¯è§ä¸Šé¢çš„çš„ä»£ç  for å¾ªç¯å¤–é¢æ˜¯ä¸èƒ½è®¿é—®åˆ°å˜é‡ i çš„ã€‚è€Œä¸‹é¢çš„ä»£ç ç”¨ var å£°æ˜ï¼Œæœ€åä¼šè¾“å‡º10ã€‚ var a = [];for (var i = 0; i &lt; 10; i++) &#123; a[i] = function () &#123; console.log(i); &#125;;&#125;a[6](); // 10 è€Œå¦‚æœä½¿ç”¨ letï¼Œåˆ™ä¼šè¾“å‡º6ã€‚è€Œä»¥å‰è¦åšåˆ°è¿™æ ·ï¼Œå¯èƒ½ä¼šéœ€è¦ä½¿ç”¨ç«‹å³æ‰§è¡Œå‡½æ•°æ‰è¡Œã€‚ var a = [];for (let i = 0; i &lt; 10; i++) &#123; a[i] = function () &#123; console.log(i); &#125;;&#125;a[6](); // 6 è€Œä¸” let ä¸ä¼šåƒ var ä¸€æ ·å‘ç”Ÿâ€˜å˜é‡æå‡â€™ç°è±¡ã€‚ function a()&#123; console.log(b) //ReferenceError let b = 2;&#125;function c()&#123; console.log(d); //undefined var d = 2; åœ¨å—çº§ä½œç”¨åŸŸå†…ï¼Œä½¿ç”¨ let å£°æ˜çš„å˜é‡ï¼Œä¼šå½“å®šåœ¨è¿™ä¸ªåŒºåŸŸï¼Œä¸ä¼šå—åˆ°å¤–éƒ¨çš„å½±å“ã€‚ var temp = 123;let temp1 = 222;var temp2 = 555;if(true)&#123; let temp =333; let temp1 =444; console.log(temp); //333 console.log(temp1); //444 console.log(temp2) //ReferenceError let temp2 = 555;&#125; let åœ¨ä¸€ä¸ªä½œç”¨åŸŸå†…ä¸å…è®¸é‡å¤å£°æ˜åŒä¸€ä¸ªå˜é‡ function()&#123; let a = 10; var a = 1;&#125;function()&#123; let a = 11; let a = 212;&#125; const å‘½ä»¤const åŒ let ç±»ä¼¼ï¼Œåªæ˜¯ç”¨ const å£°æ˜çš„å˜é‡æ˜¯å¸¸é‡ï¼Œä¸€æ—¦å£°æ˜å°±ä¸å¯æ›´æ”¹ã€‚ const a = 1;a //1a =3;a //1const a = 12a //1 éœ€è¦æ³¨æ„çš„æ˜¯ï¼Œconst å‘½ä»¤åªæ˜¯æŒ‡å‘å˜é‡æ‰€åœ¨çš„åœ°å€ï¼Œæ‰€ä»¥å°†å¯¹è±¡å£°æ˜ä¸ºå¸¸é‡æ—¶éœ€è¦æ³¨æ„ã€‚ const foo = &#123;&#125;;foo.prop = 1;foo.prop //1const a = [];a.push("Hello"); // å¯æ‰§è¡Œa.length = 0; // å¯æ‰§è¡Œa = ["Dave"]; // æŠ¥é”™ ä¸Šé¢ä»£ç ä¸­ï¼Œå¸¸é‡fooå‚¨å­˜çš„æ˜¯ä¸€ä¸ªåœ°å€ï¼Œè¿™ä¸ªåœ°å€æŒ‡å‘ä¸€ä¸ªå¯¹è±¡ã€‚ä¸å¯å˜çš„åªæ˜¯è¿™ä¸ªåœ°å€ï¼Œå³ä¸èƒ½æŠŠfooæŒ‡å‘å¦ä¸€ä¸ªåœ°å€ï¼Œä½†å¯¹è±¡æœ¬èº«æ˜¯å¯å˜çš„ï¼Œæ‰€ä»¥ä¾ç„¶å¯ä»¥ä¸ºå…¶æ·»åŠ æ–°å±æ€§ã€‚ ä¹Ÿå°±æ˜¯è¯´å°†ä¸€ä¸ªå¯¹è±¡æˆ–æ•°ç»„å£°æ˜ä¸ºå¸¸é‡æ—¶ï¼Œå®ƒæœ¬èº«æ˜¯ä¸å¯èµ‹å€¼çš„ï¼Œä½†æ˜¯å¯ä»¥ç»™å®ƒæ·»åŠ æ–¹æ³•ã€‚å› ä¸ºä¸å˜çš„åªæ˜¯å®ƒæœ¬èº«çš„åœ°å€ã€‚ å…¨å±€å¯¹è±¡çš„å±æ€§ ES6è§„å®šï¼Œvarå‘½ä»¤å’Œfunctionå‘½ä»¤å£°æ˜çš„å…¨å±€å˜é‡ï¼Œå±äºå…¨å±€å¯¹è±¡çš„å±æ€§ï¼›letå‘½ä»¤ã€constå‘½ä»¤ã€classå‘½ä»¤å£°æ˜çš„å…¨å±€å˜é‡ï¼Œä¸å±äºå…¨å±€å¯¹è±¡çš„å±æ€§ã€‚ var a = 1;// å¦‚æœåœ¨nodeç¯å¢ƒï¼Œå¯ä»¥å†™æˆglobal.a// æˆ–è€…é‡‡ç”¨é€šç”¨æ–¹æ³•ï¼Œå†™æˆthis.awindow.a // 1let b = 1;window.b // undefined å˜é‡çš„è§£æ„èµ‹å€¼ES6 å…è®¸æŒ‰ç…§ä¸€å®šæ¨¡å¼ï¼Œä»æ•°ç»„å’Œå¯¹è±¡ä¸­æå–å€¼ï¼Œå¯¹å˜é‡è¿›è¡Œèµ‹å€¼ï¼Œè¿™è¢«ç§°ä¸ºè§£æ„ã€‚æ„Ÿè§‰è¿™é‡Œè·Ÿ python æŒºåƒçš„ã€‚ æ•°ç»„çš„è§£æ„èµ‹å€¼var [a,b] = [1,2];console.log(a,b);//1 2let [c,d] = [3,4];console.log(c,d);//3 4 å®é™…ä¸Šï¼Œå®ƒå±äºâ€˜æ¨¡å¼åŒ¹é…â€™ï¼Œä¹Ÿå°±æ˜¯è¯´ï¼Œåªè¦ç­‰å·ä¸¤è¾¹çš„æ¨¡å¼ç›¸åŒï¼Œé‚£ä¹ˆå·¦è¾¹çš„å˜é‡å°±ä¼šè¢«èµ‹äºˆç›¸åº”çš„å€¼ã€‚ var [a,b,[c,d]] = [1,2,[3,4]];//a = 1,b = 2,c = 3,d = 4var [aa,bb,cc] = [,,3]//aa = undefined,bb = undefined,cc = 3;let [one,...more] = [1,2,3,4,5,6]//one = 1,more = [2,3,4,5,6] å¯ä»¥çœ‹åˆ°ä¸Šé¢çš„ä»£ç ï¼Œåªè¦ä»–ä»¬çš„ç»“æ„ç›¸åŒï¼Œé‚£ä¹ˆå·¦è¾¹ç›¸åº”ä½ç½®çš„å˜é‡å°±ä¼šè¢«èµ‹å€¼ä¸ºå³è¾¹çš„å¯¹åº”çš„å€¼ã€‚å¦‚æœæ²¡æœ‰å¯¹åº”çš„å€¼ï¼Œé‚£ä¹ˆå°±æ˜¯ undefined.ä»¥ä¸‹æƒ…å†µå±äºè§£æ„ä¸æˆåŠŸï¼Œéƒ½ä¼šæŠ¥ TypeError çš„é”™ï¼Œç„¶åå˜é‡çš„å€¼ä¼šç­‰äº undefined. ä»¥ä¸Šå‡ ç§æƒ…å†µéƒ½å±äºè§£æ„ä¸æˆåŠŸï¼Œfooçš„å€¼éƒ½ä¼šç­‰äºundefinedã€‚è¿™æ˜¯å› ä¸ºåŸå§‹ç±»å‹çš„å€¼ï¼Œä¼šè‡ªåŠ¨è½¬ä¸ºå¯¹è±¡ï¼Œæ¯”å¦‚æ•°å€¼1è½¬ä¸ºnew Number(1)ï¼Œä»è€Œå¯¼è‡´fooå–åˆ°undefinedã€‚ var [foo] = [];var [foo] = 1;var [foo] = false;var [foo] = NaN;var [bar, foo] = [1];let [foo] = undefined;let [foo] = null; è§£æ„èµ‹å€¼å…è®¸æŒ‡å®šé»˜è®¤å€¼ã€‚å½“æ•°ç»„æˆå‘˜ä¸¥æ ¼ç­‰äº undefined æ—¶ï¼Œé»˜è®¤å€¼å°±ä¼šç”Ÿæ•ˆã€‚ var [foo = true] = [];foo // true[x, y='b'] = ['a'] // x='a', y='b'[x, y='b'] = ['a', undefined] // x='a', y='b'[x, y='b'] = [1 ,null ] // x= 1,y=null å¯¹è±¡çš„è§£æ„èµ‹å€¼ç»“æ„åŒæ ·ä½œç”¨äºå¯¹è±¡,äºæ•°ç»„ä¸åŒçš„åœ°æ–¹åœ¨äºï¼šæ•°ç»„çš„å…ƒç´ çš„å–å€¼ç”±å®ƒçš„ä½ç½®å†³å®šï¼›å¯¹è±¡å±æ€§å› ä¸ºæ²¡æœ‰é¡ºåºï¼Œæ‰€ä»¥å˜é‡åéœ€è¦ä¸å±æ€§åŒåï¼Œæ‰èƒ½å–åˆ°æ­£ç¡®çš„å€¼ã€‚ var &#123; foo, bar &#125; = &#123; foo: "aaa", bar: "bbb" &#125;;foo // "aaa"bar // "bbb"//æ³¨æ„ä¸¤è€…åŒºåˆ«var &#123; foo, bar &#125; = &#123; bar: "aaa", foo: "bbb" &#125;;foo // "bbb"bar // "aaa"var &#123;fos&#125; = &#123;foo:'aaa'&#125;;fos // undefined å¯ä»¥çœ‹åˆ°ä¸Šé¢çš„ä»£ç ï¼Œèµ‹å€¼åªä¸å±æ€§åæœ‰å…³ï¼Œä¸é¡ºåºæ— å…³ã€‚å¦‚æœå±æ€§åå¯¹ä¸ä¸Šï¼Œå°±ä¼šç­‰äº undefined.è€Œå¦‚æœéœ€è¦åœ¨å˜é‡åä¸å±æ€§åä¸ä¸€è‡´æƒ…å†µä¸‹èµ‹å€¼ï¼Œéœ€è¦ç”¨ä¸‹é¢çš„æ–¹æ³•ã€‚ var &#123;foo:abs&#125;=&#123;foo:'sss'&#125;abs // 'sss' åŒæ ·ä¹Ÿå¯ä»¥å¯¹æœ‰åµŒå¥—ç»“æ„çš„å¯¹è±¡è§£æ„ let obj = &#123; p:[ 'Hello', &#123;y:'World'&#125; ]&#125;;let &#123;p:[x,&#123;y&#125;]&#125; = obj;console.log(x,y);//Hello World å’Œæ•°ç»„ä¸€æ ·ï¼Œå¯¹è±¡çš„è§£æ„ä¹Ÿå¯ä»¥æŒ‡å®šé»˜è®¤å€¼ï¼Œåªè¦å¯¹è¦èµ‹å€¼å¯¹è±¡ç›¸å¯¹åº”çš„å¯¹è±¡å±æ€§ä¸¥æ ¼ç­‰äº undefinedï¼Œé»˜è®¤å€¼å°±ä¼šæˆç«‹ã€‚ var &#123;a =3&#125; = &#123;&#125;;a //3var &#123;b=4,y&#125; = &#123;y:4&#125;;b,y //4,4 å¯¹è±¡çš„è§£æ„èµ‹å€¼ç»™æˆ‘ä»¬æä¾›äº†è¾ƒå¤§çš„æ–¹ä¾¿ã€‚ var obj = &#123; method1: function()&#123;&#125;, method2: function()&#123;&#125;&#125;var &#123;method1,method2&#125; = obj;//ä»¥å‰çš„å†™æ³•var method1 = obj.method1;var method2 = obj.method2; å­—ç¬¦ä¸²çš„è§£æ„èµ‹å€¼å­—ç¬¦ä¸²åŒæ ·å¯ä»¥è¿›è¡Œè§£æ„ï¼Œåœ¨è¿›è¡Œè§£æ„çš„æ—¶å€™ï¼Œå­—ç¬¦ä¸²ä¼šè¢«è½¬æ¢æˆç±»æ•°ç»„å¯¹è±¡ã€‚ let [f,g,h] = 'length';console.log(f,g,h);//l,e,nlet &#123;length:len&#125;='length';console.log(len);//6 å‡½æ•°å‚æ•°çš„è§£æ„èµ‹å€¼å‡½æ•°å‚æ•°æ˜¯ä¸€ä¸ªç±»æ•°ç»„å¯¹è±¡ï¼ŒåŒæ ·å¯ä»¥è§£æ„èµ‹å€¼ function a([x,y])&#123; return x + y;&#125;add([1,2]) //3 ä¹ŸåŒæ ·å¯ä»¥è®¾ç½®é»˜è®¤å€¼ function move(&#123;x=0,y=0&#125;=&#123;&#125;)&#123; "use strict"; console.log([x,y]);&#125;move(&#123;x:3,y:4&#125;); //[3,4]move(&#123;x:3&#125;); //[3,0]move(&#123;&#125;); //[0,0]move(); //[0,0]function remove(&#123;x,y&#125;=&#123;x:0,y:0&#125;)&#123; "use strict"; console.log(x,y);&#125;remove(&#123;x:1,y:2&#125;); //1,2remove(&#123;x,y&#125;); //Hello Worldremove(&#123;&#125;); //undefined undefinedremove(); // 0 0 å‡½æ•°å‚æ•°çš„è§£æ„æ–¹æ³•ä¼šæ ¹æ®å‚æ•°ç±»å‹æ¥è‡ªåŠ¨é€‰æ‹©ï¼Œæ•°ç»„å°±æŒ‰ç…§æ•°ç»„è§£æ„ï¼Œå¯¹è±¡å°±æŒ‰ç…§å¯¹è±¡è§£æ„ã€‚ function fc([x,y,z])&#123; "use strict"; console.log(x,y,z);&#125;fc([1,2,3]); //1,2,3function nf(&#123;x,y,z&#125;)&#123; "use strict"; console.log(x,y,z);&#125;nf(&#123;y:1,z:2,x:3&#125;); //3,1,2 ç”¨é€”æå–JSONæ•°æ®var jsonDate = &#123; id: 42, status: "notOK", data: [12, 32]&#125;;let &#123;id,status,data&#125; = jsonDate;console.log(id, status, data); //42 'notOK' [12,32] ###éå†Mapç»“æ„var map = new Map();map.set('first', 'HELLO');map.set('second', 'WORLD');for (let [key,value] of map) &#123; console.log(key + ' is ' + value);&#125;// first is HELLO// second is WORLDfor (let key of map) &#123; console.log(key);&#125;//['first','HELLO']//[ 'second', 'WORLD' ] ç‰ˆæƒæ–‡ç« ä¸­æ‰€æœ‰ä»£ç çš†æ¥è‡ªæˆ–æ¼”å˜è‡ªï¼š é˜®ä¸€å³°-ECMAScript 6 å…¥é—¨,æœ¬æ–‡åŒæ ·éµå¾ªç½²å-éå•†ç”¨è®¸å¯è¯.]]></content>
      <categories>
        <category>æŠ€æœ¯</category>
      </categories>
      <tags>
        <tag>å­¦ä¹ ç¬”è®°</tag>
        <tag>es6</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[è¢«ç»ˆæ­¢çš„é¡¹ç›®]]></title>
    <url>%2F2015%2F08%2F16%2Fproject-termination%2F</url>
    <content type="text"><![CDATA[åœ¨äº”æœˆä»½å…¬å¸æ¥åˆ°ä¸€ä¸ªå®¢æˆ·çš„æ‰‹æœºé’±åŒ…é¡¹ç›®ï¼Œè¿™ä¸ªé¡¹ç›®å¾—åˆ°äº†å…¬å¸å¾ˆå¤§çš„é‡è§†ï¼Œå› ä¸ºè¿™æ˜¯å…¬å¸æ‰‹æœºç«¯ç»§å…¶å®ƒä¿©ä¸ªä¸»è¦é¡¹ç›®åå¼€è¾Ÿçš„ä¸€ä¸ªæ–°çš„äº§å“çº¿ã€‚è€å¤§ç»™äº†æˆ‘æœºä¼šï¼Œè®©æˆ‘å…¨æƒè´Ÿè´£è¿™ä¸ªé¡¹ç›®çš„å‰ç«¯éƒ¨åˆ†ã€‚ å½“æ—¶æˆ‘çš„å†…å¿ƒæ˜¯å¾ˆå…´å¥‹çš„ï¼Œä¸æ•¢æ€ æ…¢ï¼Œè®¤è®¤çœŸçœŸçš„æŠŠé¡¹ç›®åšäº†å‡ºæ¥ã€‚å¼€å‘è¿‡ç¨‹ä¸­é‡åˆ°äº†å¾ˆå¤šä»¥å‰æ²¡æœ‰é‡åˆ°è¿‡çš„é—®é¢˜ï¼Œä½†ä¹Ÿéƒ½è¢«æˆ‘ä¸€ä¸€å…‹æœäº†ï¼Œå¾ˆæœ‰æˆå°±æ„Ÿã€‚é¡¹ç›®å®šæ ¼åœ¨1.2ç‰ˆæœ¬åï¼Œå°±äº¤ç»™äº†åå°å¼€å‘ï¼Œç„¶åè‡ªå·±å°±ä¸€ç›´å†æœŸå¾…è¿™ä¸ªé¡¹ç›®çš„ä¸Šçº¿ã€‚ å¤§æ¦‚åœ¨ä¸Šä¸ªæœˆä¸‹æ—¬åå°å¼€å‘å®Œæ¯•ï¼Œç„¶åå°±ä¸Šäº†æµ‹è¯•ç¯å¢ƒè¿›è¡Œæµ‹è¯•ã€‚ä¸Šå‘¨äºŒæµ‹è¯•å¦¹å¦¹è¿‡æ¥æ‰¾æˆ‘ï¼Œè¯´é¡µé¢åœ¨ä½ç‰ˆæœ¬å®‰å“ä¸Šå‡ºç°äº†ä¸€äº›å…¼å®¹æ€§é—®é¢˜ï¼Œç»™æˆ‘æäº†å‡ ä¸ª issue è®©æˆ‘æ”¹ã€‚å…¼å®¹æ€§é—®é¢˜ï¼Œåœ¨æ‰€éš¾å…å˜›ã€‚ç„¶åæˆ‘å°±å“¼å“§å“¼å“§å»æ”¹ issue äº†ï¼Œè´¹äº†å¥½å¤§åŠ²æ”¹å¥½äº†ã€‚æäº¤ä»£ç åï¼Œæˆ‘å»é€šçŸ¥åå°ã€‚ ç„¶åå°±æ¥åˆ°ä¸€ä¸ªä»¤äººè›‹ç–¼çš„æ¶ˆæ¯ï¼šé¡¹ç›®è¢«ç æ‰äº†ã€‚ è¿™çœŸæ˜¯å¤ªçªç„¶äº†ï¼Œå‰ä¸€ç§’æˆ‘è¿˜åœ¨åŸ‹å¤´æ”¹ bug ï¼Œä¸‹ä¸€ç§’å°±å¾—çŸ¥é¡¹ç›®å°±è¢«ç æ‰äº†ï¼ŒæŒ‚äº†ã€‚è¿™æ„å‘³æˆ‘çš„å·¥ä½œä¹Ÿéƒ½ä»˜è¯¸ä¸œæµäº†ï¼Œè¿™æ„Ÿè§‰çœŸæ˜¯å¾ˆä¸å¥½ã€‚å°±å¥½åƒå¤§å®¶å•†é‡å¥½å‘¨æœ«è¦åœ¨ä½ å®¶èšé¤ï¼Œä¸ºæ­¤ä½ å‡†å¤‡äº†å¾ˆä¸°ç››çš„é¥­èœï¼Œç»“æœçªç„¶èšé¤å–æ¶ˆäº†â€¦â€¦ è€Œé¡¹ç›®è¢«ç çš„åŸå› ç«Ÿç„¶æ˜¯å› ä¸ºå‰æ®µæ—¶é—´ï¼Œè¯ç›‘ä¼šå‘å¸ƒçš„ä¸€æ¡æ–°è§„å®šã€‚ æˆ‘è¯¥è¯´ç‚¹ä»€ä¹ˆå¥½å‘¢]]></content>
      <categories>
        <category>éšç¬”</category>
      </categories>
      <tags>
        <tag>é¡¹ç›®ç»ˆæ­¢</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[JavaScript å¼‚æ­¥ç¼–ç¨‹]]></title>
    <url>%2F2015%2F07%2F04%2Fasynchronous-javascript-ajax%2F</url>
    <content type="text"><![CDATA[å·¥ä½œä¸­éœ€è¦å®ç°ä¸€ä¸ªåŠŸèƒ½ï¼Œç®€åŒ–ä¸€ä¸‹å¤§æ¦‚æ˜¯è¿™ä¹ˆä¸€ä¸ªé€»è¾‘ã€‚ bills.getData = function (monthNow) { //DONE Get data of monthNow. //url = é€šè¿‡ monthNow æ¥å†³å®š url åœ°å€ var url = &quot;api/data.json&quot;; //noinspection JSUnusedGlobalSymbols $.ajax({ url: url, dataType: &quot;json&quot;, type: &quot;GET&quot;, success: function (d) { Data = d; }, error: function (d) { window.console.log(&quot;error&quot;); } }); return Data }; data = bills.getData(monthNow); ç»“æœæµ‹è¯•çš„æ—¶å€™å‘ç°å®Œå…¨ä¸å¯¹ã€‚è°ƒè¯•äº†ä¸€ä¸‹å‘ç°ï¼Œå½“ bills.getData æ‰§è¡Œå®Œæ¯•å°† Data return å‡ºå»å¹¶ä¸”è·Ÿç€çš„èµ‹å€¼è¯­å¥ä¹Ÿæ‰§è¡Œå®Œæ¯•åï¼Œæ‰è§¦å‘äº† ajax ä¸­ success äº‹ä»¶ã€‚è¿™æ ·æ˜æ˜¾æ˜¯é”™è¯¯çš„ï¼Œåˆ†æä¸€ä¸‹åŸå› ï¼šç”±äº ajax è¯·æ±‚æ˜¯å¼‚æ­¥çš„ï¼Œæ‰€ä»¥å®é™…çš„æƒ…å†µæ˜¯ï¼Œ bills.getDate() é‡Œçš„ success è¿˜æ²¡æœ‰æ‰§è¡Œå®Œæ¯•ï¼Œ Data å°±å·²ç»å·²ç» return äº†ã€‚å¯¼è‡´æœ€åçš„èµ‹å€¼è¯­å¥å…¶å®æ˜¯é”™è¯¯çš„ï¼Œå®ƒå¹¶æ²¡æœ‰è¢«èµ‹å€¼ä¸º ajax è¯·æ±‚æˆåŠŸç»“æœï¼Œè¿™æ²¡æœ‰è¾¾åˆ°æˆ‘ä»¬çš„é¢„æœŸã€‚æ‰€ä»¥è¿™é‡Œéœ€è¦å¯¹ä»£ç ç»“æ„è¿›è¡Œæ”¹å˜ï¼Œæˆ‘ä»¬éœ€è¦åœ¨ç¡®è®¤ ajax è¯·æ±‚å®Œæ¯•æˆåŠŸåï¼Œå†æ‰§è¡Œèµ‹å€¼è¯­å¥ã€‚è¿™é‡Œæœ‰ä¸¤ç§æ–¹æ³•äº†è¾¾åˆ°æ•ˆæœï¼Œåˆ†åˆ«æ˜¯ callback å’Œ promise ã€‚ä¸ºäº†æ–¹ä¾¿ï¼Œæˆ‘è¿™é‡Œé€‰æ‹©äº† callback çš„å½¢å¼ã€‚é‚£ä¹ˆä»£ç å°±æ˜¯ä¸‹é¢è¿™ä¸ªæ ·å­ // Data æ˜¯å…¨å±€å˜é‡ bills.getData = function (monthNow, callback) { //DONE Get data of monthNow. //url = é€šè¿‡ monthNow æ¥å†³å®š url åœ°å€ var url = &quot;api/data.json&quot;; //noinspection JSUnusedGlobalSymbols $.ajax({ url: url, dataType: &quot;json&quot;, type: &quot;GET&quot;, success: function (d) { Data = d; if (typeof callback === &apos;function&apos;) { callback(); } }, error: function (d) { window.console.log(&quot;error&quot;); } }); }; bills.getData(monthNow,doSomeThing); function doSomeThing(){ //doSomeThing with Data } è¿™æ ·å°±å¯ä»¥ä¿è¯ callback ä¸­çš„ data æ˜¯ ajax è¯·æ±‚æˆåŠŸåçš„ç»“æœã€‚]]></content>
      <categories>
        <category>æŠ€æœ¯</category>
      </categories>
      <tags>
        <tag>JavaScript</tag>
        <tag>async</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[learnyounode]]></title>
    <url>%2F2015%2F06%2F11%2Flearnyounode%2F</url>
    <content type="text"><![CDATA[Learn You The Node.js For Much Win!èŠ±äº†å‡ å¤©ä¸šä½™æ—¶é—´åšå®Œè¿™ä¸ª Node.js å…¥é—¨çš„é¢˜ç›®ï¼Œæ¢³ç†ä¸€ä¸‹çŸ¥è¯†ç‚¹ã€‚ HELLO WORLD ç¼–å†™ä¸€ä¸ªç¨‹åºï¼Œåœ¨ç»ˆç«¯ï¼ˆæ ‡å‡†è¾“å‡º stdoutï¼‰æ‰“å°å‡º â€œHELLO WORLDâ€ã€‚ å­¦ä¹ ä¸€é—¨è¯­è¨€çš„æœ€å¥½æ–¹æ³•å°±æ˜¯å…ˆå†™ä¸€ä¸ª Hello Wolrd ç¨‹åºã€‚è¿™é“é¢˜å¾ˆç®€å•ï¼Œæ¯ä¸ªäººéƒ½ä¼šã€‚ console.log(&quot;HELLO WORLD&quot;) BABY STEPS ç¼–å†™ä¸€ä¸ªç®€å•çš„ç¨‹åºï¼Œä½¿å…¶èƒ½æ¥æ”¶ä¸€ä¸ªæˆ–è€…å¤šä¸ªå‘½ä»¤è¡Œå‚æ•°ï¼Œå¹¶ä¸”åœ¨ç»ˆç«¯ï¼ˆæ ‡å‡†è¾“å‡º stdoutï¼‰ä¸­æ‰“å°å‡ºè¿™äº›å‚æ•°çš„æ€»å’Œã€‚ æ¥å—çš„å‚æ•°å¯ä»¥é€šè¿‡ process.argv æ¥è®¿é—®ï¼Œå®ƒæ˜¯ä¸€ä¸ªæ•°ç»„ã€‚å‰ä¸¤ä½æ˜¯å›ºå®šçš„ï¼Œç¬¬ä¸€ä½æ˜¯ node ï¼Œç¬¬äºŒä½æ˜¯æ–‡ä»¶çš„è·¯å¾„ï¼Œåé¢å°±æ˜¯ç¨‹åºè¾“å…¥çš„å†…å®¹çš„äº†ã€‚ é¦–å…ˆï¼Œè¯·å…ˆç¼–å†™ä¸€ä¸ªåŒ…å«å¦‚ä¸‹å¸¦ç®€æ˜“ä»£ç çš„ç¨‹åºæ¥ç†Ÿæ‚‰ä¸€ä¸‹ï¼š console.log(process.argv) é€šè¿‡æ‰§è¡Œå‘½ä»¤ node program.js å¹¶åœ¨åé¢å¤šåŠ å‡ ä¸ªå‚æ•°ï¼Œæ¥è¿è¡Œæˆ‘ä»¬çš„ç¨‹åºï¼Œæ¯”å¦‚ï¼š $ node program.js 1 2 3 è¿™æ ·ï¼Œä½ å°±ä¼šå¾—åˆ°è¿™æ ·ä¸€ä¸ªæ•°ç»„ï¼š [ â€˜nodeâ€™, â€˜/path/to/your/program.jsâ€™, â€˜1â€™, â€˜2â€™, â€˜3â€™ ] é‚£ä¹ˆæœ‰äº†è¿™äº›çŸ¥è¯†åï¼Œç¨‹åºå†™èµ·æ¥ä¹Ÿå°±å¾ˆç®€å•äº†ã€‚ var result = 0; process.argv.forEach(function(el,index){ if (index&gt;1) { result += +el; } }); console.log(result); MY FIRST I/O! ç¼–å†™ä¸€ä¸ªç¨‹åºï¼Œæ‰§è¡Œä¸€ä¸ªåŒæ­¥çš„æ–‡ä»¶ç³»ç»Ÿæ“ä½œï¼Œè¯»å–ä¸€ä¸ªæ–‡ä»¶ï¼Œå¹¶ä¸”åœ¨ç»ˆç«¯ï¼ˆæ ‡å‡†è¾“å‡º stdoutï¼‰æ‰“å°å‡ºè¿™ä¸ªæ–‡ä»¶ä¸­çš„å†…å®¹çš„è¡Œæ•°ã€‚ç±»ä¼¼äºæ‰§è¡Œ cat file | wc -l è¿™ä¸ªå‘½ä»¤ã€‚ æ‰€è¦è¯»å–çš„æ–‡ä»¶çš„å®Œæ•´è·¯å¾„ä¼šåœ¨å‘½ä»¤è¡Œç¬¬ä¸€ä¸ªå‚æ•°æä¾›ã€‚ é¦–å…ˆè¦å¯¹ä¸€ä¸ªæ–‡ä»¶è¿›è¡Œæ“ä½œï¼Œéœ€è¦ç”¨åˆ° fs è¿™ä¸ªæ¨¡å—ï¼Œæˆ‘ä»¬å¯ä»¥ç”¨ var fs = require(&#39;fs&#39;); æ¥å¼•å…¥ã€‚ç„¶åå¯ä»¥é€šè¿‡ fs è¿™ä¸ªå˜é‡æ¥è®¿é—®æ•´ä¸ª fs æ¨¡å—äº†ã€‚ åœ¨ fs ä¸­ï¼Œæ‰€æœ‰çš„åŒæ­¥ï¼ˆæˆ–è€…é˜»å¡ï¼‰çš„æ“ä½œæ–‡ä»¶ç³»ç»Ÿçš„æ–¹æ³•åéƒ½ä¼šä»¥ â€˜Syncâ€™ ç»“å°¾ã€‚è¦è¯»å–ä¸€ä¸ªæ–‡ä»¶ï¼Œä½ å°†éœ€è¦ä½¿ç”¨ fs.readFileSync(â€˜/path/to/fileâ€™) æ–¹æ³•ã€‚è¿™ä¸ªæ–¹æ³•ä¼šè¿”å›ä¸€ä¸ªåŒ…å«æ–‡ä»¶å®Œæ•´å†…å®¹çš„ Buffer å¯¹è±¡ã€‚Buffer å¯¹è±¡æ˜¯ Node ç”¨æ¥é«˜æ•ˆå¤„ç†æ•°æ®çš„æ–¹å¼ï¼Œæ— è®ºè¯¥æ•°æ®æ˜¯ ascii è¿˜æ˜¯äºŒè¿›åˆ¶æ–‡ä»¶ï¼Œæˆ–è€…å…¶ä»–çš„æ ¼å¼ã€‚Buffer å¯ä»¥å¾ˆå®¹æ˜“åœ°é€šè¿‡è°ƒç”¨ toString() æ–¹æ³•è½¬æ¢ä¸ºå­—ç¬¦ä¸²ã€‚å¦‚ï¼švar str = buf.toString()ã€‚ è¿™æ ·æˆ‘ä»¬è¦åšçš„å°±æ˜¯å…ˆå¼•å…¥ fs æ¨¡å—ï¼Œç„¶åè¯»å–è¾“å…¥çš„æ•°æ®ã€‚æˆ‘ä»¬çš„ç›®çš„æ˜¯è®¡ç®—è¡Œæ•°ï¼Œå¯ä»¥çŸ¥é“ï¼Œæ¯è¡Œæœ«å°¾å…¶å®éƒ½æ˜¯æœ‰ä¸€ä¸ª \n çš„ï¼Œæˆ‘ä»¬åªè¦è®¡ç®— \n çš„ä¸ªæ•°å°±å¯ä»¥äº†ã€‚ var fs = require(&apos;fs&apos;); var data = fs.readFileSync(process.argv[2]); var str = data.toString(); var array = str.split(&apos;\n&apos;); console.log(array.length-1); MY FIRST ASYNC I/O! ç¼–å†™ä¸€ä¸ªç¨‹åºï¼Œæ‰§è¡Œä¸€ä¸ªå¼‚æ­¥çš„å¯¹æ–‡ä»¶ç³»ç»Ÿçš„æ“ä½œï¼šè¯»å–ä¸€ä¸ªæ–‡ä»¶ï¼Œå¹¶ä¸”åœ¨ç»ˆç«¯ï¼ˆæ ‡å‡†è¾“å‡º stdoutï¼‰æ‰“å°å‡ºè¿™ä¸ªæ–‡ä»¶ä¸­çš„å†…å®¹çš„è¡Œæ•°ã€‚ç±»ä¼¼äºæ‰§è¡Œ cat file | wc -l è¿™ä¸ªå‘½ä»¤ã€‚ æ‰€è¦è¯»å–çš„æ–‡ä»¶çš„å®Œæ•´è·¯å¾„ä¼šåœ¨å‘½ä»¤è¡Œç¬¬ä¸€ä¸ªå‚æ•°æä¾›ã€‚ è¿™é“é¢˜ä¸Šä¸€é“å‡ ä¹ä¸€æ ·ï¼Œåªæ˜¯å˜æˆäº†å¼‚æ­¥çš„è¯»å–ã€‚è¿™æ˜¯å°±éœ€è¦ç”¨åˆ° fs.readFile() ï¼Œè€Œä¸æ˜¯ fs.readFileSync() ã€‚ è®°ä½ï¼Œæˆ‘ä»¬ä¹ æƒ¯ä¸­çš„ Node.js å›è°ƒå‡½æ•°éƒ½æœ‰åƒå¦‚ä¸‹æ‰€ç¤ºçš„ç‰¹å¾ï¼š function callback (err, data) { / â€¦ / } æ‰€ä»¥ï¼Œä½ å¯ä»¥é€šè¿‡æ£€æŸ¥ç¬¬ä¸€ä¸ªå‚æ•°çš„çœŸå‡å€¼æ¥åˆ¤æ–­æ˜¯å¦æœ‰é”™è¯¯å‘ç”Ÿã€‚å¦‚æœæ²¡æœ‰é”™è¯¯å‘ç”Ÿï¼Œä½ ä¼šåœ¨ç¬¬äºŒä¸ªå‚æ•°ä¸­è·å–åˆ°ä¸€ä¸ª Buffer å¯¹è±¡ã€‚å’Œ readFileSync() ä¸€æ ·ï¼Œä½ å¯ä»¥ä¼ å…¥ â€˜utf8â€˜ ä½œä¸ºå®ƒçš„ç¬¬äºŒä¸ªå‚æ•°ï¼Œç„¶åæŠŠå›è°ƒå‡½æ•°ä½œä¸ºç¬¬ä¸‰ä¸ªå‚æ•°ï¼Œè¿™æ ·ï¼Œä½ å¾—åˆ°çš„å°†ä¼šæ˜¯ä¸€ä¸ªå­—ç¬¦ä¸²ï¼Œè€Œä¸æ˜¯ Bufferã€‚ var fs = require(&apos;fs&apos;); var data = fs.readFile(process.argv[2],function(err,data){ if(err){ throw console.error(err); } var list = data.toString().split(&apos;\n&apos;); console.log(list.length-1); }); FILTERED LS ç¼–å†™ä¸€ä¸ªç¨‹åºæ¥æ‰“å°å‡ºæŒ‡å®šç›®å½•ä¸‹çš„æ–‡ä»¶åˆ—è¡¨ï¼Œå¹¶ä¸”ä»¥ç‰¹å®šçš„æ–‡ä»¶åæ‰©å±•åæ¥è¿‡æ»¤è¿™ä¸ªåˆ—è¡¨ã€‚è¿™æ¬¡ä¼šæœ‰ä¸¤ä¸ªå‚æ•°æä¾›ç»™ä½ ï¼Œç¬¬ä¸€ä¸ªæ˜¯æ‰€ç»™çš„æ–‡ä»¶ç›®å½•è·¯å¾„ï¼ˆå¦‚ï¼špath/to/dirï¼‰ï¼Œç¬¬äºŒä¸ªå‚æ•°åˆ™æ˜¯éœ€è¦è¿‡æ»¤å‡ºæ¥çš„æ–‡ä»¶çš„æ‰©å±•åã€‚ ä¸¾ä¸ªä¾‹å­ï¼šå¦‚æœç¬¬äºŒä¸ªå‚æ•°æ˜¯ txtï¼Œé‚£ä¹ˆä½ éœ€è¦è¿‡æ»¤å‡ºé‚£äº›æ‰©å±•åä¸º .txtçš„æ–‡ä»¶ã€‚ æ³¨æ„ï¼Œç¬¬äºŒä¸ªå‚æ•°å°†ä¸ä¼šå¸¦æœ‰å¼€å¤´çš„ .ã€‚ ä½ éœ€è¦åœ¨ç»ˆç«¯ä¸­æ‰“å°å‡ºè¿™ä¸ªè¢«è¿‡æ»¤å‡ºæ¥çš„åˆ—è¡¨ï¼Œæ¯ä¸€è¡Œä¸€ä¸ªæ–‡ä»¶ã€‚å¦å¤–ï¼Œä½ å¿…é¡»ä½¿ç”¨å¼‚æ­¥çš„ I/O æ“ä½œã€‚ è¿™ä¸ªä¹Ÿå¾ˆç®€å•ï¼ŒæŠŠæ–‡ä»¶åé€šè¿‡ . æ¥åˆ†æˆä¸¤ä¸ªéƒ¨åˆ†ï¼Œåé¢çš„å°±æ˜¯åæˆ³åäº†ã€‚ var fs = require(&apos;fs&apos;); var path = process.argv[2]; var extname = process.argv[3]; fs.readdir(path,function(err,list){ if(err){ throw err; }else{ list.forEach(function(file){ if(file.split(&apos;.&apos;)[1] === extname){ console.log(file); } }); } }); MAKE IT MODULAR è¿™ä¸ªé—®é¢˜å’Œå‰é¢ä¸€ä¸ªä¸€æ ·ï¼Œä½†æ˜¯è¿™æ¬¡ä¼šä»‹ç»æ¨¡å—çš„æ¦‚å¿µã€‚ä½ å°†éœ€è¦åˆ›å»ºä¸¤ä¸ªæ–‡ä»¶æ¥è§£å†³è¿™ä¸ªé—®é¢˜ã€‚ ç¼–å†™ä¸€ä¸ªç¨‹åºæ¥æ‰“å°å‡ºæ‰€ç»™æ–‡ä»¶ç›®å½•çš„æ‰€å«æ–‡ä»¶çš„åˆ—è¡¨ï¼Œå¹¶ä¸”ä»¥ç‰¹å®šçš„æ–‡ä»¶ååç¼€æ¥è¿‡æ»¤è¿™ä¸ªåˆ—è¡¨ã€‚è¿™æ¬¡å°†ä¼šæä¾›ä¸¤ä¸ªå‚æ•°ï¼Œç¬¬ä¸€ä¸ªå‚æ•°æ˜¯è¦åˆ—ä¸¾çš„ç›®å½•ï¼Œç¬¬äºŒä¸ªå‚æ•°æ˜¯è¦è¿‡æ»¤çš„æ–‡ä»¶æ‰©å±•åã€‚ä½ éœ€è¦åœ¨ç»ˆç«¯ä¸­æ‰“å°å‡ºè¿‡æ»¤å‡ºæ¥çš„æ–‡ä»¶åˆ—è¡¨ï¼ˆä¸€ä¸ªæ–‡ä»¶ä¸€è¡Œï¼‰ã€‚æ­¤å¤–ï¼Œä½ å¿…é¡»ä½¿ç”¨å¼‚æ­¥ I/Oã€‚ ä½ å¾—ç¼–å†™ä¸€ä¸ªæ¨¡å— æ–‡ä»¶å»åšå¤§éƒ¨åˆ†çš„äº‹æƒ…ã€‚è¿™ä¸ªæ¨¡å—å¿…é¡»å¯¼å‡ºï¼ˆexportï¼‰ä¸€ä¸ªå‡½æ•°ï¼Œè¿™ä¸ªå‡½æ•°å°†æ¥æ”¶ä¸‰ä¸ªå‚æ•°ï¼šç›®å½•åã€æ–‡ä»¶æ‰©å±•åã€å›è°ƒå‡½æ•°ï¼Œå¹¶æŒ‰æ­¤é¡ºåºä¼ é€’ã€‚æ–‡ä»¶æ‰©å±•åå¿…é¡»å’Œä¼ é€’ç»™ä½ çš„ç¨‹åºçš„æ‰©å±•åå­—ç¬¦ä¸²ä¸€æ¨¡ä¸€æ ·ã€‚ä¹Ÿå°±æ˜¯è¯´ï¼Œè¯·ä¸è¦æŠŠå®ƒè½¬æˆæ­£åˆ™è¡¨è¾¾å¼æˆ–è€…åŠ ä¸Š â€œ.â€ å‰ç¼€æˆ–è€…åšå…¶ä»–çš„å¤„ç†ï¼Œè€Œæ˜¯ç›´æ¥ä¼ åˆ°ä½ çš„æ¨¡å—ä¸­å»ï¼Œåœ¨æ¨¡å—ä¸­ï¼Œä½ å¯ä»¥åšä¸€äº›å¤„ç†æ¥ä½¿ä½ çš„è¿‡æ»¤å™¨èƒ½æ­£å¸¸å·¥ä½œã€‚ è¿™ä¸ªå›è°ƒå‡½æ•°å¿…é¡»ä»¥ Node ç¼–ç¨‹ä¸­æƒ¯ç”¨çš„çº¦å®šå½¢å¼ï¼ˆerr, dataï¼‰å»è°ƒç”¨ã€‚è¿™ä¸ªçº¦å®šæŒ‡æ˜äº†ï¼Œé™¤éå‘ç”Ÿäº†é”™è¯¯ï¼Œå¦åˆ™æ‰€ä¼ è¿›å»ç»™å›è°ƒå‡½æ•°çš„ç¬¬ä¸€ä¸ªå‚æ•°å°†ä¼šæ˜¯ nullï¼Œç¬¬äºŒä¸ªå‚æ•°æ‰ä¼šæ˜¯ä½ çš„æ•°æ®ã€‚åœ¨æœ¬é¢˜ä¸­ï¼Œè¿™ä¸ªæ•°æ®å°†ä¼šæ˜¯ä½ è¿‡æ»¤å‡ºæ¥çš„æ–‡ä»¶åˆ—è¡¨ï¼Œå¹¶ä¸”æ˜¯ä»¥æ•°ç»„çš„å½¢å¼ã€‚å¦‚æœä½ æ¥æ”¶åˆ°äº†ä¸€ä¸ªé”™è¯¯ï¼Œå¦‚ï¼šæ¥è‡ª fs.readdir() çš„é”™è¯¯ï¼Œåˆ™å¿…é¡»å°†è¿™ä¸ªé”™è¯¯ä½œä¸ºç¬¬ä¸€ä¸ªï¼Œä¹Ÿæ˜¯å”¯ä¸€çš„å‚æ•°ä¼ é€’ç»™å›è°ƒå‡½æ•°ï¼Œå¹¶æ‰§è¡Œå›è°ƒå‡½æ•°ã€‚ ä½ ç»å¯¹ä¸èƒ½ç›´æ¥åœ¨ä½ çš„æ¨¡å—æ–‡ä»¶ä¸­æŠŠç»“æœæ‰“å°åˆ°ç»ˆç«¯ä¸­ï¼Œä½ åªèƒ½åœ¨ä½ çš„åŸå§‹ç¨‹åºæ–‡ä»¶ä¸­ç¼–å†™æ‰“å°ç»“æœçš„ä»£ç ã€‚ å½“ä½ çš„ç¨‹åºæ¥æ”¶åˆ°ä¸€äº›é”™è¯¯çš„æ—¶å€™ï¼Œè¯·ç®€å•çš„æ•è·å®ƒä»¬ï¼Œå¹¶ä¸”åœ¨ç»ˆç«¯ä¸­æ‰“å°å‡ºç›¸å…³çš„ä¿¡æ¯ è¿™é‡Œæœ‰å››åˆ™è§„å®šï¼Œä½ çš„æ¨¡å—å¿…é¡»éµå®ˆï¼š å¯¼å‡ºä¸€ä¸ªå‡½æ•°ï¼Œè¿™ä¸ªå‡½æ•°èƒ½å‡†ç¡®æ¥æ”¶ä¸Šè¿°çš„å‚æ•°ã€‚ å½“æœ‰é”™è¯¯å‘ç”Ÿï¼Œæˆ–è€…æœ‰æ•°æ®çš„æ—¶å€™ï¼Œå‡†ç¡®è°ƒç”¨å›è°ƒå‡½æ•°ã€‚ ä¸è¦æ”¹å˜å…¶ä»–çš„ä»»ä½•ä¸œè¥¿ï¼Œæ¯”å¦‚å…¨å±€å˜é‡æˆ–è€… stdoutã€‚ å¤„ç†æ‰€æœ‰å¯èƒ½å‘ç”Ÿçš„é”™è¯¯ï¼Œå¹¶æŠŠå®ƒä»¬ä¼ é€’ç»™å›è°ƒå‡½æ•°ã€‚ éµå¾ªä¸€äº›çº¦å®šçš„å¥½å¤„æ˜¯ï¼Œä½ çš„æ¨¡å—å¯ä»¥è¢«ä»»ä½•å…¶ä»–ä¹Ÿéµå®ˆè¿™äº›çº¦å®šçš„äººæ‰€ä½¿ç”¨ã€‚å› æ­¤ï¼Œè¿™é‡Œä½ æ–°å»ºçš„æ¨¡å—å¯ä»¥è¢«å…¶ä»– learnyounode çš„å­¦ä¹ è€…ä½¿ç”¨ï¼Œæˆ–è€…æ‹¿å»éªŒè¯ï¼Œéƒ½ä¼šå·¥ä½œå¾—å¾ˆå¥½ã€‚ é¦–å…ˆæ˜¯æˆ‘ä»¬çš„æ¨¡å—æ–‡ä»¶ï¼Œå¯ä»¥ä»ä¸Šä¸€é¢˜æ”¹é€ è¿‡æ¥,å¹¶å‘½åä¸º â€˜program-6-require.jsâ€™ ã€‚å®ƒè¦åšçš„äº‹æƒ…å°±æ˜¯è¿”å›ä¸€ä¸ªè¿‡æ»¤åçš„æ–‡ä»¶åçš„æ•°ç»„ã€‚ var fs = require(&apos;fs&apos;); module.exports = function(path, extname, callback) { fs.readdir(path, function(err, list) { if (err) { return callback(err, null); } else { list = list.filter(function(file) { return file.split(&apos;.&apos;)[1] === extname; }); } callback(null, list); }); }; ç„¶ååœ¨ç¨‹åºæ–‡ä»¶ä¸­è°ƒç”¨è¿™ä¸ªæ¨¡å—ï¼Œå°†æ¨¡å—ä¸­è¿”å›æ•°ç»„çš„å†…å®¹æ‰“å°å‡ºæ¥å°±å¯ä»¥äº†ã€‚ var mymodule = require(&apos;./program-6-require&apos;); var path = process.argv[2]; var extname = process.argv[3]; mymodule(path,extname,function(err,files){ if(err){ return console.log(err); } files.forEach(function(file){ console.log(file); }); }); HTTP CLIENT ç¼–å†™ä¸€ä¸ªç¨‹åºæ¥å‘èµ·ä¸€ä¸ª HTTP GET è¯·æ±‚ï¼Œæ‰€è¯·æ±‚çš„ URL ä¸ºå‘½ä»¤è¡Œå‚æ•°çš„ç¬¬ä¸€ä¸ªã€‚ç„¶åå°† æ¯ä¸€ä¸ª â€œdataâ€ äº‹ä»¶æ‰€å¾—çš„æ•°æ®ï¼Œä»¥å­—ç¬¦ä¸²å½¢å¼åœ¨ç»ˆç«¯ï¼ˆæ ‡å‡†è¾“å‡º stdoutï¼‰çš„æ–°çš„ä¸€è¡Œæ‰“å°å‡ºæ¥ã€‚ å®Œæˆè¿™ä¸ªç»ƒä¹ ï¼Œä½ éœ€è¦ä½¿ç”¨ Node.js æ ¸å¿ƒæ¨¡å—ä¹‹ä¸€ï¼šhttpã€‚ http.get() æ–¹æ³•æ˜¯ç”¨æ¥å‘èµ·ç®€å•çš„ GET è¯·æ±‚çš„å¿«æ·æ–¹å¼ï¼Œä½¿ç”¨è¿™ä¸ªæ–¹æ³•å¯ä»¥ä¸€å®šç¨‹åº¦ç®€åŒ– ä½ çš„ç¨‹åºã€‚http.get() çš„ç¬¬ä¸€ä¸ªå‚æ•°æ˜¯ä½ æƒ³è¦ GET çš„ URLï¼Œç¬¬äºŒä¸ªå‚æ•°åˆ™æ˜¯å›è°ƒå‡½æ•°ã€‚ ä¸å…¶ä»–çš„å›è°ƒå‡½æ•°ä¸åŒï¼Œè¿™ä¸ªå›è°ƒå‡½æ•°æœ‰å¦‚ä¸‹è¿™äº›ç‰¹å¾ï¼š function callback (response) { / â€¦ / } response å¯¹è±¡æ˜¯ä¸€ä¸ª Node çš„ Stream ç±»å‹çš„å¯¹è±¡ï¼Œä½ å¯ä»¥å°† Node Stream å½“åšä¸€ä¸ªä¼šè§¦ å‘ä¸€äº›äº‹ä»¶çš„å¯¹è±¡ï¼Œå…¶ä¸­æˆ‘ä»¬é€šå¸¸æ‰€éœ€è¦å…³å¿ƒçš„äº‹ä»¶æœ‰ä¸‰ä¸ªï¼š â€œdataâ€ï¼Œâ€errorâ€ ä»¥åŠ â€œend â€œã€‚ä½ å¯ä»¥åƒè¿™æ ·æ¥ç›‘å¬ä¸€ä¸ªäº‹ä»¶ï¼š response.on(â€œdataâ€, function (data) { / â€¦ / }) â€˜dataâ€™ äº‹ä»¶ä¼šåœ¨æ¯ä¸ªæ•°æ®å—åˆ°è¾¾å¹¶å·²ç»å¯ä»¥å¯¹å…¶è¿›è¡Œä¸€äº›å¤„ç†çš„æ—¶å€™è¢«è§¦å‘ã€‚æ•°æ®å—çš„å¤§ å°å°†å–å†³äºæ•°æ®æºã€‚ ä½ ä» http.get() æ‰€è·å¾—çš„ response å¯¹è±¡/Stream è¿˜æœ‰ä¸€ä¸ª setEncoding() çš„æ–¹æ³•ã€‚å¦‚ æœä½ è°ƒç”¨è¿™ä¸ªæ–¹æ³•ï¼Œå¹¶ä¸ºå…¶æŒ‡å®šå‚æ•°ä¸º utf8ï¼Œé‚£ä¹ˆ data äº‹ä»¶ä¸­ä¼šä¼ é€’å­—ç¬¦ä¸²ï¼Œè€Œä¸æ˜¯æ ‡ å‡†çš„ Node Buffer å¯¹è±¡ï¼Œè¿™æ ·ï¼Œä½ ä¹Ÿä¸ç”¨å†æ‰‹åŠ¨å°† Buffer å¯¹è±¡è½¬æ¢æˆå­—ç¬¦ä¸²äº†ã€‚ æœ‰äº†ä¸Šé¢é‚£äº›æç¤ºï¼Œå®ç°èµ·æ¥è¿˜æ˜¯å¾ˆå®¹æ˜“çš„ã€‚ var http = require(&apos;http&apos;); http.get(process.argv[2],function(response){ response.setEncoding(&apos;utf8&apos;); response.on(&quot;data&quot;,function(data){ console.log(data); }); response.on(&quot;error&quot;,function(err){ throw err; }); response.on(&quot;end&quot;,function(){ // console.log(date); }); }); HTTP COLLECT ç¼–å†™ä¸€ä¸ªç¨‹åºï¼Œå‘èµ·ä¸€ä¸ª HTTP GET è¯·æ±‚ï¼Œè¯·æ±‚çš„ URL ä¸ºæ‰€æä¾›ç»™ä½ çš„å‘½ä»¤è¡Œå‚æ•°çš„ç¬¬ä¸€ä¸ªã€‚æ”¶é›†æ‰€æœ‰æœåŠ¡å™¨æ‰€è¿”å›çš„æ•°æ®ï¼ˆä¸ä»…ä»…åŒ…æ‹¬ â€œdataâ€ äº‹ä»¶ï¼‰ç„¶ååœ¨ç»ˆç«¯ï¼ˆæ ‡å‡†è¾“å‡º stdoutï¼‰ç”¨ä¸¤è¡Œæ‰“å°å‡ºæ¥ã€‚ ä½ æ‰€æ‰“å°çš„å†…å®¹ï¼Œç¬¬ä¸€è¡Œåº”è¯¥æ˜¯ä¸€ä¸ªæ•´æ•°ï¼Œç”¨æ¥è¡¨ç¤ºä½ æ‰€æ”¶åˆ°çš„å­—ç¬¦ä¸²å†…å®¹é•¿åº¦ï¼Œç¬¬äºŒè¡Œåˆ™æ˜¯æœåŠ¡å™¨è¿”å›ç»™ä½ çš„å®Œæ•´çš„å­—ç¬¦ä¸²ç»“æœã€‚ æˆ‘ä»¬è¦åšçš„å°±æ˜¯å…ˆæŠŠæ‰€æœ‰çš„æ•°æ®éƒ½æ”¶é›†èµ·æ¥ï¼Œç„¶ååœ¨è¯·æ±‚ç»“æŸåæŠŠä»–ä»¬å‡­å€Ÿèµ·æ¥å°±å¯ä»¥äº†ã€‚ var http = require(&apos;http&apos;); var url = process.argv[2]; http.get(url,function(response){ var list = []; // response.setEncoding(&apos;utf8&apos;); response.on(&quot;data&quot;,function(data){ list.push(data.toString()); }); response.on(&quot;error&quot;,function(err){ throw err; }); response.on(&quot;end&quot;,function(){ var str = &apos;&apos;; list.forEach(function(s){ str += s; }); console.log(str.length); console.log(str); }); }); JUGGLING ASYNC è¿™æ¬¡çš„é—®é¢˜å’Œä¹‹å‰çš„é—®é¢˜ï¼ˆHTTP æ”¶é›†å™¨ï¼‰å¾ˆåƒï¼Œä¹Ÿæ˜¯éœ€è¦ä½¿ç”¨åˆ° http.get() æ–¹æ³•ã€‚ç„¶è€Œï¼Œè¿™ä¸€æ¬¡ï¼Œå°†æœ‰ä¸‰ä¸ª URL ä½œä¸ºå‰ä¸‰ä¸ªå‘½ä»¤è¡Œå‚æ•°æä¾›ç»™ä½ ã€‚ ä½ éœ€è¦æ”¶é›†æ¯ä¸€ä¸ª URL æ‰€è¿”å›çš„å®Œæ•´å†…å®¹ï¼Œç„¶åå°†å®ƒä»¬åœ¨ç»ˆç«¯ï¼ˆæ ‡å‡†è¾“å‡º stdoutï¼‰æ‰“å°å‡ºæ¥ã€‚è¿™æ¬¡ä½ ä¸éœ€è¦æ‰“å°å‡ºè¿™äº›å†…å®¹çš„é•¿åº¦ï¼Œä»…ä»…æ˜¯å†…å®¹æœ¬èº«å³å¯ï¼ˆå­—ç¬¦ä¸²å½¢å¼ï¼‰ï¼›æ¯ä¸ª URL å¯¹åº”çš„å†…å®¹ä¸ºä¸€è¡Œã€‚é‡ç‚¹æ˜¯ä½ å¿…é¡»æŒ‰ç…§è¿™äº› URL åœ¨å‚æ•°åˆ—è¡¨ä¸­çš„é¡ºåºå°†ç›¸åº”çš„å†…å®¹æ’åˆ—æ‰“å°å‡ºæ¥æ‰ç®—å®Œæˆã€‚ è¿™é‡Œæœ‰å‡ ä¸ªé—®é¢˜ï¼š 1 è¦æ”¶é›†æ¯ä¸ª url è¿”å›çš„å®Œæ•´å†…å®¹ 2 åˆ¤æ–­æ˜¯å¦æ‰€æœ‰è¯·æ±‚å®Œæˆ 3 æŒ‰ url é¡ºåºæ‰“å°å‡ºæ‰€è·å¾—å†…å®¹ ç¬¬ä¸€ä¸ªé—®é¢˜è¿™ä¸ªå¾ˆç®€å•ï¼Œå’Œå‰é¢çš„é¢˜ä¸€æ ·ã€‚ ç¬¬äºŒä¸ªé—®é¢˜è¦åˆ¤æ–­æ‰€æœ‰è¯·æ±‚æ˜¯å¦éƒ½å®Œæˆäº†ï¼Œæˆ‘ä»¬éœ€è¦ä¸€ä¸ªåˆ—è¡¨æ¥å­˜æ”¾å‘çš„çŠ¶æ€ï¼Œå¦‚æœå®ƒçš„è¯·æ±‚å®Œæˆäº†ï¼Œå°±ç»™ä»–æ ‡æ³¨å‡ºæ¥ã€‚ ç¬¬ä¸‰ä¸ªé—®é¢˜è¦æŒ‰ç…§ url çš„é¡ºåºæ‰“å°å‡ºå†…å®¹ï¼Œé‚£ä¹ˆæˆ‘ä»¬åœ¨ä¿å­˜æ•°æ®çš„æ—¶å€™å°±è¦è®°å½•ä¸‹å®ƒçš„ index ï¼Œæœ€åæŒ‰ç…§è¿™ä¸ª index æ‰“å°å°±å¯ä»¥äº†ã€‚ var http = require(&apos;http&apos;); var urls = process.argv.slice(2,process.argv.length); var datas = []; var end = []; var is = false; urls.forEach(function(url,index){ http.get(url,function(response){ var list = []; response.setEncoding(&apos;utf8&apos;); response.on(&quot;data&quot;,function(data){ list.push(data); }); response.on(&quot;error&quot;,function(err){ throw err; }); response.on(&quot;end&quot;,function(){ var str = &apos;&apos;; list.forEach(function(s){ str += s; }); datas[index] = str; end.push(true); if (isEnd()) { for (var i = 0; i &lt; datas.length; i++) { console.log(datas[i]); } } }); }); }); function isEnd(){ if (end.length === urls.length) { end.forEach(function(blo){ if(blo){ is = true; }else{ is = false; } }); } return is; } è¿™é“é¢˜ï¼Œæˆ‘çš„æ–¹æ³•ç•¥æ˜¾ç¹çã€‚ä¸‹é¢é™„ä¸Šå®˜æ–¹ç­”æ¡ˆï¼Œä»¥å¹¶å‚è€ƒã€‚ var http = require(&apos;http&apos;) var bl = require(&apos;bl&apos;) var results = [] var count = 0 function printResults () { for (var i = 0; i &lt; 3; i++) console.log(results[i]) } function httpGet (index) { http.get(process.argv[2 + index], function (response) { response.pipe(bl(function (err, data) { if (err) return console.error(err) results[index] = data.toString() count++ if (count == 3) printResults() })) }) } for (var i = 0; i &lt; 3; i++) httpGet(i) TIME SERVER ç¼–å†™ä¸€ä¸ª TCP æ—¶é—´æœåŠ¡å™¨ ä½ çš„æœåŠ¡å™¨åº”å½“ç›‘å¬ä¸€ä¸ªç«¯å£ï¼Œä»¥è·å–ä¸€äº› TCP è¿æ¥ï¼Œè¿™ä¸ªç«¯å£ä¼šç»ç”±ç¬¬ä¸€ä¸ªå‘½ä»¤è¡Œå‚æ•°ä¼ é€’ç»™ä½ çš„ç¨‹åºã€‚é’ˆå¯¹æ¯ä¸€ä¸ª TCP è¿æ¥ï¼Œä½ éƒ½å¿…é¡»å†™å…¥å½“å‰çš„æ—¥æœŸå’Œ24å°æ—¶åˆ¶çš„æ—¶é—´ï¼Œå¦‚ä¸‹æ ¼å¼ï¼š â€œYYYY-MM-DD hh:mmâ€ ç„¶åç´§æ¥ç€æ˜¯ä¸€ä¸ªæ¢è¡Œç¬¦ã€‚ æœˆä»½ã€æ—¥ã€å°æ—¶å’Œåˆ†é’Ÿå¿…é¡»ç”¨é›¶å¡«å……æˆä¸ºå›ºå®šçš„ä¸¤ä½æ•°ï¼š â€œ2013-07-06 17:42â€ å®˜æ–¹çš„æç¤ºï¼š è¿™æ¬¡ç»ƒä¹ ä¸­ï¼Œæˆ‘ä»¬å°†ä¼šåˆ›å»ºä¸€ä¸ª TCP æœåŠ¡å™¨ã€‚è¿™é‡Œå°†ä¸ä¼šæ¶‰åŠåˆ°ä»»ä½• HTTP çš„äº‹æƒ…ï¼Œå› æ­¤æˆ‘ä»¬åªéœ€ä½¿ç”¨ net è¿™ä¸ª Node æ ¸å¿ƒæ¨¡å—å°±å¯ä»¥äº†ã€‚å®ƒåŒ…å«äº†æ‰€æœ‰çš„åŸºç¡€ç½‘ç»œåŠŸèƒ½ã€‚ net æ¨¡å—æ‹¥æœ‰ä¸€ä¸ªåå« net.createServer() çš„æ–¹æ³•ï¼Œå®ƒä¼šæ¥æ”¶ä¸€ä¸ªå›è°ƒå‡½æ•°ã€‚å’Œ Node ä¸­å…¶ä»–çš„å›è°ƒå‡½æ•°ä¸åŒï¼ŒcreateServer() æ‰€ç”¨çš„å›è°ƒå‡½æ•°å°†ä¼šè¢«è°ƒç”¨å¤šæ¬¡ã€‚ä½ çš„æœåŠ¡å™¨æ¯æ”¶åˆ°ä¸€ä¸ª TCP è¿æ¥ï¼Œéƒ½ä¼šè°ƒç”¨ä¸€æ¬¡è¿™ä¸ªå›è°ƒå‡½æ•°ã€‚è¿™ä¸ªå›è°ƒå‡½æ•°æœ‰å¦‚ä¸‹ç‰¹å¾ï¼š function callback (socket) { / â€¦ / } net.createServer() ä¹Ÿä¼šè¿”å›ä¸€ä¸ª TCP æœåŠ¡å™¨çš„å®ä¾‹ï¼Œä½ å¿…é¡»è°ƒç”¨ server.listen(portNumber) æ¥è®©ä½ çš„æœåŠ¡å™¨å¼€å§‹ç›‘å¬ä¸€ä¸ªç‰¹å®šçš„ç«¯å£ã€‚ ä¸€ä¸ªå…¸å‹çš„ Node TCP æœåŠ¡å™¨å°†ä¼šå¦‚ä¸‹æ‰€ç¤ºï¼š var net = require(â€˜netâ€™) var server = net.createServer(function (socket) { // socket å¤„ç†é€»è¾‘ }) server.listen(8000) è®°ä½ï¼Œè¯·ä¸€å®šç›‘å¬ç”±ç¬¬ä¸€ä¸ªå‘½ä»¤è¡Œå‚æ•°æŒ‡å®šçš„ç«¯å£ã€‚ socket å¯¹è±¡åŒ…å«äº†å¾ˆå¤šå…³äºå„ä¸ªè¿æ¥çš„ä¿¡æ¯ï¼ˆmeta-dataï¼‰ï¼Œä½†æ˜¯å®ƒä¹ŸåŒæ—¶æ˜¯ä¸€ä¸ª Node åŒå·¥æµï¼ˆduplex Streamï¼‰ï¼Œæ‰€ä»¥ï¼Œå®ƒå³å¯ä»¥è¯»ï¼Œä¹Ÿå¯ä»¥å†™ã€‚å¯¹è¿™ä¸ªç»ƒä¹ æ¥è¯´ï¼Œæˆ‘ä»¬åªéœ€è¦å¯¹socket å†™æ•°æ®å’Œå…³é—­å®ƒå°±å¯ä»¥äº†ã€‚ ä½¿ç”¨ socket.write(data) å¯ä»¥å†™æ•°æ®åˆ° socket ä¸­ï¼Œç”¨ socket.end() å¯ä»¥å…³é—­ä¸€ä¸ª socketã€‚å¦å¤–ï¼Œ .end() æ–¹æ³•ä¹Ÿå¯ä»¥æ¥æ”¶ä¸€ä¸ªæ•°æ®å¯¹è±¡ä½œä¸ºå‚æ•°ï¼Œå› æ­¤ï¼Œä½ å¯ç®€å•åœ°ä½¿ç”¨ socket.end(data) æ¥å®Œæˆå†™æ•°æ®å’Œå…³é—­ä¸¤ä¸ªæ“ä½œã€‚ æœ‰äº†å®˜æ–¹æç¤ºï¼Œä¸€åˆ‡éƒ½å¾ˆç®€å•äº†ã€‚ var net = require(&apos;net&apos;); var port = process.argv[2]; var getTime = function(){ var date = new Date(), year = date.getFullYear(), month = formate(date.getMonth()+1), day = formate(date.getDate()), hour = formate(date.getHours()), minute = formate(date.getMinutes()); var time = year + &quot;-&quot;+month+&quot;-&quot;+day+&quot; &quot;+hour+&quot;:&quot;+minute; function formate(time){ return (time.toString().length&gt;1?&apos;&apos;:&apos;0&apos;)+time; } return time; }; var server = net.createServer(function(socket){ socket.write(getTime()+&apos;\n&apos;); socket.end(); }); server.listen(port); HTTP FILE SERVER ç¼–å†™ä¸€ä¸ª HTTP æ–‡ä»¶ æœåŠ¡å™¨ï¼Œå®ƒç”¨äºå°†æ¯æ¬¡æ‰€è¯·æ±‚çš„æ–‡ä»¶è¿”å›ç»™å®¢æˆ·ç«¯ã€‚ ä½ çš„æœåŠ¡å™¨éœ€è¦ç›‘å¬æ‰€æä¾›ç»™ä½ çš„ç¬¬ä¸€ä¸ªå‘½ä»¤è¡Œå‚æ•°æ‰€åˆ¶å®šçš„ç«¯å£ã€‚ åŒæ—¶ï¼Œç¬¬äºŒä¸ªä¼šæä¾›ç»™ä½ çš„ç¨‹åºçš„å‚æ•°åˆ™æ˜¯æ‰€éœ€è¦å“åº”çš„æ–‡æœ¬æ–‡ä»¶çš„ä½ç½®ã€‚åœ¨è¿™ä¸€é¢˜ä¸­ï¼Œä½ å¿…é¡»ä½¿ç”¨ fs.createReadStream() æ–¹æ³•ä»¥ stream çš„å½¢å¼ä½œå‡ºè¯·æ±‚ç›¸åº”ã€‚ è¿™é‡Œéœ€è¦ç”¨åˆ° http çš„ http.createServer() æ–¹æ³•ï¼Œå’Œå‰é¢çš„ net ç±»ä¼¼ï¼Œä¸åŒçš„æ˜¯å®ƒä½¿ç”¨ HTTP åè®®è¿›è¡Œé€šè®¯ã€‚è¿˜æœ‰ä¸‹é¢è¿™ä¸ªfsçš„æ–¹æ³•ã€‚ fs è¿™ä¸ªæ ¸å¿ƒæ¨¡å—ä¹Ÿå«æœ‰ä¸€äº›ç”¨æ¥å¤„ç†æ–‡ä»¶çš„æµå¼ï¼ˆstreamï¼‰ APIã€‚ä½ å¯ä»¥ä½¿ç”¨ fs.createReadStream() æ–¹æ³•æ¥ä¸ºå‘½ä»¤è¡Œå‚æ•°æŒ‡å®šçš„æ–‡ä»¶åˆ›å»ºä¸€ä¸ª streamã€‚è¿™ä¸ªæ–¹æ³•ä¼šè¿”å›ä¸€ä¸ª stream å¯¹è±¡ï¼Œè¯¥å¯¹è±¡å¯ä»¥ä½¿ç”¨ç±»ä¼¼ src.pipe(dst) çš„è¯­æ³•æŠŠæ•°æ®ä» srcæµä¼ è¾“(pipe) åˆ° dstæµä¸­ã€‚é€šè¿‡è¿™ç§å½¢å¼ï¼Œä½ å¯ä»¥è½»æ¾åœ°æŠŠä¸€ä¸ªæ–‡ä»¶ç³»ç»Ÿçš„ stream å’Œä¸€ä¸ª HTTP å“åº”çš„ stream è¿æ¥èµ·æ¥ã€‚ var fs = require(&apos;fs&apos;), http = require(&apos;http&apos;); var port = process.argv[2], path = process.argv[3]; var fileStream = fs.createReadStream(path); var server = http.createServer(function(req,res){ res.writeHead(200,{&apos;content-type&apos;:&apos;text/plain&apos;}); fileStream.pipe(res); }); server.listen(port); HTTP UPPERCASERER ç¼–å†™ä¸€ä¸ª HTTP æœåŠ¡å™¨ï¼Œå®ƒåªæ¥å— POST å½¢å¼çš„è¯·æ±‚ï¼Œå¹¶ä¸”å°† POST è¯·æ±‚ä¸»ä½“ï¼ˆbodyï¼‰æ‰€å¸¦çš„å­—ç¬¦è½¬æ¢æˆå¤§å†™å½¢å¼ï¼Œç„¶åè¿”å›ç»™å®¢æˆ·ç«¯ã€‚ ä½ çš„æœåŠ¡å™¨éœ€è¦ç›‘å¬ç”±ç¬¬ä¸€ä¸ªå‘½ä»¤è¡Œå‚æ•°æ‰€æŒ‡å®šçš„ç«¯å£ã€‚ è¿™é‡Œåªè¦çŸ¥é“ toUpperCase() è¿™ä¸ªæ–¹æ³•å°±å¯ä»¥äº†ã€‚ var http = require(&apos;http&apos;); var port = process.argv[2]; var server = http.createServer(function(req,res){ var post = &apos;&apos;; // console.log(req.method); if (req.method !== &quot;POST&quot;) { return res.end(&quot;The method must be POST&quot;); } res.writeHead(200,{&apos;content-type&apos;:&apos;text/plain&apos;}); req.on(&apos;data&apos;,function(data){ post += data; }); req.on(&apos;end&apos;,function(){ res.end(post.toString().toUpperCase()); }); }); server.listen(port); HTTP JSON API SERVER ç¼–å†™ä¸€ä¸ª HTTP æœåŠ¡å™¨ï¼Œæ¯å½“æ¥æ”¶åˆ°ä¸€ä¸ªè·¯å¾„ä¸º â€˜/api/parsetimeâ€™ çš„ GET è¯·æ±‚çš„æ—¶å€™ï¼Œå“åº”ä¸€äº› JSON æ•°æ®ã€‚æˆ‘ä»¬æœŸæœ›è¯·æ±‚ä¼šåŒ…å«ä¸€ä¸ªæŸ¥è¯¢å‚æ•°ï¼ˆquery stringï¼‰ï¼Œkey æ˜¯ â€œisoâ€ï¼Œå€¼æ˜¯ ISO æ ¼å¼çš„æ—¶é—´ã€‚ å¦‚: /api/parsetime?iso=2013-08-10T12:10:15.474Z æ‰€å“åº”çš„ JSON åº”è¯¥åªåŒ…å«ä¸‰ä¸ªå±æ€§ï¼šâ€™hourâ€™ï¼Œâ€™minuteâ€™ å’Œ â€˜secondâ€™ã€‚ä¾‹å¦‚ï¼š { â€œhourâ€: 14, â€œminuteâ€: 23, â€œsecondâ€: 15 } ç„¶åå¢å†åŠ ä¸€ä¸ªæ¥å£ï¼Œè·¯å¾„ä¸º â€˜/api/unixtimeâ€™ï¼Œå®ƒå¯ä»¥æ¥æ”¶ç›¸åŒçš„æŸ¥è¯¢å‚æ•°ï¼ˆquery stringï¼‰ï¼Œä½†æ˜¯å®ƒçš„è¿”å›ä¼šåŒ…å«ä¸€ä¸ªå±æ€§ï¼šâ€™unixtimeâ€™ï¼Œç›¸åº”å€¼æ˜¯ä¸€ä¸ª UNIX æ—¶é—´æˆ³ã€‚ä¾‹å¦‚: { â€œunixtimeâ€: 1376136615474 } ä½ çš„æœåŠ¡å™¨éœ€è¦ç›‘å¬ç¬¬ä¸€ä¸ªå‘½ä»¤è¡Œå‚æ•°æ‰€æŒ‡å®šçš„ç«¯å£ã€‚ é¦–å…ˆæˆ‘ä»¬è¦æœ‰ä¿©ä¸ªæ–¹æ³•æ¥åˆ†åˆ«å°†æ—¶é—´è½¬æ¢ä¸ºç›¸åº”æ ¼å¼çš„ JSON æ–‡ä»¶ã€‚ç„¶åæˆ‘ä»¬éœ€è¦ç”¨åˆ° url è¿™ä¸ªæ¨¡å—ï¼Œå¯ä»¥ç”¨å®ƒæ¥è§£æè¯·æ±‚ã€‚ var http = require(&apos;http&apos;), url = require(&apos;url&apos;); var port = process.argv[2]; var parseTime = function(time){ return{ &quot;hour&quot;: time.getHours(), &quot;minute&quot;: time.getMinutes(), &quot;second&quot;: time.getSeconds() }; }; var getUnixTime = function(time){ return{ &quot;unixtime&quot;: time.getTime() }; }; var server = http.createServer(function(req,res){ // console.log(url.parse(req.url,true)); var queryString = url.parse(req.url,true).query, time = new Date(queryString.iso), pathname = url.parse(req.url,true).pathname, result; if (req.method != &quot;GET&quot;) { res.end(&apos;Method must be GET&apos;); } if (pathname === &apos;/api/parsetime&apos;) { result = parseTime(time); }else if(pathname === &apos;/api/unixtime&apos;){ result = getUnixTime(time); } if (result) { res.writeHead(200,{&apos;Content-Type&apos;:&apos;application/json&apos;}); res.end(JSON.stringify(result)); }else{ res.writeHead(404); res.end(&apos;404,not found&apos;); } }); server.listen(Number(port)); æœ€åå› ä¸ºæˆ‘ä¹Ÿæ˜¯ç¬¬ä¸€æ¬¡æ¥è§¦ï¼Œæ‰€ä»¥å¯¹ä»£ç æœ‰é—®é¢˜çš„ã€‚æ¬¢è¿ä¸æˆ‘è®¨è®ºï¼Œäº’ç›¸å­¦ä¹ ã€‚ ä»¥ä¸Šæ‰€æœ‰çš„ä»£ç éƒ½æ•´åˆæ”¾åœ¨è¿™é‡Œäº†;]]></content>
      <categories>
        <category>æŠ€æœ¯</category>
      </categories>
      <tags>
        <tag>JavaScript</tag>
        <tag>node</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[CSS3 å®ç°äººç‰©èµ›è·‘åŠ¨ç”»]]></title>
    <url>%2F2015%2F05%2F20%2Fincome-plan-animation%2F</url>
    <content type="text"><![CDATA[æœ€è¿‘å…¬å¸çš„ä¸€ä¸ªæ‰‹æœºé¡¹ç›®é‡Œé¢æœ‰ä¸€ä¸ªåŠ¨ç”»ï¼Œå°±æ˜¯ä¸€ä¸ªäººåœ¨è·‘é“ä¸Šè·‘æ­¥ã€‚ä¸ºäº†èƒ½åœ¨æ‰‹æœºç«¯å‘æŒ¥æ›´å¥½çš„æ€§èƒ½ï¼Œé€‰æ‹©äº†å…¨éƒ¨ç”¨CSS3æ¥åšä¸€ä¸ªåŠ¨ç”»ã€‚å› ä¸ºæ˜¯ç¬¬ä¸€æ¬¡åšï¼Œç¢°åˆ°äº†å¾ˆå¤šé—®é¢˜ï¼Œè®°å½•ä¸‹æ¥ã€‚æ•ˆæœå›¾æ˜¯è¿™æ ·çš„ï¼š åˆ†ææ‹¿åˆ°æ•ˆæœå›¾å…ˆåˆ†æä¸€ä¸‹ï¼Œå¯ä»¥çœ‹åˆ°åŠ¨ç”»åˆ†ä¸ºä¸€ä¸‹å››ä¸ªéƒ¨åˆ†ï¼š è·‘åŠ¨çš„å°äºº è¿åŠ¨çš„è·¯ å·¦è¾¹çš„è·¯ç‰Œ æ”¶ç›Šçš„ç‰Œå­ å°äººå°äººå¾ˆå¥½è§£å†³ï¼Œé€šè¿‡ä½¿ç”¨ä¸€å¼ è·‘æ­¥çš„åˆ†è§£å›¾ç‰‡ï¼Œç„¶åé€šè¿‡é€å¸§çš„å˜åŠ¨å®ƒçš„`background-positionâ€™å°±å¯ä»¥äº†ï¼ŒçœŸæ˜¯ç®€å•å•Šã€‚ .person { width: 62px; height: 110px; background: url(../imgs/plan/person1.png) -7px 0 no-repeat; background-size: auto 110px; animation: run .5s infinite; //è¦æ³¨æ„åŠ ä¸Šå„ç§æµè§ˆå™¨çš„å‰æˆ³ï¼Œå°¤å…¶æ˜¯-webkit-ï¼Œåœ¨è¿™æˆ‘å°±ä¸åŠ äº† position: absolute; top: 40%; left: 110*.84px; } @keyframes run { 0% { background-position: -7px 0 } 25% { background-position: -79px 0 } 50% { background-position: -150px 0 } 75% { background-position: -216px 0 } 100% { background-position: -283px 0 } } ç„¶è€Œå°äººå°±æˆè¿™æ ·äº†äº†ï¼Œç®€ç›´æƒ¨ä¸å¿ç¹ï¼Œåˆ†æåŸå› ï¼ŒåŸæ¥æ˜¯å› ä¸ºkeyframesé»˜è®¤æ˜¯æœ‰è¿‡æ¸¡çš„ã€‚ä¹Ÿå°±æ˜¯è¯´ï¼Œæˆ‘çš„background-positionæ˜¯ä»-7çº¿æ€§çš„æ¸å˜åˆ°-283ï¼Œè¿™å½“ç„¶ä¸æ˜¯æˆ‘æƒ³è¦çš„ç»“æœã€‚æƒ³åˆ°è¿™æ ·è¯¥æ˜¯åŠ¨ç”»æ—¶é—´å‡½æ•°çš„é—®é¢˜ï¼Œå°±å»æŸ¥animation-timing-funcitonçš„å–å€¼ï¼š linearï¼šçº¿æ€§è¿‡æ¸¡ã€‚ç­‰åŒäºè´å¡å°”æ›²çº¿(0.0, 0.0, 1.0, 1.0)easeï¼šå¹³æ»‘è¿‡æ¸¡ã€‚ç­‰åŒäºè´å¡å°”æ›²çº¿(0.25, 0.1, 0.25, 1.0)ease-inï¼šç”±æ…¢åˆ°å¿«ã€‚ç­‰åŒäºè´å¡å°”æ›²çº¿(0.42, 0, 1.0, 1.0)ease-outï¼šç”±å¿«åˆ°æ…¢ã€‚ç­‰åŒäºè´å¡å°”æ›²çº¿(0, 0, 0.58, 1.0)ease-in-outï¼šç”±æ…¢åˆ°å¿«å†åˆ°æ…¢ã€‚ç­‰åŒäºè´å¡å°”æ›²çº¿(0.42, 0, 0.58, 1.0)step-startï¼šç­‰åŒäº steps(1, start)step-endï¼šç­‰åŒäº steps(1, end)steps([, [ start | end ] ]?)ï¼šæ¥å—ä¸¤ä¸ªå‚æ•°çš„æ­¥è¿›å‡½æ•°ã€‚ç¬¬ä¸€ä¸ªå‚æ•°å¿…é¡»ä¸ºæ­£æ•´æ•°ï¼ŒæŒ‡å®šå‡½æ•°çš„æ­¥æ•°ã€‚ç¬¬äºŒä¸ªå‚æ•°å–å€¼å¯ä»¥æ˜¯startæˆ–endï¼ŒæŒ‡å®šæ¯ä¸€æ­¥çš„å€¼å‘ç”Ÿå˜åŒ–çš„æ—¶é—´ç‚¹ã€‚ç¬¬äºŒä¸ªå‚æ•°æ˜¯å¯é€‰çš„ï¼Œé»˜è®¤å€¼ä¸ºendã€‚cubic-bezier(, , , )ï¼šç‰¹å®šçš„è´å¡å°”æ›²çº¿ç±»å‹ï¼Œ4ä¸ªæ•°å€¼éœ€åœ¨[0, 1]åŒºé—´å†… stepè¿™ä¸ªå±æ€§å°±æ˜¯æˆ‘ä»¬æƒ³è¦çš„ï¼Œè®©ä»–ä»ä¸€ä¸ªçŠ¶æ€ç›´æ¥è·³åˆ°å¦ä¸ªçŠ¶æ€ï¼Œè€Œä¸æ˜¯è¿‡æ¸¡è¿‡å»ã€‚ç»™ä¸Šé¢çš„.personå†åŠ ä¸Šè¿™æ¡å±æ€§å°±å¯ä»¥äº† animation-timing-function: step-start; è¿™æ ·å°äººè·‘æ­¥å°±è§£å†³äº†ã€‚ è·¯è·¯ä¸€å¼€å§‹è¿˜æƒ³ä¸åˆ°å¥½çš„æ–¹æ³•ï¼Œæœ¬æ¥æƒ³çš„æ˜¯ç›´æ¥æˆªä¸€å¤§æ®µï¼Œå¼„ä¸¤å¼ å›¾ï¼Œç„¶åè®©ä¸¤å¼ å›¾äº¤æ›¿çš„å‡ºç°ã€‚ä½†æ˜¯è¿™æ ·å›¾ç‰‡ä¼šå¾ˆå¤§ï¼Œå³è€—è´¹ç½‘ç»œèµ„æºåˆæ„Ÿè§‰æ–¹æ³•å¾ˆç¬¨ã€‚çœ‹ç€è·‘é“åˆ†æäº†ä¸€ä¸‹ï¼Œæƒ³åˆ°äº†ä¸€ä¸ªå¥½æ–¹æ³•ã€‚é€šè¿‡æˆªå–è·‘é“çš„æœ€å°ç»„æˆéƒ¨åˆ†ï¼Œçºµå‘å¹³é“ºï¼Œç„¶åè®©ä»–çš„background-positionæ¯æ¬¡æŒªæ­¤å›¾é«˜åº¦çš„ä¸€åŠå°±å¯ä»¥äº†ã€‚è¿™æ ·è·‘é“ä¹Ÿè§£å†³äº†ã€‚ å·¦è¾¹çš„è·¯ç‰Œè¿™ä¸ªå¾ˆç®€å•ï¼Œç»™å¥¹è®¾ç½®ç»å¯¹å®šä½ï¼Œç„¶åæ›´æ”¹topå€¼å°±å¯ä»¥äº†ã€‚è¦æ³¨æ„çš„æ˜¯ï¼Œæœ€åä¸€å—ç‰Œå­è¦åœ¨åˆ°ä¸­é—´ååœåœ¨é‚£ï¼ŒåŠ ä¸Šè¿™ä¸ªå±æ€§å°±å¯ä»¥äº†ã€‚ animation-fill-mode: forwards; animation-fill-mode å±æ€§è§„å®šåŠ¨ç”»åœ¨æ’­æ”¾ä¹‹å‰æˆ–ä¹‹åï¼Œå…¶åŠ¨ç”»æ•ˆæœæ˜¯å¦å¯è§ã€‚å–å€¼noneï¼š ä¸æ”¹å˜é»˜è®¤è¡Œä¸ºã€‚forwardsï¼š å½“åŠ¨ç”»å®Œæˆåï¼Œä¿æŒæœ€åä¸€ä¸ªå±æ€§å€¼ï¼ˆåœ¨æœ€åä¸€ä¸ªå…³é”®å¸§ä¸­å®šä¹‰ï¼‰ã€‚backwardsï¼š åœ¨ animation-delay æ‰€æŒ‡å®šçš„ä¸€æ®µæ—¶é—´å†…ï¼Œåœ¨åŠ¨ç”»æ˜¾ç¤ºä¹‹å‰ï¼Œåº”ç”¨å¼€å§‹å±æ€§å€¼ï¼ˆåœ¨ç¬¬ä¸€ä¸ªå…³é”®å¸§ä¸­å®šä¹‰ï¼‰ã€‚bothï¼š å‘å‰å’Œå‘åå¡«å……æ¨¡å¼éƒ½è¢«åº”ç”¨ã€‚ æ”¶ç›Šçš„ç‰Œå­å’Œå·¦è¾¹çš„è·¯æ ‡ä¸€æ ·ï¼Œå¾ˆç®€å•ã€‚å°±æ˜¯å‡ºç°å’Œæ¶ˆå¤±è€Œå·²ã€‚ ç»„åˆå°†åŠ¨ç”»çš„å››ä¸ªéƒ¨åˆ†è§£å†³åï¼Œå‰©ä¸‹çš„å°±æ˜¯å°†ä»–ä»¬ç»„åˆèµ·æ¥äº†ã€‚ä¸Šå›¾æ˜¯ç¬¬ä¸€å—è·¯æ ‡ä»å±å¹•å‡ºç°åˆ°æ¶ˆå¤±è¿‡ç¨‹çš„æµç¨‹å›¾ï¼Œå…¶ä»–ä¸¤å—è·¯æ ‡çš„è¿‡ç¨‹åªéœ€è¦å°†åŠ¨ç”»å»¶è¿Ÿç›¸åº”çš„æ—¶é—´æ®µå°±å¯ä»¥äº†ã€‚è¿™ä¸­é—´è¿˜æœ‰ä¸€ä¸ªé—®é¢˜ï¼Œå°±æ˜¯è®©å°äººå’Œè·¯å®šç‚¹åœä¸‹æ¥ã€‚è¿™ä¸ªç”¨CSS3è²Œä¼¼å®ç°ä¸äº†ï¼Œäºæ˜¯é€€è€Œæ±‚å…¶æ¬¡ï¼Œé€‰æ‹©äº†ç”¨jsæ¥æ§åˆ¶ã€‚é€šè¿‡ç»™å®ƒçš„è®¾ç½®å±æ€§webkit-animation-play-state: pausedå’Œwebkit-animation-play-state: runningå°±å¯è®©å®ƒåœä¸‹æ¥åç»§ç»­åŠ¨äº†ã€‚æœ€åè¦åœ¨åŠ¨ç”»å®Œæˆåï¼Œå¼¹å‡ºä¸€ä¸ªå¼¹çª—ã€‚è¿™ä¸ªé€šè¿‡æ£€æµ‹animationEndäº‹ä»¶æ¥å®ç°,ä¸‹é¢æ˜¯å®ç°æ–¹æ³•ã€‚ /* From Modernizr */ function whichAnimationEvent(){ var t; var el = document.createElement(&apos;fakeelement&apos;); var animations = { &apos;animation&apos;:&apos;animationend&apos;, &apos;OAnimation&apos;:&apos;oAnimationEnd&apos;, &apos;MozAnimation&apos;:&apos;animationend&apos;, &apos;WebkitAnimation&apos;:&apos;webkitAnimationEnd&apos; } for(t in animations){ if( el.style[t] !== undefined ){ return animations[t]; } } } /* Listen for a transition! */ var transitionEvent = whichAnimationEvent(); whichAnimationEvent &amp;&amp; e.addEventListener(whichAnimationEvent, function() { //doSomething }); /* The &quot;whichTransitionEvent&quot; can be swapped for &quot;animation&quot; instead of &quot;transition&quot; texts, as can the usage :) */ æ•ˆæœè¿™æ˜¯æœ€åçš„å®Œæˆæ•ˆæœã€‚ç‚¹è¿™å„¿çœ‹åŠ¨ç”»]]></content>
      <categories>
        <category>æŠ€æœ¯</category>
      </categories>
      <tags>
        <tag>CSS3</tag>
        <tag>å¥”è·‘</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[jså‡½æ•°è¡¨è¾¾å¼å’Œå‡½æ•°å£°æ˜çš„åŒºåˆ«]]></title>
    <url>%2F2015%2F02%2F08%2FjsFunction-expression-declaration%2F</url>
    <content type="text"><![CDATA[JavaScriptä¸­çš„ä¸¤ç§å‡½æ•°å®šä¹‰æ–¹å¼ï¼š å‡½æ•°è¡¨è¾¾å¼ï¼švar foo = function(){ conlose.log(&apos;Message&apos;); }; å‡½æ•°å£°æ˜ï¼šfunction foo(){ console.log(&apos;Message&apos;); }; ä¸¤ç§æ–¹æ³•éƒ½å¯ä»¥å®šä¹‰ä¸€ä¸ªç›¸åŒçš„å‡½æ•°ï¼Œä½†æ˜¯å´æœ‰ä¸€äº›åŒºåˆ«ï¼š å‡½æ•°è¡¨è¾¾å¼ä¸­ï¼švar fooå’Œä¸€èˆ¬çš„varå®šä¹‰çš„å˜é‡ä¸€æ ·è¢«æåˆ°äº†å‡½æ•°æˆ–è„šæœ¬é¡¶éƒ¨ï¼Œä½†æ˜¯å‡½æ•°ä½“å´è¿˜æ˜¯åœ¨åŸæ¥çš„åœ°æ–¹ã€‚æ‰€ä»¥å¿…é¡»åœ¨å‡½æ•°ä½“åè°ƒç”¨å‡½æ•°ã€‚ var foo = function(){ console.log(&apos;Message&apos;); }; foo() // è¾“å‡ºç»“æœä¸º&apos;Message&apos; foo(); var foo = function(){ console.log(&apos;Message&apos;); }; // ä¼šæŠ¥é”™TypeError: Property &apos;test&apos; of object #&lt;Object&gt; is not a function ä¸Šé¢çš„ç¬¬äºŒæ®µä»£ç å…¶å®å’Œä¸‹é¢çš„æ˜¯ä¸€æ ·ï¼Œæ‰€ä»¥ä¼šæŠ¥é”™ var foo; foo(); var foo = function(){ console.log(&apos;Message&apos;); }; å‡½æ•°å£°æ˜ä¸­ï¼šfoo()å‡½æ•°çš„æ•´ä¸ªå‡½æ•°å—éƒ½è¢«æåˆ°äº†æ•´ä¸ªå‡½æ•°æˆ–è„šæœ¬çš„é¡¶éƒ¨ï¼Œåœ¨æ•´ä¸ªå‡½æ•°æˆ–è„šæœ¬ä¸­éƒ½æ˜¯å¯è§çš„ã€‚ä¹Ÿå°±æ˜¯è¯´å¯ä»¥åœ¨å‡½æ•°å®šä¹‰ä¹‹å‰è°ƒç”¨å‡½æ•°ã€‚ foo() function foo(){ console.log(&apos;Message&apos;) } //è¾“å‡ºç»“æœä¸º&apos;Message&apos; ä»¥ååœ¨å®é™…ä½¿ç”¨ä¸­ï¼Œè¦ç‰¹åˆ«æ³¨æ„ä¸¤è€…çš„åŒºåˆ«ã€‚]]></content>
      <categories>
        <category>æŠ€æœ¯</category>
      </categories>
      <tags>
        <tag>JavaScript</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[jQueryæ’ä»¶-changeBg]]></title>
    <url>%2F2015%2F02%2F07%2FjQuery-plugin-changeBg%2F</url>
    <content type="text"><![CDATA[æŠŠä¸Šç¯‡åšå®¢ä¸­å†™çš„jQueryé¢˜æ”¹è¿›äº†ä¸€ä¸‹ï¼Œåšæˆäº†ä¸€ä¸ªæ–°æ’ä»¶ChangeBgã€‚å¯ä»¥ç»™æŸæ ‡ç­¾ä¸‹çš„æ‰€æœ‰å¥‡æ•°è¡Œçš„å­å…ƒç´ (æ³¨æ„ï¼šæ˜¯å­å…ƒç´ ï¼Œè€Œéåä»£å…ƒç´ )è®¾ç½®èƒŒæ™¯é¢œè‰²ï¼ŒåŒæ—¶ç»™æ‰€æœ‰å­å…ƒç´ æ·»åŠ é¼ æ ‡ç§»å…¥ç§»å‡ºæ—¶æ›´æ”¹èƒŒæ™¯å’Œå­—ä½“é¢œè‰²çš„äº‹ä»¶ã€‚ è°ƒç”¨æ–¹æ³•ï¼š$(&#39;select&#39;).ChangeBg(bgCol, chBgCl, chCol);æˆ–ç›´æ¥$(&#39;select&#39;).ChangeBg();å‡½æ•°æœ‰ä¸‰ä¸ªå‚æ•°ï¼Œåˆ†åˆ«ä¸ºï¼š bgCol å¥‡æ•°è¡Œè¦è®¾ç½®çš„èƒŒæ™¯é¢œè‰²,é»˜è®¤ä¸º&#39;#EEE&#39; chBgCl é¼ æ ‡ç§»å…¥æ—¶èƒŒæ™¯é¢œè‰²ï¼Œé»˜è®¤ä¸º&#39;#0066CC&#39; chCol é¼ æ ‡ç§»å…¥æ—¶çš„å­—ä½“é¢œè‰²ï¼Œé»˜è®¤ä¸º&#39;#FFF&#39; ä¸‹è½½è¯·ç‚¹æˆ‘]]></content>
      <categories>
        <category>æŠ€æœ¯</category>
      </categories>
      <tags>
        <tag>JavaScript</tag>
        <tag>jQuery</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[å‰ç«¯é¢è¯•é¢˜(1)]]></title>
    <url>%2F2015%2F02%2F06%2FF2E-interview-question(1)%2F</url>
    <content type="text"><![CDATA[åœ¨ç¾¤é‡Œæœ‰äººåˆ†äº«äº†ä¸€å¥—è¯•é¢˜ï¼Œæ‹¿æ¥ç»ƒç»ƒæ‰‹ã€‚ 1ã€è¯·ç”¨HTML5æ ‡å‡†å®Œæˆä»¥ä¸‹å¸ƒå±€ HTML: &lt;header&gt;HEADER&lt;/header&gt; &lt;nav&gt;NAV&lt;/nav&gt; &lt;aside&gt;ASIDE&lt;/aside&gt; &lt;section&gt;SECTION&lt;/section&gt; &lt;footer&gt;FOOTER&lt;/footer&gt; CSS: body{ color: white; font-size: 14px; text-align: center; } header{ background-color: black; } nav{ background-color: gray; } aside{ width: 30%; height: 200px; float: left; background-color: red; } section{ width: 70%; height: 200px; margin-left: 30%; background-color: blue; } footer{ background-color: orange; } 2ã€ç›¸åº”æ¡†æ¶å¸ƒå±€cssç¼–å†™ï¼Œå®ç°ä»¥ä¸‹ä¸¤ç§æƒ…å†µå³å¯ã€‚ HTML: &lt;div class=&quot;box1&quot;&gt;1&lt;/div&gt; &lt;div class=&quot;box2&quot;&gt;2&lt;/div&gt; CSS: div{width: 600px;height: 50px} .box1{background-color: red;} .box2{background-color: blue;} @media screen and (min-width:1024px ) { div{ float: left; } } @media screen and (max-width: 1024px) { div{ float: none; } } 3ã€å®ç°ä¸€è¡Œæ•°æ®ä¸­åŒæ—¶å«æœ‰å›¾ç‰‡å’Œæ–‡å­—å‚ç›´å±…ä¸­ï¼ˆä¸èƒ½ä½¿ç”¨tableï¼Œæ³¨æ„å…¼å®¹æ€§ï¼‰HTML: &lt;div class=&quot;box1&quot;&gt; &lt;div class=&quot;wrap1&quot;&gt; &lt;p&gt;æˆ‘è¦å±…ä¸­&lt;/p&gt; &lt;img src=&quot;http://images.cnitblog.com/blog/607355/201408/100022249123500.png&quot; alt=&quot;liveReload&quot;&gt; &lt;/div&gt; &lt;/div&gt; &lt;div class=&quot;box2&quot;&gt; &lt;div class=&quot;wrap2&quot;&gt; &lt;p&gt;æˆ‘ä¹Ÿè¦å±…ä¸­&lt;/p&gt; &lt;img src=&quot;http://images.cnitblog.com/blog/607355/201408/100022249123500.png&quot; alt=&quot;liveReload&quot;&gt; &lt;/div&gt; &lt;/div&gt; &lt;div class=&quot;box3&quot;&gt; &lt;div class=&quot;wrap3&quot;&gt; &lt;p&gt;æˆ‘ä¹Ÿè¦å±…ä¸­&lt;/p&gt; &lt;img src=&quot;http://images.cnitblog.com/blog/607355/201408/100022249123500.png&quot; alt=&quot;liveReload&quot;&gt; &lt;/div&gt; &lt;/div&gt; CSS: .box1,.box2,.box3,.box4{ width: 33%; height: 300px; float: left; border: 1px solid #00FFFF } /*æ–¹æ³•1ï¼Œç”¨display:table*/ .box1{ display: table; } .wrap1{ display: table-cell; vertical-align: middle; text-align: center; } /*æ–¹æ³•2ï¼Œç”¨ç»å¯¹å®šä½æ³•*/ .box2{ position: relative; } .wrap2{ width: 150px; height: 150px; border: 1px solid black; position: absolute; left: 0; right: 0; top: 0; bottom: 0; margin: auto; } /*æ–¹æ³•3ï¼Œç”¨translateæ–¹æ³•*/ .box3{ position: relative; } .wrap3{ position: absolute; top: 50%; left: 50%; -webkit-transform: translate(-50%,-50%); -moz-transform: translate(-50%,-50%); -ms-transform: translate(-50%,-50%); -o-transform: translate(-50%,-50%); transform: translate(-50%,-50%); } 4ã€è¯·æè¿°ä¸€ä¸‹cookieï¼ŒsessionStorageå’ŒlocalStorageçš„å¼‚åŒç‚¹ã€‚å…±åŒç‚¹ï¼šéƒ½æ˜¯ä¿å­˜åœ¨æµè§ˆå™¨ç«¯çš„æ•°æ®ã€‚åŒºåˆ«ï¼šcookie æ•°æ®å§‹ç»ˆåœ¨åŒæºçš„httpè¯·æ±‚ä¸­æºå¸¦ï¼ˆå³ä½¿ä¸éœ€è¦ï¼‰ï¼Œå³cookieåœ¨æµè§ˆå™¨å’ŒæœåŠ¡å™¨é—´æ¥å›ä¼ é€’ã€‚è€ŒsessionStorageå’Œ localStorageä¸ä¼šè‡ªåŠ¨æŠŠæ•°æ®å‘ç»™æœåŠ¡å™¨ï¼Œä»…åœ¨æœ¬åœ°ä¿å­˜ã€‚cookieæ•°æ®è¿˜æœ‰è·¯å¾„ï¼ˆpathï¼‰çš„æ¦‚å¿µï¼Œå¯ä»¥é™åˆ¶cookieåªå±äºæŸä¸ªè·¯å¾„ä¸‹ã€‚å­˜å‚¨å¤§å°é™åˆ¶ä¹Ÿä¸åŒï¼Œcookieæ•°æ®ä¸èƒ½è¶…è¿‡4kï¼ŒåŒæ—¶å› ä¸ºæ¯æ¬¡httpè¯·æ±‚éƒ½ä¼šæºå¸¦cookieï¼Œæ‰€ä»¥cookieåªé€‚åˆä¿å­˜å¾ˆå°çš„æ•°æ®ï¼Œå¦‚ä¼šè¯æ ‡è¯†ã€‚sessionStorageå’ŒlocalStorage è™½ç„¶ä¹Ÿæœ‰å­˜å‚¨å¤§å°çš„é™åˆ¶ï¼Œä½†æ¯”cookieå¤§å¾—å¤šï¼Œå¯ä»¥è¾¾åˆ°5Mæˆ–æ›´å¤§ã€‚æ•°æ®æœ‰æ•ˆæœŸä¸åŒï¼Œ sessionStorageï¼šä»…åœ¨å½“å‰æµè§ˆå™¨çª—å£å…³é—­å‰æœ‰æ•ˆï¼Œè‡ªç„¶ä¹Ÿå°±ä¸å¯èƒ½æŒä¹…ä¿æŒï¼› localStorageï¼šå§‹ç»ˆæœ‰æ•ˆï¼Œçª—å£æˆ–æµè§ˆå™¨å…³é—­ä¹Ÿä¸€ç›´ä¿å­˜ï¼Œå› æ­¤ç”¨ä½œæŒä¹…æ•°æ®ï¼› cookieåœ¨è®¾ç½®çš„cookieè¿‡æœŸæ—¶é—´ä¹‹å‰ä¸€ç›´æœ‰æ•ˆï¼Œå³ä½¿çª—å£æˆ–æµè§ˆå™¨å…³é—­ã€‚ä½œç”¨åŸŸä¸åŒï¼Œ sessionStorageä¸åœ¨ä¸åŒçš„æµè§ˆå™¨çª—å£ä¸­å…±äº«ï¼Œå³ä½¿æ˜¯åŒä¸€ä¸ªé¡µé¢ï¼› localStorage åœ¨æ‰€æœ‰åŒæºçª—å£ä¸­éƒ½æ˜¯å…±äº«çš„ï¼›cookieä¹Ÿæ˜¯åœ¨ æ‰€æœ‰åŒæºçª—å£ä¸­éƒ½æ˜¯å…±äº«çš„ã€‚ 5ã€è¯·æŒ‡å‡ºä»¥ä¸‹ä»£ç çš„æ€§èƒ½é—®é¢˜ï¼Œå¹¶è¿›è¡Œä¼˜åŒ–ã€‚var str=&quot; 123&quot;; str +=&quot; 456 ,&quot;; str +=&quot; 789 ,&quot;; str +=&quot; 012&quot; ; ä¸çŸ¥å¦‚ä½•è§£ç­”ï¼Œ-_- 6ã€ç¼–å†™ä¸€ä¸ªç”¨æˆ·ç±»ï¼Œéœ€æ±‚å¦‚ä¸‹ï¼š å±æ€§ï¼šidã€nameã€passwordã€age æ–¹æ³•ï¼šè·å–ç”¨æˆ·è„šæœ¬ä¿¡æ¯ï¼Œè¿”å›jsonå­—ç¬¦ä¸²GetUserInfo æ–¹æ³•ï¼šéªŒè¯ç”¨æˆ·ç™»å½•ä¿¡æ¯ï¼Œajaxå®ç°ï¼Œè¿”å›ç»“æœæç¤ºç™»å½•æˆåŠŸæˆ–å¤±è´¥å³å¯CheckLogin åˆ›å»ºä¸€ä¸ªç”¨æˆ·ç±»çš„ä¸€ä¸ªå¯¹è±¡ï¼Œå¹¶é‡å†™GetUserInfoæ–¹æ³• ä»£ç ï¼š var Person = { id: &apos;ID&apos;, name: &apos;Name&apos;, password: &apos;PassWord&apos;, $age: null, get age() { if (this.$age == undefined) { return new Date().getFullYear() - 1993; } else { return this.$age; } }, set age(val) { if (!isNaN(+val) &amp;&amp; +val &gt; 0 &amp;&amp; +val &lt; 120) { this.$age = +val; } else { throw new Error(val + &apos;ä¸æ˜¯æ­£ç¡®çš„å¹´é¾„&apos;); } }, GetUserInfo: function () { return { id: this.id, name: this.name, password: this.password, age: this.age }; }, CheckLogin: function (data,success,error) { //dataä¸ºç”¨æˆ·æ•°æ®ï¼Œsuccesså’Œerroråˆ†åˆ«æ˜¯æˆåŠŸå’Œå¤±è´¥çš„å›è°ƒå‡½æ•° var xmlhttp; if (window.XMLHttpRequest) { xmlhttp = new XMLHttpRequest(); } else { //for IE6 xmlhttp = new ActiveXObject(&quot;Microsoft.XMLHTTP&quot;); } xmlhttp.onreadystatechange = function () { if (xmlhttp.readyState == 4 &amp;&amp; xmlhttp.status == 200) { if (xmlHttp.responseText === &quot;OK&quot;) { if (typeof success === &apos;function&apos;) { success(); console.log(&apos;ç™»é™†æˆåŠŸ&apos;); } } else { error(); console.log(&apos;ç™»å½•é”™è¯¯&apos;) } } }; xmlhttp.open(&quot;POST&quot;, &quot;Login&quot;, true); xmlhttp.setRequestHeader(&quot;Content-type&quot;, &quot;application/x-www-form-urlencoded&quot;); xmlhttp.send(data); }, }; var me = Object.create(Person); me.id = &apos;123&apos;; me.name = &apos;kisnows&apos;; me.password = &apos;kPassword&apos;; var myData = me.GetUserInfo(); console.log(myData); me.GetUserInfo = function () { console.log(&apos;Rewrite GetUserInfo&apos;); }; 7ã€jQueryæ’ä»¶å¼€å‘ï¼Œæœ‰ä¸€æ•°æ®åˆ—è¡¨é¡µé¢ï¼Œéœ€æ±‚å¦‚ä¸‹ï¼š å¥‡æ•°è¡Œæ— èƒŒæ™¯è‰² å¶æ•°è¡ŒèƒŒæ™¯è‰²#EEE é¼ æ ‡ç§»å…¥æŸè¡Œæ—¶èƒŒæ™¯è‰²#0066CCï¼Œæ–‡å­—é¢œè‰²å˜ä¸ºç™½è‰²ï¼Œç§»å‡ºè¿˜åŸ å‡è®¾æ˜¯ç»™ulä¸‹çš„liè®¾ç½®èƒŒæ™¯ï¼Œä»£ç å¦‚ä¸‹ï¼š (function($) { $.fn.extend({ &quot;ChageBg&quot;: function() { var lis = $(this).find(&apos;li&apos;); var bfBg,bfCl; for (var i = lis.length - 1; i &gt;= 0; i--) { lis[i].index = i; if (i % 2 === 0) { $(lis[i]).css(&apos;backgroundColor&apos;, &apos;#EEE&apos;); // lis[i].style.backgroundColor = &apos;#EEE&apos;; } $(lis[i]).mouseover( function() { bfBg = $(this).css(&apos;backgroundColor&apos;); // console.log($(this),bfBg) bfCl = $(this).css(&apos;color&apos;); $(this).css({ backgroundColor: &apos;#0066CC&apos;, color: &apos;#FFF&apos; }); } ); $(lis[i]).mouseout( function(pro) { $(this).css({ backgroundColor: bfBg, color: bfCl }); } ); } } }); })(jQuery); 8ã€ç”¨HTML5æ’­æ”¾ä¸€æ®µè§†é¢‘æˆ–éŸ³é¢‘ï¼Œå¹¶æ”¯æŒæ‰“ç‚¹åŠŸèƒ½ï¼ˆä»æŒ‡å®šå¼€å§‹æ—¶é—´æ’­æ”¾ä¹‹åˆ¶å®šç»“æŸæ—¶é—´ï¼Œå¦‚ä¸€æ®µè§†é¢‘é•¿åº¦ä¸º10ç§’ï¼Œä»ç¬¬2så¼€å§‹æ’­æ”¾è‡³ç¬¬8sç»“æŸï¼‰HTML: &lt;video id=&quot;video1&quot; controls=&quot;controls&quot;&gt; &lt;source src=&quot;/example/html5/mov_bbb.mp4&quot; type=&quot;video/mp4&quot;&gt; &lt;source src=&quot;/example/html5/mov_bbb.ogg&quot; type=&quot;video/ogg&quot;&gt; Your browser does not support HTML5 video. &lt;/video&gt; åªçŸ¥é“å¦‚ä½•å¼•å…¥å¸¦æ§åˆ¶æ¡çš„éŸ³è§†é¢‘ï¼Œæ‰“ç‚¹åŠŸèƒ½ä¸äº†è§£ã€‚ç½‘ä¸Šä¹Ÿæ²¡æœ‰æ‰¾åˆ°ã€‚ å¸Œæœ›çŸ¥é“çš„åŒå­¦èƒ½å¤Ÿå‘Šè¯‰æˆ‘ä¸€ä¸‹ï¼Œè°¢è°¢äº†ã€‚ 9ã€CSS3çš„transitionä¸AnimationåŠ¨ç”»ç»“æŸåçš„ç»“æŸå›è°ƒå‡½æ•°æ˜¯ä»€ä¹ˆã€‚æ­¤é¢˜ç­”æ¡ˆæ¥è‡ªç½‘ç»œhttp://blog.csdn.net/renfufei/article/details/19617745 ransitionendäº‹ä»¶å’Œanimationendäº‹ä»¶æ˜¯æ ‡å‡†æµè§ˆå™¨çš„åŠ¨ç”»ç»“æŸå›è°ƒå‡½æ•°ã€‚åŸºäºwebkitçš„æµè§ˆå™¨ä»ç„¶ä¾èµ–äºå‰ç¼€,æˆ‘ä»¬å¿…é¡»å…ˆç¡®å®šäº‹ä»¶çš„å‰ç¼€,ç„¶åæ‰èƒ½è°ƒç”¨: /* From Modernizr */ function whichTransitionEvent(){ var t; var el = document.createElement(&apos;fakeelement&apos;); var transitions = { &apos;transition&apos;:&apos;transitionend&apos;, &apos;OTransition&apos;:&apos;oTransitionEnd&apos;, &apos;MozTransition&apos;:&apos;transitionend&apos;, &apos;WebkitTransition&apos;:&apos;webkitTransitionEnd&apos;, &apos;MsTransition&apos;:&apos;msTransitionEnd&apos; } for(t in transitions){ if( el.style[t] !== undefined ){ return transitions[t]; } } } /* ç›‘å¬ transition! */ var transitionEvent = whichTransitionEvent(); transitionEvent &amp;&amp; e.addEventListener(transitionEvent, function() { console.log(&apos;Transition å®Œæˆ! åŸç”ŸJavaScriptå›è°ƒæ‰§è¡Œ!&apos;); }); /* åœ¨ &quot;whichTransitionEvent&quot; ä¸­,å¯ä»¥å°† &quot;transition&quot;æ–‡æœ¬æ›¿æ¢ä¸º &quot;animation&quot;,åˆ™å¤„ç†çš„å°±æ˜¯åŠ¨ç”»,æ­¤å¤„ä»£ç çœç•¥...) */ æ€»ç»“ ç¬¬å››é¢˜åšä¹‹å‰ç†è§£æ²¡æœ‰é‚£ä¹ˆæ·±,åªçŸ¥é“å®ƒä»¬éƒ½æ˜¯å­˜åœ¨æµè§ˆå™¨ç«¯çš„æœ¬åœ°æ•°æ®ï¼Œä¸”sessionStorageå’ŒlocalStorageä¸ºHTML5çš„æ–°ç‰¹æ€§ï¼ŒsessionStorageä¸ºçŸ­æœŸå­˜å‚¨ï¼ŒlocalStorageä¸ºé•¿æœŸå­˜å‚¨ã€‚ ç¬¬å…­é¢˜ä¸­çš„CheckLoginæ–¹æ³•ä¸çŸ¥å…·ä½“å¦‚ä½•å®ç°ã€‚ ç¬¬å…«é¢˜æ‰“ç‚¹åŠŸèƒ½ä¸äº†è§£ã€‚ ç¬¬ä¹é¢˜ä¹‹å‰æ²¡å¬è¯´è¿‡ã€‚]]></content>
      <categories>
        <category>æŠ€æœ¯</category>
      </categories>
      <tags>
        <tag>é¢è¯•é¢˜</tag>
        <tag>JavaScript</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[ç®€æ˜“è®¡ç®—å™¨]]></title>
    <url>%2F2015%2F02%2F04%2Fsimple-calculate%2F</url>
    <content type="text"><![CDATA[åšç®€å•çš„è®¡ç®—å™¨ï¼Œåªæä¾›æœ€åŸºæœ¬çš„è¿ç®—ï¼Œä¸è¿‡æ»¡è¶³æ—¥å¸¸ç”Ÿæ´»éœ€æ±‚æ˜¯å¤Ÿäº†ã€‚è¿è¡Œæ•ˆæœç‚¹è¿™é‡Œ]]></content>
      <categories>
        <category>æŠ€æœ¯</category>
      </categories>
      <tags>
        <tag>JavaScript</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[å¿«é€Ÿæ’åºçš„å®ç°]]></title>
    <url>%2F2015%2F01%2F29%2Fquick-sort%2F</url>
    <content type="text"><![CDATA[å¿«é€Ÿæ’åºæ˜¯ä¸€ç§ç»å¸¸ç”¨åˆ°çš„æ’åºæ–¹æ³•ï¼Œå®ƒçš„æ—¶é—´å¤æ‚åº¦ä¸ºO(nlogn)ã€‚å› ä¸ºå¤§å¤šæ•°æƒ…å†µä¸‹é€Ÿåº¦éƒ½æ¯”ä¸€èˆ¬çš„æ’åºæ–¹æ³•å¿«ï¼Œç”¨çš„æ¯”è¾ƒå¤šï¼Œè‡ªå·±å°±ç¢ç£¨ç€å®ç°äº†ä¸€ä¸‹ã€‚ åŸç†å¿«é€Ÿæ’åºç”¨åˆ°äº†åˆ†æ²»æ³•çš„åŸç†ï¼š&emsp;&emsp;ä»æ•°ç»„ä¸­éšæœºå–å‡ºä¸€ä¸ªæ•°å­—ï¼Œå°†è¿™ä¸ªæ•°ç»„åˆ†ä¸ºä¸¤ä¸ªéƒ¨åˆ†ã€‚å°†å–å‡ºçš„æ•°å­—ä½œä¸ºåŸºå‡†æ•°ï¼Œå°äºåŸºå‡†æ•°çš„æ”¾åˆ°å®ƒçš„å·¦è¾¹ï¼Œå¤§äºåŸºå‡†æ•°çš„æ”¾åˆ°å®ƒçš„å³è¾¹ã€‚è¿™æ ·åŸºå‡†æ•°å·¦è¾¹çš„éƒ½æ˜¯æ¯”å®ƒå°çš„ï¼Œå³è¾¹çš„éƒ½æ˜¯æ¯”å®ƒå¤§çš„ã€‚ç„¶åå†å¯¹åŸºå‡†æ•°çš„å·¦è¾¹å’Œå³è¾¹é‡å¤å‰é¢çš„è¿‡ç¨‹ï¼Œç›´åˆ°æ¯ä¸ªéƒ¨åˆ†çš„æ•°ç»„é•¿åº¦ä¸º1ã€‚æœ€åå†å°†è¿™äº›åˆ†å¼€çš„æ•°ç»„ç»„åˆèµ·æ¥å°±æˆåŠŸäº†ã€‚æ­¥éª¤å¦‚ä¸‹ï¼š ä»æ•°ç»„ä¸­éšæœºæŠ½å–ä¸€ä¸ªæ•°ç»„ä½œä¸ºåŸºå‡†æ•°ï¼Œå°†æ•°ç»„ä¸­çš„æ¯ä¸ªæ•°å­—ä¸åŸºå‡†æ•°æ¯”è¾ƒï¼Œå°äºåŸºå‡†æ•°çš„æ”¾åˆ°åŸºå‡†æ•°å·¦è¾¹ï¼Œå¤§äºåŸºå‡†æ•°çš„æ”¾åˆ°åŸºå‡†æ•°å³è¾¹ã€‚ å¯¹ä¸Šé¢ç»“æŸåçš„å·¦å³ä¸¤ä¸ªéƒ¨åˆ†é‡å¤æ­¥éª¤1ã€‚ å½“æ‰€æœ‰éƒ¨åˆ†çš„é•¿åº¦ä¸º1æ—¶åœæ­¢ã€‚ å®ç°ä¸‹é¢æ˜¯è‡ªå·±ç†Ÿæ‚‰çš„è¯­è¨€çš„å®ç°(ç”¨ç¬¬ä¸€ä¸ªæ•°ä½œä¸ºåŸºå‡†æ•°,å¹¶ä¸”é‡‡ç”¨é€’å½’çš„æ–¹æ³•)ï¼š Pythonç‰ˆæœ¬def quick_sort(lst,left,right): i = left; j = right if i &gt;= j: return lst k = lst[i] while i &lt; j: while i &lt; j and lst[j] &gt;= k: #lst[j]&lt;=kæ—¶ï¼Œå¾ªç¯ç»“æŸï¼Œå¹¶å°†å…¶å€¼èµ‹ç»™lst[i] j -= 1 lst[i] = lst[j] while i &lt; j and lst[i] &lt;= k: #lst[i]&gt;=kæ—¶ï¼Œå¾ªç¯ç»“æŸï¼Œå¹¶å°†å…¶å€¼èµ‹ç»™lst[j] i += 1 lst[j] = lst[i] lst[i] = k #å½“i&gt;=jæ—¶ï¼Œå°†kçš„å€¼èµ‹ç»™lst[i] quick_sort(lst,left,i-1) quick_sort(lst,j+1,right) return lst JavaScriptç‰ˆfunction quick_sort (lst,l,r) { var i = l, j = r, k = lst[l]; if (i&gt;=j) {return lst}; while(i &lt; j){ for(;i&lt;j;j--){ if (lst[j]&lt;=k) { lst[i] = lst[j]; i++; break } } for(;i&lt;j;i++){ if (lst[i]&gt;=k) {lst[j] = lst[i]; j--; break } } } lst[i] = k; quick_sort(lst,l,i-1); quick_sort(lst,j+1,r); return lst; } Cè¯­è¨€ç‰ˆvoid qucik_sort(int lst[],int l,int r) { if(l &lt; r) { int i = l, j = r, k = lst[l]; while (i &lt; j){ for (; i &lt; j; --j) { if (lst[j] &lt;= k) { lst[i] = lst [j]; i++; break; } } for (; i &lt; j; ++i) { if (lst[i] &gt;= k) { lst[j] = lst[i]; j--; break; } } } lst[i] = k; qucik_sort(lst, l, i-1); qucik_sort(lst, j+1, r); } }]]></content>
      <categories>
        <category>æŠ€æœ¯</category>
      </categories>
      <tags>
        <tag>ç®—æ³•</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[ç¡¬ç›˜æ–‡ä»¶æ•´ç†]]></title>
    <url>%2F2015%2F01%2F29%2Ffile-management%2F</url>
    <content type="text"><![CDATA[çœ‹ç€è‡ªå·±ç”µè„‘é‡Œçš„æ–‡ä»¶è¶Šæ¥è¶Šå¤šï¼Œæ–‡ä»¶çš„å­˜æ”¾ä¹Ÿå˜è¶Šæ¥è¶Šæ··ä¹±ï¼Œå¦‚ä½•æ•´ç†æ–‡ä»¶æˆäº†ä¸€ä¸ªå¤§é—®é¢˜ï¼Œæ˜¯è¯¥èŠ±ç‚¹æ—¶é—´å¥½å¥½æ•´ç†æ•´ç†äº†ã€‚ ç£ç›˜åˆ†åŒºæˆ‘çš„ç”µè„‘æ˜¯ä¸¤ä¸ªç¡¬ç›˜ï¼Œä¸€ä¸ª128Gçš„å›ºæ€å’Œ650Gçš„æœºæ¢°ç¡¬ç›˜ï¼Œåˆ†åˆ«è®¾ç½®ä¸ºCç›˜å’ŒDç›˜ä¸¤ä¸ªç›˜ã€‚å…¶ä¸­ã€‚ Cç›˜ï¼šå®‰è£…ç³»ç»Ÿå’Œæ‰€æœ‰çš„åº”ç”¨è½¯ä»¶ã€‚ Dç›˜ï¼šç”¨æ¥å­˜æ”¾æ•°æ®ï¼ŒåŒ…æ‹¬æ–‡æ¡£ã€éŸ³ä¹ã€ç”µå½±ç­‰ã€‚ ä¸ºä»€ä¹ˆä¸è®¾ç½®Eã€Fç­‰å¤šä¸ªåˆ†åŒºå‘¢ï¼Œå› ä¸ºå¤šåˆ†åŒºä¼šé€ æˆç©ºé—´çš„æµªè´¹ã€‚ä¸¾ä¸ªä¾‹å­ï¼šå‡è®¾æœ‰ä¸€ä¸ª600Gçš„ç¡¬ç›˜ï¼Œåˆ†ä¸ºCã€Dã€Eä¸‰ä¸ªåˆ†åŒºï¼Œå…¶ä¸­Cç›˜100Gï¼ŒDç›˜200Gï¼ŒEç›˜300Gã€‚ç„¶åCç›˜æ”¾äº†95Gï¼ŒDç›˜æ”¾äº†198Gï¼ŒEç›˜æ”¾äº†287Gã€‚ç°åœ¨æœ‰ä¸€ä¸ªå¤§å°ä¸º20Gçš„æ–‡ä»¶ï¼Œä½ è¯´ä½ æ”¾å“ªï¼ŸCã€Dã€è¿˜æ˜¯Eï¼Ÿå“ªé‡Œéƒ½ä¸æ”¾ä¸‹ï¼Œå¯æ˜¯æ˜æ˜600Gçš„ç©ºé—´ï¼Œæˆ‘ç°åœ¨åªç”¨äº†580Gï¼Œæ˜æ˜è¿˜æœ‰20Gçš„ç©ºä½™ç©ºé—´ã€‚å¯æ˜¯å°±æ˜¯æ²¡åœ°æ–¹æ”¾ã€‚è¿™å°±æ˜¯å¤šåˆ†åŒºé€ æˆçš„ç©ºé—´æµªè´¹ï¼Œæ‰€ä»¥ä¸ºäº†ç©ºé—´æœ€å¤§åŒ–åˆ©ç”¨ï¼Œå°±æ˜¯åˆ†æœ€å°‘çš„åŒºã€‚ç†æƒ³æƒ…å†µä¸‹ï¼Œåªå­˜åœ¨ä¸€ä¸ªCç›˜å°±å¤Ÿäº†ã€‚å¯æ˜¯æœ‰çš„æ—¶å€™ç³»ç»Ÿå‡ºé—®é¢˜éœ€è¦æ ¼å¼åŒ–Cç›˜ï¼Œå‡å¦‚æ²¡æœ‰å¤‡ä»½ä¼šé€ æˆæ•°æ®ä¸¢å¤±ã€‚æ‰€ä»¥é€€è€Œæ±‚å…¶æ¬¡ï¼Œåˆ†ä¸ºä¸¤ä¸ªç›˜æ˜¯ä¸€ä¸ªæŠ˜ä¸­çš„åŠæ³•ã€‚ æ–‡ä»¶ç®¡ç†åˆ†åŒºæå®šäº†ï¼Œæ–‡ä»¶è¯¥æ€ä¹ˆå­˜æ”¾å‘¢ã€‚æ˜¯é€šè¿‡æ–‡ä»¶ç±»å‹æ¥å­˜æ”¾ï¼Œè¿˜æ˜¯é€šè¿‡æ–‡ä»¶åŠŸèƒ½æ¥å­˜æ”¾å‘¢ï¼Ÿ é€šè¿‡æ–‡ä»¶ç±»å‹æ¥å­˜æ”¾å°†æ‰€æœ‰çš„éŸ³ä¹æ–‡ä»¶æ”¾åœ¨ä¸€ä¸ªæ–‡ä»¶å¤¹ï¼Œæ‰€æœ‰çš„ç”µå½±æ”¾åœ¨ä¸€ä¸ªæ–‡ä»¶å¤¹ï¼Œæ‰€æœ‰çš„æ–‡æ¡£æ”¾åœ¨ä¸€ä¸ªæ–‡ä»¶å¤¹â€¦â€¦ ä¹çœ‹èµ·æ¥æŒºå¥½çš„ï¼Œä½†æ˜¯æœ‰æ—¶ä¼šæœ‰å†²çªã€‚æ¯”å¦‚æ‰€æœ‰çš„æ–‡æ¡£æ”¾åœ¨ä¸€ä¸ªæ–‡ä»¶å¤¹ï¼Œå·¥ä½œã€å­¦ä¹ ã€å¨±ä¹æ–‡æ¡£éƒ½æ”¾åœ¨ä¸€å—ï¼Œè¦æ‰¾ä¸€ä¸ªæ–‡ä»¶çš„æ—¶å€™è¿˜æ˜¯ä¼šéº»çƒ¦ã€‚æœ‰äººä¼šè¯´ï¼Œæˆ‘ç”¨æœç´¢å•Šã€‚ç”¨æœç´¢æ˜¯ä¸ªå¥½åŠæ³•ï¼Œä½†æ˜¯éœ€è¦ä½ çŸ¥é“ä½ è¦æ‰¾çš„æ–‡ä»¶çš„åå­—ï¼Œé™¤éä½ æœ‰éå¸¸è‰¯å¥½çš„æ–‡ä»¶å‘½åä¹ æƒ¯ï¼Œæ¯”å¦‚â€™aé¡¹ç›®-båˆ†æ”¯-cæ–‡ä»¶â€™è¿™æ ·ï¼Œé‚£ç”¨æœç´¢æ˜¯ä¸€ä¸ªéå¸¸å¥½çš„åŠæ³•ï¼ˆæ¯”å¦‚everythingçš„æœç´¢é€Ÿåº¦å°±ç¥å¿«ï¼‰ã€‚æ‰€ä»¥å¦‚æœæ²¡æœ‰è‰¯å¥½çš„å‘½åä¹ æƒ¯ï¼Œé‚£ä¹ˆé€šè¿‡æ–‡ä»¶ç±»å‹å­˜æ”¾æ˜¯è¡Œä¸é€šçš„ã€‚ é€šè¿‡æ–‡ä»¶åŠŸèƒ½æ¥å­˜æ”¾é¦–å…ˆå°†æ–‡ä»¶ç±»å‹åˆ†ä¸ºå››å¤§ç±»ï¼š å·¥ä½œ ç”Ÿæ´» å­¦ä¹  å¤‡ä»½ ç„¶ååœ¨è¿™ä¸ªåˆ†ç±»ä¸‹é¢ï¼Œåœ¨é€šè¿‡ç±»å‹è¿›è¡Œåˆ’åˆ†ã€‚æ‰€æœ‰å’Œå·¥ä½œæœ‰å…³çš„åˆ’åˆ†åˆ°å·¥ä½œç±»ä¸­ï¼Œå’Œå·¥ä½œæ— å…³çš„å…¶ä»–å­¦ä¹ åˆ’åˆ†åˆ°å­¦ä¹ ä¸­ï¼Œå…¶ä»–çš„éŸ³ä¹ã€ç”µå½±ã€å›¾ç‰‡ç­‰éƒ½å±äºç”Ÿæ´»ã€‚ç„¶ååœ¨å„ä¸ªå¤§ç±»ä¸‹é¢ï¼Œå†é€šè¿‡å„è‡ªçš„åŠŸèƒ½è¿›è¡Œè¿›ä¸€æ­¥çš„åˆ’åˆ†ï¼Œç±»ä¼¼ä¸€ç§é€’å½’çš„æ€æƒ³ã€‚ç„¶åå°†é‡è¦çš„ä¸œè¥¿å®šæœŸæ›´æ–°åˆ°å¤‡ä»½ä¸­ï¼Œæ–¹ä¾¿æ–‡ä»¶çš„å¤åˆ¶å’Œæ‹·è´ã€‚ æˆ‘çš„åˆ†ç±»æˆ‘çš„æœ€ç»ˆåˆ†ç±»å¦‚ä¸‹å›¾ï¼šæˆ‘è¿™Cç›˜æ˜¯ä¸æ˜¯ç”¨çš„æœ‰ç‚¹å¤ªç‹ äº†ã€‚*^_^*]]></content>
      <categories>
        <category>æŠ€æœ¯</category>
      </categories>
      <tags>
        <tag>æ–‡ä»¶ç®¡ç†</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[ç½‘æ˜“äº‘è¯¾å ‚è€ƒè¯•é¢˜-python]]></title>
    <url>%2F2015%2F01%2F28%2Fpython-neteasy-exam%2F</url>
    <content type="text"><![CDATA[é¢˜ç›®å†…å®¹ï¼š ä¸¤ä½æ•´æ•°ç›¸ä¹˜å½¢æˆçš„æœ€å¤§å›æ–‡æ•°æ˜¯ 9009 = 99 Ã— 91ã€‚ç¼–å†™ç¨‹åºï¼Œæ±‚å¾—ä»»æ„è¾“å…¥çš„ n ä½æ•´æ•°ç›¸ä¹˜å½¢æˆçš„æœ€å¤§å›æ–‡æ•°ã€‚ è¾“å…¥æ ¼å¼: æ­£æ•´æ•° n è¾“å‡ºæ ¼å¼ï¼š n ä½æ•´æ•°ç›¸ä¹˜å½¢æˆçš„æœ€å¤§å›æ–‡æ•° è¾“å…¥æ ·ä¾‹ï¼š 2 è¾“å‡ºæ ·ä¾‹ï¼š 9009 ç¨‹åºï¼š def is_palindrome(num): #åˆ¤æ–­æ˜¯å¦æ˜¯å›æ–‡ n = str(num) if n == n[::-1]: return True else: return False n = int(input()) a = 1 arr1 = [] arr2 = [] while len(str(a)) &lt; n + 1: #å°†nä½æ•°çš„æ•°å­—åŠ åˆ°æ•°ç»„ä¸­ï¼ŒåŒæ—¶æŠ›å¼ƒn-1ä½æ•° if len(str(a)) &gt; n - 1: arr1.append(a) arr2.append(a) a = a + 1 maxPalindrome = 1 for i in arr1[::-1]: #ä»åé¢å¾€å‰å¼€å§‹éå†ï¼Œå–å¾—æœ€å¤§çš„å›æ–‡æ•° for j in arr2[::-1]: if i*j &gt; maxPalindrome and is_palindrome(i*j): maxPalindrome = i*j print(maxPalindrome) æ€»ç»“æ„Ÿè§‰ç®—æ³•å¤ªç²—æš´ï¼Œè¿è¡Œæ•ˆç‡è¾ƒä½ï¼Œä½†ä¸€æ—¶è¿˜æ²¡æƒ³åˆ°æ›´å¥½çš„ç®—æ³•ã€‚]]></content>
      <categories>
        <category>æŠ€æœ¯</category>
      </categories>
      <tags>
        <tag>python</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[ç¿˜è¾¹é˜´å½±åˆ¶ä½œæ–¹æ³•]]></title>
    <url>%2F2015%2F01%2F25%2Frase-shadow%2F</url>
    <content type="text"><![CDATA[ä¸€äº›ç‰¹æ®Šé˜´å½±çš„åˆ¶ä½œæ–¹æ³•ï¼Œå…¶å®å°±æ˜¯å°†å¤šä¸ªå›¾å½¢å åŠ åœ¨ä¸€èµ·ï¼Œç„¶åé€šè¿‡z-indexè°ƒæ•´å‰åé¡ºåºï¼Œæœ€åå®ç°æ•ˆæœã€‚HTMLï¼š &lt;li&gt;&lt;img src=&quot;img/1.gif&quot; alt=&quot;img&quot;&gt;&lt;/li&gt; CSSï¼š li::after{ content: &quot;&quot;; width: 90%; height: 80%; left: 1.6%; bottom: 4.6%; position: absolute; background-color: transparent; box-shadow: 0px 8px 20px rgba(0,0,0,.6); -webkit-transform: rotate(-4deg) skew(-8deg); -moz-transform: rotate(-4deg) skew(-8deg); -ms-transform: rotate(-4deg) skew(-8deg); -o-transform: rotate(-4deg) skew(-8deg); transform: rotate(-4deg) skew(-8deg); z-index: -1; } li::before{ content: &quot;&quot;; width: 90%; height: 80%; right: 1.6%; bottom: 4.6%; position: absolute; background-color: transparent; box-shadow: 0px 8px 20px rgba(0,0,0,.6); -webkit-transform: rotate(4deg) skew(8deg); -moz-transform: rotate(4deg) skew(8deg); -ms-transform: rotate(4deg) skew(8deg); -o-transform: rotate(4deg) skew(8deg); transform: rotate(4deg) skew(8deg); z-index: -1; } å…¶å®å°±æ˜¯å°†ä¸¤ä¸ªå¹³è¡Œå››è¾¹å½¢åˆ†åˆ«å·¦å³æ—‹è½¬åæ”¾åœ¨åŸå›¾çš„ä¸‹é¢ï¼ˆå¦‚ä¸‹ç¤ºæ„å›¾ï¼‰ï¼Œå¹¶ç»™å®ƒè®¾ç½®é˜´å½±ï¼Œæœ€åå°±ä¼šå®ç°å›¾ç‰‡ä¸­é˜´å½±æ•ˆæœã€‚å¯ä»¥ç‚¹å‡»è¿™é‡ŒæŸ¥çœ‹DEMO]]></content>
      <categories>
        <category>æŠ€æœ¯</category>
      </categories>
      <tags>
        <tag>CSS3</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[css3é€‰æ‹©å™¨æ•´ç†]]></title>
    <url>%2F2015%2F01%2F21%2Fcss3-seletor%2F</url>
    <content type="text"><![CDATA[å±æ€§é€‰æ‹©å™¨ E[att^=&quot;val&quot;]ï¼šé€‰æ‹©attå±æ€§å€¼ä»¥valå¼€å¤´çš„Eå…ƒç´ ã€‚ E[att$=&quot;val&quot;]ï¼šé€‰æ‹©attå±æ€§å€¼ä»¥valç»“å°¾çš„Eå…ƒç´ ã€‚ E[att*=&quot;val&quot;]ï¼šé€‰æ‹©attå±æ€§å€¼åŒ…å«valçš„Eå…ƒç´ ã€‚ ç»“æ„æ€§ä¼ªç±»é€‰æ‹©å™¨:root: æ ¹é€‰æ‹©å™¨ï¼ŒåŒ¹é…å…ƒç´ æ‰€åœ¨æ–‡æ¡£çš„æ ¹å…ƒç´ ã€‚åœ¨HTMLä¸­ï¼Œæ ¹å…ƒç´ å§‹ç»ˆä¸º&lt;html&gt;ã€‚:not : å¦å®šé€‰æ‹©å™¨ï¼Œé€‰æ‹©æŸå…ƒç´ ä»¥å¤–çš„æ‰€æœ‰å…ƒç´ ã€‚ä¸‹é¢çš„ä»£ç ï¼Œæœ€ç»ˆä¼šä¸ºtype=buttonçš„å…ƒç´ è®¾ç½®çº¢è‰²çš„èƒŒæ™¯ã€‚ &lt;style&gt; input:not([type=&quot;text&quot;]){background-color: red}; &lt;/style&gt; &lt;body&gt; &lt;input type=&apos;text&apos;&gt; &lt;input type=&apos;text&apos;&gt; &lt;input type=&apos;button&apos;&gt; &lt;/body&gt; :empty: ç©ºé€‰æ‹©å™¨ï¼Œé€‰æ‹©å†…å®¹ä¸ºç©ºçš„å…ƒç´ ã€‚ç©ºå…ƒç´ ä¸ºé‡Œé¢ä»€ä¹ˆéƒ½æ²¡æœ‰çš„å…ƒç´ ï¼ŒåŒ…æ‹¬ç©ºæ ¼ã€‚:target: ç›®æ ‡é€‰æ‹©å™¨ï¼ŒåŒ¹é…æ–‡æ¡£çš„urlçš„æŸä¸ªæ ‡å¿—ç¬¦çš„ç›®æ ‡å…ƒç´ ã€‚ä¸‹é¢çš„ä»£ç å¯ä»¥ç»™æ¯ä¸ªaæ·»åŠ ç‚¹å‡»äº‹ä»¶ï¼Œå½“ç‚¹å‡»a1æ—¶ï¼Œid=â€™a1â€™å…ƒç´ çš„èƒŒæ™¯ä¼šå˜æˆçº¢è‰²ï¼Œå…¶ä»–åŒç†ã€‚ &lt;style&gt; #a1:target{background-color: red} #a2:target{background-color: blue} #a3:target{background-color: yellow} &lt;/style&gt; &lt;body&gt; &lt;a href=&quot;#a1&quot;&gt;a1&lt;/a&gt; &lt;a href=&quot;#a2&quot;&gt;a2&lt;/a&gt; &lt;a href=&quot;#a3&quot;&gt;a3&lt;/a&gt; &lt;div id=&quot;a1&quot;&gt;a1&lt;/div&gt; &lt;div id=&quot;a2&quot;&gt;a2&lt;/div&gt; &lt;div id=&quot;a3&quot;&gt;a3&lt;/div&gt; &lt;/body&gt; :first-child: é€‰æ‹©çˆ¶å…ƒç´ çš„ç¬¬ä¸€ä¸ªå­å…ƒç´ ,ul li:first-childï¼Œé€‰æ‹©ulä¸‹çš„ç¬¬ä¸€ä¸ªliå…ƒç´ ã€‚:last-child: ä¸ä¸Šä¸€ä¸ªé€‰æ‹©ç›¸åï¼Œé€‰æ‹©æœ€åä¸€ä¸ªå­å…ƒç´ ã€‚nth-child(n): é€‰æ‹©çˆ¶å…ƒç´ ä¸‹çš„ä¸€ä¸ªæˆ–å¤šä¸ªæŒ‡å®šçš„å­å…ƒç´ ã€‚å…¶å®næ˜¯ä¸€ä¸ªå‚æ•°ï¼Œå¯ä»¥æ˜¯ä¸€ä¸ªæ•°å­—ï¼Œä¹Ÿå¯ä»¥æ˜¯ä¸€ä¸ªè¡¨è¾¾å¼ã€‚é€‰æ‹©ulä¸‹åºå·ä¸ºå¶æ•°ï¼ˆå³ç¬¬äºŒä¸ªå’Œç¬¬å››ä¸ªï¼Œnä»é›¶ç®—èµ·ï¼‰çš„liï¼Œå¹¶å°†å…¶å­—ä½“è®¾ç½®ä¸ºé»„è‰²ã€‚ li:nth-child(2n){color:yellow;} &lt;ul&gt; &lt;li&gt;Hello World&lt;/li&gt; &lt;li&gt;Hello World&lt;/li&gt; &lt;li&gt;Hello World&lt;/li&gt; &lt;li&gt;Hello World&lt;/li&gt; &lt;li&gt;Hello World&lt;/li&gt; &lt;/ul&gt; nth-last-child(n): å’Œä¸Šä¸€ä¸ªé€‰æ‹©å™¨ç›¸åï¼Œä»çˆ¶å…ƒç´ çš„æœ€åä¸€ä¸ªå­å…ƒç´ å¼€å§‹ç®—èµ·ï¼Œæ¥é€‰æ‹©æŒ‡å®šçš„å…ƒç´ ã€‚first-of-type: é€‰æ‹©çˆ¶å…ƒç´ ä¸‹ç¬¬ä¸€ä¸ªæŒ‡å®štpyeçš„å…ƒç´ ï¼Œdiv p:first-of-type,é€‰æ‹©ä¸€ä¸ªdivé‡Œçš„ç¬¬ä¸€ä¸ªpå…ƒç´ ã€‚nth-of-type(n): ä¸nth-child(n)ç±»ä¼¼ï¼Œé€‰æ‹©çˆ¶å…ƒç´ ä¸­æŒ‡å®štypeçš„æŒ‡å®šä½ç½®çš„å…ƒç´ ã€‚div p:nth-of-type(3),é€‰æ‹©divä¸‹ç¬¬3ä¸ªpå…ƒç´ ã€‚last-of-type: ä¸first-of-typeç±»ä¼¼ï¼Œä¸è¿‡é€‰æ‹©æ˜¯çˆ¶å…ƒç´ ä¸‹æœ€åæŒ‡å®štypeçš„å…ƒç´ ã€‚nth-last-of-type(n): ä¸nth-of-type(n)ç±»ä¼¼ï¼Œä¸åŒçš„æ˜¯ä»çˆ¶å…ƒç´ çš„åé¢å¼€å§‹é€‰æ‹©ã€‚only-child: div p:only-childå½“æœ‰å¤šä¸ªdivæ—¶ï¼Œé€‰æ‹©ä»…æœ‰ä¸€ä¸ªå…ƒç´ çš„divä¸‹çš„på…ƒç´ ã€‚ä»…ç¬¬ä¸€ä¸ªulä¸‹çš„liçš„é¢œè‰²ä¼šå˜æˆæ©˜è‰²ï¼Œå…¶ä»–liçš„ä¸å˜ã€‚ li:only-child{color: orange} &lt;ul&gt; &lt;li&gt;ä½ å¥½&lt;/li&gt; &lt;/ul&gt; &lt;ul&gt; &lt;li&gt;Hello World&lt;/li&gt; &lt;li&gt;Hello World&lt;/li&gt; &lt;li&gt;Hello World&lt;/li&gt; &lt;li&gt;Hello World&lt;/li&gt; &lt;li&gt;Hello World&lt;/li&gt; &lt;/ul&gt; only-of-type: ä¸ä¸Šä¸€ä¸ªç±»ä¼¼ï¼Œä¸åŒä¹‹å¤„ä¸ºé€‰æ‹©çˆ¶çº§ä¸‹åªæœ‰ä¸€ä¸ªæŒ‡å®štypeçš„å…ƒç´ çš„å­å…ƒç´ ã€‚ å…¶ä»–é€‰æ‹©å™¨:enable: è¡¨å•ä¸­ï¼Œæœ‰å¯ç”¨ï¼ˆâ€œ:enabledâ€ï¼‰å’Œä¸å¯ç”¨ï¼ˆâ€œ:disabledâ€ï¼‰ä¸¤ç§çŠ¶æ€ã€‚æ­¤é€‰æ‹©å…¶é€‰æ‹©å¯ç”¨çŠ¶æ€çš„å…ƒç´ ã€‚:disbale: ä¸ä¸Šä¸€ä¸ªé€‰æ‹©å™¨ç±»ä¼¼ï¼Œé€‰æ‹©ä¸å¯ç”¨çŠ¶æ€çš„å…ƒç´ ã€‚checked: å•é€‰æŒ‰é’®å’Œå¤é€‰æŒ‰é’®éƒ½å…·æœ‰é€‰ä¸­å’Œæœªé€‰ä¸­çŠ¶æ€ã€‚æ­¤é€‰æ‹©å™¨é€‰æ‹©é€‰ä¸­çŠ¶æ€ä¸‹çš„æŒ‰é’®ã€‚selection: ä¼ªå…ƒç´ æ˜¯ç”¨æ¥åŒ¹é…çªå‡ºæ˜¾ç¤ºçš„æ–‡æœ¬(å³ç”¨é¼ æ ‡é€‰åˆ™æ–‡æœ¬æ—¶çš„æ–‡æœ¬)ã€‚æµè§ˆå™¨é»˜è®¤æƒ…å†µä¸‹ï¼Œç”¨é¼ æ ‡é€‰æ‹©ç½‘é¡µæ–‡æœ¬æ˜¯ä»¥â€œè“è‰²èƒŒæ™¯ï¼Œç™½è‰²å­—ä½“â€æ˜¾ç¤ºã€‚::selection{color:black;},å°†é€‰ä¸­çš„æ–‡æœ¬å¤œè‰²å˜ä¸ºé»‘è‰²ã€‚read-only: é€‰æ‹©åªè¯»çŠ¶æ€çš„å…ƒç´ ã€‚å³è®¾ç½®äº†â€readonly=â€™readonlyâ€™â€,(åœ¨html5ä¸­ä¸ºç›´æ¥è®¾ç½®readonlyçš„å…ƒç´ )ã€‚read-write: ä¸read-onlyç›¸åï¼Œé€‰æ‹©å¤„äºå¯è¯»å†™çŠ¶æ€çš„å…ƒç´ ã€‚before: ç”¨æ¥ç»™å…ƒç´ å‰é¢æ’å…¥å†…å®¹ã€‚after: ç»™å…ƒç´ åé¢æ’å…¥å†…å®¹ã€‚]]></content>
      <categories>
        <category>æŠ€æœ¯</category>
      </categories>
      <tags>
        <tag>å­¦ä¹ ç¬”è®°</tag>
        <tag>CSS3</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[elefixed]]></title>
    <url>%2F2015%2F01%2F21%2FjQuery-plugin-elefixed%2F</url>
    <content type="text"><![CDATA[å†™äº†ä¸€æ¬¾jsæ’ä»¶ï¼Œå¯ä»¥è®©ä¸€ä¸ªå…ƒç´ åœ¨éšç€é¡µé¢å‘ä¸‹æ»šåŠ¨åˆ°è¾¾æµè§ˆå™¨é¡¶éƒ¨æ—¶ï¼Œå›ºå®šåœ¨é‚£ï¼Œå‘ä¸Šæ»šåŠ¨æ—¶åˆå›åˆ°åŸæ¥çš„çŠ¶æ€ã€‚å…·ä½“ä»‹ç»å¯ä»¥ç‚¹å‡»è¿™é‡ŒæŸ¥çœ‹ï¼šeleFixedæœ¬æ’ä»¶æä¾›åŸç”Ÿjså’ŒjQueryä¸¤ä¸ªç‰ˆæœ¬ï¼šä½¿ç”¨æ–¹æ³•: åŸç”Ÿjsç‰ˆï¼šé¦–å…ˆåœ¨htmlä¸­å¼•å…¥elefixed.jsæ–‡ä»¶ï¼Œç„¶åè¿™æ ·è°ƒç”¨å®ƒ:elefixed(&quot;ele&quot;);ï¼Œå…¶ä¸­çš„&quot;ele&quot;å¯ä»¥æ¢ä¸ºä½ è¦è®¾ç½®å…ƒç´ çš„idã€‚ jQueryç‰ˆï¼šç›´æ¥åœ¨å…ƒç´ åé¢è°ƒç”¨è¯¥æ–¹æ³•å³å¯ï¼Œåƒè¿™æ ·$(&quot;ele&quot;).elefixed(),è¿™é‡Œçš„&quot;ele&quot;ä¸å†åƒåŸç”Ÿç‰ˆä¸€æ ·éœ€è¦idå€¼äº†ï¼Œåªè¦èƒ½é€‰ä¸­è¯¥å…ƒç´ å³å¯ã€‚ ä¸‹è½½åœ°å€ï¼š]]></content>
      <categories>
        <category>æŠ€æœ¯</category>
      </categories>
      <tags>
        <tag>JavaScript</tag>
        <tag>jQuery</tag>
        <tag>æ’ä»¶</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[å€ŸåŠ©gulpè‡ªåŠ¨åŒ–å‰ç«¯å¼€å‘]]></title>
    <url>%2F2015%2F01%2F18%2FF2E-tools-gulp%2F</url>
    <content type="text"><![CDATA[gulpæ˜¯ä¸€æ¬¾å°å·§çš„è‡ªåŠ¨åŒ–æ„å»ºå·¥å…·ï¼Œå¯ä»¥å¸®åŠ©æˆ‘ä»¬è‡ªåŠ¨è¿è¡Œå¤§é‡ä¹å‘³é‡å¤æ€§çš„ä»»åŠ¡ï¼Œæ¯”å¦‚ä»£ç å‹ç¼©ã€åˆå¹¶ç­‰ç­‰ï¼Œå¯ä»¥ä¸ºæˆ‘ä»¬èŠ‚çº¦å¤§é‡çš„æ—¶é—´ã€‚åœ¨åˆ¶ä½œç®€å†è¿‡ç¨‹ä¸­ï¼Œå› ä¸ºéœ€è¦ç”¨åˆ°lessï¼Œè€Œlesséœ€è¦ç¼–è¯‘ï¼Œæ‰€ä»¥å°±ç®€å•å­¦ä¹ äº†è¿™æ¬¾å·¥å…·ã€‚ å®‰è£…Gulp.jså› ä¸ºgulpåŸºäºnodeæ„å»ºï¼Œæ‰€ä»¥å¿…é¡»å…ˆè£…ä¸Šnodeã€‚å®‰è£…å¥½nodeåï¼Œé€šè¿‡npmæ¥å®‰è£…gulpï¼š npm install -g gulp åœ¨é¡¹ç›®ä¸­é…ç½®å› ä¸ºæˆ‘éœ€è¦ç¼–è¯‘lessï¼Œæ‰€ä»¥å…ˆè¦å®‰è£…gulpçš„lessæ’ä»¶ï¼š npm install --save-dev gulp gulp-less å‘½ä»¤ä¸­çš„--save-devå¯ä»¥å°†å®‰è£…çš„åŒ…æ·»åŠ åˆ°åŒ…é…ç½®æ–‡ä»¶package.jsonä¸­ï¼š &quot;dependencies&quot;: { &quot;gulp&quot;: &quot;^3.8.10&quot;, &quot;gulp-livereload&quot;: &quot;^3.4.0&quot;, &quot;gulp-less&quot;: &quot;^2.0.1&quot;, &quot;less-plugin-autoprefix&quot;: &quot;^1.3.0&quot; }, å¦‚æœé¡¹ç›®ä¸­æ²¡æœ‰è¿™ä¸ªæ–‡ä»¶ï¼Œå¯ä»¥é€šè¿‡npm initåˆå§‹åŒ–å‘½ä»¤æ¥åˆ›å»ºã€‚åœ¨é¡¹ç›®ä¸‹çš„æ ¹ç›®å½•ä¸‹åˆ›å»ºGulpfile.jsæ–‡ä»¶ï¼Œè¿™ä¸ªæ–‡ä»¶ç”¨æ¥å®šä¹‰ç”¨åˆ°ä»€ä¹ˆæ’ä»¶ï¼Œæ‰§è¡Œå“ªäº›ä»»åŠ¡ç­‰ã€‚åœ¨æˆ‘åˆ¶ä½œç®€å†è¿‡ç¨‹ä¸­ï¼Œéœ€è¦å°†é€šè¿‡bowerç®¡ç†çš„ä¸¤ä¸ªä¾èµ–åº“å¤åˆ¶åˆ°ç‰¹å®šæ–‡ä»¶å¤¹ä¸‹ï¼ŒåŒæ—¶ç›‘æ§å¹¶ç¼–è¯‘lessæ–‡ä»¶ã€‚æ‰€ä»¥é…ç½®æ–‡ä»¶å¦‚ä¸‹ï¼š var gulp = require(&apos;gulp&apos;), less = require(&apos;gulp-less&apos;); //å¼•å…¥lessæ’ä»¶ // å®šä¹‰ less ä»»åŠ¡ gulp.task(&apos;less&apos;, function() { gulp.src(&apos;./less/main.less&apos;) .pipe(less()) .pipe(gulp.dest(&apos;./style&apos;)); }); //å¤åˆ¶æ–‡ä»¶åˆ°ç‰¹å®šç›®å½• gulp.task(&apos;depends&apos;, function() { gulp.src([&apos;./bower_components/pagepiling.js/jquery.pagepiling.min.js&apos;, &apos;./bower_components/pagepiling.js/jquery.pagepiling.css&apos;]) .pipe(gulp.dest(&apos;./depends&apos;)); }); //ç›‘æ§lessæ–‡ä»¶ï¼Œä¸€æ—¦æœ‰æ›´æ”¹ï¼Œå°±æ‰§è¡Œlessç¼–è¯‘ä»»åŠ¡ gulp.task(&apos;watch&apos;,function(){ gulp.watch(&apos;less/*.less&apos;,[&apos;less&apos;]); }); //é»˜è®¤ä»»åŠ¡ gulp.task(&apos;default&apos;,[&apos;less&apos;,&apos;depends&apos;,&apos;watch&apos;]); å…¶ä¸­ï¼š gulp.task()å°±æ˜¯å®šä¹‰ä»»åŠ¡çš„å‡½æ•°ï¼Œéœ€è¦ä¸¤ä¸ªå‚æ•°ï¼Œä¸€ä¸ªæ˜¯ä»»åŠ¡åï¼Œä¸€ä¸ªæ˜¯å›è°ƒå‡½æ•°ã€‚ gulp.src()æ˜¯å¼•å…¥æ–‡ä»¶å‡½æ•°ï¼Œç”¨æ¥å°†éœ€è¦æ‰§è¡Œçš„æ–‡ä»¶è·¯åŠ²å¼•å…¥å‡½æ•°ã€‚ .pipe()å°†å¼•å…¥çš„æ–‡ä»¶ä¼ é€’ç»™æ‰§è¡Œå‡½æ•°ï¼Œæ¯”å¦‚.pipe(less())å°†gulp.src(&#39;./less/main.less&#39;)ä¸­å¾—æ–‡ä»¶ä¼ é€’ç»™less()å‡½æ•°ã€‚ gulp.desk()è¾“å‡ºå‡½æ•°ï¼Œå°†æ–‡ä»¶è¾“å‡ºåˆ°æŒ‡å®šç›®å½• gulp.watch()ç›‘æ§å‡½æ•°ï¼Œä¸€æ—¦å‘ç°æŒ‡å®šæ–‡ä»¶æœ‰äº†å˜åŒ–ï¼Œå°±ä¼šæ‰§è¡Œç›¸åº”çš„å‡½æ•°ã€‚]]></content>
      <categories>
        <category>æŠ€æœ¯</category>
      </categories>
      <tags>
        <tag>JavaScript</tag>
        <tag>gulp</tag>
        <tag>å‰ç«¯</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[çŸ¥ä¹å‰ç«¯é¢è¯•é¢˜è§£ç­”]]></title>
    <url>%2F2015%2F01%2F14%2Fzhihu-interview-question%2F</url>
    <content type="text"><![CDATA[ç¬¬ä¸€é¢˜ï¼šè¯·ä½¿ç”¨Javascriptå®ç°ä»¥ä¸‹åŠ¨æ€æ•ˆæœ å¯ä»¥ä½¿ç”¨ä»»ä½•ä½ å–œæ¬¢çš„æ–¹å¼å’Œåº“ï¼Œå°½é‡ä½¿ç”¨ä½ è®¤ä¸ºä¼˜é›…çš„å®ç°ï¼Œå¹¶åœ¨ä»£ç å®Œæˆè¯´ç®€è¦è¯´æ˜æ­¤æ–¹æ¡ˆçš„ä¼˜ç‚¹å’Œä¸è¶³ã€‚è¿™æ˜¯æˆ‘ç”¨åŸç”Ÿjså®ç°çš„ï¼Œç”¨åˆ°äº†inputæ ‡ç­¾çš„readonlyå±æ€§ï¼Œå®ç°å¦‚ä¸‹ï¼š &lt;!DOCTYPE html&gt; &lt;html lang=&quot;en&quot;&gt; &lt;head&gt; &lt;meta charset=&quot;UTF-8&quot;&gt; &lt;title&gt;ç¬¬ä¸€é¢˜&lt;/title&gt; &lt;style&gt; body{width: 900px;margin: 0 auto;line-height: 30px;} a{ text-decoration: none; } .head{background-color: #059ED3;} .row{ height: 30px; border-bottom: 1px solid #888; } input{ margin-left: 10px; margin-top: 6px; border: none; outline: none; float: left; } .title{ border: 1px solid #999; } a{float: right;} ###add{ background-color: #CCCCCC; width: 100%; height: 30px; } ###add a{ display: block; text-align: right; font-size: 14px; font-weight: bolder; color: #008000; margin-right: 10px; } &lt;/style&gt; &lt;/head&gt; &lt;body&gt; &lt;div class=&quot;head&quot;&gt;ç°åœ¨å…±æœ‰:&lt;strong&gt;4&lt;/strong&gt; ä¸ªæ¡ç›®&lt;/div&gt; &lt;div id=&quot;list&quot;&gt; &lt;div class=&quot;row&quot;&gt;&lt;input type=&quot;text&quot; value=&quot;æ ‡é¢˜&quot; /&gt;&lt;a href=&quot;javascript:;&quot; class=&quot;change&quot;&gt;ä¿®æ”¹&lt;/a&gt;&lt;/div&gt; &lt;div class=&quot;row&quot;&gt;&lt;input type=&quot;text&quot; value=&quot;æ ‡é¢˜&quot; /&gt;&lt;a href=&quot;javascript:;&quot; class=&quot;change&quot;&gt;ä¿®æ”¹&lt;/a&gt;&lt;/div&gt; &lt;div class=&quot;row&quot;&gt;&lt;input type=&quot;text&quot; value=&quot;æ ‡é¢˜&quot; /&gt;&lt;a href=&quot;javascript:;&quot; class=&quot;change&quot;&gt;ä¿®æ”¹&lt;/a&gt;&lt;/div&gt; &lt;div class=&quot;row&quot;&gt;&lt;input type=&quot;text&quot; value=&quot;æ ‡é¢˜&quot; /&gt;&lt;a href=&quot;javascript:;&quot; class=&quot;change&quot;&gt;ä¿®æ”¹&lt;/a&gt;&lt;/div&gt; &lt;/div&gt; &lt;div id=&quot;add&quot;&gt;&lt;a href=&quot;javascript:;&quot;&gt;æ–°å¢æ¡ç›®&lt;/a&gt;&lt;/div&gt; &lt;script&gt; window.onload = function(){ change(); add(); }; change = function(){ var list = document.getElementById(&apos;list&apos;); var titles = list.getElementsByTagName(&apos;input&apos;); var changes = list.getElementsByTagName(&apos;a&apos;); for (var i = titles.length - 1; i &gt;= 0; i--) { titles[i].readOnly = &quot;readonly&quot;; }; for (var j = changes.length - 1; j &gt;= 0; j--) { changes[j].index = j; changes[j].onclick = function(){ if (this.text == &quot;ä¿®æ”¹&quot;) { this.text = &quot;ä¿å­˜&quot;; titles[this.index].readOnly = &quot;&quot;; titles[this.index].className = &quot;title&quot;; }else{ this.text = &quot;ä¿®æ”¹&quot;; titles[this.index].readOnly = &quot;readonly&quot;; titles[this.index].className = &quot;&quot;; }; } }; }; add = function(){ var addBtn = document.getElementById(&apos;add&apos;).getElementsByTagName(&quot;a&quot;)[0]; addBtn.onclick = function(){ var newRow = document.createElement(&quot;div&quot;); newRow.className = &quot;row&quot;; newRow.innerHTML = &apos;&lt;input type=&quot;text&quot; value=&quot;æœªå‘½å&quot; /&gt;&lt;a href=&quot;javascript:;&quot; class=&quot;change&quot;&gt;ä¿®æ”¹&lt;/a&gt;&apos;; var list = document.getElementById(&quot;list&quot;); // console.log(&quot;click&quot;,list); // e = e || window.event; list.appendChild(newRow); change(); // e.cancelBubble = true; update(); } } update = function(){ var list = document.getElementById(&apos;list&apos;); var lth = list.getElementsByTagName(&apos;div&apos;).length; var count = document.getElementsByTagName(&apos;strong&apos;)[0]; count.innerHTML = lth; } &lt;/script&gt; &lt;/body&gt; &lt;/html&gt; ç¬¬äºŒé¢˜ï¼šè¯·è¯´æ˜è¦è¾“å‡ºæ­£ç¡®çš„myNameçš„å€¼è¦å¦‚ä½•ä¿®æ”¹ç¨‹åº?å¹¶è§£é‡ŠåŸå› foo = function() { this.myName = &quot;Foo function.&quot;; } foo.prototype.sayHello = function() { alert(this.myName); } foo.prototype.bar = function() { setTimeout(this.sayHello, 1000); } var f = new foo; f.bar(); å› ä¸ºthisæŒ‡å‘çš„æ˜¯å½“å‰è°ƒç”¨è¿™ä¸ªæ–¹æ³•çš„å¯¹è±¡,ä»£ç ä¸­setTimeoutæ˜¯ä¸€ä¸ªå…¨å±€å‡½æ•°,å…¨å†™æ˜¯window.setTimeoutï¼Œæ‰€ä»¥setTimeout(func,time)ä¸­çš„funcå‚æ•°ä¸­çš„thisåº”è¯¥æŒ‡å‘windowã€‚å¯ä»¥ç”¨å¦‚ä¸‹çš„ä¿®æ”¹æ–¹æ³•ï¼š foo.prototype.bar = function(){ var That = this; setTimeout(function(){ That.sayHello(); },1000); } ç¬¬ä¸‰é¢˜ï¼šè¯·æŒ‰ä¸‹åˆ—è¦æ±‚å†™å‡ºç›¸åº”çš„ Html å’Œ CSSç°æœ‰å¹¶åˆ—çš„ä¸‰åˆ—å¸ƒå±€ç»“æ„ï¼Œä»å·¦è‡³å³ä¾æ¬¡ä¸º A, B, C, å®½åº¦åˆ†åˆ«ä¸º180px, 600px, 180pxã€‚è¦æ±‚åœ¨ä¸æ”¹å˜ Html ç»“æ„çš„æƒ…å†µä¸‹ç”¨CSSå®ç°ï¼šABCï¼ŒCBAï¼ŒBAC ä¸‰ç§å¸ƒå±€åŠåœ¨CBAæ’åˆ—ä¸‹ä½¿Bå®½åº¦è‡ªé€‚åº”ï¼ˆä¸‰åˆ—æ€»å®½åº¦100%ï¼‰ï¼Œä¸èƒ½ä½¿ç”¨é’ˆå¯¹æµè§ˆå™¨çš„CSS Hack. &lt;!DOCTYPE html&gt; &lt;html lang=&quot;zh-cn&quot;&gt; &lt;head&gt; &lt;meta charset=&quot;UTF-8&quot;&gt; &lt;title&gt;ç¬¬ä¸‰é¢˜&lt;/title&gt; &lt;style&gt; .content{ width:auto; margin: 0 auto; position: relative; height: 50px; overflow: auto; } .a{ background-color: red; width: 160px; } .b{ background-color: blue; width: 600px; } .c{ background-color: yellow; width: 160px; } .a,.b,.c{ height: 50px; } /* ABC*/ .a1,.b1,.c1{ float: left; } /* CBA*/ .c2{ position: absolute; top: 0; left: 0; } .a2{ float: right; } .b2{ margin-left: 160px; width: auto; } /* BAC*/ .b3{ float: left; } .a3{ position: absolute; top: 0; left:600px; } .c3{ float: right; } &lt;/style&gt; &lt;/head&gt; &lt;body&gt; &lt;p&gt;ä»å·¦è‡³å³ä¾æ¬¡ä¸º A, B, C, å®½åº¦åˆ†åˆ«ä¸º180px, 600px, 180pxã€‚ç”¨CSSå®ç°ï¼šABCï¼ŒCBAï¼ŒBAC ä¸‰ç§å¸ƒå±€åŠåœ¨CBAæ’åˆ—ä¸‹ä½¿Bå®½åº¦è‡ªé€‚åº”ï¼ˆä¸‰åˆ—æ€»å®½åº¦100%ï¼‰.&lt;/p&gt; &lt;p&gt;ABCï¼Œç»“æ„&lt;/p&gt; &lt;div class=&quot;content&quot;&gt; &lt;div class=&quot;a a1&quot;&gt;A&lt;/div&gt; &lt;div class=&quot;b b1&quot;&gt;B&lt;/div&gt; &lt;div class=&quot;c c1&quot;&gt;C&lt;/div&gt; &lt;/div&gt; &lt;p&gt;CBA,Bå®½åº¦è‡ªé€‚åº”&lt;/p&gt; &lt;div class=&quot;content&quot;&gt; &lt;div class=&quot;a a2&quot;&gt;A&lt;/div&gt; &lt;div class=&quot;b b2&quot;&gt;B&lt;/div&gt; &lt;div class=&quot;c c2&quot;&gt;C&lt;/div&gt; &lt;/div&gt; &lt;p&gt;BACç»“æ„&lt;/p&gt; &lt;div class=&quot;content&quot;&gt; &lt;div class=&quot;a a3&quot;&gt;A&lt;/div&gt; &lt;div class=&quot;b b3&quot;&gt;B&lt;/div&gt; &lt;div class=&quot;c c3&quot;&gt;C&lt;/div&gt; &lt;/div&gt; &lt;/body&gt; &lt;/html&gt; æ€»ç»“ç¬¬ä¸€é¢˜ä¸­ï¼Œå› ä¸ºç”¨åˆ°äº†readonlyå±æ€§ï¼Œå®ç°èµ·æ¥æ¯”è¾ƒç®€å•ã€‚ä½†æ˜¯æ ¹æ®åŸé¢˜ç›®çš„æ¼”ç¤ºï¼ŒçŒœæµ‹åˆ°ä»–çš„å®ç°æ–¹æ³•æ˜¯åŠ¨æ€çš„æ·»åŠ inputæ ‡ç­¾ï¼ŒåŒæ—¶æ§åˆ¶inputçš„displayå±æ€§æ¥å®ç°ï¼Œæ„Ÿè§‰å¤ªéº»çƒ¦å°±æ²¡æœ‰ç”¨é‚£ç§æ–¹æ³•ã€‚ç¬¬äºŒé¢˜ä¸­ï¼Œå…³äºjsä¸­thisçš„æŒ‡å‘é—®é¢˜ï¼Œæˆ‘çš„ç†è§£è¿˜æ˜¯ä¸å¤Ÿæ·±åˆ»ï¼Œéœ€è¦ç»§ç»­æ·±å…¥äº†è§£ã€‚ç¬¬ä¸‰é¢˜ï¼Œå¾ˆè½»æ¾çš„å°±è§£å†³äº†ã€‚]]></content>
      <categories>
        <category>æŠ€æœ¯</category>
      </categories>
      <tags>
        <tag>é¢è¯•é¢˜</tag>
        <tag>JavaScript</tag>
        <tag>å‰ç«¯</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[å‰ç«¯å¼€å‘å­¦ä¹ ç¬”è®°å…­]]></title>
    <url>%2F2015%2F01%2F13%2Flearning-note-6%2F</url>
    <content type="text"><![CDATA[å‰è¨€ç»ˆäºæå®šäº†ä¸€ä¸ªç”µå•†æ•´ç«™ä¸´æ‘¹ï¼Œå…±å››å¼ é¡µé¢ï¼Œå®ç°äº†åŸºæœ¬çš„äº¤äº’åŠŸèƒ½ï¼ŒåŒæ—¶ä¹Ÿåº”ç”¨äº†lessè¿™ä¸ªæ–°å­¦çš„cssé¢„å¤„ç†è¯­è¨€ã€‚ä¹‹å‰ä¹Ÿåšè¿‡ä¸€ä¸ªç”µå•†é¦–é¡µç‚¹è¿™å„¿ã€‚ä½†æ˜¯å› ä¸ºåªæ˜¯å•é¡µé¢ï¼Œå¤„ç†èµ·æ¥æ¯”è¾ƒç®€å•ã€‚ä½†æ˜¯åœ¨åˆ¶ä½œè¿™ä¸ªæ•´ç«™çš„è¿‡ç¨‹ä¸­ï¼Œæ›´åŠ æ·±åˆ»çš„ç†è§£ä¸€äº›ä¹‹å‰å­¦è¿‡çš„å†…å®¹ï¼šæ¯”å¦‚æ ·å¼ç»“æ„çš„åˆ†ç¦»ï¼Œjsè®¾è®¡æ—¶çš„åˆ†å±‚æ€æƒ³ç­‰ã€‚ç‚¹å‡»è¿™é‡ŒæŸ¥çœ‹ç½‘é¡µæ•ˆæœï¼Œæˆ–è€…ä¸‹é¢æœ‰æ•ˆæœå›¾(å›¾å¥½ä¸‘)ï¼š ç»“æ„é¦–å…ˆè¯´ç»“æ„ï¼Œæ‹¿åˆ°è®¾è®¡å›¾æ—¶ï¼Œå…ˆè¦è¿›è¡Œåˆ†æã€‚æ¯”å¦‚è¿™å››å¼ é¡µé¢ï¼Œæ˜¯å…¸å‹çš„ä¸Šä¸­ä¸‹ç»“æ„ï¼Œå…¶é™¤äº†ä¸­é—´æ­£æ–‡éƒ¨åˆ†ï¼Œå¤´éƒ¨å’Œè„šéƒ¨éƒ½æ˜¯å®Œå…¨ä¸€æ ·çš„ï¼Œè€Œä¸”é™¤äº†å•†å“è¯¦ç»†é¡µé¢å¤–ï¼Œå…¶ä»–çš„æ­£æ–‡éƒ¨åˆ†éƒ½åˆ†ä¸ºå·¦å³ç»“æ„ï¼Œå¯å…ˆå°†è¿™éƒ¨åˆ†ç›¸åŒçš„ç»“æ„å†™å¥½åä½œä¸ºæ¨¡ç‰ˆï¼Œåœ¨å†™å…¶ä»–é¡µé¢æ—¶åªéœ€è¦åœ¨æ¨¡ç‰ˆçš„åŸºç¡€ä¸Šå¡«å……å†…å®¹å°±å¯ä»¥äº†ã€‚ &lt;body&gt; &lt;div id=&quot;head&quot;&gt;&lt;!-- å®Œå…¨ä¸€æ ·çš„ --&gt; &lt;/div&gt; &lt;div id=&quot;content&quot;&gt; &lt;!-- éƒ¨åˆ†ä¸€æ · --&gt; &lt;/div&gt; &lt;div id=&quot;footer&quot;&gt;&lt;!-- å®Œå…¨ä¸€æ · --&gt; &lt;/div&gt; &lt;/body&gt; æ ·å¼å› ä¸ºåœ¨å†™æ ·å¼è¿‡ç¨‹ä¸­ç”¨äº†lessè¿™ä¸ªcssé«˜çº§è¯­è¨€ï¼Œå†™èµ·æ¥æ–¹ä¾¿äº†è®¸å¤šï¼Œä¸ç”¨å†å»å°†ä¸€äº›é‡å¤çš„ä¸œè¥¿å†™ä¸Šä¸€éåˆä¸€éï¼Œçœå»è¯¸å¤šéº»çƒ¦ã€‚æˆ‘å¯¹Cssä¹ŸæƒŠé†’äº†åˆ†å±‚ï¼Œå…ˆé’ˆå¯¹æ¨¡ç‰ˆå†™ä¸€ä»½æ ·å¼åä¸ºmian.jsï¼Œæ¥ä¸‹åœ¨é’ˆå¯¹ä¸åŒçš„é¡µé¢å†™ä¸åŒçš„æ ·å¼ï¼Œæœ€ååœ¨é¡µé¢ä¸­åŒæ—¶å¼•å…¥è¿›æ¥å°±å¯ä»¥äº†ã€‚å…¶å®è¿˜å¯ä»¥å†è¿›ä¸€æ­¥ç»†åˆ†ï¼Œæ¯”å¦‚é’ˆå¯¹å¤´éƒ¨å’Œé¡µè„šçš„ï¼Œbanneréƒ¨åˆ†çš„ï¼Œé¡µç éƒ¨åˆ†çš„ç­‰ç­‰ã€‚ é€»è¾‘æœ€åæ˜¯jsï¼Œåœ¨åˆ†æä¸­å‘ç°ï¼Œä¸åŒçš„é¡µé¢ä¸­ç”¨çš„è®¸å¤šçš„é€»è¾‘éƒ½æ˜¯ä¸€æ ·çš„ã€æ¯”å¦‚å‡ ä¸ªbanneréƒ¨åˆ†çš„è‡ªåŠ¨åˆ‡æ¢ã€æ¨¡æ‹Ÿä¸‹æ‹‰èœå•ç­‰ã€‚è¿™æ—¶ï¼Œå°†æ•´ä¸ªjsä»£ç åˆ†ä¸ºä»¥ä¸‹ä¸‰ä¸ªå±‚æ¥å†™ï¼š å·¥å…·å±‚è¿™é‡Œæ˜¯ä¸€äº›æœ€åŸºç¡€çš„ä¸œè¥¿ï¼Œæ¯”å¦‚è·å–å…ƒç´ çš„class shop.tools = {}; shop.tools.getByClass = function(par, cla) {};//è·å–ç›¸åº”classå…ƒç´  shop.tools.onmouseover = function(ele,eles,select){};//å‚æ•°ä¸ºå­å…ƒç´ ï¼Œå’Œçˆ¶å…ƒç´ ï¼Œæœ€ç»ˆä¸ºå½“å‰å…ƒç´ æ·»åŠ activeçŠ¶æ€ shop.tools.onclick = function(ele,eles){}; ç”¨æˆ·ç•Œé¢å±‚è¿™é‡Œå†™ä¸€ä¸‹ä¼šå¤šå¤„ç”¨åˆ°çš„UIå±‚ï¼š shop.ui = {}; shop.ui.fadeIn = function(ele, time, opacity) {}; shop.ui.fadeOut = function(ele, time, opacity) {}; åº”ç”¨å±‚è¿™é‡Œå°±æ˜¯é¡µé¢ä¼šç›´æ¥ç”¨çš„äº¤äº’å±‚ï¼š shop.app = {}; shop.app.tip = function() {}; shop.app.banner = function() {}; shop.app.chose = function(){ var specification = document.getElementById(&apos;specification&apos;); var color = document.getElementById(&apos;color&apos;); var speSpans = specification.getElementsByTagName(&apos;span&apos;); var colorSpans = color.getElementsByTagName(&apos;span&apos;) for (var i = speSpans.length - 1; i &gt;= 0; i--) { shop.tools.onmouseover(speSpans[i],speSpans); shop.tools.onclick(speSpans[i],speSpans); } for (var j = colorSpans.length - 1; j &gt;= 0; j--) { shop.tools.onmouseover(colorSpans[j],colorSpans); shop.tools.onclick(colorSpans[j],colorSpans); }; } shop.app.chose_screen = function(){ var top = document.getElementById(&apos;top&apos;); var a = top.getElementsByTagName(&apos;a&apos;); for (var i = a.length - 1; i &gt;= 0; i--) { if (a[i].innerHTML == &quot;æ›´å¤š&quot;) {continue} else{ shop.tools.onmouseover(a[i],a,&quot;active&quot;); } }; }; ä»£ç å¤ªå¤šå°±ä¸å…¨è´´äº†ï¼Œå¯ä»¥çœ‹åˆ°åœ¨è¿™é‡Œä¼šå¤šæ¬¡ç”¨åˆ°ä¹‹å‰toolså’Œuié‡Œé¢çš„å‡½æ•°ï¼Œè¿™æ ·å°±æé«˜äº†ä»£ç çš„åˆ©ç”¨ç‡ï¼Œä½¿ç»“æ„çœ‹èµ·æ¥æ¸…æ™°ï¼Œæ˜“äºä»–äººç†è§£å’Œç»´æŠ¤ã€‚æœ€ååœ¨é¡µé¢ä¸­ï¼Œå“ªé‡Œç”¨åˆ°ï¼Œå“ªé‡Œç›´æ¥å¼•ç”¨å°±å¯ä»¥äº†ã€‚ æ€»ç»“åœ¨è¿™ä¸ªè¿‡ç¨‹ä¸­ä¹Ÿè®¤è¯†åˆ°è‡ªå·±å¾ˆå¤šæ–¹é¢è¿˜æ˜¯ä¸å¤Ÿç†Ÿç»ƒï¼Œéœ€è¦ç»§ç»­åŠ æ²¹å•Šã€‚]]></content>
      <categories>
        <category>æŠ€æœ¯</category>
      </categories>
      <tags>
        <tag>JavaScript</tag>
        <tag>å­¦ä¹ ç¬”è®°</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[åˆè¯•chromeåº”ç”¨]]></title>
    <url>%2F2015%2F01%2F11%2Fchrome-extension-firsttime%2F</url>
    <content type="text"><![CDATA[ä¼—æ‰€å‘¨çŸ¥ï¼Œonedriveæ˜¯å¾®è½¯æä¾›çš„ä¸€æ¬¾ä¸ªäººç½‘ç»œç¡¬ç›˜ï¼Œå¯¹è€ç”¨æˆ·æä¾›25GBçš„å…è´¹ç©ºé—´ï¼Œæ–°æ³¨å†Œç”¨æˆ·æä¾›7GBçš„ç©ºé—´ï¼Œè¦æ˜¯è¿™ä¸ªç©ºé—´å¯ä»¥ç”¨æ¥åšåšå®¢çš„å›¾åºŠå°±å¤ªå¥½ä¸è¿‡äº†ã€‚æ¯•ç«Ÿå¾®è½¯è¿™ä¹ˆä¸€ä¸ªè´¢å¤§æ°”ç²—çš„å…¬å¸ï¼Œè€Œä¸”åœ¨å›½å†…ä¹Ÿä¸ä¼šéšéšä¾¿ä¾¿å°±è¢«å¢™æ‰ï¼Œæ‰€ä»¥ç¨³å®šæ€§æœ‰ä¿è¯ã€‚ä½†æ˜¯onedriveæä¾›çš„å…¬å¼€é“¾æ¥å¹¶ä¸èƒ½ç›´æ¥æ’å…¥åšå®¢ï¼Œéœ€è¦åšä¸€å®šçš„æ ¼å¼è½¬æ¢æ‰å¯ä»¥ã€‚åœ¨ç½‘ä¸Šæ‰¾åˆ°äº†è½¬æ¢è¿æ¥çš„åŠæ³•ï¼Œä½†æ˜¯è¦æ˜¯æ‰‹åŠ¨è½¬æ¢ï¼Œå¤ªéº»çƒ¦äº†ï¼Œäºæ˜¯æƒ³ç€åšä¸€ä¸ªchromeæ‰©å±•ï¼Œæ¯•ç«Ÿæ–¹ä¾¿å˜›ã€‚ç²—ç•¥çš„çœ‹äº†ä¸€ä¸‹chromeæä¾›çš„apiï¼Œå‘ç°å¦‚æœåªæ˜¯åšä¸€ä¸ªç®€å•çš„åº”ç”¨å…¶å®å¾ˆç®€å•ã€‚é‚£ä¹ˆè¯´å¹²å°±å¹²ï¼Œä¸‹é¢æ˜¯åšå¥½çš„æ•ˆæœå›¾ã€‚æˆ‘ä¹Ÿç›´æ¥å°†å†…å®¹åµŒå…¥è¿›æ¥ï¼Œå¯ä»¥ç›´æ¥åœ¨è¿™è½¬æ¢ï¼š å…¬å¼€é“¾æ¥ï¼š æ–‡ä»¶ç±»å‹ï¼š è½¬æ¢ååœ°å€ï¼š å®ƒçš„åŠŸèƒ½ï¼šè¾“å…¥ä»onedriveè·å–çš„å…¬å¼€é“¾æ¥å’Œæ–‡ä»¶çš„ç±»å‹ï¼Œå°±å¯ä»¥å¾—åˆ°è¿™ä¸ªæ–‡ä»¶çš„å¯ç›´æ¥è®¿é—®çš„åœ°å€ã€‚å®ƒç”±å››ä¸ªåŸºæœ¬æ–‡ä»¶ç»„æˆï¼Œåˆ†åˆ«ä¸ºï¼š manifest.json popup.html popup.css popup.js å…¶ä¸­ç¬¬ä¸€ä¸ªæ–‡ä»¶æ˜¯åº”ç”¨çš„æè¿°ä¿¡æ¯ï¼Œåé¢çš„ä¸‰ä¸ªæ–‡ä»¶åˆ†åˆ«æ˜¯åº”ç”¨çš„å†…å®¹ã€æ ·å¼ä»¥åŠé€»è¾‘ï¼Œå…¶å®å°±å’Œä¸€ä¸ªç½‘é¡µæ˜¯ä¸€æ ·çš„ã€‚ å› ä¸ºæš‚æ—¶æ²¡æœ‰å¼€é€šå¼€å‘è€…è´¦å·ï¼Œæ‰€ä»¥ä¸èƒ½æäº¤åˆ°åº”ç”¨å•†åº—ã€‚ä¸è¿‡å¯ä»¥åœ¨è¿™é‡Œä¸‹è½½ï¼šç‚¹è¿™é‡Œ,ä¸‹è½½åä¸èƒ½ç›´æ¥å®‰è£…ï¼Œéœ€è¦æ‰‹åŠ¨æ‹–åŠ¨åˆ°æ’ä»¶ç®¡ç†å¤„ï¼Œç„¶åå°±å¯ä»¥å°½æƒ…ä½¿ç”¨äº†ã€‚ å¦‚æœä½ å¯¹æºç æ„Ÿå…´è¶£ï¼Œé‚£ä¹ˆï¼šç‚¹è¿™é‡Œ]]></content>
      <categories>
        <category>æŠ€æœ¯</category>
      </categories>
      <tags>
        <tag>chrome</tag>
        <tag>onedrive</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[å€ŸåŠ©Hexoå’ŒGithubæ­å»ºä¸€ä¸ªåšå®¢]]></title>
    <url>%2F2015%2F01%2F08%2Fhexo-blog%2F</url>
    <content type="text"><![CDATA[èŠ±äº†ä¸¤å¤©æ—¶é—´ï¼Œæ€»ç®—æŠŠåšå®¢æ­èµ·æ¥äº†ã€‚æœŸé—´ç¢°åˆ°äº†å¾ˆå¤šé—®é¢˜ï¼Œè¿˜å¥½æœ‰ä¼Ÿå¤§çš„Googleï¼Œä¹Ÿéƒ½ä¸€ä¸€åŒ–è§£ã€‚ç°å°†å…¶é—´è¿‡ç¨‹å†™ä¸‹æ¥ï¼Œä¹Ÿå¥½å¸®åŠ©åƒæˆ‘ä¸€æ ·éœ€è¦å¸®åŠ©çš„äººã€‚ æ¡†æ¶é€‰æ‹©ä¸€å¼€å§‹æ‰“ç®—æ­å»ºåšå®¢ï¼Œå…ˆè¦æ€è€ƒä½ è¦æ­å»ºé‚£ç§ç±»å‹çš„ç½‘ç«™ï¼šåŠ¨æ€ç½‘ç«™è¿˜æ˜¯é™æ€ç½‘ç«™ã€‚è€ƒè™‘åˆ°æˆ‘åªæ˜¯æƒ³æœ‰ä¸€ä¸ªå¯ä»¥è®°å½•è‡ªå·±æƒ³æ³•çš„ç©ºé—´ï¼Œæ‰€ä»¥å°±é€‰æ‹©äº†é™æ€ç½‘ç«™ã€‚è€Œé™æ€ç½‘ç«™ä¹Ÿæœ‰å¾ˆå¤šæ¡†æ¶å¯ä¾›é€‰æ‹©ï¼Œgithubæ¨èçš„jekyllï¼ŒåŸºäºjekyllå¼€å‘çš„octopressï¼Œä»¥åŠä½¿ç”¨Â·nodeÂ·ç¼–å†™çš„hexoã€‚ jekyll Jekyll æ˜¯ä¸€ä¸ªç®€å•çš„åšå®¢å½¢æ€çš„é™æ€ç«™ç‚¹ç”Ÿäº§æœºå™¨ã€‚å®ƒæœ‰ä¸€ä¸ªæ¨¡ç‰ˆç›®å½•ï¼Œå…¶ä¸­åŒ…å«åŸå§‹æ–‡æœ¬æ ¼å¼çš„æ–‡æ¡£ï¼Œé€šè¿‡ Markdownï¼ˆæˆ–è€… Textileä»¥åŠLiquid è½¬åŒ–æˆä¸€ä¸ªå®Œæ•´çš„å¯å‘å¸ƒçš„é™æ€ç½‘ç«™ï¼Œä½ å¯ä»¥å‘å¸ƒåœ¨ä»»ä½•ä½ å–œçˆ±çš„æœåŠ¡å™¨ä¸Šã€‚Jekyll ä¹Ÿå¯ä»¥è¿è¡Œåœ¨ GitHub Page ä¸Šï¼Œä¹Ÿå°±æ˜¯è¯´ï¼Œä½ å¯ä»¥ä½¿ç”¨ GitHubçš„æœåŠ¡æ¥æ­å»ºä½ çš„é¡¹ç›®é¡µé¢ã€åšå®¢æˆ–è€…ç½‘ç«™ï¼Œè€Œä¸”æ˜¯å®Œå…¨å…è´¹çš„ã€‚ æœ¬æ¥æ‰“ç®—ç”¨jekyllï¼Œä½†æ˜¯åœ¨é…ç½®è¿‡ç¨‹ä¸­å‡ºç°äº†ä¸€äº›é—®é¢˜ï¼Œwindowsä¸‹å®‰è£…jekyllå„ç§å¤±è´¥ï¼Œç™¾èˆ¬ä¸å¾—æ±‚è§£ï¼Œæœ€ç»ˆæ”¾å¼ƒã€‚ octopress Octopressæ˜¯åˆ©ç”¨Jekyllåšå®¢å¼•æ“å¼€å‘çš„ä¸€ä¸ªåšå®¢ç³»ç»Ÿï¼Œç”Ÿæˆçš„é™æ€é¡µé¢èƒ½å¤Ÿå¾ˆå¥½çš„åœ¨github pageä¸Šå±•ç°ã€‚å·ç§°æ˜¯hackerä¸“å±çš„ä¸€ä¸ªåšå®¢ç³»ç»Ÿ(Ablogging framework for hackers.) hexo hexoæ˜¯ç”±Node.jsé©±åŠ¨çš„ä¸€æ¬¾å¿«é€Ÿã€ç®€å•ä¸”åŠŸèƒ½å¼ºå¤§çš„åšå®¢æ¡†æ¶ã€‚å®ƒå’Œjekyllç›¸æ¯”ï¼Œæ›´å¿«ï¼Œæ›´è½»é‡ã€‚å…¶å‡ºè‡ªå°æ¹¾å¤§å­¦ç”Ÿtommy351ä¹‹æ‰‹ï¼Œç¼–è¯‘ä¸Šç™¾ç¯‡æ–‡å­—åªéœ€è¦å‡ ç§’ã€‚hexoç”Ÿæˆçš„é™æ€ç½‘é¡µå¯ä»¥ç›´æ¥æ”¾åˆ°GitHub Pagesï¼ŒBAEï¼ŒSAEç­‰å¹³å°ä¸Šã€‚ å› ä¸ºå®ƒçš„å°å·§è½»ä¾¿ï¼Œæ˜“äºé…ç½®ï¼Œè€Œä¸”åŠŸèƒ½åŒæ ·å¼ºå¤§ï¼Œæœ€ç»ˆé€‰æ‹©äº†hexoã€‚ ç¯å¢ƒå‡†å¤‡éœ€è¦å®‰è£…nods.jsï¼Œgitï¼Œå’Œä¸€æ¬¾ç¼–è¾‘å™¨ã€‚è¿™äº›ç›´æ¥æ‰¾ç›¸åº”çš„å®˜ç½‘ï¼Œä¸€è·¯å®‰è£…å°±è¡Œäº†ã€‚ å®‰è£…HEXOä»¥ä¸Šè½¯ä»¶å®‰è£…å¥½åï¼Œç›´æ¥æ‰§è¡Œä»¥ä¸‹ä»£ç ï¼š npm install -g hexo åˆå§‹åŒ–æ‰§è¡Œinitå‘½ä»¤åˆå§‹åŒ–hexoåˆ°ä½ æŒ‡å®šçš„ç›®å½•,æ¯”å¦‚æˆ‘æ˜¯åœ¨Dç›˜çš„blogæ–‡ä»¶å¤¹ä¸‹(ä»¥ä¸‹é»˜è®¤éƒ½åœ¨è¿™ä¸ªè·¯å¾„ä¸‹)ï¼š D:\blog&gt;hexo init å®‰è£…è¿‡ç¨‹å°±å®Œäº†ï¼Œæ˜¯ä¸æ˜¯å¾ˆç®€å•å‘¢ï¼Ÿ ç”Ÿæˆé¡µé¢D:\blog&gt;hexo generate æœ¬åœ°å¯åŠ¨D:\blog&gt;hexo server åœ¨æµè§ˆå™¨ä¸­è¾“å…¥http://localhost:4000å°±å¯ä»¥çœ‹åˆ°ä½ è‡ªå·±çš„åšå®¢äº†ã€‚ å†™åšå®¢æ‰§è¡Œnewå‘½ä»¤ D:\blog&gt;hexo new [layout] &quot;postName&quot;#å…¶ä¸­layoutä¸ºæ¨¡ç‰ˆç±»å‹ï¼Œé»˜è®¤ä¸ºpostï¼Œâ€œpostNameâ€ä¸ºä½ çš„æ–‡ç« å æ¥ä¸‹æ¥åœ¨hexo\source\_posts\ä¸­å°±å¯ä»¥æ‰¾åˆ°ç›¸åº”çš„æ–‡ä»¶ï¼Œæ¥ä¸‹æ¥å°±å¯ä¹¦å†™æ–‡ç« äº†ã€‚ éƒ¨ç½²å¯ä»¥é€‰æ‹©github pageï¼Œå…è´¹300mçš„ç©ºé—´ï¼Œè€Œä¸”ä¸é™æµé‡ã€‚æ–¹æ³•ä¹Ÿå¾ˆç®€å•ï¼Œåœ¨ä½ çš„githubä¸‹ï¼Œæ–°å»ºä¸€ä¸ªusername.github.ioçš„ä»“åº“ï¼Œç„¶ååœ¨hexoç›®å½•ä¸‹åä¸ºçš„_config.ymlçš„é…ç½®æ–‡ä»¶é‡Œï¼š deploy: deploy: type: github repository: https://github.com/kisnows/kisnows.github.io.git branch: master #æ­¤å¤„å°†kisnowsæ›¿æ¢ä¸ºä½ çš„githubè´¦å·å ä¸€åˆ‡å°±okäº†ã€‚ å¸¸ç”¨å‘½ä»¤hexo new &quot;postName&quot; #æ–°å»ºæ–‡ç«  hexo new page &quot;pageName&quot; #æ–°å»ºé¡µé¢ hexo generate #ç”Ÿæˆé™æ€é¡µé¢è‡³publicç›®å½• ç®€å†™ï¼šhexo g hexo server #å¼€å¯é¢„è§ˆè®¿é—®ç«¯å£ï¼ˆé»˜è®¤ç«¯å£4000ï¼Œ&apos;ctrl + c&apos;å…³é—­serverï¼‰ ç®€å†™ï¼šhexo s hexo deploy #å°†.deployç›®å½•éƒ¨ç½²åˆ°GitHub ç®€å†™ï¼šhexo d hexo d -g #ç»„åˆå‘½ä»¤ï¼Œå…ˆç”Ÿæˆé¡µé¢ï¼Œåéƒ¨ç½²åˆ°Github]]></content>
      <categories>
        <category>æŠ€æœ¯</category>
      </categories>
      <tags>
        <tag>ç½‘ç«™å»ºè®¾</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[å‰ç«¯å¼€å‘å­¦ä¹ ç¬”è®°äº”]]></title>
    <url>%2F2015%2F01%2F01%2Flearning-note-5%2F</url>
    <content type="text"><![CDATA[å¹½çµæŒ‰é’®æœ€è¿‘å¾ˆæµè¡Œï¼Œå°±å¯»æ€ç€åšäº†ä¸€ä¸ªï¼Œå®ƒæœ‰å¦‚ä¸‹ä¸€äº›æ•ˆæœã€‚ å…¶ä¸­æŒ‰é’®ä¸Šçš„çº¿æ¡å’Œå›¾æ ‡çš„æ—‹è½¬å®Œå…¨ç”¨CSS3ä¸­çš„transtionå’Œtransformæ¥å®ç°ï¼Œå…¶ä¸­å›¾æ ‡çš„æ—‹è½¬æ•ˆæœå®ç°è¿‡ç¨‹å¦‚ä¸‹ï¼š .link .img{ display: block; width:180px; height:180px; margin-bottom: 20px; -webkit-transition:all 0.5s cubic-bezier(0, .18, 0, .97); //ä¸ºäº†å…¼å®¹chromeå’ŒSafari transition:all 0.5s cubic-bezier(0, .18, 0, .97); //å®šä¹‰åŠ¨ç”»å±æ€§ï¼ŒåŒ…æ‹¬è¦å˜åŒ–çš„å±æ€§ï¼Œæ—¶é—´ï¼Œä»¥åŠå˜åŒ–æ›²çº¿ï¼ˆlinearã€easeã€ease-outæˆ–è€…è‡ªå®šä¹‰ç­‰ï¼‰ } .mis .img{ background: url(../images/mission.png) no-repeat center 0; } .link .img:hover{ -webkit-transform: rotate(360deg) scale(1.2); -ms-transform: rotate(360deg) scale(1.2); transform: rotate(360deg) scale(1.2); } æŒ‰é’®çš„çº¿æ¡æ•ˆæœä¸ä¸Šé¢çš„æ–¹æ³•ç±»ä¼¼ï¼Œè€ŒæŒ‰é’®ä¸Šçš„æç¤ºæ–‡å­—ä½¿ç”¨jsæ¥å®ç°çš„ã€‚ ä¸»è¦åŸç†å°±æ˜¯é€šè¿‡jsè·å–æŒ‰é’®ä¸Šç›¸åº”çš„titleï¼ˆå³è¦æ˜¾ç¤ºçš„æ–‡å­—ï¼‰ï¼Œç„¶åå°†å…¶å¢åŠ åœ¨æç¤ºæ¡†å†…ï¼Œåœ¨é€šè¿‡åˆ¤å®šå½“å‰æŒ‰é’®çš„ä½ç½®æ¥è®¾ç½®æç¤ºæ¡†è¦å‡ºç°çš„ç›¸åº”ä½ç½®ã€‚ $(function(){ $(&quot;.link .btn&quot;).hover(function(){ var title = $(this).attr(&quot;data-title&quot;); $(&quot;.tip em&quot;).text(title); var left = $(this).position().left; var dis = Math.abs(($(&quot;.tip&quot;).outerWidth()-$(this).outerWidth())/2); var now = left -dis; console.log(&quot;title=&quot;+title+&quot; &quot;,&quot;left=&quot;+left,&quot;dis=&quot;,dis,&quot;now=&quot;+now,&quot;this&quot;+$(&quot;.tip&quot;).outerWidth()); $(&quot;.tip&quot;).css({&quot;left&quot;:now+&quot;px&quot;}).animate({&quot;top&quot;:130,&quot;opacity&quot;:1},300); }, function(){ $(&quot;.tip&quot;).animate({&quot;top&quot;:100,&quot;opacity&quot;:0},300); } ) }) //ç”¨äº†jQueryæ¡†æ¶ä¸­çš„hover(function(),function())å‡½æ•°ï¼Œå‰ä¸€ä¸ªå‡½æ•°ä¸ºé¼ æ ‡æ”¾ä¸Šå»çš„åŠ¨ä½œï¼Œåä¸€ä¸ªä¸ºé¼ æ ‡ç¦»å¼€æ—¶çš„åŠ¨ä½œã€‚]]></content>
      <categories>
        <category>æŠ€æœ¯</category>
      </categories>
      <tags>
        <tag>JavaScript</tag>
        <tag>å­¦ä¹ ç¬”è®°</tag>
        <tag>CSS3</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[å‰ç«¯å¼€å‘å­¦ä¹ ç¬”è®°å››]]></title>
    <url>%2F2014%2F12%2F30%2Flearning-note-4%2F</url>
    <content type="text"><![CDATA[å›ºå®šå¯¼èˆªæ æ ¹æ®é¡µé¢æ»šåŠ¨æ¡è·ç¦»æ¥è‡ªåŠ¨å®šä½çš„æ•ˆæœï¼Œå…¶ä¸­å¿ƒæ€æƒ³å°±æ˜¯é€šè¿‡åˆ¤å®šå½“å‰æ»šåŠ¨æ¡çš„å€¼ä¸é¡µé¢ä¸­ç›¸åº”å†…å®¹å€¼å¤§å°çš„å…³ç³»æ¥é€‰æ‹©ã€‚jsä»£ç å¦‚ä¸‹ï¼ˆç”¨åˆ°äº†jQueryåº“ï¼‰ï¼š $(document).ready(function () { $(window).scroll(function () { var top = $(window).scrollTop(); var menu = $(&quot;#menu&quot;); var items = $(&quot;#content&quot;).find(&quot;.item&quot;); //æ»šåŠ¨æ¡å‘ç”Ÿæ»šåŠ¨æ—¶ï¼Œè¦è·å–ç›¸åº”çš„å€¼ã€‚ var currentId = &quot;&quot;; //è®©å¯¼èˆªèœå•å®ç°åœ¨æ»šåŠ¨æ¡æ»šåŠ¨çš„æ—¶å€™è‡ªåŠ¨è®¾ç½®ç„¦ç‚¹ items.each(function () { var This = $(this); var itemTop = This.offset().top; if (top &gt; itemTop - 200) { currentId = This.attr(&quot;id&quot;); } else { return false; } }) //ç»™ç›¸åº”æ¥¼å±‚çš„a è®¾ç½® currentï¼Œå–æ¶ˆå…¶ä»–é“¾æ¥çš„current var currentLink = menu.find(&quot;.current&quot;); if (currentId &amp;&amp; currentId != &quot;#&quot;+currentLink.attr(&quot;href&quot;)) { currentLink.removeClass(&quot;current&quot;); menu.find(&quot;[href=#&quot; + currentId + &quot;]&quot;).addClass(&quot;current&quot;); } }) })]]></content>
      <categories>
        <category>æŠ€æœ¯</category>
      </categories>
      <tags>
        <tag>JavaScript</tag>
        <tag>å­¦ä¹ ç¬”è®°</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[å‰ç«¯å¼€å‘å­¦ä¹ ç¬”è®°ä¸‰]]></title>
    <url>%2F2014%2F12%2F26%2Flearning-note-3%2F</url>
    <content type="text"><![CDATA[æŠŠæ…•è¯¾çš„é¦–é¡µä¸´æ‘¹äº†ä¸€ä¸‹ï¼Œæ„Ÿè§‰è¿˜ä¸é”™ã€‚é¡ºä¾¿æ¨èä¸€ä¸ªå‰ç«¯ç¼–è¾‘å™¨ï¼ŒAdobeå‡ºçš„Bracketsï¼Œå¯ä»¥å®æ—¶é¢„è§ˆï¼Œå†ä¹Ÿä¸ç”¨è€æ˜¯åˆ‡æ¢åŠ f5äº†ï¼Œå¯ä»¥æå¤§çš„æé«˜ç¼–å†™é€Ÿåº¦ã€‚ ä¸‹è½½åœ°å€ï¼š http://brackets.io/]]></content>
      <categories>
        <category>æŠ€æœ¯</category>
      </categories>
      <tags>
        <tag>å­¦ä¹ ç¬”è®°</tag>
        <tag>å·¥å…·</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[å‰ç«¯å¼€å‘å­¦ä¹ ç¬”è®°äºŒ]]></title>
    <url>%2F2014%2F12%2F24%2Flearning-note-2%2F</url>
    <content type="text"><![CDATA[å‰å‡ å¤©æŠŠä¹‹å‰åšçš„è´­ç‰©ç½‘é¡µçš„jsæ•ˆæœå†™äº†å‡ºæ¥ã€‚å¦‚å›¾æ‰€ç¤ºï¼Œåˆ†åˆ«ä¸ºä»¥ä¸‹å‡ ä¸ªæ•ˆæœï¼š æœç´¢æŒ‰é’®çš„æ–‡å­—æ•ˆæœ è½®æ’­å›¾ æ¨¡æ‹Ÿä¸‹æ‹‰èœå• é¼ æ ‡ç‚¹å‡»æŒ‰é’®ï¼Œå›¾ç‰‡è¿›è¡Œå·¦å³æ»šåŠ¨ åœ¨å­¦ä¹ è¿‡ç¨‹ä¸­ï¼Œæ€æƒ³å¾ˆé‡è¦ã€‚å†™ä¸€ä¸ªæ•ˆæœä¹‹å‰ï¼Œç°å¯¹å…¶è¿›è¡Œè®¾è®¡ï¼Œç„¶ååˆ†æï¼Œæœ€åå†å®ç°ã€‚ æ¯”å¦‚å¾ˆç®€å•çš„ä¸€ä¸ªè½®æ’­å›¾ï¼Œè®©å›¾ç‰‡æ·¡å…¥æ·¡å‡ºçš„åˆ‡æ¢ã€‚å®ƒçš„åŸç†å°±æ˜¯ï¼Œå…ˆè®©æ‰€æœ‰çš„å›¾ç‰‡æ·¡å‡ºï¼Œç„¶åè®©å½“å‰è¦æ˜¾ç¤ºçš„å›¾ç‰‡æ·¡å…¥å°±å¯ä»¥äº†ã€‚ç†è§£äº†å®ƒçš„å·¥ä½œåŸç†ï¼Œå†™èµ·æ¥å°±å¾ˆç®€å•äº†ã€‚ shop.app.Banner=function(){ //Bannerè½®æ’­å›¾æ•ˆæœ var ad=document.getElementById(&quot;ad&quot;); var ul=ad.getElementsByTagName(&quot;ul&quot;)[0]; var li=ul.getElementsByTagName(&quot;li&quot;); var iNow=0; var timer=setInterval(auto,3000); function auto() //è‡ªåŠ¨åˆ‡æ¢æ•ˆæœ { if(iNow==li.length-1) { iNow=0; } else{ iNow++; } for(var i=0;i&lt;li.length;i++) { shop.ui.fadeOut(li[i]); } shop.ui.fadeIn(li[iNow]); } }; è¿˜æœ‰ä¸€ä¸ªå°±æ˜¯ï¼Œåœ¨å†™æ•´ä¸ªé¡µé¢çš„ä»£ç çš„æ—¶å€™ï¼Œè¦å¯¹é½è¿›è¡Œåˆ†å±‚ã€‚æ¯”å¦‚åˆ†ä¸ºä½œä¸ºåº•å±‚çš„å·¥å…·å±‚ï¼Œå¤šå¤„éƒ½ä¼šç”¨åˆ°çš„UIå±‚ï¼Œä»¥åŠæœ€ç»ˆçš„åº”ç”¨å±‚ã€‚è¿™æ ·å†™å¯ä»¥å‡å°‘ä»£ç çš„é‡å¤ï¼Œä½¿æ–‡æ¡£çœ‹èµ·æ¥ç»“æ„æ¸…æ™°ï¼Œä¹Ÿæ˜“äºåˆ«äººçš„ç†è§£å’ŒåæœŸçš„ç»´æŠ¤ã€‚åœ¨è¿™é‡Œï¼Œæˆ‘è·Ÿéšæ•™ç¨‹é‡‡ç”¨äº†å‘½åç©ºé—´çš„æ–¹æ³•æ¥ç¼–å†™è¿™ä¸ªé¡µé¢ã€‚æ•´ä¸ªä»£ç å¦‚ä¸‹ï¼š window.onload=function(){ //è°ƒç”¨å‡½æ•° shop.app.Banner(); shop.app.search(); shop.app.sort(); shop.app.Run(); }; var shop={}; //å‘½åç©ºé—´ shop.tools={}; shop.tools.getByClass=function(Par,Cla) //è·å–å¯¹åº”classçš„å¯¹è±¡ { var allEle=Par.getElementsByTagName(&quot;*&quot;); var arr=[]; for(i=0;i&lt;allEle.length;i++) { if(allEle[i].className==Cla) { arr.push(allEle[i]); } } return arr; }; shop.tools.getStyle=function(obj,attr) //è·å–å¯¹è±¡å±æ€§ { if(obj.currentStyle) { return obj.currentStyle[attr]; } else { return getComputedStyle(obj,false)[attr]; } }; shop.ui={}; shop.ui.fadeIn=function(obj) //æ·¡å…¥æ•ˆæœ { var attr=shop.tools.getStyle(obj,&apos;opacity&apos;); if(attr==1) { return false; }; var value=0; clearInterval(obj.timer); obj.timer=setInterval(function(){ var speed=5; if(value==100){ clearInterval(obj.timer); } else { value+=speed; obj.style.opacity=value/100; } },30); }; shop.ui.fadeOut=function(obj) //æ·¡å‡ºæ•ˆæœ { var attr=shop.tools.getStyle(obj,&apos;opacity&apos;); if(attr==0) { return false; }; var value=100; obj.timer=setInterval(function(){ var speed=-5; if(value==0) { clearInterval(obj.timer); } else { value+=speed; obj.style.opacity=value/100; }; },30); }; shop.ui.textChange=function(obj,str){ //æ¸…ç©ºé»˜è®¤æ–‡å­— obj.onfocus=function(){ if(this.value==str){ this.value=&quot;&quot;; } }; obj.onblur=function(){ if(this.value==&quot;&quot;){ this.value=str; } }; }; shop.ui.moveLeft=function(obj,old,now){ //å¯¹è±¡ä½ç½®å·¦ç§» clearInterval(obj.timer); obj.timer=setInterval(function(){ var speed=(now-old)/15; speed=Math.round(speed); if(now==old){ clearInterval(obj.timer); } else{ old+=speed; obj.style.left=old+&quot;px&quot;; } },30); }; shop.app={}; shop.app.Banner=function(){ //Bannerè½®æ’­å›¾æ•ˆæœ var ad=document.getElementById(&quot;ad&quot;); var ul=ad.getElementsByTagName(&quot;ul&quot;)[0]; var li=ul.getElementsByTagName(&quot;li&quot;); var iNow=0; var timer=setInterval(auto,3000); function auto() { if(iNow==li.length-1) { iNow=0; } else{ iNow++; } for(var i=0;i&lt;li.length;i++) { shop.ui.fadeOut(li[i]); } shop.ui.fadeIn(li[iNow]); } }; shop.app.search=function(){ var s1=document.getElementById(&quot;search1&quot;); var s2=document.getElementById(&quot;search2&quot;); shop.ui.textChange(s1,&quot;Search website&quot;); shop.ui.textChange(s2,&quot;Search website&quot;); }; shop.app.sort=function(){ //æ¨¡æ‹Ÿä¸‹æ‹‰èœå• var sor=document.getElementById(&quot;sort&quot;); var sordd=sor.getElementsByTagName(&quot;dd&quot;); var sorul=sor.getElementsByTagName(&quot;ul&quot;); var sorh4=sor.getElementsByTagName(&quot;h4&quot;); for(var i=0;i&lt;sordd.length;i++){ sordd[i].index=i; sordd[i].onclick=function(ev){ var ev=ev||window.event; var This=this; for(var n=0;n&lt;sorul.length;n++){ sorul[n].style.display=&quot;none&quot;; } sorul[this.index].style.display=&quot;block&quot;; document.onclick=function(){ sorul[This.index].style.display=&apos;none&apos;; }; ev.cancelBubble=true; } }; for(var i=0;i&lt;sorul.length;i++){ sorul[i].index=i; (function(ul){ var sorli=ul.getElementsByTagName(&quot;li&quot;); for(var i=0;i&lt;sorli.length;i++){ sorli[i].onmouseover=function(){ this.className=&quot;active&quot;; }; sorli[i].onmouseout=function(){ this.className=&quot;&quot;; }; sorli[i].onclick=function(ev){ var ev = ev || window.event; sorh4[this.parentNode.index].innerHTML=this.innerHTML; ev.cancelBubble = true; this.parentNode.style.display=&quot;none&quot;; }; } })(sorul[i]); }; }; shop.app.Run=function(){ //ç‚¹å‡»å·¦ç§»æ•ˆæœ var slide=document.getElementById(&apos;slide&apos;); var ul=slide.getElementsByTagName(&apos;ul&apos;)[0]; var li=ul.getElementsByTagName(&apos;li&apos;); var pre=shop.tools.getByClass(slide,&quot;pre&quot;)[0]; var next=shop.tools.getByClass(slide,&quot;next&quot;)[0]; var iNow=0; ul.innerHTML+=ul.innerHTML; ul.style.width=li.length*li[0].offsetWidth+&quot;px&quot;; pre.onclick = function(){ if(iNow == 0){ iNow = li.length/2; ul.style.left = -ul.offsetWidth/2 + &apos;px&apos;; } shop.ui.moveLeft(ul,-iNow*li[0].offsetWidth,-(iNow-1)*li[0].offsetWidth); iNow--; }; next.onclick = function(){ if(iNow == li.length/2){ iNow = 0; ul.style.left = 0; } shop.ui.moveLeft(ul,-iNow*li[0].offsetWidth,-(iNow+1)*li[0].offsetWidth); iNow++; }; };]]></content>
      <categories>
        <category>æŠ€æœ¯</category>
      </categories>
      <tags>
        <tag>JavaScript</tag>
        <tag>å­¦ä¹ ç¬”è®°</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[å‰ç«¯å¼€å‘å­¦ä¹ ç¬”è®°ä¸€]]></title>
    <url>%2F2014%2F12%2F11%2Flearning-note-1%2F</url>
    <content type="text"><![CDATA[åˆšåˆšèŠ±äº†ç‚¹æ—¶é—´å­¦å®Œhtmlå’Œcssï¼ŒåŒæ—¶ç²—ç•¥çš„çœ‹äº†ä¸€ç‚¹javascriptã€‚äºæ˜¯çœ‹äº†ä¸€éæ•™ç¨‹åï¼Œå°±åŠ¨æ‰‹åšäº†ä¸‹é¢è¿™ä¸ªé¡µé¢ã€‚ï¼ˆè¿™æ˜¯åŸæ•ˆæœå›¾ï¼‰å…¶ä¸­æœ‰äº›é—®é¢˜ï¼Œæ¯”å¦‚æ•™ç¨‹ä¸­çš„ä¸€äº›åœ†è§’æŒ‰é’®ï¼Œæ˜¯ç”¨ä¸€ä¸ªä¸‰å±‚åµŒå¥—ç„¶ç±»ä¼¼&lt;ahref=&#39;&#39;&gt;&lt;strong&gt;&lt;span&gt;HOME&lt;/span&gt;&lt;/strong&gt;&lt;/a&gt;ååˆ†åˆ«ç»™æ¯ä¸ªæ ‡ç­¾è®¾ç½®èƒŒæ™¯å›¾ç‰‡æ¥å®ç°ã€‚æ„Ÿè§‰æœ‰ç‚¹å¾—ä¸å¿å¤±ï¼Œå…¶å®å®Œå…¨å¯ä»¥ç”¨border-radiusåŠ ä¸Šä¸€ä¸ªå¹³é“ºèƒŒæ™¯æ¥å®ç°ï¼Œå³ç®€å•ä»£ç çœ‹èµ·æ¥åˆæ¸…çˆ½ï¼Œè€Œä¸”ç¬¦åˆhtmlçš„è¯­ä¹‰åŒ–: &lt;a&gt;HOME&lt;/a&gt;ï¼Œç„¶ååªéœ€è¦åœ¨cssä¸­è®¾ç½®a{border-radius:5px}ï¼Œå°±å¯ä»¥äº†ã€‚å®ç°å›¾å¦‚ä¸‹ï¼š è¿˜æœ‰ä¸€ä¸ªé—®é¢˜ï¼Œå°±æ˜¯æ•´ä¸ªé¡µé¢çš„ä¸»é¢˜éƒ¨åˆ†çš„èƒŒæ™¯ï¼Œæ˜¯ä¸€ä¸ªåœ†è§’çš„æœ‰é˜´å½±æ•ˆæœçš„ç™½è‰²å›¾ç‰‡ã€‚æ•™ç¨‹ä¸­åŒæ ·æ˜¯ç”¨åˆ‡ä¸‰å¼ å›¾åŠ ä¸Šhtmlçš„ä¸‰å±‚åµŒå¥—æ¥å®ç°ã€‚å…¶å®è¿™é‡Œä¹Ÿå¯ä»¥ä¸é‚£ä¹ˆéº»çƒ¦ï¼Œç”¨ä¸€ä¸ªåœ†è§’è¾¹æ¡†åŠ ä¸ŠèƒŒæ™¯ç™½è‰²ï¼Œå†è®¾ç½®ä¸€ä¸ªé˜´å½±æ•ˆæœå°±å¯ä»¥äº†ã€‚ #Content{ background:#fff; box-shadow:0 3px 5px#e4e4e4; border-radius:25px25px 0 0; } æ•ˆæœå›¾å¦‚ä¸‹ï¼š ä¸è¿‡ä¸Šé¢çš„è¿™äº›è§£å†³æ–¹æ³•æœ‰ä¸€ä¸ªé—®é¢˜ï¼Œå°±æ˜¯éƒ½ç”¨åˆ°äº†css3ä¸­çš„æ–°ç‰¹æ€§ï¼Œåœ¨è¾ƒè€çš„æµè§ˆå™¨ä¸­æ•ˆæœä¼šå¤§æ‰“æŠ˜æ‰£ï¼Œè¦è€ƒè™‘åˆ°éœ€æ±‚åœ¨å†³å®šç”¨é‚£ç§æ–¹æ³•ã€‚æœ€åæ”¾ä¸Šæ•´ä½“åšå¥½åçš„é¡µé¢å›¾ï¼Œå’Œæœ€ä¸Šé¢é‚£å¼ æ¯”ä¸€ä¸‹ï¼Œæ„Ÿè§‰è¿˜æ˜¯ä¸é”™çš„ã€‚]]></content>
      <categories>
        <category>æŠ€æœ¯</category>
      </categories>
      <tags>
        <tag>å­¦ä¹ ç¬”è®°</tag>
      </tags>
  </entry>
</search>
